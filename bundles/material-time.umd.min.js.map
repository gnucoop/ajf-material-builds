{"version":3,"file":"material-time.umd.min.js","sources":["../../src/material/time/time-model.ts","../../src/material/time/time.ts","../../src/material/time/time-module.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {EventEmitter} from '@angular/core';\n\nexport class AjfTimeModel {\n  private _hours = 0;\n  private _minutes = 0;\n  changed: EventEmitter<string> = new EventEmitter<string>();\n\n  get minutes() {\n    return this._minutes;\n  }\n  set minutes(value: number) {\n    if (value > -1 && value < 61) {\n      this._minutes = value;\n      this.changed.emit(this.toString());\n    }\n  }\n\n  get hours() {\n    return this._hours;\n  }\n  set hours(value: number) {\n    if (value > -1 && value < 24) {\n      this._hours = value;\n      this.changed.emit(this.toString());\n    }\n  }\n\n  toString() {\n    let minutes = this.minutes.toString().length > 1 && this.minutes || `0${this.minutes}`;\n    let hours = this.hours.toString().length > 1 && this.hours || `0${this.hours}`;\n    return `${hours}:${minutes}`;\n  }\n\n  fromString(value: string) {\n    try {\n      let splitted = value.split(':');\n      if (splitted.length == 2) {\n        this.hours = parseInt(splitted[0]);\n        this.minutes = parseInt(splitted[1]);\n      }\n    } catch (e) {\n\n    }\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ChangeDetectionStrategy, Component, forwardRef, ViewEncapsulation} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\n\nimport {AjfTimeModel} from './time-model';\n\nexport const AJF_TIME_CONTROL_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => AjfTime),\n  multi: true\n};\n\n@Component({\n  moduleId: module.id,\n  selector: 'ajf-time',\n  templateUrl: 'time.html',\n  styleUrls: ['time.css'],\n  providers: [AJF_TIME_CONTROL_VALUE_ACCESSOR],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AjfTime implements ControlValueAccessor {\n\n  private _value: AjfTimeModel = new AjfTimeModel();\n  get time(): AjfTimeModel {\n    return this._value;\n  }\n\n  get value(): string {\n    return this._value.toString();\n  }\n\n  set value(value: string) {\n    if (value !== this._value.toString()) {\n        this._value.fromString(value);\n        this._onChangeCallback(value);\n    }\n  }\n\n  get hours(): number { return this._value.hours; }\n  set hours(hours: number) {\n    this._value.hours = hours;\n    this._onChangeCallback(this._value);\n  }\n\n  get minutes(): number { return this._value.minutes; }\n  set minutes(minutes: number) {\n    this._value.minutes = minutes;\n    this._onChangeCallback(this._value);\n  }\n\n\n  private _onChangeCallback: (_: any) => void = (_: any) => {};\n  // tslint:disable-next-line\n  private _onTouchedCallback: () => void = () => {};\n\n  constructor() {\n    this._value.changed\n      .subscribe((x: string) => {\n        this._onChangeCallback(x);\n      });\n  }\n\n  writeValue(value: string) {\n    this._value.fromString(value);\n  }\n\n  registerOnChange(fn: (value: any) => void) {\n    this._onChangeCallback = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this._onTouchedCallback = fn;\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\n\nimport {AjfTime} from './time';\n\n@NgModule({\n  imports: [\n    FormsModule,\n  ],\n  declarations: [\n    AjfTime,\n  ],\n  exports: [\n    AjfTime,\n  ]\n})\nexport class AjfTimeModule { }\n"],"names":["AjfTimeModel","this","_hours","_minutes","changed","EventEmitter","Object","defineProperty","prototype","value","emit","toString","minutes","length","hours","fromString","splitted","split","parseInt","e","AJF_TIME_CONTROL_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","AjfTime","multi","_this","_value","_onChangeCallback","_","_onTouchedCallback","subscribe","x","writeValue","registerOnChange","fn","registerOnTouched","type","Component","args","selector","template","styles","providers","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","AjfTimeModule","NgModule","imports","FormsModule","declarations","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;oYAwBA,IAAAA,EAAA,WAAA,SAAAA,IACUC,KAAVC,OAAmB,EACTD,KAAVE,SAAqB,EACnBF,KAAFG,QAAkC,IAAIC,EAAtCA,aAuCA,OArCEC,OAAFC,eAAMP,EAANQ,UAAA,UAAA,KAAE,WACE,OAAOP,KAAKE,cAEd,SAAYM,IACG,EAATA,GAAcA,EAAQ,KACxBR,KAAKE,SAAWM,EAChBR,KAAKG,QAAQM,KAAKT,KAAKU,8CAI3BL,OAAFC,eAAMP,EAANQ,UAAA,QAAA,KAAE,WACE,OAAOP,KAAKC,YAEd,SAAUO,IACK,EAATA,GAAcA,EAAQ,KACxBR,KAAKC,OAASO,EACdR,KAAKG,QAAQM,KAAKT,KAAKU,8CAI3BX,EAAFQ,UAAAG,SAAE,WACF,IAAQC,EAA2C,EAAjCX,KAAKW,QAAQD,WAAWE,QAAcZ,KAAKW,SAAW,IAAIX,KAAKW,QAE7E,OAD2C,EAA/BX,KAAKa,MAAMH,WAAWE,QAAcZ,KAAKa,OAAS,IAAIb,KAAKa,OAC3E,IAAuBF,GAGrBZ,EAAFQ,UAAAO,WAAE,SAAWN,GACT,IACJ,IAAUO,EAAWP,EAAMQ,MAAM,KACJ,GAAnBD,EAASH,SACXZ,KAAKa,MAAQI,SAASF,EAAS,IAC/Bf,KAAKW,QAAUM,SAASF,EAAS,KAEnC,MAAOG,MAIbnB,EA1CA,GCGaoB,EAAuC,CAClDC,QAASC,EAAXA,kBACEC,YAAaC,EAAfA,WAAA,WAAgC,OAAAC,IAC9BC,OAAO,GAGTD,EAAA,WA4CE,SAAFA,IAAE,IAAFE,EAAA1B,KAjCUA,KAAV2B,OAAiC,IAAI5B,EA6B3BC,KAAV4B,kBAAA,SAAiDC,KAEvC7B,KAAV8B,mBAAA,aAGI9B,KAAK2B,OAAOxB,QACT4B,UAAP,SAAkBC,GACVN,EAAKE,kBAAkBI,YAnC7B3B,OAAFC,eAAMkB,EAANjB,UAAA,OAAA,KAAE,WACE,OAAOP,KAAK2B,wCAGdtB,OAAFC,eAAMkB,EAANjB,UAAA,QAAA,KAAE,WACE,OAAOP,KAAK2B,OAAOjB,gBAGrB,SAAUF,GACJA,IAAUR,KAAK2B,OAAOjB,aACtBV,KAAK2B,OAAOb,WAAWN,GACvBR,KAAK4B,kBAAkBpB,qCAI7BH,OAAFC,eAAMkB,EAANjB,UAAA,QAAA,KAAE,WAAsB,OAAOP,KAAK2B,OAAOd,WACzC,SAAUA,GACRb,KAAK2B,OAAOd,MAAQA,EACpBb,KAAK4B,kBAAkB5B,KAAK2B,yCAG9BtB,OAAFC,eAAMkB,EAANjB,UAAA,UAAA,KAAE,WAAwB,OAAOP,KAAK2B,OAAOhB,aAC3C,SAAYA,GACVX,KAAK2B,OAAOhB,QAAUA,EACtBX,KAAK4B,kBAAkB5B,KAAK2B,yCAe9BH,EAAFjB,UAAA0B,WAAE,SAAWzB,GACTR,KAAK2B,OAAOb,WAAWN,IAGzBgB,EAAFjB,UAAA2B,iBAAE,SAAiBC,GACfnC,KAAK4B,kBAAoBO,GAG3BX,EAAFjB,UAAA6B,kBAAE,SAAkBD,GAChBnC,KAAK8B,mBAAqBK,iBA5D9B,CAAAE,KAACC,EAADA,UAAAC,KAAA,CAAW,CAAXC,SAAA,WACEC,SAAU,yMACVC,OAAQ,CAAV,IACEC,UAAW,CAAbxB,GACEyB,cAAFC,EAAAA,kBAAAC,KACEC,gBAAFC,EAAAA,wBAAAC,mDALA,GCNAC,EAAA,WAAA,SAAAA,KAW6B,qBAX7B,CAAAb,KAACc,EAADA,SAAAZ,KAAA,CAAU,CACRa,QAAS,CACPC,EAAJA,aAEEC,aAAc,CACZ9B,GAEF+B,QAAS,CACP/B,OAGJ0B,EAXA"}