!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ajf/core/common"),require("@ajf/core/map"),require("@ajf/core/table"),require("@ajf/core/text"),require("@ajf/material/image"),require("@ajf/material/monaco-editor"),require("@angular/cdk/drag-drop"),require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@angular/material/button"),require("@angular/material/button-toggle"),require("@angular/material/card"),require("@angular/material/dialog"),require("@angular/material/grid-list"),require("@angular/material/icon"),require("@angular/material/list"),require("@angular/material/select"),require("@angular/material/sidenav"),require("@angular/material/slide-toggle"),require("@angular/material/slider"),require("@angular/material/tabs"),require("@angular/material/toolbar"),require("@angular/material/tooltip"),require("@ngx-translate/core"),require("ngx-color-picker"),require("rxjs"),require("@ajf/core/forms"),require("@ajf/core/models"),require("@ajf/core/reports"),require("@ajf/core/utils"),require("rxjs/operators"),require("@ajf/core/image"),require("quill")):"function"==typeof define&&define.amd?define("@ajf/material/report-builder",["exports","@ajf/core/common","@ajf/core/map","@ajf/core/table","@ajf/core/text","@ajf/material/image","@ajf/material/monaco-editor","@angular/cdk/drag-drop","@angular/common","@angular/core","@angular/forms","@angular/material/button","@angular/material/button-toggle","@angular/material/card","@angular/material/dialog","@angular/material/grid-list","@angular/material/icon","@angular/material/list","@angular/material/select","@angular/material/sidenav","@angular/material/slide-toggle","@angular/material/slider","@angular/material/tabs","@angular/material/toolbar","@angular/material/tooltip","@ngx-translate/core","ngx-color-picker","rxjs","@ajf/core/forms","@ajf/core/models","@ajf/core/reports","@ajf/core/utils","rxjs/operators","@ajf/core/image","quill"],e):e(((t=t||self).ajf=t.ajf||{},t.ajf.material=t.ajf.material||{},t.ajf.material.reportBuilder={}),t.ng.core.common,t.ng.core.map,t.ng.core.table,t.ng.core.text,t.ng.material.image,t.ng.material.monacoEditor,t.ng.cdk.dragDrop,t.ng.common,t.ng.core,t.ng.forms,t.ng.material.button,t.ng.material.buttonToggle,t.ng.material.card,t.ng.material.dialog,t.ng.material.gridList,t.ng.material.icon,t.ng.material.list,t.ng.material.select,t.ng.material.sidenav,t.ng.material.slideToggle,t.ng.material.slider,t.ng.material.tabs,t.ng.material.toolbar,t.ng.material.tooltip,t.ngxTranslate.core,t.ngxColorPicker,t.rxjs,t.ng.core.forms,t.ng.core.models,t.ng.core.reports,t.ng.core.utils,t.rxjs.operators,t.ng.core.image,t.quill)}(this,(function(t,e,n,r,i,o,a,s,l,d,u,c,p,g,m,f,h,b,y,v,j,_,w,x,S,W,C,D,T,k,E,I,M,P,O){"use strict";O=O&&O.hasOwnProperty("default")?O.default:O;
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var F=new d.InjectionToken("AJF_REPORTS_CONFIG"),R=function(){function t(t){var e=this;this._customWidgetsUpdate=new D.Subject,this._originUpdate=new D.Subject,this._savedReportUpdate=new D.Subject,this._jsonStack=new D.BehaviorSubject([]),this._emptyContent=new D.BehaviorSubject(!0),this._onDraggedUpdate=new D.Subject,this._onOverUpdate=new D.Subject,this._fixedZoomUpdate=new D.Subject,this._onDragEnterUpdate=new D.Subject,this._headerWidgetsUpdate=new D.Subject,this._contentWidgetsUpdate=new D.Subject,this._footerWidgetsUpdate=new D.Subject,this._colorUpdate=new D.Subject,this._defaultColor=["rgba(0, 0, 0, 1)","rgba(51, 153, 255, 1)","rgba(153, 204, 0, 1)","rgba(255, 102, 0, 1)","rgba(0, 204, 204, 1)","rgba(204, 204, 153, 1)","rgba(255, 153, 0, 1)","rgba(230, 0, 0, 1)","rgba(255, 153, 0, 1)","rgba(255, 255, 0, 1)","rgba(0, 138, 0, 1)","rgba(0, 102, 204, 1)","rgba(153, 51, 255, 1)","rgba(255, 255, 255, 1)","rgba(250, 204, 204, 1)","rgba(255, 235, 204, 1)","rgba(255, 255, 204, 1)","rgba(204, 232, 204, 1)","rgba(204, 224, 245, 1)","rgba(235, 214, 255, 1)","rgba(187, 187, 187, 1)","rgba(240, 102, 102, 1)","rgba(255, 194, 102, 1)","rgba(255, 255, 102, 1)","rgba(102, 185, 102, 1)","rgba(102, 163, 224, 1)","rgba(194, 133, 255, 1)","rgba(136, 136, 136, 1)","rgba(161, 0, 0, 1)","rgba(178, 107, 0, 1)","rgba(178, 178, 0, 1)","rgba(0, 97, 0, 1)","rgba(0, 71, 178, 1)","rgba(107, 36, 178, 1)","rgba(68, 68, 68, 1)","rgba(92, 0, 0, 1)","rgba(102, 61, 0, 1)","rgba(102, 102, 0, 1)","rgba(0, 55, 0, 1)","rgba(0, 41, 102, 1)","rgba(61, 20, 102, 1)"],this._currentWidgetUpdate=new D.BehaviorSubject(null),this._formsVariablesUpdate=new D.BehaviorSubject(null),this._conditionNamesUpdate=new D.BehaviorSubject(null),this._saveReport=new D.BehaviorSubject(null),this._report=new D.BehaviorSubject(null),this._reportStylesUpdate=new D.Subject,this._reportFormsUpdate=new D.Subject,this._updates={header:this._headerWidgetsUpdate,content:this._contentWidgetsUpdate,footer:this._footerWidgetsUpdate,color:this._colorUpdate,customWidgets:this._customWidgetsUpdate},this._saveReportEvent=new d.EventEmitter,this._saveFormulaTOHtml=new d.EventEmitter,this.columnWidthChangedEmitter=new d.EventEmitter,this._iconSets={"ajf-icon":[]},this._lastDeletedJson="",null!=t&&null!=t.icons&&(this._iconSets=Object.assign(Object.assign({},this._iconSets),t.icons)),this._origin=this._originUpdate.pipe(M.startWith("header"),M.share()),this._savedReport=this._savedReportUpdate.pipe(M.share()),this._onDragged=this._onDraggedUpdate.pipe(M.startWith(!1),M.share()),this._onOver=this._onOverUpdate.pipe(M.startWith(!1),M.share()),this._fixedZoom=this._fixedZoomUpdate.pipe(M.startWith(!1),M.share()),this._onDragEnter=this._onDragEnterUpdate.pipe(M.share()),this._reportStyles=this._reportStylesUpdate.pipe(M.scan((function(t,e){return e(t)}),{}),M.share(),M.startWith({})),this._reportForms=this._reportFormsUpdate.pipe(M.scan((function(t,e){return e(t)}),[]),M.share(),M.startWith([])),this._customWidgets=this._customWidgetsUpdate.pipe(M.scan((function(t,e){return e(t)}),[]),M.share(),M.startWith([])),this._formsVariables=this._formsVariablesUpdate.pipe(M.filter((function(t){return null!=t})),M.scan((function(t,e){return e(t)}),[]),M.publishReplay(1),M.refCount()),this._conditionNames=this._conditionNamesUpdate.pipe(M.filter((function(t){return null!=t})),M.scan((function(t,e){return e(t)}),[]),M.share(),M.startWith([])),this._headerWidgets=this._headerWidgetsUpdate.pipe(M.scan((function(t,e){return e(t)}),{widgets:[],styles:{}}),M.startWith({widgets:[],styles:{}}),M.publishReplay(1),M.refCount()),this._headerStyles=this._headerWidgets.pipe(M.map((function(t){return null!=t?t.styles:{}}))),this._contentWidgets=this._contentWidgetsUpdate.pipe(M.scan((function(t,e){return e(t)}),{widgets:[],styles:{}}),M.startWith({widgets:[],styles:{}}),M.publishReplay(1),M.refCount()),this._contentStyles=this._contentWidgets.pipe(M.map((function(t){return null!=t?t.styles:{}}))),this._footerWidgets=this._footerWidgetsUpdate.pipe(M.scan((function(t,e){return e(t)}),{widgets:[],styles:{}}),M.startWith({widgets:[],styles:{}}),M.publishReplay(1),M.refCount()),this._footerStyles=this._footerWidgets.pipe(M.map((function(t){return null!=t?t.styles:{}}))),this._color=this._colorUpdate.pipe(M.scan((function(t,e){return e(t)}),this._defaultColor),M.share(),M.startWith(this._defaultColor)),this._currentWidget=this._currentWidgetUpdate.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t})),M.scan((function(t,e){return e(t)}),null),M.publishReplay(1),M.refCount()),this._reportForms.pipe(M.filter((function(t){return 0!=t.length})),M.map((function(t){return function(n){return e.fillFormsVariables(t)}}))).subscribe(this._formsVariablesUpdate),this._reportForms.pipe(M.filter((function(t){return 0!=t.length})),M.map((function(t){return function(n){return e.fillFormsVariables(t)}}))).subscribe(this._conditionNamesUpdate);var n=this._report;n.pipe(M.map((function(t){return function(n){var r=e._defaultColor;if(null==t)return[];if(e.parseColor(t.styles,r),t.content&&e.parseColor(t.content.styles,r),t.footer&&e.parseColor(t.footer.styles,r),t.header){e.parseColor(t.header.styles,r);for(var i=0;i<t.header.content.length;i++){var o=t.header.content[i];if(e.parseColor(o.styles,r),o.widgetType===E.AjfWidgetType.Layout)for(var a=o,s=0;s<a.content.length;s++){var l=a.content[s];e.parseColor(l.styles,r);for(var d=0;d<l.content.length;d++)e.parseColor(l.content[d].styles,r)}}}return r}}))).subscribe(this._colorUpdate),n.pipe(M.map((function(t){return function(e){return null==t||null==t.styles?{}:t.styles}}))).subscribe(this._reportStylesUpdate),n.pipe(M.map((function(t){return function(e){return null==t||null==t.header?{widgets:[],styles:{}}:{widgets:t.header.content||[],styles:t.header.styles||{}}}}))).subscribe(this._headerWidgetsUpdate),n.pipe(M.map((function(t){return function(e){return null==t||null==t.content?{widgets:[],styles:{}}:{widgets:t.content.content||[],styles:t.content.styles||{}}}}))).subscribe(this._contentWidgetsUpdate),n.pipe(M.map((function(t){return function(e){return null==t||null==t.footer?{widgets:[],styles:{}}:{widgets:t.footer.content||[],styles:t.footer.styles||{}}}}))).subscribe(this._footerWidgetsUpdate),this._saveReport.pipe(M.map((function(t){return function(t){return null}}))),this._saveReportEvent.pipe(M.combineLatest(this.report,this.reportForms),M.combineLatest(this._headerWidgets.pipe(M.filter((function(t){return null!=t}))),this._contentWidgets.pipe(M.filter((function(t){return null!=t}))),this._footerWidgets.pipe(M.filter((function(t){return null!=t}))),this._reportStyles.pipe(M.filter((function(t){return null!=t}))))).subscribe((function(t){var n={},r=function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}([t[1],t[2],t[3]],3),o=r[0],a=r[1],s=r[2];n.header={content:o.widgets.map((function(t){return I.deepCopy(t)})),styles:o.styles},n.content={content:a.widgets.map((function(t){return I.deepCopy(t)})),styles:a.styles},n.footer={content:s.widgets.map((function(t){return I.deepCopy(t)})),styles:s.styles},n.styles=t[4];var l={header:{content:o.widgets,styles:o.styles},content:{content:a.widgets,styles:a.styles},footer:{content:s.widgets,styles:s.styles},styles:t[4]};e.setSaveReport(n),e._savedReportUpdate.next(l),e.pushJsonStack(JSON.stringify(n))}))}return t.prototype.getFormulaToHtmlEvent=function(){return this._saveFormulaTOHtml.asObservable()},Object.defineProperty(t.prototype,"iconSets",{get:function(){return this._iconSets},enumerable:!1,configurable:!0}),t.prototype.filterNodes=function(t){for(var e=0;e<t.length;e++){var n=t[e];(n.nodeType===T.AjfNodeType.AjfNodeGroup||n.nodeType===T.AjfNodeType.AjfSlide||n.nodeType===T.AjfNodeType.AjfRepeatingSlide||n.nodeType===T.AjfNodeType.AjfField&&n.fieldType===T.AjfFieldType.String)&&(t.splice(e,1),e--)}return t},t.prototype.parseColor=function(t,e){["background-color","backgroundColor","color"].forEach((function(n){t[n]&&-1==e.indexOf(t[n])&&e.push(t[n])}))},t.prototype.fillFormsVariables=function(t){for(var e=[],n=0;n<t.length;n++)e[n]={nodes:[],labels:[],names:[],types:[]},null!=t[n].nodes&&t[n].nodes.length>0&&(e[n].nodes=this.filterNodes(T.flattenNodes(t[n].nodes))),e[n].labels=this.extractLabelsNodes(e[n].nodes),e[n].names=this.extractNamesNodes(e[n].nodes),e[n].types=this.extractTypesNodes(e[n].nodes);return e},t.prototype.extractLabelsNodes=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].label);return e},t.prototype.extractNamesNodes=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].name);return e},t.prototype.extractTypesNodes=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].fieldType);return e},t.prototype.setOrigin=function(t){this._originUpdate.next(t)},t.prototype.roundTo=function(t,e){var n=t*Math.pow(10,e);return(n=Math.floor(n))/Math.pow(10,e)},t.prototype.isNumber=function(t){return/^\d+(\.\d+)?/.test(t)},t.prototype.isNumberArray=function(t){for(var e=0;e<t.length;e++)if(!this.isNumber(t[e]))return!1;return!0},Object.defineProperty(t.prototype,"onDragged",{get:function(){return this._onDragged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onOver",{get:function(){return this._onOver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fixedZoom",{get:function(){return this._fixedZoom},enumerable:!1,configurable:!0}),t.prototype.fixedZoomIn=function(){this._fixedZoomUpdate.next(!0)},t.prototype.fixedZoomOut=function(){this._fixedZoomUpdate.next(!1)},Object.defineProperty(t.prototype,"onDragEnter",{get:function(){return this._onDragEnter},enumerable:!1,configurable:!0}),t.prototype.dragEnter=function(t,e){this._onDragEnterUpdate.next({array:t,index:e})},t.prototype.dragStarted=function(){this._onDraggedUpdate.next(!0)},t.prototype.dragEnded=function(){this._onDraggedUpdate.next(!1)},t.prototype.overStarted=function(){this._onOverUpdate.next(!0)},t.prototype.overEnded=function(){this._onOverUpdate.next(!1)},t.prototype.dragLeave=function(){this._onDragEnterUpdate.next({})},Object.defineProperty(t.prototype,"report",{get:function(){return this._report.asObservable()},enumerable:!1,configurable:!0}),t.prototype.saveReport=function(){null!=this._saveReportEvent&&this._saveReportEvent.emit()},t.prototype.saveImageFormula=function(t){this._currentWidgetUpdate.next((function(e){if(null==e)return e;var n=e;return n.flag=t,n.icon=t,n}))},t.prototype.saveFormulaToHtml=function(t,e){null!=this._saveFormulaTOHtml&&this._saveFormulaTOHtml.emit({formula:t,reference:e})},t.prototype.setEmptyContent=function(t){this._emptyContent.next(t)},t.prototype.pushJsonStack=function(t){var e=this._jsonStack.getValue();-1===e.indexOf(t)&&t!==this._lastDeletedJson&&e.push(t),this._jsonStack.next(e)},t.prototype.popJsonStack=function(){var t=this._jsonStack.getValue();return t.pop(),this._lastDeletedJson=t.pop(),t.length<=0?(this._lastDeletedJson="",this._jsonStack.next([]),this.updateCurrentWidget(null),this.setEmptyContent(!0),'{"header":{"content":[],"styles":{}},"content":{"content":[],"styles":{}},"footer":{"content":[],"styles":{}},"styles":{}}'):(this._jsonStack.next(t),this._lastDeletedJson)},Object.defineProperty(t.prototype,"columnWidthChanged",{get:function(){return this.columnWidthChangedEmitter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customWidgets",{get:function(){return this._customWidgets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerWidgets",{get:function(){return this._headerWidgets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerStyles",{get:function(){return this._headerStyles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentWidgets",{get:function(){return this._contentWidgets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentStyles",{get:function(){return this._contentStyles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerWidgets",{get:function(){return this._footerWidgets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerStyles",{get:function(){return this._footerStyles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colors",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyContent",{get:function(){return this._emptyContent},enumerable:!1,configurable:!0}),t.prototype.updateArrayWidgets=function(t,e){if("header"!==t&&"content"!==t&&"footer"!==t)throw new Error("Unknown type "+t);this._updates[t].next((function(t){return e}))},Object.defineProperty(t.prototype,"formsVariables",{get:function(){return this._formsVariables},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conditionNames",{get:function(){return this._conditionNames},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentWidget",{get:function(){return this._currentWidget},enumerable:!1,configurable:!0}),t.prototype.updateCurrentWidget=function(t){var e=this;this._currentWidgetUpdate.next((function(n){return e._saveReportEvent.emit(),t}))},Object.defineProperty(t.prototype,"getSaveReport",{get:function(){return this._saveReport.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reportSaved",{get:function(){return this._savedReport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reportStyles",{get:function(){return this._reportStyles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reportForms",{get:function(){return this._reportForms},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),t.prototype.instantColumnValue=function(t,e){var n=this;this._currentWidgetUpdate.next((function(r){if(null==r)return r;var i=r,o=i.columns.length,a=0,s=0,l=0,d=-1,u=!1,c=!1,p=new RegExp("(^[0].[1-9][0-9]$)"),g=new RegExp("(^[0].[1-9]$)"),m=new RegExp("^[1]$"),f=i.columns[e];if(t=Number(n.roundTo(t,2).toFixed(2)),null==i.columns[e])throw new Error("invalid value");for(var h=0;h<o;h++)-1===i.columns[h]&&s++;if(-1==f?(f=.1,s--,t=Number(n.roundTo(1/(o-s),2).toFixed(2)),i.columns[e]=.1):f<.1&&(f=.1),-1!==t){if(1===i.columns.length)return i.columns[0]=1,i;if(t<.1?t=.1:t+.1*(o-s-1)>1&&(t=1-.1*(o-s-1)),f===t&&.1===f)return i.columns[e]=t,i;f>t?(u=!0,a=(f-t)/(o-s-1)):(u=!1,a=(t-f)/(o-s-1)),(a=Number(n.roundTo(a,2).toFixed(2)))<.01&&(a=.1)}else i.columns[e]=-1,s++,u=!0,a=1==i.columns.length?1:f/(o-s);for(var b=0;b<o;b++)-1!==i.columns[b]&&(b==e?i.columns[e]=t:(u?(i.columns[b]+=a,i.columns[b]>.9&&i.columns.length-s!=1&&(i.columns[b]=.9)):(i.columns[b]-=a,i.columns[b]<.1&&(i.columns[b]=.1)),i.columns[b]=Number(n.roundTo(i.columns[b],2).toFixed(2)),l+=i.columns[b]),l=Number(n.roundTo(l,2).toFixed(2)),0==c&&(d=b,c=!0));for(-1===t?(i.columns[e]=-1,c&&(i.columns[d]+=Number(n.roundTo(1-l,2).toFixed(2)))):i.columns[e]=Number(n.roundTo(1-l,2).toFixed(2)),h=0;h<i.columns.length;h++)-1===i.columns[h]||p.test(String(i.columns[h]))||g.test(String(i.columns[h]))||m.test(String(i.columns[h]))||n.instantColumnValue(.1,h);return n.columnWidthChangedEmitter.emit(),n._saveReportEvent.emit(),i}))},t.prototype.setImageUrl=function(t){this._currentWidgetUpdate.next((function(e){if(null==e)return null;var n=e;return n.url=k.createFormula({formula:'"'+t+'"'}),n}))},t.prototype.setIcon=function(t){this._currentWidgetUpdate.next((function(e){if(null==e)return null;var n=e;return n.icon=k.createFormula({formula:'"'+t+'"'}),n}))},t.prototype.setFlag=function(t){this._currentWidgetUpdate.next((function(e){if(null==e)return null;var n=e;return n.flag=k.createFormula({formula:'"'+t+'"'}),n}))},t.prototype.saveCondition=function(t){this._currentWidgetUpdate.next((function(e){return null==e?null:(null!=e.visibility&&(e.visibility.condition=t),e)}))},t.prototype.saveChartFormula=function(t,e,n,r,i,o){this._currentWidgetUpdate.next((function(t){if(null==t)return null;var e=t;if(null!=e&&null!=e.dataset){var n=k.createFormula({}),r=E.createAggregation({});n.formula=i,r.aggregation=o}return e}))},t.prototype.saveTableFormula=function(t,e,n,r,i){this._currentWidgetUpdate.next((function(t){if(null==t)return null;var r=t;if(null!=r.dataset){var i=k.createFormula({}),o=E.createAggregation({});i.formula=n,o.aggregation=e}return r}))},t.prototype.removeTableMainData=function(t){this._removeFromCurrentWidgetArrayProperty("dataset",t)},t.prototype.removeData=function(t,e){this._currentWidgetUpdate.next((function(t){return t}))},t.prototype.setChartType=function(t){this._setCurrentWidgetProperty("type",t)},t.prototype.removeMainData=function(t){this._currentWidgetUpdate.next((function(t){return t}))},t.prototype.removeRelatedData=function(t,e){this._currentWidgetUpdate.next((function(t){return t}))},t.prototype.setChartBackgroundColor=function(t){this._setCurrentWidgetProperty("backgroundColor",t)},t.prototype.addChartBackgroundColor=function(t){this._addToCurrentWidgetArrayProperty("backgroundColor",t)},t.prototype.removeChartBackgroundColor=function(t){this._removeFromCurrentWidgetArrayProperty("backgroundColor",t)},t.prototype.setChartBorderColor=function(t){this._setCurrentWidgetProperty("borderColor",t)},t.prototype.setChartBorderWidth=function(t){this._setCurrentWidgetProperty("borderWidth",t)},t.prototype.addChartBorderColor=function(t){this._addToCurrentWidgetArrayProperty("borderColor",t)},t.prototype.removeChartBorderColor=function(t){this._removeFromCurrentWidgetArrayProperty("borderColor",t)},t.prototype.setReport=function(t){this._report.next(t)},t.prototype.setSaveReport=function(t){this._saveReport.next(t)},t.prototype.setWidgetStyles=function(t,e){var n=this;this._currentWidgetUpdate.next((function(r){var i=r,o=["font-size","height","width","border-width","border-radius","padding","margin"].indexOf(t)>-1;return!o||e instanceof Array||!n.isNumber(e)?o&&e instanceof Array&&n.isNumberArray(e)&&(e=e.join("px ")+"px"):e+="px",i.styles[t]=e,i}))},t.prototype.setSectionStyles=function(t,e,n){if("header"!==t&&"content"!==t&&"footer"!==t)throw new Error("uncknow origin "+t);this._updates[t].next((function(t){return t.styles[e]=n,t.styles=Object.assign({},t.styles),t}))},t.prototype.setReportStyles=function(t,e){this._reportStylesUpdate.next((function(n){return null==n?n={}:(n[t]=e,n=Object.assign({},n)),n}))},t.prototype.setReportForms=function(t){this._reportFormsUpdate.next((function(e){return t||[]}))},t.prototype.addCustomWidgets=function(t,e){this._customWidgetsUpdate.next((function(n){return n=n||[],null!=e&&e>=0?n.splice(e,0,t):n.push(t),n}))},t.prototype.resetCustomWidgets=function(){this._customWidgetsUpdate.next((function(t){return t.length=0,t}))},t.prototype.changeLabelCustomWidget=function(t,e){this._customWidgetsUpdate.next((function(n){return n[e].type=t,n}))},t.prototype.addHeaderWidget=function(t,e){this._addWidgetToContainer(this._headerWidgetsUpdate,t,e)},t.prototype.addContentWidget=function(t,e){this._addWidgetToContainer(this._contentWidgetsUpdate,t,e)},t.prototype.addfooterWidget=function(t,e){this._addWidgetToContainer(this._footerWidgetsUpdate,t,e)},t.prototype.unfixedColumn=function(t){var e=this;this._currentWidgetUpdate.next((function(n){if(null==n)return n;var r,i,o=n,a=o.columns.length,s=0,l=0;o.columns[t]=0;for(var d=0;d<a;d++)-1===o.columns[d]&&l++;r=Number(e.roundTo(1/(a-l),2).toFixed(2));for(var u=0;u<a;u++)-1!==o.columns[u]&&(o.columns[u]=r,s=Number(e.roundTo(s+r,2).toFixed(2)));return(s=Number(e.roundTo(s,2).toFixed(2)))>1?(i=parseFloat(e.roundTo((s-1)%1,2).toFixed(2)),o.columns[t]-=i,o.columns[t]=e.roundTo(o.columns[t],2)):s<1&&(o.columns[t]+=1-s%1,o.columns[t]=Number(e.roundTo(o.columns[t],2).toFixed(2))),o}))},t.prototype.addColumn=function(){var t=this;this._currentWidgetUpdate.next((function(e){if(null==e)return null;var n,r,i=e,o=[],a=i.columns.length+1,s=0,l=0;if(a>10)throw new Error("exceed max columns");for(var d=0;d<a;d++)-1===i.columns[d]&&l++;n=Number(t.roundTo(1/(a-l),2).toFixed(2));for(var u=0;u<a;u++)-1===i.columns[u]?o.push(-1):(o.push(n),s=Number(t.roundTo(s+n,2).toFixed(2)));(s=Number(t.roundTo(s,2).toFixed(2)))>1?(r=parseFloat(t.roundTo((s-1)%1,2).toFixed(2)),o[0]-=r,o[0]=t.roundTo(o[0],2)):s<1&&(o[0]+=1-s%1,o[0]=Number(t.roundTo(o[0],2).toFixed(2))),i.columns=o;var c=E.createWidget({widgetType:7});return i.content.push(c),t._saveReportEvent.emit(),i}))},t.prototype.removeWidgetToColumn=function(t,e){t.content.splice(e,1)},t.prototype.remove=function(t,e){var n=this;switch(t){case"header":case"content":case"footer":this._updates[t].next((function(t){if(0===t.widgets.length)throw new Error("you can not remove from empty array");if(null==t.widgets[e])throw new Error("invalid index");return t.widgets.splice(e,1),n.updateCurrentWidget(null),t}));break;case"layout":this._currentWidgetUpdate.next((function(t){if(null==t)return null;var r=t;if(1===r.columns.length)return r.content[0].content.length=0,r;if(null==r.columns[e])throw new Error("this content is undefined");var i=r.columns[e]/(r.columns.length-1);r.columns.length>1&&(r.columns.splice(e,1),r.content.splice(e,1));for(var o=0;o<r.columns.length;o++)r.columns[o]+=i;return n.instantColumnValue(r.columns[0],0),r}));break;case"column":case"layoutContent":case"unfixedColumn":this._currentWidgetUpdate.next((function(r){if(null==r)return null;var i=r;if("column"===t)r.content.splice(e,1);else if("layoutContent"===t){if(0===i.columns.length)throw new Error("the column length is 0");if(0===i.content.length)throw new Error("can not remove any widget from empty content");if(null!=i.columns[e]&&null==i.content[e])throw new Error("this content is undefined")}else if("unfixedColumn"===t){if(-1!==i.columns[e])throw new Error("the column position value  isnt -1");n.unfixedColumn(e)}return i}));break;case"customWidgets":this._updates[t].next((function(t){if(0===t.length)throw new Error("you can not remove from empty array");if(null==t[e])throw new Error("invalid index");return t.splice(e,1),t}));break;default:throw new Error("unknown node "+t)}},t.prototype.addToContent=function(t,e){this._currentWidgetUpdate.next((function(n){if(null==n)return null;var r=n;return null!=r.content[e]&&r.content.splice(e,1),r.content.splice(e,0,t),r}))},t.prototype.addToColumn=function(t,e,n){if(t.dragData&&null!=t.dragData.fromColumn){var r=t.dragData.widget;t.dragData.fromColumn.content.splice(t.dragData.fromIndex,1),e.content.push(r)}else if(t.dragData&&t.dragData.arrayFrom)this.remove(t.dragData.arrayFrom,t.dragData.fromIndex),e.content.push(t.dragData.widget);else if(t.dragData&&t.dragData.json){var i=JSON.parse(t.dragData.json),o=I.deepCopy(i);null!=n?e.content.splice(n,0,o):e.content.push(o)}else o=I.deepCopy(i={widgetType:E.AjfWidgetType[t.dragData]}),null!=n?e.content.splice(n,0,o):e.content.push(o)},t.prototype.changePositionOnColumn=function(t,e,n){var r=t.dragData.fromColumn,i=t.dragData.fromIndex,o=r.content[i];r==e?(r.content[i]=r.content[n],r.content[n]=o):(r.content.splice(i,1),e.content.splice(n,0,o))},t.prototype.fixedColumn=function(t){this.instantColumnValue(-1,t)},t.prototype.changeColumn=function(t,e,n){if(!(e<0||e>=n.content.length||t>n.content.length-1&&e>t)){var r=n.content[t],i=n.columns[t],o=n.columns[e];n.content[t]=n.content[e],n.columns[t]=o,n.content[e]=r,n.columns[e]=i,this.updateCurrentWidget(n)}},t.prototype.addCustomColor=function(t){this._updates.color.next((function(e){return e.indexOf(t)<0&&e.push(t),e}))},t.prototype._addWidgetToContainer=function(t,e,n){t.next((function(t){return null!=n&&n>=0?t.widgets.splice(n,0,e):t.widgets.push(e),t})),this.updateCurrentWidget(e),this.setEmptyContent(!1)},t.prototype._setCurrentWidgetProperty=function(t,e){this._currentWidgetUpdate.next((function(n){return null==n?null:(n[t]=e,n)}))},t.prototype._addToCurrentWidgetArrayProperty=function(t,e){this._currentWidgetUpdate.next((function(n){if(null==n)return null;var r=n[t];return r.push(e),n[t]=r,n}))},t.prototype._removeFromCurrentWidgetArrayProperty=function(t,e){this._currentWidgetUpdate.next((function(n){return n[t].splice(e,1),n}))},t}();R.decorators=[{type:d.Injectable}],R.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Optional},{type:d.Inject,args:[F]}]}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var L=function(){function t(t){this._service=t,this.showActions=!1,this.layoutShow=!1,this.onDragged=!1,this._onDraggedSub=D.Subscription.EMPTY}return t.prototype.addToList=function(t,e,n){this.onDragEndHandler(),t.dragData.fromColumn?this._service.changePositionOnColumn(t,n,e):this._service.addToColumn(t,n,e)},t.prototype.onDragStartHandler=function(){var t=this,e=D.timer(200).subscribe((function(){e.unsubscribe(),t._service.dragStarted()}))},t.prototype.onDragEndHandler=function(){this._service.dragEnded()},t.prototype.ngOnInit=function(){var t=this;this._onDraggedSub=this._service.onDragged.subscribe((function(e){t.onDragged=e}))},t.prototype.ngOnDestroy=function(){this._onDraggedSub.unsubscribe()},t}();function A(t){return"widgetType."+t}function B(t){for(t=t.trim();t.indexOf("  ")>0;)t=t.replace("  "," ");return t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */L.decorators=[{type:d.Component,args:[{selector:"ajf-column",template:'<ng-template [ngIf]="column.content != null">\n  <div class="ajf-column"\n    [ngClass]="{\'ajf-is-on-over\': showActions}"\n    (mouseenter)="showActions = true"\n    (mouseleave)="showActions = false">\n    <mat-list>\n      <ng-template ngFor let-widget let-idx="index" [ngForOf]="column.content">\n\n        <ng-template [ngIf]="!onDragged">\n          <ajf-report-builder-widgets-row-buttons\n              cdkDrag\n              [cdkDragData]="{fromColumn: column, fromIndex: idx, widget: widget, dropZones: [\'widget\']}"\n              [from]="\'column\'"\n              [fromWidget]="column"\n              [widget]="widget"\n              [position]="idx"\n              [child]="true"\n              (cdkDragStarted)="onDragStartHandler()"\n              (cdkDragEnded)="onDragEndHandler()">\n          </ajf-report-builder-widgets-row-buttons>\n        </ng-template>\n        <ajf-report-builder-renderer-widget [widget]="widget"></ajf-report-builder-renderer-widget>\n      </ng-template>\n    </mat-list>\n  </div>\n</ng-template>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:[".ajf-column{max-width:100%;max-height:100%;background:rgba(0,0,0,0);z-index:100}.ajf-column span{flex-direction:row;width:100%}.ajf-column .mat-list{padding:0}.ajf-column:hover span,.ajf-is-on-over span{visibility:visible !important;display:block !important}.ajf-column-drop-zone{margin:10%;height:50px;background-color:#fff;border:9px solid rgba(66,134,244,.6);border-radius:16px}mat-list{height:100%;padding:0}\n"]}]}],L.ctorParameters=function(){return[{type:R}]},L.propDecorators={column:[{type:d.Input}]};var z=function(){function t(t){this._service=t,this.isValid=!1,this.names=[],this.conditionText="true",this.operators=["( )","' '","<","<=","==",">=",">","!=","!","&&","||","+","-","*","/","%","true","false"],this._conditionNamesSub=D.Subscription.EMPTY}return t.prototype.extractNames=function(t){this.names.length=0;for(var e=0;e<t.length;e++)this.names=this.names.concat(t[e].names)},t.prototype.setCurrent=function(t,e){this.currentId=t,this.appendText(this.formsVariables[t].names[e]),this.checkValidation()},t.prototype.validateCondition=function(){return k.validateExpression(this.conditionText,this.names)},t.prototype.appendText=function(t,e){if(null!=t&&null!=this.conditionTextArea){var n=this.conditionTextArea.nativeElement,r=Math.min(n.selectionStart,n.selectionEnd),i=Math.max(n.selectionStart,n.selectionEnd),o=this.conditionText.substr(0,r),a=this.conditionText.substr(i),s=o.length;o=B(o),a=B(a),r+=o.length-s+t.length+(o.length>0?2:1),this.conditionText=(o.length>0?o+" ":"")+t+" "+a;var l=D.timer(0).subscribe((function(){if(l&&!l.closed&&l.unsubscribe(),n.createTextRange){var t=n.createTextRange();t.move("character",r),t.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(r,r)):n.focus()}))}},t.prototype.checkValidation=function(){this.isValid=this.validateCondition(),this.isValid&&this.saveCondition()},t.prototype.saveCondition=function(){this._service.saveCondition(this.conditionText)},t.prototype.ngOnInit=function(){var t=this;this.conditionText=this.visibility.condition,this.isValid=!0,"true"==this.conditionText&&(this.conditionText=""),this._conditionNamesSub=this._service.conditionNames.subscribe((function(e){t.formsVariables=e,null!=e&&t.extractNames(t.formsVariables)}))},t.prototype.ngOnDestroy=function(){this._conditionNamesSub.unsubscribe()},t}();z.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-condition-editor",template:'<ng-template [ngIf]="formsVariables != null && visibility != null">\n  <mat-card>\n    <mat-card-header>\n      <mat-card-title>condition of visibility</mat-card-title>\n      <mat-card-subtitle>\n        <ng-template [ngIf]="visibility">\n          {{visibility.condition}}\n        </ng-template>\n      </mat-card-subtitle>\n    </mat-card-header>\n    <mat-card-content>\n      <br>\n      <form>\n        <mat-select [(ngModel)]="a" [ngModelOptions]="{standalone: true}" placeholder="Select condition">\n          <ng-template ngFor let-form let-id="index" [ngForOf]="formsVariables">\n            <mat-option *ngFor="let label of form.labels;let i = index;" [value]="label" (click)="setCurrent(id, i)">\n              {{ id}}: {{ label }}\n            </mat-option>\n          </ng-template>\n        </mat-select>\n        <mat-select [(ngModel)]="b" [ngModelOptions]="{standalone: true}" placeholder="Select operator">\n          <mat-option *ngFor="let operator of operators" (click)="appendText(operator);">\n            {{ operator }}\n          </mat-option>\n        </mat-select>\n      </form>\n    </mat-card-content>\n    <mat-card-actions>\n      <ng-template [ngIf]="!isValid">\n        <ng-container translate>Invalid condition! Please check syntax.</ng-container>\n      </ng-template>\n      <textarea\n          #conditionTextArea\n          [(ngModel)]="conditionText"\n          (keyup)="checkValidation()">\n        </textarea>\n    </mat-card-actions>\n  </mat-card>\n</ng-template>\n\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-condition-editor textarea{width:100%}\n"]}]}],z.ctorParameters=function(){return[{type:R}]},z.propDecorators={visibility:[{type:d.Input}],conditionTextArea:[{type:d.ViewChild,args:["conditionTextArea",{static:!1}]}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var N=function(){function t(t,e){this._service=t,this._cdRef=e,this.onDragged=!1,this.fixedZoom=!1,this.onDragEnter={},this.show=!1,this.headerWidgets=[],this.contentWidgets=[],this.footerWidgets=[],this.onOver=!1,this.currentWidget=null,this.showActions=!1,this._onDraggedSub=D.Subscription.EMPTY,this._fixedZoomSub=D.Subscription.EMPTY,this._onDragEnterSub=D.Subscription.EMPTY,this._headerWidgetsSub=D.Subscription.EMPTY,this._contentWidgetsSub=D.Subscription.EMPTY,this._footerWidgetsSub=D.Subscription.EMPTY,this._onOverSub=D.Subscription.EMPTY,this._currentWidgetSub=D.Subscription.EMPTY,this.headerStyles=this._service.headerStyles,this.contentStyles=this._service.contentStyles,this.footerStyles=this._service.footerStyles}return t.prototype.onMouseOver=function(){this.showActions=!0,this._service.overStarted()},t.prototype.onMouseLeave=function(){this.showActions=!1,this._service.overEnded()},t.prototype.canDropPredicate=function(t){return function(e){for(var n=0;n<e.data.dropZones.length;n++)if(t.indexOf(e.data.dropZones[n])>-1)return!0;return!1}},t.prototype.isLayout=function(t){return t.widgetType===E.AjfWidgetType.Layout},t.prototype.onDragStartHandler=function(){var t=this,e=D.timer(200).subscribe((function(){null!=e&&e.unsubscribe(),t._service.dragStarted()}))},t.prototype.onDragEndHandler=function(){this._service.dragEnded()},t.prototype.onDragEnterHandler=function(t,e){null!=e&&this._service.dragEnter(t,e)},t.prototype.onDragLeaveHandler=function(){this._service.dragLeave()},t.prototype.onDragEnterCheck=function(t,e){return t===this.onDragEnter.array&&(e===this.onDragEnter.index||-1===e)},t.prototype.remove=function(t,e){this._service.remove(t,e)},t.prototype.addToList=function(t,e,n){this.onDragEndHandler(),this._service.setOrigin(t);var r=e.item.data;if(null!=r.fromColumn?(this._service.removeWidgetToColumn(r.fromColumn,r.fromIndex),this.currentWidget=r.widget):null!=r.widget?(this.remove(r.arrayFrom,r.from),this.currentWidget=r.widget):this.currentWidget=I.deepCopy(null!=r.json&&""!==r.json?r.json:{widgetType:E.AjfWidgetType[r.widgetType]}),this.onDragEndHandler(),null!=this.currentWidget)switch(t){case"header":this._service.addHeaderWidget(this.currentWidget,n);break;case"content":this._service.addContentWidget(this.currentWidget,n);break;case"footer":this._service.addfooterWidget(this.currentWidget,n)}this.onDragLeaveHandler()},t.prototype.ngOnInit=function(){var t=this;this._headerWidgetsSub=this._service.headerWidgets.subscribe((function(e){t.headerWidgets=e.widgets})),this._contentWidgetsSub=this._service.contentWidgets.subscribe((function(e){t.contentWidgets=e.widgets})),this._footerWidgetsSub=this._service.footerWidgets.subscribe((function(e){t.footerWidgets=e.widgets})),this._onDraggedSub=this._service.onDragged.subscribe((function(e){t.onDragged=e})),this._fixedZoomSub=this._service.fixedZoom.subscribe((function(e){t.fixedZoom=e})),this._onDragEnterSub=this._service.onDragEnter.subscribe((function(e){t.onDragEnter=e})),this._onOverSub=this._service.onOver.subscribe((function(e){t.onOver=e}))},t.prototype.ngAfterViewChecked=function(){this._cdRef.detectChanges()},t.prototype.ngOnDestroy=function(){[this._headerWidgetsSub,this._contentWidgetsSub,this._footerWidgetsSub,this._currentWidgetSub,this._onDraggedSub,this._fixedZoomSub,this._onOverSub,this._onDragEnterSub].forEach((function(t){t.unsubscribe()}))},t}();N.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-content",template:'<div\n  class="ajf-overlay"\n  [ngClass]="{\'ajf-drag-mode\': onDragged, \'ajf-zoom-mode\': fixedZoom}"\n  [applyStyles]="reportStyles|async"\n  (mouseenter)="show = true"\n  (mouseleave)="show = false">\n  <div\n    class="ajf-header"\n    [ngClass]="{\'ajf-is-on-over\': onDragged || show}"\n    [applyStyles]="(headerStyles|async)">\n    <mat-list *ngFor="let t of headerWidgets; let i = index">\n      <div cdkDropList\n          class="ajf-drop-zone"\n          [ngClass]="{\'ajf-show\': true}"\n          [cdkDropListEnterPredicate]="canDropPredicate([\'widget\',\'column\'])"\n          (cdkDropListDropped)="addToList(\'header\', $event, i);"\n          (dragenter)="onDragEnterHandler(\'header\', i)"\n          (dragleave)="onDragLeaveHandler()">\n      </div>\n      <ajf-report-builder-widgets-row-buttons\n          cdkDrag\n          [cdkDragData]="{widget: t,fromIndex: i,arrayFrom: \'header\', dropZones: [\'widget\',\'column\']}"\n          [style.display]="(showActions || onDragged)? \'block\' : \'none\'"\n          [from]="\'header\'"\n          [widget]="t"\n          [position]="i"\n          (cdkDragStarted)="onDragStartHandler();"\n          (cdkDragEnded)="onDragEndHandler()">\n      </ajf-report-builder-widgets-row-buttons>\n      <ajf-report-builder-renderer-widget [widget]="t" [position]="i" [section]="\'header\'" (currentWidget)="currentWidget"></ajf-report-builder-renderer-widget>\n    </mat-list>\n    <div cdkDropList\n        class="ajf-drop-zone-container"\n        [ngClass]="{\'ajf-show\': true}"\n        [cdkDropListEnterPredicate]="canDropPredicate([\'header\',\'widget\',\'column\'])"\n        (cdkDropListDropped)="addToList(\'header\', $event)"\n        (dragenter)="onDragEnterHandler(\'header\', headerWidgets?.length)"\n        (dragleave)="onDragLeaveHandler()">\n    </div>\n  </div>\n  <div\n    class="ajf-content"\n    [ngClass]="{\'ajf-is-on-over\': onDragged || show}"\n    [applyStyles]="contentStyles|async">\n    <mat-list *ngFor="let t of contentWidgets; let i = index">\n      <div cdkDropList\n          class="ajf-drop-zone"\n          [ngClass]="{\'ajf-show\': true}"\n          [cdkDropListEnterPredicate]="canDropPredicate([\'widget\',\'column\'])"\n          (cdkDropListDropped)="addToList(\'content\', $event, i)"\n          (dragenter)="onDragEnterHandler(\'content\', i)"\n          (dragleave)="onDragLeaveHandler()">\n      </div>\n      <ajf-report-builder-widgets-row-buttons\n          cdkDrag\n          [cdkDragData]="{widget: t, fromIndex: i, arrayFrom: \'content\', dropZones: [\'widget\',\'column\']}"\n          [style.display]="showActions ? \'block\' : \'none\'"\n          [from]="\'content\'"\n          [widget]="t"\n          [position]="i"\n          (cdkDragStarted)="onDragStartHandler()"\n          (cdkDragEnded)="onDragEndHandler();">\n      </ajf-report-builder-widgets-row-buttons>\n      <ajf-report-builder-renderer-widget [widget]="t" [position]="i" [section]="\'content\'" (currentWidget)="currentWidget"></ajf-report-builder-renderer-widget>\n    </mat-list>\n    <div cdkDropList\n        class="ajf-drop-zone-container"\n        [ngClass]="{\'ajf-show\': onDragged}"\n        [cdkDropListEnterPredicate]="canDropPredicate([\'content\',\'widget\',\'column\'])"\n        (cdkDropListDropped)="addToList(\'content\', $event)"\n        (dragenter)="onDragEnterHandler(\'content\', contentWidgets?.length)"\n        (dragleave)="onDragLeaveHandler()">\n      <label translate>Drop here</label>\n    </div>\n  </div>\n  <div\n    class="ajf-footer"\n    [ngClass]="{\'ajf-is-on-over\': onDragged || show}"\n    [applyStyles]="footerStyles|async">\n    <mat-list *ngFor="let t of footerWidgets; let i = index">\n      <div cdkDropList\n          class="ajf-drop-zone"\n          [ngClass]="{\'ajf-show\': true}"\n          [cdkDropListEnterPredicate]="canDropPredicate([\'widget\',\'column\'])"\n          (cdkDropListDropped)="addToList(\'footer\', $event, i)"\n          (dragenter)="onDragEnterHandler(\'footer\', i)"\n          (dragleave)="onDragLeaveHandler()">\n      </div>\n      <ajf-report-builder-widgets-row-buttons\n          cdkDrag\n          [cdkDragData]="{widget: t, fromIndex: i, arrayFrom: \'footer\', dropZones: [\'widget\',\'column\']}"\n          [style.display]="showActions ? \'block\' : \'none\'"\n          [from]="\'footer\'"\n          [widget]="t"\n          [position]="i"\n          (cdkDragStarted)="onDragStartHandler()"\n          (cdkDragEnded)="onDragEndHandler()">\n      </ajf-report-builder-widgets-row-buttons>\n      <ajf-report-builder-renderer-widget [widget]="t" [position]="i" [section]="\'footer\'" (currentWidget)="currentWidget"></ajf-report-builder-renderer-widget>\n    </mat-list>\n    <div cdkDropList\n        class="ajf-drop-zone-container"\n        [ngClass]="{\'ajf-show\': onDragged}"\n        [cdkDropListEnterPredicate]="canDropPredicate([\'footer\',\'widget\',\'column\'])"\n        (cdkDropListDropped)="addToList(\'footer\', $event)"\n        (dragenter)="onDragEnterHandler(\'footer\', headerWidgets?.length)"\n        (dragleave)="onDragLeaveHandler()">\n      <label translate>Drop here</label>\n    </div>\n</div>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,host:{"(mouseover)":"onMouseOver()","(mouseleave)":"onMouseLeave()"},styles:["ajf-report-builder-content{text-align:center;display:block;margin-bottom:300px}ajf-report-builder-content .ajf-overlay.ajf-drag-mode{max-height:700px;margin-top:50px;background-color:beige}ajf-report-builder-content .ajf-drag-mode{overflow:scroll;zoom:50%}ajf-report-builder-content .ajf-drag-mode .ajf-header,ajf-report-builder-content .ajf-drag-mode .ajf-content,ajf-report-builder-content .ajf-drag-mode .ajf-footer{margin-bottom:20px;border:23px solid rgba(66,134,244,.2)}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-content .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone{width:auto;background-color:rgba(66,134,244,.2);border:23px solid #fff;position:relative;min-height:50px !important;z-index:0;opacity:1}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-content .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone-container{background-color:rgba(66,134,244,.2) !important;border:23px solid #fff !important}ajf-report-builder-content .ajf-drag-mode .ajf-header,ajf-report-builder-content .ajf-drag-mode .ajf-footer{border:23px solid rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone-container{background-color:rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone{background-color:rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-drop-zone-container{background-color:#000;border:16px solid #fff;position:relative;opacity:0;z-index:0;min-height:50px !important;display:none !important}ajf-report-builder-content .ajf-zoom-mode{zoom:50%}ajf-report-builder-content .ajf-header,ajf-report-builder-content .ajf-content,ajf-report-builder-content .ajf-footer{height:100%;min-height:50px;position:relative;text-align:center;display:block}ajf-report-builder-content .ajf-header .mat-list,ajf-report-builder-content .ajf-content .mat-list,ajf-report-builder-content .ajf-footer .mat-list{padding:0}ajf-report-builder-content .ajf-header .ajf-zoom:hover,ajf-report-builder-content .ajf-content .ajf-zoom:hover,ajf-report-builder-content .ajf-footer .ajf-zoom:hover{padding-bottom:100px;overflow-y:scroll}ajf-report-builder-content .ajf-content:hover{background-color:rgba(66,134,244,.2) !important}ajf-report-builder-content .ajf-header:hover,ajf-report-builder-content .ajf-footer:hover{background-color:rgba(255,102,102,.4)}ajf-report-builder-content .ajf-header:hover,ajf-report-builder-content .ajf-content:hover,ajf-report-builder-content .ajf-footer:hover,ajf-report-builder-content .ajf-is-on-over{border:3px dotted #3a7999}ajf-report-builder-content .ajf-header:hover label,ajf-report-builder-content .ajf-content:hover label,ajf-report-builder-content .ajf-footer:hover label,ajf-report-builder-content .ajf-is-on-over label{visibility:visible !important;opacity:.4;display:block !important}ajf-report-builder-content .ajf-header:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-content:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-footer:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-is-on-over .ajf-drop-zone-container{display:block !important}ajf-report-builder-content .ajf-header:hover mat-list button,ajf-report-builder-content .ajf-content:hover mat-list button,ajf-report-builder-content .ajf-footer:hover mat-list button,ajf-report-builder-content .ajf-is-on-over mat-list button{display:inline}ajf-report-builder-content .ajf-my-content{width:100%;white-space:nowrap;overflow-y:auto}ajf-report-builder-content .ajf-show,ajf-report-builder-content .ajf-on-drag-over{opacity:1 !important;z-index:10}ajf-report-builder-content mat-list{position:relative;display:block}\n"]}]}],N.ctorParameters=function(){return[{type:R},{type:d.ChangeDetectorRef}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var U=function(){function t(t,e){this._service=t,this._dialogRef=e}return t.prototype.changeLabel=function(){this._service.changeLabelCustomWidget(this.label,this.position),this._dialogRef.close()},t}();U.decorators=[{type:d.Component,args:[{selector:"custom-widget-dialog",template:'<h3 matDialogTitle> set the label widget</h3>\n<mat-form-field>\n  <input matInput placeholder="add the label of this custom widget" [(ngModel)]="label"/>\n</mat-form-field>\n<button matDialogClose (click)="changeLabel()"> Ok </button>\n\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush}]}],U.ctorParameters=function(){return[{type:R},{type:m.MatDialogRef}]},U.propDecorators={label:[{type:d.Input}],position:[{type:d.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var V=function(){function t(t){this._service=t,this.customWidgets=[]}return t.prototype.remove=function(){this._service.remove("customWidgets",this.position)},t.prototype.ngOnInit=function(){this.widgetIcon=function t(e){return"widget-"+e.toLowerCase()}(this.widgetType),this.widgetLabel=A(this.widgetType)},t}();V.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-custom-widget-toolbar-button",template:'<a mat-button>\n  {{ widgetType}}\n  <i class="material-icons"(click)="remove()">remove_circle_outline</i>\n</a>\n\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-custom-widget-toolbar-button{margin-right:20px}ajf-report-builder-custom-widget-toolbar-button a{min-height:60px;margin-top:20px}ajf-report-builder-custom-widget-toolbar-button a i{display:none}ajf-report-builder-custom-widget-toolbar-button a:hover i{display:inline;position:absolute !important;margin-left:5px !important;z-index:5}\n"]}]}],V.ctorParameters=function(){return[{type:R}]},V.propDecorators={widgetType:[{type:d.Input}],position:[{type:d.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var H=function(){function t(t,e){this._service=t,this.dialog=e,this.customWidgets=[],this._customWidgetsSub=D.Subscription.EMPTY,this._threeColumnsLayout='{"widgetType":0,"content":[],"styles":{},"visibility":{"condition":"true"},"columns":[0.34,0.33,0.33],"content":[{"widgetType":7,"content":[],"styles":{},"visibility":{"condition":"true"},"content":[]},{"widgetType":7,"content":[],"styles":{},"visibility":{"condition":"true"},"content":[]},{"widgetType":7,"content":[],"styles":{},"visibility":{"condition":"true"},"content":[]}]}',this._fourColumnsLayout='{"widgetType":0,"content":[],"styles":{},"visibility":{"condition":"true"},"columns":[0.25,0.25,0.25,0.25],"content":[{"widgetType":7,"content":[],"styles":{},"visibility":{"condition":"true"},"content":[]},{"widgetType":7,"content":[],"styles":{},"visibility":{"condition":"true"},"content":[]},{"widgetType":7,"content":[],"styles":{},"visibility":{"condition":"true"},"content":[]},{"widgetType":7,"content":[],"styles":{},"visibility":{"condition":"true"},"content":[]}]}'}return t.prototype.openDialog=function(t){this._dialogRef=this.dialog.open(U),this._dialogRef.componentInstance.label=this.customWidgets[t].type,this._dialogRef.componentInstance.position=t},t.prototype.onDragStartHandler=function(){var t=this,e=D.timer(200).subscribe((function(){null!=e&&e.unsubscribe(),t._service.dragStarted()}))},t.prototype.onDragEndHandler=function(){this._service.dragEnded()},t.prototype.onDragEnterHandler=function(t,e){this._service.dragEnter(t,e)},t.prototype.onDragLeaveHandler=function(){this._service.dragLeave()},t.prototype.ngOnInit=function(){var t=this;this._customWidgetsSub=this._service.customWidgets.subscribe((function(e){t.customWidgets=e,t.customWidgets.length>0&&""==t.customWidgets[t.customWidgets.length-1].type&&t.openDialog(t.customWidgets.length-1)})),this._service.addCustomWidgets({json:this._threeColumnsLayout,type:"LayoutWidgetWith3Columns"}),this._service.addCustomWidgets({json:this._fourColumnsLayout,type:"LayoutWidgetWith4Columns"})},t.prototype.ngOnDestroy=function(){this._customWidgetsSub.unsubscribe(),this._service.resetCustomWidgets()},t}();H.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-custom-widgets-toolbar",template:'<mat-toolbar>\n  <ng-template ngFor let-t [ngForOf]="customWidgets" let-i="index">\n    <ajf-report-builder-custom-widget-toolbar-button\n          cdkDrag\n          [cdkDragData]="t"\n          [widgetType]="t.type"\n          [position]="i"\n          (cdkDragStarted)="onDragStartHandler()"\n          (cdkDragEnded)="onDragEndHandler();"\n          (click)="openDialog(i)">\n    </ajf-report-builder-custom-widget-toolbar-button>\n   </ng-template>\n</mat-toolbar>\n\n\n\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-custom-widgets-toolbar .mat-toolbar{background-color:rgba(144,238,144,.6);border-radius:16px}ajf-report-builder-custom-widgets-toolbar .ajf-hide{display:none}ajf-report-builder-custom-widgets-toolbar .ajf-show{display:block}ajf-report-builder-custom-widgets-toolbar a{margin-right:10px}\n"]}]}],H.ctorParameters=function(){return[{type:R},{type:m.MatDialog}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var q=function(){function t(t,e,n){var r=this;this._service=t,this._dialogRef=e,this.aggregationTypes=I.sizedEnumToStringArray(E.AjfAggregationType),this.operators=["true","false","( )","' '","<","<=",">=",">","!=","!","&&","||","+","-","*","/","%","=="],this.formulaText="",this.formulaDate="",this.safeFormulaText="",this.label="",this.condition="",this.aggregationType=E.AjfAggregationType.Sum,this.currentId=0,this.currentIndex=0,this.labels=[],this.currentWidget=null,this.formsVariablesName=[],this.formsVariablesType=[],this._formAnalyzerSub=D.Subscription.EMPTY,this._currentWidgetSub=D.Subscription.EMPTY,this._first=!0,0==this.init&&(this.formulaText="",this.aggregationType=E.AjfAggregationType.Sum),this._currentWidgetSub=this._service.currentWidget.subscribe((function(t){if(null!=t&&(r.currentWidget=t,2==r.currentWidget.widgetType)){var e=r.currentWidget;r.formula=e.imageType==P.AjfImageType.Flag?e.flag?e.flag.formula:"":e.icon?e.icon.formula:""}})),this._formAnalyzerSub=this._service.formsVariables.subscribe((function(t){null!=t&&(r.formsVariables=t)}))}return t.prototype.onEditorInit=function(){monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),monaco.languages.typescript.javascriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ES2015,allowNonTsExtensions:!0,allowJs:!0,module:monaco.languages.typescript.ModuleKind.None});try{monaco.languages.typescript.javascriptDefaults.addExtraLib("","condition-editor-variables.d.ts")}catch(t){monaco.languages.typescript.javascriptDefaults._extraLibs["condition-editor-variables.d.ts"]=""}try{monaco.languages.typescript.javascriptDefaults.addExtraLib("","condition-editor-functions.d.ts")}catch(t){monaco.languages.typescript.javascriptDefaults._extraLibs["condition-editor-functions.d.ts"]=""}this._initFormsVariablesNames(),this._updateVariables(),this._updateFunctions()},t.prototype._initFormsVariablesNames=function(){var t=this;this.formsVariables.forEach((function(e){e.names.forEach((function(e){t.formsVariablesName.push(e)})),e.types.forEach((function(e){t.formsVariablesType.push(t._fieldVarType(e)||"")}))}))},t.prototype._updateVariables=function(){if(null!=this.formsVariables)try{for(var t="",e=0;e<this.formsVariablesName.length;e++)t+="declare const "+this.formsVariablesName[e]+": "+this.formsVariablesType[e]+";";t+="\n",monaco.languages.typescript.javascriptDefaults._extraLibs["condition-editor-variables.d.ts"]=t}catch(t){}},t.prototype._updateFunctions=function(){try{monaco.languages.typescript.javascriptDefaults._extraLibs["condition-editor-functions.d.ts"]=k.AjfExpressionUtils.UTIL_FUNCTIONS}catch(t){}},t.prototype._fieldVarType=function(t){switch(t){case T.AjfFieldType.Boolean:return"boolean";case T.AjfFieldType.Date:case T.AjfFieldType.DateInput:case T.AjfFieldType.Time:return"Date";case T.AjfFieldType.Empty:return"void";case T.AjfFieldType.Formula:return"number";case T.AjfFieldType.MultipleChoice:case T.AjfFieldType.SingleChoice:return"any";case T.AjfFieldType.Number:return"number";case T.AjfFieldType.Table:return"Array";case T.AjfFieldType.String:case T.AjfFieldType.Text:return"string"}return null},t.prototype.setCurrent=function(t,e,n){this.init||(this.label=e,this.init=!0),this.insertVariable(this.formsVariables[t].names[n]||"")},t.prototype.setCurrentId=function(t){this.currentId=t,this.labels=this.formsVariables[t].labels,this._updateVariables()},t.prototype.setAggregationType=function(t){this.aggregationType=t},t.prototype.checkValidation=function(){this.validateFormula()?(this.safeFormulaText=this.formulaText,this.isValid=!0):this.isValid=!1,""==this.formulaText&&(this.isValid=!1)},t.prototype.validateFormula=function(){return""==this.formulaText&&(this.init=!1),null!=this.formsVariables&&k.validateExpression(this.formulaText,this.formsVariablesName)},t.prototype.saveDataset=function(){if(null!=this.currentWidget)switch(this.currentWidget.widgetType){case 2:this.saveImageFormula();break;case 3:this.saveFormulaHtml();break;case 4:this.saveChartFormula();break;case 5:this.saveTableFormula()}this.close()},t.prototype.saveImageFormula=function(){this._service.saveImageFormula(k.createFormula({formula:this.formulaText}))},t.prototype.saveFormulaHtml=function(){this._service.saveFormulaToHtml(this.formulaText,this.reference)},t.prototype.saveChartFormula=function(){this._service.saveChartFormula(this.label,this.level,this.mainIndex,this.index,this.formulaText,this.aggregationType)},t.prototype.saveTableFormula=function(){this._service.saveTableFormula(this.label,this.aggregationType,this.formulaText,this.mainIndex,this.index)},t.prototype.insertVariable=function(t){if(null!=this.monacoEditor&&null!=this.monacoEditor.editor){var e=this.monacoEditor.editor,n=e.getValue().split("\n"),r=e.getPosition(),i=r.lineNumber-1,o=n[i],a=r.column-1;o=o.substring(0,a)+t+o.substring(a),n[i]=o,r.column+=t.length,this.monacoEditor.value=n.join("\n"),e.setPosition(r),e.focus(),this.formulaText=e.getValue(),this.checkValidation()}},t.prototype.setVariable=function(t){null!=this.monacoEditor&&null!=this.monacoEditor.editor&&this.monacoEditor.editor.setValue(t)},t.prototype.reset=function(){this.formulaText="",this.aggregationType=E.AjfAggregationType.None},t.prototype.close=function(){this.reset(),this._dialogRef.close()},t.prototype.ngOnInit=function(){this.formulaText=this.formula,this.aggregationType=this.aggregation,this.label=this.labelText,this.isValid=""!=this.formulaText&&null!=this.formulaText},t.prototype.ngAfterViewChecked=function(){this._first&&null!=this.monacoEditor&&null!=this.monacoEditor.editor&&(this.insertVariable(this.formulaText||""),this._first=!1)},t.prototype.ngOnDestroy=function(){this._formAnalyzerSub.unsubscribe(),this._currentWidgetSub.unsubscribe()},t}();q.decorators=[{type:d.Component,args:[{selector:"forms-analyzer-dialog",template:'<h3 matDialogTitle> Formula editor </h3>\n<div mat-dialog-content #elem>\n  <ng-template [ngIf]="currentWidget != null && formsVariables != null">\n    <div class="ajf-left">\n      <mat-list>\n        <mat-list-item *ngFor="let operator of operators">\n          <button mat-button (click)="insertVariable(operator)">\n            <h4 matLine>{{operator}}</h4>\n          </button>\n        </mat-list-item>\n      </mat-list>\n    </div>\n    <div class="ajf-main">\n      <mat-select *ngIf="!isFormula" placeholder="Select type of agregation" [(ngModel)]="aggregationType">\n          <mat-option [value]="idx" *ngFor="let ag of aggregationTypes; let idx = index"> {{ ag }} </mat-option>\n      </mat-select>\n      <mat-form-field *ngIf="!isFormula">\n        <textarea matInput placeholder="Name field" [(ngModel)]="label" ></textarea>\n      </mat-form-field>\n        <ajf-monaco-editor\n          (init)="onEditorInit()"\n          (valueChange)="formulaText = $event;checkValidation();"\n          [value]="condition" language="javascript">\n        </ajf-monaco-editor>\n    </div>\n    <div class="ajf-menu">\n      <form>\n        <mat-select placeholder="Select form" (selectionChange)="setCurrentId($event.value)">\n          <ng-template ngFor let-form let-id="index" [ngForOf]="formsVariables">\n            <mat-option [value]="id"> {{ id }} </mat-option>\n          </ng-template>\n        </mat-select>\n      </form>\n      <mat-list>\n        <h3 matSubheader>Field list</h3>\n        <mat-list-item *ngFor="let label of labels;let i = index">\n          <button mat-button (click)="setCurrent(currentId, label, i)">\n            <h4 matLine>{{label}}</h4>\n          </button>\n        </mat-list-item>\n      </mat-list>\n    </div>\n  </ng-template>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)="saveDataset()" [disabled]="!isValid">Save</button>\n</div>\n\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["forms-analyzer-dialog{height:512px}forms-analyzer-dialog h4[matLine]{font-size:xx-small}forms-analyzer-dialog [mat-dialog-content]{flex-direction:row;display:flex;align-items:stretch;min-width:1000px}forms-analyzer-dialog [mat-dialog-content] .ajf-left{flex:1 0 10%;width:10%;overflow-y:auto}forms-analyzer-dialog [mat-dialog-content] .ajf-left form>mat-select{width:90%;margin-left:10px;margin-right:10px}forms-analyzer-dialog [mat-dialog-content] .ajf-main{flex:1 0 55%;min-width:512px}forms-analyzer-dialog [mat-dialog-content] .ajf-main monaco-editor{height:450px;min-width:300px}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-select{width:80%}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-form-field{width:80%}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-form-field textarea{width:auto;height:auto}forms-analyzer-dialog [mat-dialog-content] .ajf-main textarea{width:80%;height:75px}forms-analyzer-dialog [mat-dialog-content] .ajf-menu{flex:1 0 30%;overflow-y:auto;min-width:350px}forms-analyzer-dialog [mat-dialog-content] .ajf-menu form>mat-select{width:90%;margin-left:10px;margin-right:10px}forms-analyzer-dialog ajf-monaco-editor{min-width:400px}\n"]}]}],q.ctorParameters=function(){return[{type:R},{type:m.MatDialogRef},{type:T.AjfValidationService}]},q.propDecorators={formula:[{type:d.Input}],isFormula:[{type:d.Input}],labelText:[{type:d.Input}],aggregation:[{type:d.Input}],init:[{type:d.Input}],level:[{type:d.Input}],index:[{type:d.Input}],mainIndex:[{type:d.Input}],reference:[{type:d.Input}],monacoEditor:[{type:d.ViewChild,args:[a.AjfMonacoEditor,{static:!1}]}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Y=function(){function t(t,e){var n=this;this._service=t,this.dialog=e,this.currentWidget=null,this.forms=[],this.choicesOrigins={},this.currentMainDataIndex=-1,this._dataset=[],this._currentWidgetSub=D.Subscription.EMPTY,this._formAnalyzerSub=D.Subscription.EMPTY,this._currentWidgetSub=this._service.currentWidget.subscribe((function(t){n.currentWidget=null!=t?t:null})),this._formAnalyzerSub=this._service.formsVariables.subscribe((function(t){null!=t&&(n.formsVariables=t)}))}return t.prototype.setCurrentIndex=function(t){this.currentMainDataIndex=t},t.prototype.isSelected=function(t){return t===this.currentMainDataIndex?"primary":void 0},t.prototype.getMainData=function(){if(null!=this._dataset[0]){for(var t=[],e=0;e<this._dataset[0].length;e++)t.push(this._dataset[0][e].label||"");return t}return[]},t.prototype.getDataset=function(){var t=[];if(null!=this._dataset[0]){for(var e=1;e<this._dataset.length;e++)t.push(this._dataset[e][0].label||"");return t}return[]},t.prototype.getRelatedData=function(){if(null!=this._dataset[this.currentMainDataIndex+1]){for(var t=[],e=1;e<this._dataset[this.currentMainDataIndex+1].length;e++)t.push(this._dataset[this.currentMainDataIndex+1][e].label||"");return t}return[]},t.prototype.getTableHeader=function(){var t=[];if(null!=this._dataset)for(var e=0;e<this._dataset.length;e++)null!=this._dataset[e][0]&&t.push(this._dataset[e][0].label||"");return t},t.prototype.getTableData=function(){if(null!=this._dataset[this.currentMainDataIndex]){for(var t=[],e=1;e<this._dataset[this.currentMainDataIndex].length;e++)null!=this._dataset[this.currentMainDataIndex][e]&&t.push(this._dataset[this.currentMainDataIndex][e].label||"");return t}return[]},t.prototype.needMainData=function(){var t=this.currentWidget;return t.chartType!==E.AjfChartType.Scatter&&t.chartType!==E.AjfChartType.Bubble},t.prototype.removeMainData=function(t){this._service.removeMainData(t)},t.prototype.removeDataset=function(t){this.currentMainDataIndex=t,this._service.removeRelatedData(this.currentMainDataIndex,-1)},t.prototype.removeTableMainData=function(t){this._service.removeTableMainData(t)},t.prototype.removeRelatedData=function(t){this._service.removeRelatedData(this.currentMainDataIndex,t)},t.prototype.removeData=function(t,e){this._service.removeData(t,e)},t.prototype.openDialog=function(t,e,n,r){this.dialogRef=this.dialog.open(q),r?(1===t&&-1===n&&(n=0),1===t&&(null!=this.currentWidget&&this.currentWidget.widgetType==E.AjfWidgetType.Chart&&e++,n++),this.dialogRef.componentInstance.labelText=this._dataset[e]&&this._dataset[e][n].label||"",this.dialogRef.componentInstance.aggregation=this._dataset[e]&&this._dataset[e][n].aggregation.aggregation||E.AjfAggregationType.None):(this.dialogRef.componentInstance.labelText="",this.dialogRef.componentInstance.formula="",this.dialogRef.componentInstance.aggregation=0),this.dialogRef.componentInstance.currentWidget=this.currentWidget,this.dialogRef.componentInstance.level=t,this.dialogRef.componentInstance.mainIndex=e,this.dialogRef.componentInstance.index=n,this.dialogRef.componentInstance.init=!1},t.prototype.openDialogAddMainData=function(){this.openDialog(0,-1,-1,!1)},t.prototype.openDialogChartEditMainData=function(){this.openDialog(0,0,this.currentMainDataIndex,!0)},t.prototype.openDialogTableEditMainData=function(){this.openDialog(0,this.currentMainDataIndex,0,!0)},t.prototype.openDialogChartAddDataset=function(){this.openDialog(1,-1,-1,!1)},t.prototype.openDialogTableAddDataset=function(){this.openDialog(1,this.currentMainDataIndex,-1,!1)},t.prototype.openDialogChartAddDataOfDataset=function(){this.openDialog(1,this.currentMainDataIndex,-1,!1)},t.prototype.openDialogChartEditDataset=function(){this.openDialog(1,this.currentMainDataIndex,-1,!0)},t.prototype.openDialogTableEditDataset=function(t){this.openDialog(1,this.currentMainDataIndex,t,!0)},t.prototype.openDialogChartEditDataOfDataset=function(t){this.openDialog(1,this.currentMainDataIndex,t,!0)},t.prototype.ngOnDestroy=function(){this._currentWidgetSub.unsubscribe(),this._formAnalyzerSub.unsubscribe()},t}();Y.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-forms-analyzer",template:'<ng-template [ngIf]="currentWidget != null && formsVariables != null">\n  <ng-template [ngIf]="currentWidget.widgetType == 4">\n    <ng-template  [ngIf]="needMainData()">\n      <mat-tab-group>\n        <mat-tab [label]="\'Main Data\' | translate">\n          <button mat-button (click)="openDialogAddMainData()" style="width:100%;">\n            Add Main Data\n          </button>\n          <mat-grid-list rowHeight="50px" cols="3">\n            <ng-template ngFor let-label [ngForOf]="getMainData()" let-idx="index">\n              <mat-grid-tile>\n                  {{ label }}\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="setCurrentIndex(idx);openDialogChartEditMainData()">Edit</button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="removeMainData(idx)">Remove</button>\n              </mat-grid-tile>\n            </ng-template>\n          </mat-grid-list>\n          <div class="ajf-ui ajf-divider"></div>\n        </mat-tab>\n      </mat-tab-group>\n    </ng-template>\n    <mat-tab-group>\n      <mat-tab label="dataset">\n        <button mat-button (click)="openDialogChartAddDataset()" style="width:100%">\n            add dataset\n        </button>\n        <mat-grid-list rowHeight="50px" cols="4">\n          <ng-template ngFor let-label [ngForOf]="getDataset()" let-idx="index">\n              <mat-grid-tile>\n                <button mat-button [color]="isSelected(idx)"(click)="setCurrentIndex(idx)">\n                  {{ label }}\n                </button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button (click)="setCurrentIndex(idx);openDialogChartAddDataOfDataset()" style="width:100%">\n                  add data\n                </button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n              <button mat-button translate\n                  (click)="setCurrentIndex(idx);openDialogChartEditDataset()">Edit</button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="removeDataset(idx)">Remove</button>\n              </mat-grid-tile>\n          </ng-template>\n        </mat-grid-list>\n      </mat-tab>\n      <mat-tab label="data">\n        <mat-grid-list rowHeight="50px" cols="3">\n          <ng-template ngFor let-label [ngForOf]="getRelatedData()" let-idx="index">\n            <mat-grid-tile>\n                {{ label }}\n            </mat-grid-tile>\n            <mat-grid-tile>\n              <button mat-button translate\n                  (click)="openDialogChartEditDataOfDataset(idx)">Edit</button>\n            </mat-grid-tile>\n            <mat-grid-tile>\n              <button mat-button translate\n                  (click)="removeRelatedData(idx)">Remove</button>\n            </mat-grid-tile>\n          </ng-template>\n        </mat-grid-list>\n        <div class="ajf-ui ajf-divider"></div>\n      </mat-tab>\n    </mat-tab-group>\n  </ng-template>\n  <ng-template [ngIf]="currentWidget.widgetType == 5">\n    <ng-template  [ngIf]="needMainData()">\n      <mat-tab-group>\n        <mat-tab [label]="\'Main Data\' | translate">\n          <button mat-button (click)="openDialogAddMainData()"\n              translate\n              style="width:100%;">Add Main Data</button>\n          <mat-grid-list rowHeight="50px" cols="4">\n            <ng-template ngFor let-label [ngForOf]="getTableHeader()" let-idx="index">\n              <mat-grid-tile>\n                <button mat-button [color]="isSelected(idx)"(click)="setCurrentIndex(idx)">\n                  {{ label }}\n                </button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="setCurrentIndex(idx);openDialogTableAddDataset()"\n                    style="width:100%">add data</button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="setCurrentIndex(idx);openDialogTableEditMainData()">Edit</button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="removeTableMainData(idx)">Remove</button>\n              </mat-grid-tile>\n            </ng-template>\n          </mat-grid-list>\n          <div class="ajf-ui ajf-divider"></div>\n        </mat-tab>\n        <mat-tab [label]="\'data\' | translate">\n          <mat-grid-list rowHeight="50px" cols="3">\n            <ng-template ngFor let-label [ngForOf]="getTableData()" let-idx="index">\n              <mat-grid-tile>\n                  {{ label }}\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="openDialogTableEditDataset(idx)">Edit</button>\n              </mat-grid-tile>\n              <mat-grid-tile>\n                <button mat-button translate\n                    (click)="removeData(currentMainDataIndex, idx + 1)">Remove</button>\n              </mat-grid-tile>\n            </ng-template>\n          </mat-grid-list>\n          <div class="ajf-ui ajf-divider"></div>\n      </mat-tab>\n      </mat-tab-group>\n    </ng-template>\n  </ng-template>\n</ng-template>\n\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-forms-analyzer{min-height:512px}ajf-report-builder-forms-analyzer .ajf-editor{flex:.75 0 auto;display:flex;flex-direction:row;align-items:stretch}ajf-report-builder-forms-analyzer .ajf-editor monaco-editor{flex:1 0 auto;min-width:512px;min-height:256px}ajf-report-builder-forms-analyzer mat-dialog-container{flex:1 0 auto;min-width:512px;min-height:256px}ajf-report-builder-forms-analyzer .ajf-editor-panel{flex:.25 0 auto;overflow-y:auto}ajf-report-builder-forms-analyzer .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-forms-analyzer mat-tab-group .mat-tab-body-wrapper,ajf-report-builder-forms-analyzer mat-tab-group .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}\n"]}]}],Y.ctorParameters=function(){return[{type:R},{type:m.MatDialog}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var $=function(){function t(){}return t.prototype.transform=function(t,e){return t.filter((function(t){return 0===e.length||t.info.toLowerCase().includes(e.toLowerCase())}))},t}();$.decorators=[{type:d.Pipe,args:[{name:"ajfImageFilter"}]},{type:d.Injectable}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Z=function(){function t(t){this._service=t,this._icon=null,this._classes="",this.open=!1,this.valueToSearch="",this.formulaClick=new d.EventEmitter}return Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){return this._classes},enumerable:!1,configurable:!0}),t.prototype.setIcon=function(t,e){this._icon={fontSet:t,fontIcon:e},this._service.setIcon(this._icon)},t.prototype.setFlag=function(t){this._classes=t,this._service.setFlag(t)},t.prototype.setSearch=function(t){this.valueToSearch=t.currentTarget.value},t.prototype.emitFormula=function(){this.formulaClick.emit()},t.prototype.getFlag=function(t){for(var e="",n=0;n<this.data.class.length;n++)e+=this.data.class[n]+" ";return e+(this.data.prefixClass+t)},t.prototype.toggle=function(){this.open=!this.open},t}();Z.decorators=[{type:d.Component,args:[{selector:"ajf-image-group",template:'<ng-template [ngIf]="data != null">\n  <button mat-button (click)="toggle()" style="width:100%">{{data.title}}</button>\n  <ng-template [ngIf]="open">\n    <button mat-button (click)="emitFormula()">Set formula</button>\n    <mat-card *ngIf="data.icon === \'true\'">\n      <mat-card-header>\n        {{data.title}}\n      </mat-card-header>\n      <mat-card-content>\n        <mat-grid-list cols="3" rowHeight="100px">\n          <ng-container *ngFor="let value of data.data">\n            <mat-grid-tile *ngFor="let icon of value.icons" [colspan]="1" [rowspan]="1">\n              <button style="height:100%" (click)="setIcon(value.name, icon.name)" [matTooltip]="icon.label" matTooltipPosition="above" mat-button>\n                <mat-icon\n                  [fontSet]="value.name"\n                  [fontIcon]="icon.name">\n                </mat-icon>\n              </button>\n            </mat-grid-tile>\n          </ng-container>\n        </mat-grid-list>\n      </mat-card-content>\n    </mat-card>\n    <mat-card *ngIf="data.icon === \'false\'">\n      <mat-card-header>\n        <mat-card-title>\n          {{data.title}}\n        </mat-card-title>\n        <mat-card-subtitle>\n          <mat-form-field>\n            <input matInput placeholder="{{data.title}} to search" [(ngModel)]="valueToSearch">\n          </mat-form-field>\n        </mat-card-subtitle>\n      </mat-card-header>\n      <mat-card-content>\n        <div class="ajf-image-group-container">\n          <mat-grid-list cols="3">\n            <mat-grid-tile *ngFor="let value of data.data | ajfImageFilter: valueToSearch" [colspan]="1" [rowspan]="1">\n              <button style="height:100%" (click)="setFlag(getFlag(value.class))" matTooltip="{{value.info}}" [matTooltipPosition]="\'above\'" mat-button>\n                <span class={{getFlag(value.class)}} style="width: 100%;height: 100%;"></span>\n              </button>\n            </mat-grid-tile>\n          </mat-grid-list>\n        </div>\n      </mat-card-content>\n    </mat-card>\n    <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\n  </ng-template>\n</ng-template>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-image-group mat-grid-list{height:300px !important;overflow-y:auto}ajf-image-group .mat-grid-list{height:300px !important}ajf-image-group mat-card>mat-card-content>.ajf-image-group-container{overflow-y:scroll;height:300px}ajf-image-group mat-icon{font-size:30px}\n"]}]}],Z.ctorParameters=function(){return[{type:R}]},Z.propDecorators={data:[{type:d.Input}],formulaClick:[{type:d.Output}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var J=function(){function t(t,e){var n=this;this._dialog=t,this._service=e,this.initChartType=!1,this.currentWidget=null,this.forms=[],this.colors=[],this.formsJson={forms:[]},this.widgetName="",this.marginExpanded=!1,this.paddingExpanded=!1,this.borderWidthExpanded=!1,this.borderRadiusExpanded=!1,this.backgroundColor="#127bdc",this.styleBackgroundColor="rgb(255,255,255,0)",this.borderColor="#127bdc",this.styleColor="rgb(0,0,0,0)",this.align=[!1,"center","right","justify"],this.fonts=[!1,"blackr","black-italic","bold","bold-condensed","bold-condensed-italic","bold-italic","condensed","condensed-italic","italic","light","light-italic","medium","medium-italic","thinr","thin-italic"],this.currentModule={},this.quillModules={toolbar:[["formula"],["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:this.colors},{background:this.colors}],[{font:this.fonts}],[{align:this.align}],["clean"]]},this.chartBorderColor=[],this.chartBorderWidth=3,this.imageUrl="https://angular.io/resources/images/logos/angular2/angular.png",this.htmlText="",this.reportStyles=!1,this.sectionStyles=!1,this.widgetStyles=!0,this.sectionColor=!1,this.widgetColor=!1,this.visibilitySection=!1,this.currentColor="",this._icon=null,this.iconSet={icon:"true",title:"report",data:null},this.flagSet={icon:"false",class:["flag-icon"],prefixClass:"flag-icon-",title:"flags",data:[{class:"dz",info:"Algeria"},{class:"ao",info:"Angola"},{class:"bj",info:"Benin"},{class:"bw",info:"Botswana"},{class:"bf",info:"Burkina Faso"},{class:"bi",info:"Burundi"},{class:"cm",info:"Cameroon"},{class:"cv",info:"Cabo Verde"},{class:"cf",info:"The Central African Republic"},{class:"td",info:"Chad"},{class:"km",info:"The Comoros"},{class:"ci",info:"Cote D'avoire"},{class:"cd",info:"The Democratic Republic of Congo"},{class:"dj",info:"Dijibouti"},{class:"eg",info:"Egypt"},{class:"gq",info:"Equatorial Guinea"},{class:"er",info:"Eritrea"},{class:"et",info:"Ethiopia"},{class:"tf",info:"French Southern Territories"},{class:"ga",info:"Gabon"},{class:"gm",info:"The Gambia"},{class:"gh",info:"Ghana"},{class:"gn",info:"Guinea"},{class:"gw",info:"Guinea-Bissau"},{class:"ke",info:"Kenya"},{class:"ls",info:"Leshotho"},{class:"lr",info:"Liberia"},{class:"ly",info:"Libya"},{class:"mg",info:"Madagascar"},{class:"mw",info:"Malawy"},{class:"ml",info:"Mali"},{class:"mr",info:"Mauritania"},{class:"mu",info:"Mauritius"},{class:"yt",info:"Mayotte"},{class:"ma",info:"Marocco"},{class:"mz",info:"Mozambique"},{class:"na",info:"Namibia"},{class:"ne",info:"Niger"},{class:"ng",info:"Nigeria"},{class:"cg",info:"Republic of the Congo"},{class:"rw",info:"Rwnda"},{class:"re",info:"rèunion"},{class:"sh",info:"Saint Helena, Ascension and Tristan da Cunha"},{class:"st",info:"Sao Tome and Principe"},{class:"sn",info:"Senegal"},{class:"sc",info:"Seychelles"},{class:"sl",info:"Sierra Leone"},{class:"so",info:"Somalia"},{class:"za",info:"South Africa"},{class:"ss",info:"South Sudan"},{class:"sd",info:"Sudan"},{class:"sz",info:"Swaziland"},{class:"tz",info:"Tanzania"},{class:"tg",info:"Togo"},{class:"tn",info:"Tunisia"},{class:"ug",info:"Uganda"},{class:"eh",info:"Western Sahara"},{class:"zm",info:"Zambia"},{class:"zw",info:"Zimbawe"},{class:"iq",info:"Iraq"},{class:"lb",info:"Lebanon"},{class:"bd",info:"Bangladesh"},{class:"ir",info:"Iran (Islamic Republic of)"},{class:"my",info:"Malaysia"},{class:"np",info:"Nepal"},{class:"pk",info:"Pakistan"},{class:"th",info:"Thailand"},{class:"jo",info:"Jordan"},{class:"ye",info:"Yemen"}]},this._currentWidgetSub=D.Subscription.EMPTY,this._formsSub=D.Subscription.EMPTY,this._colorSub=D.Subscription.EMPTY,this._headerStyleSub=D.Subscription.EMPTY,this._contentStylesSub=D.Subscription.EMPTY,this._footerStylesSub=D.Subscription.EMPTY,this._originSub=D.Subscription.EMPTY,this._stylesUpdatesSubs=D.Subscription.EMPTY,this._updateWidgetMarginEvt=new d.EventEmitter,this._updateWidgetPaddingEvt=new d.EventEmitter,this._updateWidgetBorderWidthEvt=new d.EventEmitter,this._updateWidgetBorderRadiusEvt=new d.EventEmitter,this.tabValue="backgroundColor",this.setForms(),this.iconSet.data=Object.keys(e.iconSets).filter((function(t){return"ajf-icon"!=t})).map((function(t){return{name:t,icons:e.iconSets[t]}})),this._headerStyleSub=this._service.headerStyles.subscribe((function(t){null!=t["background-color"]&&(n.styleBackgroundColor=t["background-color"])})),this._contentStylesSub=this._service.contentStyles.subscribe((function(t){null!=t["background-color"]&&(n.styleBackgroundColor=t["background-color"])})),this._footerStylesSub=this._service.footerStyles.subscribe((function(t){null!=t["background-color"]&&(n.styleBackgroundColor=t["background-color"])})),this._originSub=this._service.origin.subscribe((function(t){n.origin=t}))}return Object.defineProperty(t.prototype,"currentLayoutWidget",{get:function(){return this.currentWidget},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTextWidget",{get:function(){return this.currentWidget},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},enumerable:!1,configurable:!0}),t.prototype.toNumber=function(t){if(null==t)return 0;var e=t.match(/^(-)?\d+/g);return null==e||0==e.length?0:Number(e[0])},t.prototype.toNumberArray=function(t){var e=this;return null==t?[]:(t||"").replace("px","").split(" ").filter((function(t){return""!==t&&null!=t})).map((function(t){return e.toNumber(t)}))},t.prototype.fillPxNumberArray=function(t){switch(t.length){case 0:return[0,0,0,0];case 1:var e=t[0];return[e,e,e,e];case 2:var n=t[0],r=t[1];return[n,r,n,r];case 3:var i=t[1];return[t[0],i,t[2],i];default:return t}},t.prototype.percent=function(t){return this.roundTo(100*t,3)},t.prototype.roundTo=function(t,e){var n=t*Math.pow(10,e);return(n=Math.floor(n))/Math.pow(10,e)},t.prototype.setForms=function(){var t=[];try{for(var e=0;e<this.formsJson.forms.length;e++)t.push(I.deepCopy(this.formsJson.forms[e]));this._service.setReportForms(t)}catch(t){}},t.prototype.instantColumnValue=function(t,e){null!==t&&this._service.instantColumnValue(t,e)},t.prototype.setStyle=function(){null!=this.currentWidget&&(this.currentWidget.styles=I.deepCopy(this.currentWidget.styles),this._service.updateCurrentWidget(this.currentWidget))},t.prototype.setWidgetStyles=function(t,e){this._service.setWidgetStyles(t,e),this.currentColor=e,this.setStyle()},t.prototype.setWidgetMargin=function(t,e){this._updateWidgetMarginEvt.emit({idx:t,value:e})},t.prototype.setWidgetPadding=function(t,e){this._updateWidgetPaddingEvt.emit({idx:t,value:e})},t.prototype.setWidgetBorderWidth=function(t,e){this._updateWidgetBorderWidthEvt.emit({idx:t,value:e})},t.prototype.setWidgetBorderRadius=function(t,e){this._updateWidgetBorderRadiusEvt.emit({idx:t,value:e})},t.prototype.setSectionStyles=function(t,e){this._service.setSectionStyles(this.origin,t,e),this.styleColor=e},t.prototype.setReportStyles=function(t,e){this._service.setReportStyles(t,e),this.styleBackgroundColor=e},t.prototype.addCustomColor=function(){this._service.addCustomColor(this.currentColor),this._service.updateCurrentWidget(this.currentWidget)},t.prototype.getModule=function(){return this.quillModules},t.prototype.isChartTypeSelected=function(t){return 0!=this.initChartType&&t===this.currentWidget.chartType},t.prototype.addColumn=function(){this._service.addColumn()},t.prototype.fixedColumn=function(t){this._service.fixedColumn(t)},t.prototype.unfixedColumn=function(t){this._service.remove("unfixedColumn",t)},t.prototype.setImageUrl=function(){this._service.setImageUrl(this.imageUrl)},t.prototype.setIcon=function(t){this._icon=t,this._service.setIcon(t)},t.prototype.setChartType=function(t){this.initChartType=!0,this._service.setChartType(t)},t.prototype.setChartBorderColor=function(t){null!=t&&this._service.setChartBorderWidth(t)},t.prototype.setTab=function(t){this.tabValue=0===t.index?"backgroundColor":"borderColor"},t.prototype.removeChartBackgroundColor=function(t){this._service.removeChartBackgroundColor(t)},t.prototype.removeChartBorderColor=function(t){this._service.removeChartBorderColor(t)},t.prototype.hideMenu=function(){this._service.updateCurrentWidget(null)},t.prototype.openFormulaDialog=function(t){this.dialogRef=this._dialog.open(q),this.dialogRef.componentInstance.aggregation=E.AjfAggregationType.None,this.dialogRef.componentInstance.isFormula=!0,null!=t&&null!=t.reference&&(this.dialogRef.componentInstance.formula=t.formula,this.dialogRef.componentInstance.reference=t.reference)},t.prototype.ngOnInit=function(){var t=this;this._formsSub=this._service.reportForms.subscribe((function(e){t.forms=e||[]})),this._currentWidgetSub=this._service.currentWidget.subscribe((function(e){null!=e?t.currentWidget!==e&&(t.currentWidget=e,t.widgetName=E.AjfWidgetType[e.widgetType],t.reportStyles=!1,t.sectionStyles=!1,t.widgetStyles=!1,t.sectionColor=!1,t.widgetColor=!1,t.visibilitySection=!1):(t.currentWidget=null,t.widgetName="")})),this._colorSub=this._service.colors.subscribe((function(e){e&&e.length>0&&(t.colors=e,t.quillModules={toolbar:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:t.colors},{background:t.colors}],[{font:t.fonts}],[{align:t.align}],["formula"],["clean"]]})})),this.getHTML=this._service.currentWidget.pipe(M.map((function(e){return null!=e?t.currentWidget.htmlText:""})),M.distinctUntilChanged(),M.startWith("<p><br></p>")),this.getHeightWidget=this._service.currentWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(e){if(null!=e){var n=t.toNumber(e.styles.height);if(null!=n||null!=n)return n}})),M.distinctUntilChanged()),this.getFontSizeWidget=this._service.currentWidget.pipe(M.map((function(e){if(null!=e)return t.toNumber(e.styles["font-size"])||12})),M.distinctUntilChanged()),this.getFontAlignWidget=this._service.currentWidget.pipe(M.map((function(t){if(null!=t)return t.styles["text-align"]||"center"})),M.distinctUntilChanged()),this.getBorderWidthWidget=this._service.currentWidget.pipe(M.map((function(e){if(null!=e)return t.fillPxNumberArray(t.toNumberArray(e.styles["border-width"]))})),M.distinctUntilChanged(),M.startWith([0,0,0,0])),this.getBorderWidthWidgetTop=this.getBorderWidthWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[0]}))),this.getBorderWidthWidgetRight=this.getBorderWidthWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[1]}))),this.getBorderWidthWidgetBottom=this.getBorderWidthWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[2]}))),this.getBorderWidthWidgetLeft=this.getBorderWidthWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[3]}))),this.getBorderRadiusWidget=this._service.currentWidget.pipe(M.map((function(e){if(null!=e)return t.fillPxNumberArray(t.toNumberArray(e.styles["border-radius"]))})),M.distinctUntilChanged(),M.startWith([0,0,0,0])),this.getBorderRadiusWidgetTopLeft=this.getBorderRadiusWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[0]}))),this.getBorderRadiusWidgetTopRight=this.getBorderRadiusWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[1]}))),this.getBorderRadiusWidgetBottomRight=this.getBorderRadiusWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[2]}))),this.getBorderRadiusWidgetBottomLeft=this.getBorderRadiusWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[3]}))),this.getMarginWidget=this._service.currentWidget.pipe(M.map((function(e){if(null!=e&&null!=e.styles&&null!=e.styles.margin)return t.fillPxNumberArray(t.toNumberArray(e.styles.margin))})),M.distinctUntilChanged(),M.startWith([0,0,0,0])),this.getMarginWidgetTop=this.getMarginWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[0]}))),this.getMarginWidgetRight=this.getMarginWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[1]}))),this.getMarginWidgetBottom=this.getMarginWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[2]}))),this.getMarginWidgetLeft=this.getMarginWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[3]}))),this.getPaddingWidget=this._service.currentWidget.pipe(M.map((function(e){if(null!=e&&null!=e.styles&&null!=e.styles.padding)return t.fillPxNumberArray(t.toNumberArray(e.styles.padding))})),M.distinctUntilChanged()),this.getPaddingWidgetTop=this.getPaddingWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[0]}))),this.getPaddingWidgetRight=this.getPaddingWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[1]}))),this.getPaddingWidgetBottom=this.getPaddingWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[2]}))),this.getPaddingWidgetLeft=this.getPaddingWidget.pipe(M.filter((function(t){return null!=t})),M.map((function(t){return t[3]}))),this.getBackgroundColorWidget=this._service.currentWidget.pipe(M.map((function(t){if(null!=t&&null!=t.styles)return t.styles.backgroundColor||""})),M.distinctUntilChanged()),this.getColorWidget=this._service.currentWidget.pipe(M.map((function(t){if(null!=t&&null!=t.styles)return t.styles.color||""})),M.distinctUntilChanged()),this._stylesUpdatesSubs=this._updateWidgetMarginEvt.pipe(M.withLatestFrom(this.getMarginWidget)).subscribe((function(e){if(null!=e){var n=e[0].idx,r=e[1]||[0,0,0,0];null==r||r.length<n||(r[n]=e[0].value,t.setWidgetStyles("margin",r))}})),this._stylesUpdatesSubs.add(this._updateWidgetPaddingEvt.pipe(M.withLatestFrom(this.getPaddingWidget)).subscribe((function(e){if(null!=e){var n=e[0].idx,r=e[1]||[0,0,0,0];null==r||r.length<n||(r[n]=e[0].value,t.setWidgetStyles("padding",r))}}))),this._stylesUpdatesSubs.add(this._updateWidgetBorderWidthEvt.pipe(M.withLatestFrom(this.getBorderWidthWidget)).subscribe((function(e){if(null!=e){var n=e[0].idx,r=e[1]||[0,0,0,0];null==r||r.length<n||(r[n]=e[0].value,t.setWidgetStyles("border-width",r))}}))),this._stylesUpdatesSubs.add(this._updateWidgetBorderRadiusEvt.pipe(M.withLatestFrom(this.getBorderRadiusWidget)).subscribe((function(e){if(null!=e){var n=e[0].idx,r=e[1]||[0,0,0,0];null==r||r.length<n||(r[n]=e[0].value,t.setWidgetStyles("border-radius",r))}})))},t.prototype.ngOnChanges=function(t){this.currentWidget=t.widget.currentValue,null!=this.currentWidget&&(this.widgetName=E.AjfWidgetType[this.currentWidget.widgetType])},t.prototype.ngOnDestroy=function(){this._currentWidgetSub.unsubscribe(),this._formsSub.unsubscribe(),this._colorSub.unsubscribe(),this._headerStyleSub.unsubscribe(),this._contentStylesSub.unsubscribe(),this._footerStylesSub.unsubscribe(),this._originSub.unsubscribe(),this._stylesUpdatesSubs.unsubscribe()},t}();J.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-properties",template:'<ng-template [ngIf]="currentWidget != null">\n  <div class="ajf-content">\n    <button\n      mat-button\n      class="ajf-hide-menu"\n      matTooltip="hide-menu"\n      (click)="hideMenu()"\n      [matTooltipPosition]="\'above\'">\n      <mat-icon>remove_circle_outline</mat-icon>\n    </button>\n    <mat-button-toggle-group class="ajf-menu-css">\n      <mat-button-toggle\n        (click)="reportStyles = !reportStyles; sectionStyles = false; widgetStyles = false" value="left"\n        [ngClass]="{\'ajf-selected\': reportStyles}">\n        report\n        <ng-container translate>CSS style</ng-container>\n      </mat-button-toggle>\n      <mat-button-toggle\n        (click)="sectionStyles = !sectionStyles; reportStyles = false; widgetStyles = false"\n        [ngClass]="{\'ajf-selected\': sectionStyles}">\n        {{ origin }}\n        <ng-container translate>CSS style</ng-container>\n      </mat-button-toggle>\n      <mat-button-toggle\n        (click)="widgetStyles = !widgetStyles; sectionStyles = false; reportStyles = false"\n        [ngClass]="{\'ajf-selected\': widgetStyles}">\n        {{ widgetName }}\n        <ng-container translate>CSS style</ng-container>\n      </mat-button-toggle>\n    </mat-button-toggle-group>\n    <div class="ajf-style-container" *ngIf="(reportStyles) ? true : false ">\n      <mat-tab-group>\n        <mat-tab label="Background Color">\n          <div class="ajf-style-panel">\n            <ajf-theme-color [section]="\'report\'" [label]="\'color\'"></ajf-theme-color>\n          </div>\n        </mat-tab>\n      </mat-tab-group>\n    </div>\n    <div class="ajf-style-container" *ngIf="(sectionStyles) ? true : false ">\n      <mat-tab-group>\n        <mat-tab label="Background Color">\n          <div class="ajf-style-panel">\n            <ajf-theme-color [section]="\'section\'" [label]="\'color\'"></ajf-theme-color>\n          </div>\n        </mat-tab>\n      </mat-tab-group>\n    </div>\n    <div class="ajf-style-container" *ngIf="(widgetStyles) ? true : false ">\n      <mat-tab-group *ngIf="(currentWidget.widgetType != 4)">\n        <mat-tab label="Color">\n          <div class="ajf-style-panel">\n            <ajf-theme-color [section]="\'widget\'" [label]="\'color\'" [init]="\'icon\'"></ajf-theme-color>\n          </div>\n        </mat-tab>\n        <mat-tab label="Background Color">\n          <div class="ajf-style-panel">\n            <ajf-theme-color [section]="\'widget\'" [label]="\'background-color\'"></ajf-theme-color>\n          </div>\n        </mat-tab>\n      </mat-tab-group>\n      <div class="properties-container" *ngIf="(currentWidget.widgetType !== 8)">\n        <div class="ajf-layout-preview">\n          <div class="ajf-vbottom">\n            <div translate>height</div>\n            <div>{{ getHeightWidget|async }}</div>\n          </div>\n          <div class="ajf-margin-box">\n            <div class="ajf-top-label" translate>margin</div>\n            <div class="ajf-vtop">{{ getMarginWidgetTop|async }}</div>\n            <div class="ajf-vright">{{ getMarginWidgetRight|async }}</div>\n            <div class="ajf-vbottom">{{ getMarginWidgetBottom|async }}</div>\n            <div class="ajf-vleft">{{ getMarginWidgetLeft|async }}</div>\n            <div class="ajf-border-box">\n              <div class="ajf-vtop">{{ getBorderWidthWidgetTop|async }}</div>\n              <div class="ajf-vright">{{ getBorderWidthWidgetRight|async }}</div>\n              <div class="ajf-vbottom">{{ getBorderWidthWidgetBottom|async }}</div>\n              <div class="ajf-vleft">{{ getBorderWidthWidgetLeft|async }}</div>\n              <div class="ajf-vtl">{{ getBorderRadiusWidgetTopLeft|async }}</div>\n              <div class="ajf-vtr">{{ getBorderRadiusWidgetTopRight|async }}</div>\n              <div class="ajf-vbr">{{ getBorderRadiusWidgetBottomRight|async }}</div>\n              <div class="ajf-vbl">{{ getBorderRadiusWidgetBottomLeft|async }}</div>\n              <div class="ajf-top-label" translate>border</div>\n              <div class="ajf-padding-box">\n                <div class="ajf-top-label" translate>padding</div>\n                <div class="ajf-vtop">{{ getPaddingWidgetTop|async }}</div>\n                <div class="ajf-vright">{{ getPaddingWidgetRight|async }}</div>\n                <div class="ajf-vbottom">{{ getPaddingWidgetBottom|async }}</div>\n                <div class="ajf-vleft">{{ getPaddingWidgetLeft|async }}</div>\n                <div class="ajf-content-box" translate>content</div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <mat-grid-list rowHeight="2em" cols="12">\n          <mat-grid-tile></mat-grid-tile>\n          <mat-grid-tile class="ajf-lal" colspan="4">\n            <span>height</span>\n          </mat-grid-tile>\n          <mat-grid-tile colspan="7">\n            <mat-slider\n              (change)="setWidgetStyles(\'height\', $event.value)"\n              min="0"\n              max="200"\n              step="1"\n              [value]="getHeightWidget|async"\n              tickInterval="1"\n              thumbLabel>\n            </mat-slider>\n          </mat-grid-tile>\n        </mat-grid-list>\n        <mat-grid-list cols="12">\n          <mat-grid-tile>\n            <mat-icon *ngIf="!marginExpanded"\n                (click)="marginExpanded = !marginExpanded">keyboard_arrow_right</mat-icon>\n            <mat-icon *ngIf="marginExpanded"\n                (click)="marginExpanded = !marginExpanded">keyboard_arrow_down</mat-icon>\n          </mat-grid-tile>\n          <mat-grid-tile class="ajf-lal" colspan="4">\n            <span translate>margin</span>\n          </mat-grid-tile>\n          <mat-grid-tile colspan="7">\n            <mat-slider\n              [disabled]="marginExpanded"\n              (change)="setWidgetStyles(\'margin\', $event.value)"\n              min="-50"\n              max="50"\n              step="1"\n              [value]="getMarginWidgetTop|async"\n              tickInterval="auto"\n              thumbLabel>\n            </mat-slider>\n          </mat-grid-tile>\n        </mat-grid-list>\n        <ng-template [ngIf]="marginExpanded">\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>margin top</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetMargin(0, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getMarginWidgetTop|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>margin right</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetMargin(1, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getMarginWidgetRight|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>margin bottom</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetMargin(2, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getMarginWidgetBottom|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>margin left</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetMargin(3, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getMarginWidgetLeft|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n        </ng-template>\n        <mat-grid-list cols="12">\n          <mat-grid-tile>\n            <mat-icon *ngIf="!paddingExpanded"\n                (click)="paddingExpanded = !paddingExpanded">keyboard_arrow_right</mat-icon>\n            <mat-icon *ngIf="paddingExpanded"\n                (click)="paddingExpanded = !paddingExpanded">keyboard_arrow_down</mat-icon>\n          </mat-grid-tile>\n          <mat-grid-tile class="ajf-lal" colspan="4">\n            <span translate>padding</span>\n          </mat-grid-tile>\n          <mat-grid-tile colspan="7">\n            <mat-slider\n              (change)="setWidgetStyles(\'padding\', $event.value)"\n              min="-50"\n              max="50"\n              step="1"\n              [value]="getPaddingWidgetTop|async"\n              tickInterval="auto"\n              thumbLabel>\n            </mat-slider>\n          </mat-grid-tile>\n        </mat-grid-list>\n        <ng-template [ngIf]="paddingExpanded">\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>padding top</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetPadding(0, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getPaddingWidgetTop|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>padding right</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetPadding(1, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getPaddingWidgetRight|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>padding bottom</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetPadding(2, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getPaddingWidgetBottom|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>padding left</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetPadding(3, $event.value)"\n                min="-50"\n                max="50"\n                step="1"\n                [value]="getPaddingWidgetLeft|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n        </ng-template>\n        <mat-grid-list cols="12">\n          <mat-grid-tile>\n            <mat-icon *ngIf="!borderWidthExpanded"\n                (click)="borderWidthExpanded = !borderWidthExpanded">keyboard_arrow_right</mat-icon>\n            <mat-icon *ngIf="borderWidthExpanded"\n                (click)="borderWidthExpanded = !borderWidthExpanded">keyboard_arrow_down</mat-icon>\n          </mat-grid-tile>\n          <mat-grid-tile class="ajf-lal" colspan="4">\n            <span translate>border width</span>\n          </mat-grid-tile>\n          <mat-grid-tile colspan="7">\n            <mat-slider\n              (change)="setWidgetStyles(\'border-width\', $event.value)"\n              min="0"\n              max="10"\n              step="1"\n              [value]="getBorderWidthWidgetTop|async"\n              tickInterval="1"\n              thumbLabel>\n            </mat-slider>\n          </mat-grid-tile>\n        </mat-grid-list>\n        <ng-template [ngIf]="borderWidthExpanded">\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border width top</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderWidth(0, $event.value)"\n                min="1"\n                max="10"\n                step="1"\n                [value]="getBorderWidthWidgetTop|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border width right</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderWidth(1, $event.value)"\n                min="1"\n                max="10"\n                step="1"\n                [value]="getBorderWidthWidgetRight|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border width bottom</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderWidth(2, $event.value)"\n                min="1"\n                max="10"\n                step="1"\n                [value]="getBorderWidthWidgetBottom|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border width left</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderWidth(3, $event.value)"\n                min="1"\n                max="10"\n                step="1"\n                [value]="getBorderWidthWidgetLeft|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n        </ng-template>\n        <mat-grid-list cols="12">\n          <mat-grid-tile>\n            <mat-icon *ngIf="!borderRadiusExpanded"\n                (click)="borderRadiusExpanded = !borderRadiusExpanded">keyboard_arrow_right</mat-icon>\n            <mat-icon *ngIf="borderRadiusExpanded"\n                (click)="borderRadiusExpanded = !borderRadiusExpanded">keyboard_arrow_down</mat-icon>\n          </mat-grid-tile>\n          <mat-grid-tile class="ajf-lal" colspan="4">\n            <span translate>border radius</span>\n          </mat-grid-tile>\n          <mat-grid-tile colspan="7">\n            <mat-slider\n              (change)="setWidgetStyles(\'border-radius\', $event.value)"\n              min="0"\n              max="100"\n              step="1"\n              tickInterval="10"\n              thumbLabel>\n            </mat-slider>\n          </mat-grid-tile>\n        </mat-grid-list>\n        <ng-template [ngIf]="borderRadiusExpanded">\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border radius top left</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderRadius(0, $event.value)"\n                min="1"\n                max="100"\n                step="1"\n                [value]="getBorderRadiusWidgetTopLeft|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border radius top right</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderRadius(1, $event.value)"\n                min="1"\n                max="100"\n                step="1"\n                [value]="getBorderRadiusWidgetTopRight|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border radius bottom left</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderRadius(2, $event.value)"\n                min="1"\n                max="100"\n                step="1"\n                [value]="getBorderRadiusWidgetBottomLeft|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n          <mat-grid-list cols="12">\n            <mat-grid-tile></mat-grid-tile>\n            <mat-grid-tile class="ajf-lal" colspan="4">\n              &nbsp;&nbsp;<span translate>border radius bottom right</span>\n            </mat-grid-tile>\n            <mat-grid-tile colspan="7">\n              <mat-slider\n                (change)="setWidgetBorderRadius(3, $event.value)"\n                min="1"\n                max="100"\n                step="1"\n                [value]="getBorderRadiusWidgetBottomRight|async"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-grid-tile>\n          </mat-grid-list>\n        </ng-template>\n      </div>\n      <div class="properties-container" *ngIf="currentWidget.widgetType === 2">\n        <mat-grid-list cols="12">\n          <mat-grid-tile></mat-grid-tile>\n          <mat-grid-tile class="ajf-lal" colspan="3">\n            <span translate>font size</span>\n          </mat-grid-tile>\n          <mat-grid-tile colspan="7">\n            <mat-slider\n              (change)="setWidgetStyles(\'font-size\', $event.value);"\n              min="1"\n              max="150"\n              step="1"\n              [value]="getFontSizeWidget|async"\n              tickInterval="1"\n              thumbLabel>\n            </mat-slider>\n          </mat-grid-tile>\n        </mat-grid-list>\n      </div>\n      <ng-template [ngIf]="currentWidget.widgetType === 5">\n        <br>\n        <form>\n          <mat-form-field>\n            <input\n              matInput\n              [placeholder]="\'Font size\' | translate"\n              [value]="getFontSizeWidget|async"\n              [(ngModel)]="fontSize"\n              [ngModelOptions]="{standalone: true}"\n              (change)="setWidgetStyles(\'font-size\', fontSize)">\n          </mat-form-field>\n          <mat-select\n              (selectionChange)="setWidgetStyles(\'font-style\', $event.value)"\n              [placeholder]="\'Font style\' | translate">\n            <mat-option translate value="normal">Normal</mat-option>\n            <mat-option translate value="italic">Italic</mat-option>\n            <mat-option translate value="oblique">Oblique</mat-option>\n          </mat-select>\n          <mat-select\n              (selectionChange)="setWidgetStyles(\'text-align\', $event.value)"\n              [placeholder]="\'Align\' | translate">\n            <mat-option translate value="center">Center</mat-option>\n            <mat-option translate value="left">Left</mat-option>\n            <mat-option translate value="right">Right</mat-option>\n          </mat-select>\n        </form>\n      </ng-template>\n      <h1>\n        <ng-container translate>properties of</ng-container>\n        {{ widgetName }}\n      </h1>\n    </div>\n    <div [ngSwitch]="currentWidget.widgetType">\n      <ng-template [ngSwitchCase]="0">\n        <h1 translate>Column</h1>\n        <ng-template ngFor let-col [ngForOf]="currentLayoutWidget.columns" let-idx="index">\n          <mat-toolbar>\n              <mat-toolbar-row *ngIf="col !== -1">\n                <mat-grid-list cols="12">\n                  <mat-grid-tile colspan="1">\n                    {{idx + 1}}\n                  </mat-grid-tile>\n                  <mat-grid-tile colspan="9">\n                    <mat-slider\n                      style="width: 90%;"\n                      min="0.1"\n                      max="1"\n                      step="0.01"\n                      value="{{col}}"\n                      thumb-label="true"\n                      tick-interval="true"\n                      (change)="instantColumnValue($event.value,idx)">\n                    </mat-slider>\n                    {{percent(col)}}%\n                  </mat-grid-tile>\n                  <mat-grid-tile colspan="2">\n                    <button style="width: 5%;" mat-button (click)="fixedColumn(idx)">fixed</button>\n                  </mat-grid-tile>\n                </mat-grid-list>\n              </mat-toolbar-row>\n              <mat-toolbar-row *ngIf="col == -1">\n                <mat-grid-list cols="12">\n                  <mat-grid-tile colspan="1">\n                    {{idx + 1}}\n                  </mat-grid-tile>\n                  <mat-grid-tile colspan="11">\n                    <button  style="width: 90%;" mat-button (click)="unfixedColumn(idx)">percent</button>\n                  </mat-grid-tile>\n                </mat-grid-list>\n              </mat-toolbar-row>\n          </mat-toolbar>\n        </ng-template>\n        <mat-toolbar>\n          <mat-toolbar-row>\n            <button mat-button\n                translate\n                (click)="addColumn()"\n                *ngIf="currentLayoutWidget.columns.length < 10">Add column</button>\n          </mat-toolbar-row>\n        </mat-toolbar>\n      </ng-template>\n      <ng-template [ngSwitchCase]="2">\n        <ajf-image-group (formulaClick)="openFormulaDialog($event)" [data]="iconSet"></ajf-image-group>\n        <ajf-image-group (formulaClick)="openFormulaDialog($event)" [data]="flagSet"></ajf-image-group>\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\n        <input\n            mat-input\n            [placeholder]="\'paste a link\' | translate"\n            style="width: 100%;"\n            [(ngModel)]="imageUrl">\n        <button mat-button (click)="setImageUrl()"\n            translate>Set image</button>\n      </ng-template>\n      <ng-template [ngSwitchCase]="3">\n        <div style="width:500px;">\n          <ajf-quill-editor\n            [(ngModel)]="currentTextWidget.htmlText"\n            [modules]="getModule()"\n            [maxLength]="200"\n            [theme]="bubble"\n            [initHTML]="(getHTML|async) || \'\'"\n            (formulaClick)="openFormulaDialog($event)">\n          </ajf-quill-editor>\n        </div>\n      </ng-template>\n      <ng-template [ngSwitchCase]="4">\n        <h3 translate>Choose type of Chart</h3>\n        <mat-button-toggle-group class="ajf-chart-buttons">\n          <div class="ajf-row">\n            <mat-button-toggle\n              value="reportbuilder-linechart"\n              (click)="setChartType(0)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-linechart">\n              </mat-icon>\n            </mat-button-toggle>\n            <mat-button-toggle\n              value="reportbuilder-barchartvertical"\n              (click)="setChartType(1)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-barchartvertical">\n              </mat-icon>\n              </mat-button-toggle>\n            <mat-button-toggle\n                value="reportbuilder-bubblechart"\n                (click)="setChartType(8)">\n                <mat-icon\n                  fontSet="ajf-icon"\n                  fontIcon="reportbuilder-bubblechart">\n                </mat-icon>\n              </mat-button-toggle>\n          </div>\n          <div class=row>\n            <mat-button-toggle\n              value="reportbuilder-barcharthorizontal"\n              (click)="setChartType(2)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-barcharthorizontal">\n              </mat-icon>\n            </mat-button-toggle>\n            <mat-button-toggle\n              value="reportbuilder-radarchart"\n              (click)="setChartType(3)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-radarchart">\n              </mat-icon>\n            </mat-button-toggle>\n             <mat-button-toggle\n              value="reportbuilder-barchartvertical"\n              (click)="setChartType(1)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-barchartvertical">\n              </mat-icon>\n            </mat-button-toggle>\n          </div>\n          <div class="ajf-row">\n            <mat-button-toggle\n              value="reportbuilder-scatterchart"\n              (click)="setChartType(4)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-scatterchart">\n              </mat-icon>\n            </mat-button-toggle>\n            <mat-button-toggle\n              value="reportbuilder-polarareachart"\n              (click)="setChartType(5)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-polarareachart">\n              </mat-icon>\n            </mat-button-toggle>\n          </div>\n          <div class="ajf-row">\n            <mat-button-toggle\n              value="reportbuilder-piechart"\n              (click)="setChartType(6)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-piechart">\n              </mat-icon>\n            </mat-button-toggle>\n            <mat-button-toggle\n              value="reportbuilder-donoughtchart"\n              (click)="setChartType(7)">\n              <mat-icon\n                fontSet="ajf-icon"\n                fontIcon="reportbuilder-donoughtchart">\n              </mat-icon>\n            </mat-button-toggle>\n          </div>\n        </mat-button-toggle-group>\n        <h3 translate>Labels</h3>\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\n        <ajf-theme-color [section]="\'chart\'" [label]="tabValue"></ajf-theme-color>\n          <mat-card>\n            <mat-card-header>\n              <mat-card-title>Border width</mat-card-title>\n            </mat-card-header>\n            <mat-card-content>\n              <mat-slider\n                min="1"\n                max="100"\n                style="width:99%;"\n                step="1"\n                (change)="setChartBorderColor($event.value)"\n                [value]="chartBorderWidth"\n                tickInterval="auto"\n                thumbLabel>\n              </mat-slider>\n            </mat-card-content>\n          </mat-card>\n          <mat-tab-group (selectChange)="setTab($event)">\n            <mat-tab label="Background">\n              <mat-list>\n                <ng-template ngFor let-color [ngForOf]="(getChartBackgroundColor|async)" let-idx="index">\n                  <mat-list-item>\n                    <span [style.background]="color">\n                      {{ color }}\n                    </span>\n                    <button mat-button translate\n                        (click)="removeChartBackgroundColor(idx)">Remove</button>\n                  </mat-list-item>\n                </ng-template>\n              </mat-list>\n            </mat-tab>\n            <mat-tab label="Border">\n              <mat-list>\n                <ng-template ngFor let-color [ngForOf]="(getChartBorderColor|async)" let-idx="index">\n                  <mat-list-item>\n                    <span [style.background]="color">\n                      {{ color }}\n                    </span>\n                    <button mat-button (click)="removeChartBorderColor(idx)">remove</button>\n                  </mat-list-item>\n                </ng-template>\n              </mat-list>\n            </mat-tab>\n          </mat-tab-group>\n      </ng-template>\n      <ng-template [ngSwitchCase]="5">\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\n      </ng-template>\n    </div>\n    <button mat-button\n        (click)="visibilitySection = !visibilitySection"\n        [ngClass]="{\'ajf-selected\': visibilitySection}">\n      {{ widgetName }}\n      <ng-container translate>Visibility</ng-container>\n    </button>\n    <div [style.display]="visibilitySection ? \'block\' : \'none\'">\n      <ajf-report-builder-condition-editor [visibility]="currentWidget.visibility"></ajf-report-builder-condition-editor>\n    </div>\n  </div>\n</ng-template>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-properties .ajf-selected{background-color:darkred;color:#fff}ajf-report-builder-properties .ajf-style-container{height:auto;width:100%;position:relative;margin-bottom:60px;text-align:center}ajf-report-builder-properties .ajf-style-container mat-tab-group .ajf-style-panel{min-height:350px}ajf-report-builder-properties .ajf-style-container .ajf-style-background,ajf-report-builder-properties .ajf-style-container .ajf-style-color{width:100%;height:350px;position:relative;margin:30px}ajf-report-builder-properties .ajf-style-container .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-properties .ajf-style-container mat-tab-group .mat-tab-body-wrapper,ajf-report-builder-properties .ajf-style-container mat-tab-group .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-properties .ajf-content{margin-top:10px;margin-right:15px;margin-bottom:290px;margin-left:15px}ajf-report-builder-properties .ajf-content .ajf-menu-css{width:100% !important;font-size:10px !important}ajf-report-builder-properties .ajf-content .ajf-menu-css mat-button-toggle{width:33% !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group{width:100% !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group mat-button-toggle{width:auto !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group mat-button-toggle mat-icon{margin:15px}ajf-report-builder-properties button{width:100%;margin-bottom:30px}ajf-report-builder-properties .ajf-hide-menu{width:auto !important}ajf-report-builder-properties h1,ajf-report-builder-properties h3,ajf-report-builder-properties h5{text-align:center}ajf-report-builder-properties .ajf-row{display:flex;flex-direction:column;width:100%}ajf-report-builder-properties .mat-tab-body.mat-tab-active{min-height:600px}ajf-report-builder-properties mat-grid-list{width:100%}ajf-report-builder-properties mat-grid-tile{overflow:visible !important}ajf-report-builder-properties mat-grid-tile.ajf-lal{text-align:left}ajf-report-builder-properties .ajf-chart-buttons mat-icon{font-size:15px}ajf-report-builder-properties .ajf-layout-preview{background-color:#fff;width:100%;font-size:.9em;box-sizing:border-box;position:relative}ajf-report-builder-properties .ajf-layout-preview .ajf-top-label{position:absolute;top:1em;left:1em;text-align:left}ajf-report-builder-properties .ajf-layout-preview .ajf-vtop{position:absolute;top:1em;right:0;left:0}ajf-report-builder-properties .ajf-layout-preview .ajf-vbottom{position:absolute;bottom:0;right:0;left:0}ajf-report-builder-properties .ajf-layout-preview .ajf-vright{position:absolute;top:50%;right:1em;margin-top:.5em}ajf-report-builder-properties .ajf-layout-preview .ajf-vleft{position:absolute;top:50%;left:1em;margin-top:.5em}ajf-report-builder-properties .ajf-layout-preview .ajf-vtl{position:absolute;top:1em;left:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vtr{position:absolute;top:1em;right:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vbl{position:absolute;bottom:1em;left:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vbr{position:absolute;bottom:1em;right:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box{background-color:#fff;padding:3em;position:relative;border:solid 1px #ccc}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box{background-color:#ddd;padding:3em;position:relative;box-sizing:border-box}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box>.ajf-top-label{left:4em}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box .ajf-padding-box{padding:3em;background-color:#aaa;position:relative;box-sizing:border-box}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box .ajf-padding-box .ajf-content-box{background-color:#888;padding:2em;text-align:center;box-sizing:border-box}\n"]}]}],J.ctorParameters=function(){return[{type:m.MatDialog},{type:R}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var G=function(){function t(t,e,n){var r=this;this._elementRef=t,this._renderer=e,this._service=n,this.emptyArray=[],this._init=!1,this.dateFormats=[{label:"June 23rd 2017, 12:39:12 pm",value:"MMMM Do YYYY, h:mm:ss a",validator:"MMMMDoYYYYhmmssa"},{label:"Friday",value:"dddd",validator:"dddd"},{label:"Jun 23rd 17",value:"MMM Do YY",validator:"MMMDoYY"}],this.fonts=[!1,"blackr","black-italic","bold","bold-condensed","bold-condensed-italic","bold-italic","condensed","condensed-italic","italic","light","light-italic","medium","medium-italic","thinr","thin-italic"],this.defaultModules={formula:!0,toolbar:[["formula"],["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:this.emptyArray.slice()},{background:this.emptyArray.slice()}],[{font:this.fonts}],[{align:this.emptyArray.slice()}],["clean"]]},this.font=O.import("formats/font"),this.editorCreated=new d.EventEmitter,this.contentChanged=new d.EventEmitter,this.selectionChanged=new d.EventEmitter,this.formulaClick=new d.EventEmitter,this.onModelChange=function(){},this.onModelTouched=function(){},this._formulas=[],this._formulaTextSub=D.Subscription.EMPTY,this.font.whitelist=this.fonts,this.font.whitelist.push("regular"),this._formulaTextSub=this._service.getFormulaToHtmlEvent().subscribe((function(t){if(void 0!==t.reference){t.reference.innerHTML=t.formula,r._renderer.setAttribute(t.reference,"formula",t.formula);var e=r._formulas.filter((function(e){return e.formula===t.reference})),n=void 0,i=void 0;e.length>0?null!=(i=(n=e[0]).unlisten)&&i():r._formulas.push(n={formula:t.reference,unlisten:null}),n.unlisten=r._renderer.listen(t.reference,"click",(function(){r.formulaClick.emit({formula:t.formula,reference:t.reference})}))}else{var o=r._elementRef.nativeElement.querySelector(".ajf-ql-editor"),a=r._renderer.createElement("a");r._renderer.setAttribute(a,"href","javascript:void(0)"),r._renderer.setStyle(a,"cursor","pointer"),r._renderer.setAttribute(a,"formula",r.check(t.formula));var s=r._renderer.createText(t.formula);r._renderer.appendChild(a,s),i=r._renderer.listen(a,"click",(function(e){var n={formula:r.check(t.formula),reference:a};r.formulaClick.emit(n)})),r._renderer.appendChild(o,a),r._formulas.push({unlisten:i,formula:a})}}))}return t.prototype.check=function(t){for(var e=0;e<this.dateFormats.length;e++)if(this.dateFormats[e].value==t)return this.dateFormats[e].validator;return t},t.prototype.setHTML=function(){this.writeValue(this.initHTML)},t.prototype.ngAfterViewInit=function(){var t=this,e=this._elementRef.nativeElement.querySelector("[ajf-quill-editor-toolbar]"),n=this.modules||this.defaultModules;O.register(this.font,!0),e&&(n.toolbar=e,n.formula=!0),this._elementRef.nativeElement.insertAdjacentHTML("beforeend","<div quill-editor-element></div>"),this.editorElem=this._elementRef.nativeElement.querySelector("[quill-editor-element]"),this.quillEditor=new O(this.editorElem,{modules:n,placeholder:this.placeholder||"Insert text here ...",readOnly:this.readOnly||!1,theme:this.theme||"snow",formats:this.formats}),this.editorCreated.emit(this.quillEditor),this.setHTML(),this.quillEditor.on("selection-change",(function(e,n,r){t.selectionChanged.emit({editor:t.quillEditor,range:e,oldRange:n,source:r}),e||t.onModelTouched()})),this.quillEditor.on("text-change",(function(e,n,r){var i=t.editorElem.children[0].innerHTML,o=t.quillEditor.getText();"<p><br></p>"===i&&(i=null),t.onModelChange(i),t.contentChanged.emit({editor:t.quillEditor,html:i,text:o,delta:e,oldDelta:n,source:r})}));var r=this._elementRef.nativeElement.querySelector(".ajf-ql-formula");this.listenFunc=this._renderer.listen(r,"click",(function(e){t.formulaClick.emit()}))},t.prototype.writeValue=function(t){var e=this;if(this.content=t,this.quillEditor){if(t)return void(t!=this.initHTML||this._init?t!=this.initHTML&&this.quillEditor.pasteHTML(t):(this._elementRef.nativeElement.querySelector(".ajf-ql-editor").innerHTML=this.initHTML,this._elementRef.nativeElement.querySelectorAll("[formula]").forEach((function(t){var n=e._renderer.listen(t,"click",(function(n){var r={formula:e.check(t.innerText),reference:t};e.formulaClick.emit(r)}));e._renderer.setStyle(t,"cursor","pointer"),e._formulas.push({unlisten:n,formula:t}),e._init=!0}))));this.quillEditor.setText("")}},t.prototype.registerOnChange=function(t){this.onModelChange=t},t.prototype.registerOnTouched=function(t){this.onModelTouched=t},t.prototype.validate=function(t){if(!this.quillEditor)return null;var e={},n=!0,r=this.quillEditor.getText().trim().length;return this.minLength&&(e.minLengthError={given:r,minLength:this.minLength},n=r>=this.minLength||!r),this.maxLength&&(e.maxLengthError={given:r,maxLength:this.maxLength},n=r<=this.maxLength&&n),n?null:e},t.prototype.ngOnChanges=function(t){t.readOnly&&this.quillEditor&&this.quillEditor.enable(!t.readOnly.currentValue),t.modules&&this.quillEditor&&(O.register(this.font,!0),this.quillEditor=new O(this.editorElem,{modules:t.modules.currentValue,placeholder:this.placeholder||"Insert text here ...",readOnly:this.readOnly||!1,theme:this.theme||"snow",formats:this.formats}),this._elementRef.nativeElement.children[0].remove())},t.prototype.ngOnDestroy=function(){for(var t=0;t<this._formulas.length;t++){var e=this._formulas[t].unlisten;null!=e&&e()}this._formulaTextSub.unsubscribe()},t}();G.decorators=[{type:d.Component,args:[{selector:"ajf-quill-editor",template:'\n    <ng-content select="[ajf-quill-editor-toolbar]"></ng-content>\n  ',providers:[{provide:u.NG_VALUE_ACCESSOR,useExisting:d.forwardRef((function(){return G})),multi:!0},{provide:u.NG_VALIDATORS,useExisting:d.forwardRef((function(){return G})),multi:!0}],encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-quill-editor .ajf-ql-container .ajf-ql-editor{min-height:200px;width:500px !important;padding-bottom:50px}\n"]}]}],G.ctorParameters=function(){return[{type:d.ElementRef},{type:d.Renderer2},{type:R}]},G.propDecorators={theme:[{type:d.Input}],modules:[{type:d.Input}],readOnly:[{type:d.Input}],placeholder:[{type:d.Input}],maxLength:[{type:d.Input}],minLength:[{type:d.Input}],formats:[{type:d.Input}],initHTML:[{type:d.Input}],editorCreated:[{type:d.Output}],contentChanged:[{type:d.Output}],selectionChanged:[{type:d.Output}],formulaClick:[{type:d.Output}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var K=function(){function t(t){this._service=t,this.onDragged=!1,this.currentContentWidget=null,this._onDraggedSub=D.Subscription.EMPTY}return Object.defineProperty(t.prototype,"widgetTypes",{get:function(){return E.AjfWidgetType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layoutWidget",{get:function(){return this.widget},enumerable:!1,configurable:!0}),t.prototype.canDropPredicate=function(t){for(var e=0;e<t.data.dropZones.length;e++)if(["header","widget"].indexOf(t.data.dropZones[e])>-1)return!0;return!1},t.prototype.onDragStartHandler=function(){var t=this,e=D.timer(200).subscribe((function(){e.unsubscribe(),t._service.dragStarted()}))},t.prototype.onDragEndHandler=function(){this._service.dragEnded()},t.prototype.getColumnContent=function(){return this.widget.content},t.prototype.getIcon=function(){var t=this.widget;return null==t.icon?null:k.evaluateExpression(t.icon.formula)||{fontSet:"",fontIcon:""}},t.prototype.getFlag=function(){var t=this.widget;return null==t.flag?null:k.evaluateExpression(t.flag.formula)||"ch"},t.prototype.getPercent=function(t){return(100*this.widget.columns[t]).toString()+"%"},t.prototype.getImageUrl=function(){var t=this.widget;return null==t.url?null:k.evaluateExpression(t.url.formula)||""},t.prototype.getImageType=function(){return null!=this.widget?this.widget.imageType:P.AjfImageType.Image},t.prototype.getHtmlText=function(){var t=this.widget;return""===t.htmlText?"...":t.htmlText},t.prototype.getCoordinate=function(){var t=this.widget;return null==t.coordinate?[51.505,-.09,13]:t.coordinate},t.prototype.getTileLayer=function(){var t=this.widget;return""===t.tileLayer?"http://{s}.tile.osm.org/{z}/{x}/{y}.png":t.tileLayer},t.prototype.getAttribution=function(){var t;return""===(t=this.widget).attribution?"&copy; <a href='http://osm.org/copyright'>O</a> contributors":t.attribution},t.prototype.addToList=function(t,e){this.onDragEndHandler(),this._service.addToColumn(t,e)},t.prototype.ngOnInit=function(){var t=this;this._onDraggedSub=this._service.onDragged.subscribe((function(e){t.onDragged=e})),this.getChartType=this._service.currentWidget.pipe(M.map((function(e){return null==e?0:t.widget.chartType})),M.distinctUntilChanged(),M.startWith(0)),this.getDataset=this._service.currentWidget.pipe(M.map((function(e){return null!=e&&null!=e.dataset?t.widget.dataset:[]})),M.distinctUntilChanged()),this.getTableTitles=this._service.currentWidget.pipe(M.map((function(e){if(null==e)return[];var n=t.widget;if(null!=n.dataset){for(var r=[],i=0;i<n.dataset.length;i++)null!=n.dataset[i][0]&&r.push(n.dataset[i][0].label||"");return r}return[]}))),this.getTableContent=this._service.currentWidget.pipe(M.map((function(e){if(null==e)return[];var n=t.widget;if(null!=n.dataset){for(var r=[],i=0;i<n.dataset.length;i++)for(var o=0;o<n.dataset[i].length;o++)null!=n.dataset[i]&&null!=n.dataset[i][o+1]&&(null==r[o]&&(r[o]=[]),null==r[o][i]&&(r[o][i]=" "),r[o].splice(i,1,n.dataset[i][o+1].label||""));return r}return[]}))),this._service.updateCurrentWidget(this.widget)},t.prototype.ngOnChanges=function(t){t.widget&&null!=t.widget.currentValue&&(this.widget=t.widget.currentValue)},t.prototype.ngOnDestroy=function(){this._onDraggedSub.unsubscribe()},t}();K.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-renderer-widget",template:'<div class="ajf-container"\n    [ngSwitch]="widget?.widgetType"\n    [ngClass]="{\'ajf-drag-mode\': (onDragged || fixedZoom)}">\n  <div *ngSwitchCase="widgetTypes.Layout" class="ajf-row ajf-layout"\n    [applyStyles]="widget.styles">\n      <div class="ajf-columns">\n        <ng-template ngFor let-clm [ngForOf]="getColumnContent()" let-idx="index">\n          <div class="ajf-column"\n            [ngClass]="{\'ajf-fixed\': layoutWidget.columns[idx] == -1}"\n            [style.width]=getPercent(idx)\n            [applyStyles]="layoutWidget.content[idx].styles">\n            <ajf-report-builder-widgets-row-buttons\n              [from]="\'layout\'"\n              [fromWidget]="widget"\n              [widget]="clm"\n              [position]="idx"\n              (onDragStart)="onDragStartHandler();"\n              (onDragEnd)="onDragEndHandler();"\n              [child]="true">\n            </ajf-report-builder-widgets-row-buttons>\n            <ajf-column\n              [column]="clm"\n              [applyStyles]="widget.styles">\n            </ajf-column>\n            <ng-template [ngIf]="onDragged === true">\n              <div cdkDropList\n                [cdkDropListEnterPredicate]="canDropPredicate"\n                [style.display]="onDragged ? \'block\' : \'none\'"\n                (cdkDropListDropped)="addToList($event, clm)"\n                class="ajf-column-drop-zone"\n                (dragover)="layoutShow = true;"\n                (dragleave)="layoutShow = false;">\n              </div>\n            </ng-template>\n          </div>\n        </ng-template>\n      </div>\n  </div>\n  <div *ngSwitchCase="widgetTypes.Image" class="ajf-row">\n    <ajf-image\n      [applyStyles]="widget.styles"\n      [type]="getImageType()"\n      [imageUrl]="getImageUrl()"\n      [icon]="getIcon()"\n      [flag]="getFlag()">\n    </ajf-image>\n  </div>\n  <div *ngSwitchCase="widgetTypes.Text" class="ajf-row ajf-text">\n    <ajf-text [htmlText]="getHtmlText() | translate"  [applyStyles]="widget.styles"></ajf-text>\n  </div>\n  <div *ngSwitchCase="widgetTypes.Chart" class="ajf-row" [applyStyles]="widget.styles">\n  </div>\n  \x3c!-- <div *ngSwitchCase="widgetTypes.Table" class="ajf-row" [applyStyles]="widget.styles">\n    <ajf-table *ngIf="getTableContent|async as tc" [data]="tc!" ></ajf-table>\n  </div> --\x3e\n  <div *ngSwitchCase="widgetTypes.Map" class="ajf-row" [applyStyles]="widget.styles">\n    <ajf-map [coordinate]="getCoordinate()" [tileLayer]="getTileLayer()" [attribution]="getAttribution()">\n    </ajf-map>\n  </div>\n</div>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-layout{border:none !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row{border:9px solid blue;border-radius:36px;height:100%}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns{border:9px solid red !important;height:100%;margin-bottom:20px;padding-bottom:20px;padding-top:20px}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-fixed{border:9px solid #ff0 !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column{border:9px solid #9acd32;margin-left:10px;margin-right:10px;border-radius:36px;height:100%}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column ajf-report-builder-widgets-row-buttons{visibility:visible !important;display:block !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column .ajf-container{min-height:50px}ajf-report-builder-renderer-widget .ajf-container{height:inherit;display:block;min-height:50px}ajf-report-builder-renderer-widget .ajf-row-button{width:100%}ajf-report-builder-renderer-widget .ajf-container:hover{border:3px dotted blue;border-radius:16px;opacity:1;min-height:50px}ajf-report-builder-renderer-widget .ajf-on-dragged{border:23px dotted blue}ajf-report-builder-renderer-widget .ajf-selected{background-color:red}ajf-report-builder-renderer-widget .ajf-show,ajf-report-builder-renderer-widget .ajf-on-drag-over{border:33px dotted blue;opacity:1 !important;z-index:10}ajf-report-builder-renderer-widget .ajf-no-obj{max-width:200px;max-height:200px;width:auto;height:auto}ajf-report-builder-renderer-widget .ajf-row{display:flex;flex-direction:column;height:100%}ajf-report-builder-renderer-widget .ajf-columns{display:flex;flex-direction:row}ajf-report-builder-renderer-widget .ajf-column{min-height:50px}ajf-report-builder-renderer-widget .ajf-column ajf-report-builder-widgets-row-buttons{visibility:hidden !important;display:none !important}ajf-report-builder-renderer-widget .ajf-column:hover{border:3px dashed #9acd32;border-radius:16px}ajf-report-builder-renderer-widget .ajf-column:hover ajf-report-builder-widgets-row-buttons{visibility:visible !important;display:block !important}ajf-report-builder-renderer-widget .ajf-column:hover .ajf-container{min-height:50px}ajf-report-builder-renderer-widget .ajf-fixed:hover{border:3px dashed red !important}ajf-report-builder-renderer-widget .ajf-fixed{min-width:100px}ajf-report-builder-renderer-widget .ajf-column-drop-zone{margin:10%;height:50px;background-color:#fff;border:9px solid rgba(66,134,244,.6);border-radius:16px}ajf-report-builder-renderer-widget .ajf-text{min-height:20px}ajf-report-builder-renderer-widget ajf-map{z-index:30}ajf-report-builder-renderer-widget ajf-column{width:100%}ajf-report-builder-renderer-widget button{width:100%}ajf-report-builder-renderer-widget mat-list{height:100%;padding:0}ajf-report-builder-renderer-widget .ajf-ui.ajf-fluid.ajf-image{max-width:100%;height:auto}ajf-report-builder-renderer-widget .ajf-column-right{float:right;width:33%;background-color:#8b4513}ajf-report-builder-renderer-widget .ajf-column-center{display:inline-block;width:33%;background-color:olive}\n"]}]}],K.ctorParameters=function(){return[{type:R}]},K.propDecorators={widget:[{type:d.Input}],position:[{type:d.Input}],section:[{type:d.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Q=function(){function t(t){this._service=t,this._init=!1}return Object.defineProperty(t.prototype,"report",{get:function(){return this._report},set:function(t){null!=t&&(this._report=t,this._init&&this._setCurrentReport())},enumerable:!1,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._setCurrentReport(),this._init=!0},t.prototype._setCurrentReport=function(){this._service.setReportForms(null!=this.report&&this.report.forms||[]),this._service.setReport(this.report)},t}();Q.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder",template:'<ajf-report-builder-toolbar (addClick)="start.toggle()"></ajf-report-builder-toolbar>\n<ajf-report-builder-custom-widgets-toolbar (addClick)="start.toggle()"></ajf-report-builder-custom-widgets-toolbar>\n<mat-drawer-container>\n    <mat-drawer #start position="start" mode="side" class="ajf-builder-sidebar">\n        <ajf-report-builder-widgets-toolbar></ajf-report-builder-widgets-toolbar>\n    </mat-drawer>\n    <ajf-report-builder-content></ajf-report-builder-content>\n    <mat-drawer #end position="end" mode="side" class="ajf-builder-prop" [opened]="true">\n      <ajf-report-builder-properties></ajf-report-builder-properties>\n    </mat-drawer>\n</mat-drawer-container>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder{display:block;position:relative;width:100%;height:100%;overflow:hidden}ajf-report-builder mat-sidenav-container{height:100%}ajf-report-builder mat-sidenav-container .ajf-builder-sidebar{max-width:7%}ajf-report-builder mat-sidenav-container .ajf-builder-prop{max-width:30%}\n"]}]}],Q.ctorParameters=function(){return[{type:R}]},Q.propDecorators={startSidenav:[{type:d.ViewChild,args:[v.MatSidenav,{static:!0}]}],report:[{type:d.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var X=function(){function t(t,e){this._service=t,this._dialogRef=e,this.currentWidget=null,this.currentColor="rgb(255,255,255,0)",this.section="color",this._currentWidgetSub=D.Subscription.EMPTY}return t.prototype.setWidgetStyles=function(t){this._service.setWidgetStyles(this.section,t),this.currentColor=t,this.setStyle()},t.prototype.setStyle=function(){null!=this.currentWidget&&(this.currentWidget.styles=I.deepCopy(this.currentWidget.styles),this._service.updateCurrentWidget(this.currentWidget))},t.prototype.addCustomColor=function(){this._service.addCustomColor(this.currentColor),this._service.updateCurrentWidget(this.currentWidget),this._dialogRef.close()},t.prototype.close=function(){this._dialogRef.close()},t.prototype.ngOnInit=function(){var t=this;this._currentWidgetSub=this._service.currentWidget.subscribe((function(e){null!==e?t.currentWidget!==e&&(t.currentWidget=e):t.currentWidget=null}))},t.prototype.ngAfterViewInit=function(){this.elem.nativeElement.children[1].firstElementChild.style.position="initial"},t.prototype.ngOnDestroy=function(){this._currentWidgetSub.unsubscribe()},t}();X.decorators=[{type:d.Component,args:[{selector:"theme-color-dialog",template:'<div mat-dialog-content #colorpic>\n   <input\n          [hidden]=false\n          [colorPicker]="currentColor"\n          [style.background]="currentColor"\n          [value]="currentColor"\n          [cpDialogDisplay]="\'inline\'"\n          [cpPosition]="\'top\'"\n          [cpToggle]="true"\n          [cpWidth]="\'400px\'"\n          [cpOutputFormat]="\'rgba\'"\n          (colorPickerChange)="setWidgetStyles($event)"/>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)="addCustomColor()">Save color</button>\n</div>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush}]}],X.ctorParameters=function(){return[{type:R},{type:m.MatDialogRef}]},X.propDecorators={elem:[{type:d.ViewChild,args:["colorpic",{static:!0}]}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var tt=function(){function t(t,e){this._service=t,this.dialog=e,this.currentWidget=null,this.alphaColor=1,this.styleBackgroundColor="rgb(255,255,255,0)",this.styleColor="rgb(0,0,0,0)",this._colorsSub=D.Subscription.EMPTY,this._currentWidgetSub=D.Subscription.EMPTY,this._originSub=D.Subscription.EMPTY,this._headerStyleSub=D.Subscription.EMPTY,this._contentStylesSub=D.Subscription.EMPTY,this._footerStylesSub=D.Subscription.EMPTY}return t.prototype.setStyles=function(t){switch(this.section){case"widget":this.setWidgetStyles(t);break;case"report":this.setReportStyles(t);break;case"section":this.setSectionStyles(t);break;case"chart":this.setChartStyle(t)}},t.prototype.setChartStyle=function(t){"backgroundColor"===this.label?this.addChartBackgroundColor(t):this.addChartBorderColor(t)},t.prototype.setAlphaColor=function(t){t=t.toFixed(2);for(var e=0;e<this.colors.length;e++){var n=this.colors[e].lastIndexOf(",");this.colors[e]=this.colors[e].substring(0,n)+","+t+")"}},t.prototype.setWidgetStyles=function(t){"chart"===this.section?this.setChartStyle(t):(this._service.setWidgetStyles(this.label,t),this.currentColor=t,this.setStyle())},t.prototype.setSectionStyles=function(t){this._service.setSectionStyles(this.origin,this.label,t),this.styleColor=t},t.prototype.setReportStyles=function(t){this._service.setReportStyles(this.label,t),this.styleBackgroundColor=t},t.prototype.addChartBackgroundColor=function(t){this._service.addChartBackgroundColor(t)},t.prototype.addChartBorderColor=function(t){this._service.addChartBorderColor(t)},t.prototype.setStyle=function(){null!=this.currentWidget&&(this.currentWidget.styles=I.deepCopy(this.currentWidget.styles),this._service.updateCurrentWidget(this.currentWidget))},t.prototype.openDialog=function(){this.dialogRef=this.dialog.open(X)},t.prototype.ngOnInit=function(){var t=this;this._colorsSub=this._service.colors.subscribe((function(e){t.colors=e})),this._currentWidgetSub=this._service.currentWidget.subscribe((function(e){null!=e?t.currentWidget!==e&&(t.currentWidget=e):t.currentWidget=null})),this.getColorWidget=this._service.currentWidget.pipe(M.map((function(t){if(null!=t)return t.styles.color||""})),M.distinctUntilChanged()),this._originSub=this._service.origin.subscribe((function(e){t.origin=e})),this._headerStyleSub=this._service.headerStyles.subscribe((function(e){null!=e["background-color"]&&(t.styleBackgroundColor=e["background-color"])})),this._contentStylesSub=this._service.contentStyles.subscribe((function(e){null!=e["background-color"]&&(t.styleBackgroundColor=e["background-color"])})),this._footerStylesSub=this._service.footerStyles.subscribe((function(e){null!=e["background-color"]&&(t.styleBackgroundColor=e["background-color"])}))},t.prototype.ngOnDestroy=function(){this._colorsSub.unsubscribe(),this._currentWidgetSub.unsubscribe(),this._originSub.unsubscribe(),this._headerStyleSub.unsubscribe(),this._contentStylesSub.unsubscribe(),this._footerStylesSub.unsubscribe()},t}();tt.decorators=[{type:d.Component,args:[{selector:"ajf-theme-color",template:'<mat-card style="width:90%">\n  <mat-card-header>\n    <mat-card-title> {{ label }} Trasparency</mat-card-title>\n  </mat-card-header>\n  <mat-card-content>\n       <mat-slider\n      style="width:90%"\n      (change)="setAlphaColor($event.value)"\n      min="0"\n      max="1"\n      step="0.1"\n      [value]="alphaColor"\n      thumbLabel>\n    </mat-slider>\n  </mat-card-content>\n</mat-card>\n<mat-card style="width:90%">\n  <mat-card-header>\n    <mat-card-title> {{ label }} </mat-card-title>\n  </mat-card-header>\n  <mat-card-content>\n    <mat-grid-list\n      cols="8"\n      rowHeight="25px">\n      <mat-grid-tile\n        *ngFor="let color of colors"\n        [colspan]="1"\n        [rowspan]="1"\n        [style.background]="color">\n        <button\n          style="height:100%"\n          (click)="setStyles(color)"\n          mat-button>\n        </button>\n      </mat-grid-tile>\n    </mat-grid-list>\n  </mat-card-content>\n  <mat-card-actions>\n    <button mat-button (click)="openDialog()" style="width:90%;">Add color</button>\n    <button mat-button (click)="setStyles(\'\')" style="width:90%"> Reset </button>\n  </mat-card-actions>\n</mat-card>\n\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["\n"]}]}],tt.ctorParameters=function(){return[{type:R},{type:m.MatDialog}]},tt.propDecorators={section:[{type:d.Input}],label:[{type:d.Input}],init:[{type:d.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var et=function(){function t(t,e){this._service=t,this._dialogRef=e}return t.prototype.resetReport=function(){this._service.setReport({header:{content:[],styles:{}},content:{content:[],styles:{}},footer:{content:[],styles:{}},styles:{}}),this._dialogRef.close()},t.prototype.close=function(){this._dialogRef.close()},t}();et.decorators=[{type:d.Component,args:[{selector:"toolbar-dialog",template:'<h1 matDialogTitle>Dialog</h1>\n<div mat-dialog-content>Are you sure you want to erase the report?</div>\n<div mat-dialog-actions>\n  <button mat-button (click)="resetReport()">Yes</button>\n  <button mat-button (click)="close()">No</button>\n</div>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush}]}],et.ctorParameters=function(){return[{type:R},{type:m.MatDialogRef}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var nt=function(){function t(t,e){this._service=t,this.dialog=e,this.addClick=new d.EventEmitter,this.zoom=!1,this.emptyContent=this._service.emptyContent}return t.prototype.canDropPredicate=function(t){return t.data.dropZones.indexOf("widget")>-1},t.prototype.JSONRequest=function(){},t.prototype.onAddClick=function(t){this.addClick.emit(t)},t.prototype.addToList=function(t){null!=t.item.data.widget&&this._service.addCustomWidgets({json:JSON.stringify(t.item.data.widget.toJson()),type:""})},t.prototype.undoLastOperation=function(){try{var t=JSON.parse(this._service.popJsonStack()||"");this._service.setReport(I.deepCopy(t))}catch(t){}},t.prototype.isZoomed=function(){this.zoom=!this.zoom,this.zoom?this._service.fixedZoomIn():this._service.fixedZoomOut()},t.prototype.openDialog=function(){this.dialogRef=this.dialog.open(et)},t}();nt.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-toolbar",outputs:["addClick"],template:'<mat-toolbar>\n  <button\n    mat-button\n    (click)="onAddClick($event)"\n    matTooltip="open widget sidebar"\n    [matTooltipPosition]="\'above\'">\n    Open\n  </button>\n  <button\n    mat-button\n    (click)="openDialog()"\n    matTooltip="reset the current report"\n    [matTooltipPosition]="\'above\'">reset\n  </button>\n  <button\n    mat-button\n    (click)="undoLastOperation()"\n    matTooltip="undo the last operation"\n    [disabled]="emptyContent|async"\n    [matTooltipPosition]="\'above\'">Undo</button>\n\n  <button mat-button\n    class="ajf-custom-widget-drop-zone"\n    cdkDropList\n    [cdkDropListEnterPredicate]="canDropPredicate"\n    (cdkDropListDropped)="addToList($event);"\n    matTooltip="add custom widget on toolbar"\n    [matTooltipPosition]="\'above\'">\n    add custom widget here\n    <i class="material-icons">add_circle_outline</i>\n  </button>\n  <section class="example-section">\n    <mat-slide-toggle\n        [checked]="zoom"\n        (change)=isZoomed()\n        matTooltip="apply zoom out"\n        [matTooltipPosition]="\'above\'">\n      zoom out\n    </mat-slide-toggle>\n  </section>\n</mat-toolbar>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-toolbar a{margin-right:10px}ajf-report-builder-toolbar .ajf-custom-widget-drop-zone{position:absolute;right:0;background-color:#90ee90}\n"]}]}],nt.ctorParameters=function(){return[{type:R},{type:m.MatDialog}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var rt=function(){function t(){}return t.prototype.ngOnInit=function(){this.widgetIcon=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function t(e){return"reportbuilder-"+e.toLowerCase()}(this.widgetType)},t}();rt.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-widget-toolbar-button",template:'<button\n  mat-button\n  matTooltip="{{ widgetType}}"\n  [matTooltipPosition]="\'above\'">\n  <mat-icon\n    fontSet="ajf-icon"\n    fontIcon="{{ widgetIcon }}">\n  </mat-icon>\n</button>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-widget-toolbar-button button mat-icon{font-size:35px;padding-top:10px;padding-bottom:10px;padding-right:20px;color:#3f51b5}\n"]}]}],rt.ctorParameters=function(){return[]},rt.propDecorators={widgetType:[{type:d.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var it=function(){function t(t){this._service=t,this.isOver=!1,this.currentWidget=null,this.isClicked=!1,this.color=[],this.onDragged=!1,this.onOver=!1,this._currentWidgetSub=D.Subscription.EMPTY,this._onDraggedSub=D.Subscription.EMPTY,this._onOverSub=D.Subscription.EMPTY}return t.prototype.selectedWidget=function(){this.isClicked=!this.isClicked,this._service.setOrigin(this.from),this._service.updateCurrentWidget(this.widget)},t.prototype.remove=function(){null!=this.fromWidget&&this._service.updateCurrentWidget(this.fromWidget),this._service.remove(this.from,this.position)},t.prototype.onFocus=function(){return this.widget===this.currentWidget},t.prototype.changeColumn=function(t){this._service.changeColumn(this.position,"back"==t?this.position-1:this.position+1,this.fromWidget)},t.prototype.isColumn=function(){return"Column"===this.label},t.prototype.isOneColumn=function(){return!(this.fromWidget.columns.length>1)},t.prototype.ngOnInit=function(){var t=this;this.label=E.AjfWidgetType[this.widget.widgetType],this.widgetIcon=function e(t){return"reportbuilder-"+E.AjfWidgetType[t].toLowerCase()}(this.widget.widgetType),this.widgetLabel=function n(t){return A(E.AjfWidgetType[t])}(this.widget.widgetType),this._onDraggedSub=this._service.onDragged.subscribe((function(e){t.onDragged=e})),this._onOverSub=this._service.onOver.subscribe((function(e){t.onOver=e})),this._currentWidgetSub=this._service.currentWidget.subscribe((function(e){t.currentWidget=e,e!==t.widget&&(t.isClicked=!1)}))},t.prototype.ngOnDestroy=function(){this._onDraggedSub.unsubscribe(),this._onOverSub.unsubscribe(),this._currentWidgetSub.unsubscribe()},t}();it.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-widgets-row-buttons",template:'<div class="ajf-container" *ngIf="onOver || onDragged">\n  <div class="ajf-button-row">\n    <ng-template [ngIf]="isColumn() && onDragged == false">\n      <span\n        (click)="changeColumn(\'forward\')"\n        matTooltip="move right"\n        [matTooltipPosition]="\'above\'">\n        <i class="material-icons">arrow_forward</i>\n      </span>\n    </ng-template>\n    <ng-template [ngIf]="(isColumn()== false && onDragged == true) || true">\n      <span mat-button\n        [ngClass]="{\'ajf-selected\': onFocus()}"\n        matTooltip="{{label}}"\n        [matTooltipPosition]="\'above\'"\n        (click)="selectedWidget()">\n        <ng-template [ngIf]="isColumn()">\n        <i class="material-icons" >settings</i>\n        </ng-template>\n        <ng-template [ngIf]="(isColumn()) ? false : true">\n          <mat-icon\n            fontSet="ajf-icon"\n            fontIcon="{{ widgetIcon }}">\n          </mat-icon>\n        </ng-template>\n      </span>\n      <span\n        mat-button\n        matTooltip="remove"\n        (click)="remove()"\n        [matTooltipPosition]="\'above\'">\n        <mat-icon>remove_circle_outline</mat-icon>\n      </span>\n    </ng-template>\n    <ng-template [ngIf]="isColumn() && onDragged == false">\n      <span\n        (click)="changeColumn(\'back\')"\n        matTooltip="move left"\n        [matTooltipPosition]="\'above\'">\n        <i class="material-icons">arrow_back</i>\n      </span>\n    </ng-template>\n  </div>\n</div>\n',encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush,styles:["ajf-report-builder-widgets-row-buttons{position:relative;display:block}ajf-report-builder-widgets-row-buttons .ajf-container{height:30px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row{margin:0;width:100% !important;padding:0;position:absolute;right:0;display:flex;flex-direction:row-reverse;z-index:50;overflow-x:auto;background-color:rgba(144,238,144,.6);color:#000 !important;border-radius:16px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row button,ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row span{flex-flow:wrap row;margin-right:10px;cursor:pointer}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row button mat-icon,ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row span mat-icon{margin-top:5px;font-size:20px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-selected{background-color:#3b623b;color:#81d481}\n"]}]}],it.ctorParameters=function(){return[{type:R}]},it.propDecorators={from:[{type:d.Input}],fromWidget:[{type:d.Input}],position:[{type:d.Input}],widget:[{type:d.Input}],child:[{type:d.Input}],isOver:[{type:d.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var ot,at=function(){function t(t){this._service=t,this.chartTypes=I.sizedEnumToStringArray(E.AjfChartType),this.widgetTypes=I.sizedEnumToStringArray(E.AjfWidgetType);var e=this.widgetTypes.indexOf("Column");-1!==e&&this.widgetTypes.splice(e,1)}return t.prototype.onDragStartHandler=function(){var t=this,e=D.timer(200).subscribe((function(){null!=e&&e.unsubscribe(),t._service.dragStarted()}))},t.prototype.onDragEndHandler=function(){this._service.dragEnded()},t}();at.decorators=[{type:d.Component,args:[{selector:"ajf-report-builder-widgets-toolbar",template:"<mat-list>\n  <mat-list-item *ngFor=\"let t of widgetTypes\">\n    <ajf-report-builder-widget-toolbar-button ng-if=\"t != 'Column'\"\n        cdkDrag\n        [cdkDragData]=\"{widgetType: t, dropZones: ['header','content','footer','column','widget']}\"\n        [widgetType]=\"t\"\n        (onDragStart)=\"onDragStartHandler();\"\n        (onDragEnd)=\"onDragEndHandler();\">\n    </ajf-report-builder-widget-toolbar-button>\n  </mat-list-item>\n</mat-list>\n",encapsulation:d.ViewEncapsulation.None,changeDetection:d.ChangeDetectionStrategy.OnPush}]}],at.ctorParameters=function(){return[{type:R}]},(ot=function ot(){}).decorators=[{type:d.NgModule,args:[{imports:[e.AjfCommonModule,o.AjfImageModule,n.AjfMapModule,a.AjfMonacoEditorModule,r.AjfTableModule,i.AjfTextModule,C.ColorPickerModule,l.CommonModule,s.DragDropModule,u.FormsModule,c.MatButtonModule,p.MatButtonToggleModule,g.MatCardModule,m.MatDialogModule,f.MatGridListModule,h.MatIconModule,b.MatListModule,y.MatSelectModule,v.MatSidenavModule,j.MatSlideToggleModule,_.MatSliderModule,w.MatTabsModule,x.MatToolbarModule,S.MatTooltipModule,W.TranslateModule],declarations:[$,G,L,z,N,U,H,V,Y,q,Z,J,K,tt,X,nt,et,it,at,rt,Q],exports:[Q],providers:[R]}]}],
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
t.AJF_REPORTS_CONFIG=F,t.AjfReportBuilder=Q,t.AjfReportBuilderModule=ot,t.AjfReportBuilderService=R,t.ɵgc_ajf_src_material_report_builder_report_builder_a=$,t.ɵgc_ajf_src_material_report_builder_report_builder_b=G,t.ɵgc_ajf_src_material_report_builder_report_builder_c=L,t.ɵgc_ajf_src_material_report_builder_report_builder_d=z,t.ɵgc_ajf_src_material_report_builder_report_builder_e=N,t.ɵgc_ajf_src_material_report_builder_report_builder_f=U,t.ɵgc_ajf_src_material_report_builder_report_builder_g=H,t.ɵgc_ajf_src_material_report_builder_report_builder_h=V,t.ɵgc_ajf_src_material_report_builder_report_builder_i=Y,t.ɵgc_ajf_src_material_report_builder_report_builder_j=q,t.ɵgc_ajf_src_material_report_builder_report_builder_k=Z,t.ɵgc_ajf_src_material_report_builder_report_builder_l=J,t.ɵgc_ajf_src_material_report_builder_report_builder_m=K,t.ɵgc_ajf_src_material_report_builder_report_builder_n=tt,t.ɵgc_ajf_src_material_report_builder_report_builder_o=X,t.ɵgc_ajf_src_material_report_builder_report_builder_p=nt,t.ɵgc_ajf_src_material_report_builder_report_builder_q=et,t.ɵgc_ajf_src_material_report_builder_report_builder_r=it,t.ɵgc_ajf_src_material_report_builder_report_builder_s=at,t.ɵgc_ajf_src_material_report_builder_report_builder_t=rt,Object.defineProperty(t,"__esModule",{value:!0})}));