!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@ajf/material/monaco-editor",["exports","@angular/core"],t):t(((e=e||self).ajf=e.ajf||{},e.ajf.material=e.ajf.material||{},e.ajf.material.monacoEditor={}),e.ng.core)}(this,(function(e,t){"use strict";
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var i,n=function(){function e(){}return e.prototype.setLabel=function(e){return this.label=e,this},e.prototype.setKind=function(e){return this.kind=e,this},e.prototype.setDocumentation=function(e){return this.documentation=e,this},e.prototype.setInsertText=function(e){return this.insertText=e,this},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(i=function i(){}).BAT="bat",i.C="c",i.CPP="cpp",i.CSHARP="csharp",i.CSS="css",i.DOCKERFILE="dockerfile",i.FSHARP="fsharp",i.GO="go",i.HANDLEBARS="handlebars",i.HTML="html",i.INI="ini",i.JADE="jade",i.JAVASCRIPT="javascript",i.JSON="json",i.LESS="less",i.LUA="lua",i.MARKDOWN="markdown",i.OBJECTIVEC="objective-c",i.PHP="php",i.PLAINTEXT="plaintext",i.POSTIATS="postiats",i.POWERSHELL="powershell",i.PYTHON="python",i.R="r",i.RAZOR="razor",i.RUBY="ruby",i.SCSS="scss",i.SQL="sql",i.SWIFT="swift",i.TYPESCRIPT="typescript",i.VB="vb",i.XML="xml",i.YAML="yaml";
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var o=function(){function e(){this._autoCompleteValues={}}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},Object.defineProperty(e.prototype,"autoCompleteValues",{get:function(){return this._autoCompleteValues},enumerable:!1,configurable:!0}),e.prototype.initAutoComplete=function(t){this._autoCompleteValues[t.toString()]||(this._autoCompleteValues[t.toString()]=[],monaco.languages.registerCompletionItemProvider(t,{provideCompletionItems:function(i){return e.getInstance().parseAutoCompleteValues(t,i.getValue()),e.getInstance().autoCompleteValues[t.toString()]}}))},e.prototype.parseAutoCompleteValues=function(e,t){switch(e){case i.XML:return this._parseXmlAutoComplete(t);case i.JSON:return this._parseJsonAutoComplete(t);default:return[]}},e.prototype._parseXmlAutoComplete=function(e){for(var t=[],o=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("*"),r=function(e){if(!a._autoCompleteValues[i.XML].find((function(t){return t.label===o[e].tagName}))&&!t.find((function(t){return t.label===o[e].tagName}))){var r=(new n).setLabel(o[e].tagName).setKind(monaco.languages.CompletionItemKind.Function).setDocumentation("").setInsertText("<"+o[e].tagName+"><"+o[e].tagName+">");t.push(r)}},a=this,s=0;s<o.length;s++)r(s);return t.length>0&&(this._autoCompleteValues[i.XML.toString()]=this._autoCompleteValues[i.XML.toString()].concat(t)),t},e.prototype._parseJsonAutoComplete=function(e){for(var t,o=/(?:\'|\')([^']*)(?:\'|\')(?=:)(?:\:\s*)(?:\'|\')?(true|false|[0-9a-zA-Z\+\-\,\.\$]*)/g,r=[];null!==(t=o.exec(e));)if(t.index===o.lastIndex&&o.lastIndex++,t[1]&&!this._autoCompleteValues[i.JSON].find((function(e){return e.label===t[1]}))&&!r.find((function(e){return e.label===t[1]}))){var a=(new n).setLabel(t[1]).setKind(monaco.languages.CompletionItemKind.Value).setDocumentation("").setInsertText("'"+t[1]+"':");r.push(a)}return r.length>0&&(this._autoCompleteValues[i.JSON.toString()]=this._autoCompleteValues[i.JSON.toString()].concat(r)),r},e}();o._instance=null;
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var r,a=function a(){},s=function(){function e(){this.autoFormatOnLoad=!0,this.monacoLibPath="vs/loader.js",this.valueChange=new t.EventEmitter,this.valueToCompareChange=new t.EventEmitter,this.init=new t.EventEmitter,this._value="",this._valueToCompare=""}return Object.defineProperty(e.prototype,"valueToCompare",{set:function(e){if(e!==this._valueToCompare){if(this._valueToCompare=e,void 0===this._valueToCompare||!this._valueToCompare||!this._editor)return this._editor&&"vs.editor.ICodeEditor"!==this._editor.getEditorType()?void this._initEditor():void 0;if(this._value||(this._value=""),"vs.editor.ICodeEditor"===this._editor.getEditorType())return void this._initEditor()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){if(e!==this._value){if(this._value=e,void 0===this._value||!this._editor)return;if("vs.editor.ICodeEditor"!==this._editor.getEditorType())return void this._initEditor();this._editor.setValue(this._value)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this,t=function(){window.require(["vs/editor/editor.main"],(function(){e._initMonaco()}))};if(window.require)t();else{var i=document.createElement("script");i.type="text/javascript",i.src=this.monacoLibPath,i.addEventListener("load",t),document.body.appendChild(i)}},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngOnChanges=function(e){this._editor&&this._editor.updateOptions(this._getOptions())},e.prototype.dispose=function(){var e=this.editorContent.nativeElement;if(this._editor){for(this._editor.dispose();e.hasChildNodes();)null!=e.firstChild&&e.removeChild(e.firstChild);this._editor=null}},e.prototype.onResize=function(e){var t=this.editorContent.nativeElement;null!=t&&null!=t.parentElement&&t.setAttribute("style","height: "+t.parentElement.offsetHeight+"px; width:100%;")},e.prototype._initMonaco=function(){this._initEditor(),this.init.emit()},e.prototype._initEditor=function(){var e=this,t=this.editorContent.nativeElement,i=this._getOptions();this.dispose(),this._editor=this._valueToCompare?this._initDiffEditor(t,i):this._initSimpleEditor(t,i),null!=t&&null!=t.parentElement&&t.setAttribute("style","height: "+t.parentElement.offsetHeight+"px; width:100%;"),this.disableAutocomplete||o.getInstance().initAutoComplete(this.language),this._getOriginalModel().onDidChangeContent((function(t){var i=e._getOriginalModel().getValue();e._value!==i&&e._updateValue(i)})),this._getModifiedModel()&&this._getModifiedModel().onDidChangeContent((function(t){var i=e._getModifiedModel().getValue();e._valueToCompare!==i&&e._updateValueToCompare(i)}))},e.prototype._initSimpleEditor=function(e,t){return monaco.editor.create(e,t)},e.prototype._initDiffEditor=function(e,t){var i=monaco.editor.createModel(this._value,this.language),n=monaco.editor.createModel(this._valueToCompare,this.language),o=monaco.editor.createDiffEditor(e,t);return o.setModel({modified:n,original:i}),o},e.prototype._getOptions=function(){var e=new a;return e.experimentalScreenReader=this.experimentalScreenReader,e.ariaLabel=this.ariaLabel,e.rulers=this.rulers,e.wordSeparators=this.wordSeparators,e.selectionClipboard=this.selectionClipboard,e.lineNumbers=this.lineNumbers,e.selectOnLineNumbers=this.selectOnLineNumbers,e.lineNumbersMinChars=this.lineNumbersMinChars,e.glyphMargin=this.glyphMargin,e.lineDecorationsWidth=this.lineDecorationsWidth,e.revealHorizontalRightPadding=this.revealHorizontalRightPadding,e.roundedSelection=this.roundedSelection,e.theme=this.theme,e.readOnly=this.readOnly,e.scrollbar=this.scrollbar,e.overviewRulerLanes=this.overviewRulerLanes,e.cursorBlinking=this.cursorBlinking,e.mouseWheelZoom=this.mouseWheelZoom,e.cursorStyle=this.cursorStyle,e.mouseWheelZoom=this.mouseWheelZoom,e.fontLigatures=this.fontLigatures,e.disableTranslate3d=this.disableTranslate3d,e.hideCursorInOverviewRuler=this.hideCursorInOverviewRuler,e.scrollBeyondLastLine=this.scrollBeyondLastLine,e.automaticLayout=this.automaticLayout,e.wrappingColumn=this.wrappingColumn,e.wordWrap=this.wordWrap,e.wrappingIndent=this.wrappingIndent,e.wordWrapBreakBeforeCharacters=this.wordWrapBreakBeforeCharacters,e.wordWrapBreakAfterCharacters=this.wordWrapBreakAfterCharacters,e.wordWrapBreakObtrusiveCharacters=this.wordWrapBreakObtrusiveCharacters,e.stopRenderingLineAfter=this.stopRenderingLineAfter,e.hover=this.hover,e.contextmenu=this.contextmenu,e.mouseWheelScrollSensitivity=this.mouseWheelScrollSensitivity,e.quickSuggestions=this.quickSuggestions,e.quickSuggestionsDelay=this.quickSuggestionsDelay,e.parameterHints=this.parameterHints,e.iconsInSuggestions=this.iconsInSuggestions,e.autoClosingBrackets=this.autoClosingBrackets,e.formatOnType=this.formatOnType,e.suggestOnTriggerCharacters=this.suggestOnTriggerCharacters,e.acceptSuggestionOnEnter=this.acceptSuggestionOnEnter,e.snippetSuggestions=this.snippetSuggestions,e.tabCompletion=this.tabCompletion,e.wordBasedSuggestions=this.wordBasedSuggestions,e.selectionHighlight=this.selectionHighlight,e.codeLens=this.codeLens,e.folding=this.folding,e.renderWhitespace=this.renderWhitespace,e.renderControlCharacters=this.renderControlCharacters,e.renderIndentGuides=this.renderIndentGuides,e.renderLineHighlight=this.renderLineHighlight,e.useTabStops=this.useTabStops,e.fontFamily=this.fontFamily,e.fontWeight=this.fontWeight,e.fontSize=this.fontSize,e.lineHeight=this.lineHeight,e.value=this._value,e.language=this.language,Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),e},e.prototype._updateValue=function(e){this.value=e,this._value=e,this.valueChange.emit(e)},e.prototype._updateValueToCompare=function(e){this.valueToCompare=e,this._valueToCompare=e,this.valueToCompareChange.emit(e)},e.prototype._getOriginalModel=function(){if(this._editor){var e=this._editor.getModel();return e.original?e.original:e}},e.prototype._getModifiedModel=function(){if(this._editor){var e=this._editor.getModel();return e.modified?e.modified:null}},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */s.decorators=[{type:t.Component,args:[{encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush,selector:"ajf-monaco-editor",template:'<div #editor class="ajf-monaco-editor"></div>\n',host:{"(window:resize)":"onResize($event)"},styles:["ajf-monaco-editor{display:flex;align-items:stretch;overflow:hidden}ajf-monaco-editor .ajf-monaco-editor{flex:1 0 auto}\n"]}]}],s.ctorParameters=function(){return[]},s.propDecorators={experimentalScreenReader:[{type:t.Input}],ariaLabel:[{type:t.Input}],rulers:[{type:t.Input}],wordSeparators:[{type:t.Input}],selectionClipboard:[{type:t.Input}],lineNumbers:[{type:t.Input}],selectOnLineNumbers:[{type:t.Input}],lineNumbersMinChars:[{type:t.Input}],glyphMargin:[{type:t.Input}],lineDecorationsWidth:[{type:t.Input}],revealHorizontalRightPadding:[{type:t.Input}],roundedSelection:[{type:t.Input}],theme:[{type:t.Input}],readOnly:[{type:t.Input}],scrollbar:[{type:t.Input}],overviewRulerLanes:[{type:t.Input}],cursorBlinking:[{type:t.Input}],mouseWheelZoom:[{type:t.Input}],cursorStyle:[{type:t.Input}],fontLigatures:[{type:t.Input}],disableTranslate3d:[{type:t.Input}],hideCursorInOverviewRuler:[{type:t.Input}],scrollBeyondLastLine:[{type:t.Input}],automaticLayout:[{type:t.Input}],wrappingColumn:[{type:t.Input}],wordWrap:[{type:t.Input}],wrappingIndent:[{type:t.Input}],wordWrapBreakBeforeCharacters:[{type:t.Input}],wordWrapBreakAfterCharacters:[{type:t.Input}],wordWrapBreakObtrusiveCharacters:[{type:t.Input}],stopRenderingLineAfter:[{type:t.Input}],hover:[{type:t.Input}],contextmenu:[{type:t.Input}],mouseWheelScrollSensitivity:[{type:t.Input}],quickSuggestions:[{type:t.Input}],quickSuggestionsDelay:[{type:t.Input}],parameterHints:[{type:t.Input}],iconsInSuggestions:[{type:t.Input}],autoClosingBrackets:[{type:t.Input}],formatOnType:[{type:t.Input}],suggestOnTriggerCharacters:[{type:t.Input}],acceptSuggestionOnEnter:[{type:t.Input}],snippetSuggestions:[{type:t.Input}],tabCompletion:[{type:t.Input}],wordBasedSuggestions:[{type:t.Input}],selectionHighlight:[{type:t.Input}],codeLens:[{type:t.Input}],folding:[{type:t.Input}],renderWhitespace:[{type:t.Input}],renderControlCharacters:[{type:t.Input}],renderIndentGuides:[{type:t.Input}],renderLineHighlight:[{type:t.Input}],useTabStops:[{type:t.Input}],fontFamily:[{type:t.Input}],fontWeight:[{type:t.Input}],fontSize:[{type:t.Input}],lineHeight:[{type:t.Input}],language:[{type:t.Input}],disableAutocomplete:[{type:t.Input}],autoFormatOnLoad:[{type:t.Input}],monacoLibPath:[{type:t.Input}],valueToCompare:[{type:t.Input}],value:[{type:t.Input}],valueChange:[{type:t.Output}],valueToCompareChange:[{type:t.Output}],init:[{type:t.Output}],editorContent:[{type:t.ViewChild,args:["editor",{static:!0}]}]},(r=function r(){}).decorators=[{type:t.NgModule,args:[{declarations:[s],exports:[s]}]}],
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
e.AjfMonacoEditor=s,e.AjfMonacoEditorModule=r,Object.defineProperty(e,"__esModule",{value:!0})}));