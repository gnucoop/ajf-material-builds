/**
 * @license
 * Copyright (C) 2018 Gnucoop soc. coop.
 *
 * This file is part of the Advanced JSON forms (ajf).
 *
 * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
 * modify it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the License,
 * or (at your option) any later version.
 *
 * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
 * General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with Advanced JSON forms (ajf).
 * If not, see http://www.gnu.org/licenses/.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@ajf/material/monaco-editor",["exports","@angular/core"],t):t(((e=e||self).ajf=e.ajf||{},e.ajf.material=e.ajf.material||{},e.ajf.material.monacoEditor={}),e.ng.core)}(this,function(e,t){"use strict";var a=function(){function e(){}return e.prototype.setLabel=function(e){return this.label=e,this},e.prototype.setKind=function(e){return this.kind=e,this},e.prototype.setDocumentation=function(e){return this.documentation=e,this},e.prototype.setInsertText=function(e){return this.insertText=e,this},e}(),s=function(){function e(){}return e.BAT="bat",e.C="c",e.CPP="cpp",e.CSHARP="csharp",e.CSS="css",e.DOCKERFILE="dockerfile",e.FSHARP="fsharp",e.GO="go",e.HANDLEBARS="handlebars",e.HTML="html",e.INI="ini",e.JADE="jade",e.JAVASCRIPT="javascript",e.JSON="json",e.LESS="less",e.LUA="lua",e.MARKDOWN="markdown",e.OBJECTIVEC="objective-c",e.PHP="php",e.PLAINTEXT="plaintext",e.POSTIATS="postiats",e.POWERSHELL="powershell",e.PYTHON="python",e.R="r",e.RAZOR="razor",e.RUBY="ruby",e.SCSS="scss",e.SQL="sql",e.SWIFT="swift",e.TYPESCRIPT="typescript",e.VB="vb",e.XML="xml",e.YAML="yaml",e}(),n=function(){function i(){this._autoCompleteValues={}}return i.getInstance=function(){return i.instance||(i.instance=new i),i.instance},Object.defineProperty(i.prototype,"autoCompleteValues",{get:function(){return this._autoCompleteValues},enumerable:!0,configurable:!0}),i.prototype.initAutoComplete=function(t){this._autoCompleteValues[t.toString()]||(this._autoCompleteValues[t.toString()]=[],monaco.languages.registerCompletionItemProvider(t,{provideCompletionItems:function(e){return i.getInstance().parseAutoCompleteValues(t,e.getValue()),i.getInstance().autoCompleteValues[t.toString()]}}))},i.prototype.parseAutoCompleteValues=function(e,t){switch(e){case s.XML:return this.parseXmlAutoComplete(t);case s.JSON:return this.parseJsonAutoComplete(t);default:return[]}},i.prototype.parseXmlAutoComplete=function(e){for(var i=[],n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("*"),t=function(t){if(!o._autoCompleteValues[s.XML].find(function(e){return e.label===n[t].tagName})&&!i.find(function(e){return e.label===n[t].tagName})){var e=(new a).setLabel(n[t].tagName).setKind(monaco.languages.CompletionItemKind.Function).setDocumentation("").setInsertText("<"+n[t].tagName+"><"+n[t].tagName+">");i.push(e)}},o=this,r=0;r<n.length;r++)t(r);return 0<i.length&&(this._autoCompleteValues[s.XML.toString()]=this._autoCompleteValues[s.XML.toString()].concat(i)),i},i.prototype.parseJsonAutoComplete=function(e){for(var t,i=/(?:\'|\')([^']*)(?:\'|\')(?=:)(?:\:\s*)(?:\'|\')?(true|false|[0-9a-zA-Z\+\-\,\.\$]*)/g,n=[];null!==(t=i.exec(e));)if(t.index===i.lastIndex&&i.lastIndex++,t[1]&&!this._autoCompleteValues[s.JSON].find(function(e){return e.label===t[1]})&&!n.find(function(e){return e.label===t[1]})){var o=(new a).setLabel(t[1]).setKind(monaco.languages.CompletionItemKind.Value).setDocumentation("").setInsertText("'"+t[1]+"':");n.push(o)}return 0<n.length&&(this._autoCompleteValues[s.JSON.toString()]=this._autoCompleteValues[s.JSON.toString()].concat(n)),n},i.instance=null,i}(),i=function(){},o=function(){function e(){this.autoFormatOnLoad=!0,this.monacoLibPath="vs/loader.js",this.valueChange=new t.EventEmitter,this.valueToCompareChange=new t.EventEmitter,this.init=new t.EventEmitter,this._value="",this._valueToCompare=""}return Object.defineProperty(e.prototype,"valueToCompare",{set:function(e){if(e!==this._valueToCompare){if(this._valueToCompare=e,void 0===this._valueToCompare||!this._valueToCompare||!this._editor)return this._editor&&"vs.editor.ICodeEditor"!==this._editor.getEditorType()?void this.initEditor():void 0;if(this._value||(this._value=""),"vs.editor.ICodeEditor"===this._editor.getEditorType())return void this.initEditor()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){if(e!==this._value){if(this._value=e,void 0===this._value||!this._editor)return;if("vs.editor.ICodeEditor"!==this._editor.getEditorType())return void this.initEditor();this._editor.setValue(this._value)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this,t=function(){window.require(["vs/editor/editor.main"],function(){e.initMonaco()})};if(window.require)t();else{var i=document.createElement("script");i.type="text/javascript",i.src=this.monacoLibPath,i.addEventListener("load",t),document.body.appendChild(i)}},e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngOnChanges=function(e){this._editor&&this._editor.updateOptions(this.getOptions())},e.prototype.dispose=function(){var e=this.editorContent.nativeElement;if(this._editor){for(this._editor.dispose();e.hasChildNodes();)null!=e.firstChild&&e.removeChild(e.firstChild);this._editor=null}},e.prototype.onResize=function(e){var t=this.editorContent.nativeElement;null!=t&&null!=t.parentElement&&t.setAttribute("style","height: "+t.parentElement.offsetHeight+"px; width:100%;")},e.prototype.initMonaco=function(){this.initEditor(),this.init.emit()},e.prototype.initEditor=function(){var i=this,e=this.editorContent.nativeElement,t=this.getOptions();this.dispose(),this._valueToCompare?this._editor=this.initDiffEditor(e,t):this._editor=this.initSimpleEditor(e,t),null!=e&&null!=e.parentElement&&e.setAttribute("style","height: "+e.parentElement.offsetHeight+"px; width:100%;"),this.disableAutocomplete||n.getInstance().initAutoComplete(this.language),this.getOriginalModel().onDidChangeContent(function(e){var t=i.getOriginalModel().getValue();i._value!==t&&i.updateValue(t)}),this.getModifiedModel()&&this.getModifiedModel().onDidChangeContent(function(e){var t=i.getModifiedModel().getValue();i._valueToCompare!==t&&i.updateValueToCompare(t)})},e.prototype.initSimpleEditor=function(e,t){return monaco.editor.create(e,t)},e.prototype.initDiffEditor=function(e,t){var i=monaco.editor.createModel(this._value,this.language),n=monaco.editor.createModel(this._valueToCompare,this.language),o=monaco.editor.createDiffEditor(e,t);return o.setModel({modified:n,original:i}),o},e.prototype.getOptions=function(){var t=new i;return t.experimentalScreenReader=this.experimentalScreenReader,t.ariaLabel=this.ariaLabel,t.rulers=this.rulers,t.wordSeparators=this.wordSeparators,t.selectionClipboard=this.selectionClipboard,t.lineNumbers=this.lineNumbers,t.selectOnLineNumbers=this.selectOnLineNumbers,t.lineNumbersMinChars=this.lineNumbersMinChars,t.glyphMargin=this.glyphMargin,t.lineDecorationsWidth=this.lineDecorationsWidth,t.revealHorizontalRightPadding=this.revealHorizontalRightPadding,t.roundedSelection=this.roundedSelection,t.theme=this.theme,t.readOnly=this.readOnly,t.scrollbar=this.scrollbar,t.overviewRulerLanes=this.overviewRulerLanes,t.cursorBlinking=this.cursorBlinking,t.mouseWheelZoom=this.mouseWheelZoom,t.cursorStyle=this.cursorStyle,t.mouseWheelZoom=this.mouseWheelZoom,t.fontLigatures=this.fontLigatures,t.disableTranslate3d=this.disableTranslate3d,t.hideCursorInOverviewRuler=this.hideCursorInOverviewRuler,t.scrollBeyondLastLine=this.scrollBeyondLastLine,t.automaticLayout=this.automaticLayout,t.wrappingColumn=this.wrappingColumn,t.wordWrap=this.wordWrap,t.wrappingIndent=this.wrappingIndent,t.wordWrapBreakBeforeCharacters=this.wordWrapBreakBeforeCharacters,t.wordWrapBreakAfterCharacters=this.wordWrapBreakAfterCharacters,t.wordWrapBreakObtrusiveCharacters=this.wordWrapBreakObtrusiveCharacters,t.stopRenderingLineAfter=this.stopRenderingLineAfter,t.hover=this.hover,t.contextmenu=this.contextmenu,t.mouseWheelScrollSensitivity=this.mouseWheelScrollSensitivity,t.quickSuggestions=this.quickSuggestions,t.quickSuggestionsDelay=this.quickSuggestionsDelay,t.parameterHints=this.parameterHints,t.iconsInSuggestions=this.iconsInSuggestions,t.autoClosingBrackets=this.autoClosingBrackets,t.formatOnType=this.formatOnType,t.suggestOnTriggerCharacters=this.suggestOnTriggerCharacters,t.acceptSuggestionOnEnter=this.acceptSuggestionOnEnter,t.snippetSuggestions=this.snippetSuggestions,t.tabCompletion=this.tabCompletion,t.wordBasedSuggestions=this.wordBasedSuggestions,t.selectionHighlight=this.selectionHighlight,t.codeLens=this.codeLens,t.folding=this.folding,t.renderWhitespace=this.renderWhitespace,t.renderControlCharacters=this.renderControlCharacters,t.renderIndentGuides=this.renderIndentGuides,t.renderLineHighlight=this.renderLineHighlight,t.useTabStops=this.useTabStops,t.fontFamily=this.fontFamily,t.fontWeight=this.fontWeight,t.fontSize=this.fontSize,t.lineHeight=this.lineHeight,t.value=this._value,t.language=this.language,Object.keys(t).forEach(function(e){void 0===t[e]&&delete t[e]}),t},e.prototype.updateValue=function(e){this.value=e,this._value=e,this.valueChange.emit(e)},e.prototype.updateValueToCompare=function(e){this.valueToCompare=e,this._valueToCompare=e,this.valueToCompareChange.emit(e)},e.prototype.getOriginalModel=function(){if(this._editor){var e=this._editor.getModel();return e.original?e.original:e}},e.prototype.getModifiedModel=function(){if(this._editor){var e=this._editor.getModel();return e.modified?e.modified:null}},e.decorators=[{type:t.Component,args:[{encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush,selector:"ajf-monaco-editor",styles:["ajf-monaco-editor{display:flex;align-items:stretch}ajf-monaco-editor .ajf-monaco-editor{flex:1 0 auto}"],template:'<div #editor class="ajf-monaco-editor"></div>',host:{"(window:resize)":"onResize($event)"}}]}],e.ctorParameters=function(){return[]},e.propDecorators={experimentalScreenReader:[{type:t.Input}],ariaLabel:[{type:t.Input}],rulers:[{type:t.Input}],wordSeparators:[{type:t.Input}],selectionClipboard:[{type:t.Input}],lineNumbers:[{type:t.Input}],selectOnLineNumbers:[{type:t.Input}],lineNumbersMinChars:[{type:t.Input}],glyphMargin:[{type:t.Input}],lineDecorationsWidth:[{type:t.Input}],revealHorizontalRightPadding:[{type:t.Input}],roundedSelection:[{type:t.Input}],theme:[{type:t.Input}],readOnly:[{type:t.Input}],scrollbar:[{type:t.Input}],overviewRulerLanes:[{type:t.Input}],cursorBlinking:[{type:t.Input}],mouseWheelZoom:[{type:t.Input}],cursorStyle:[{type:t.Input}],fontLigatures:[{type:t.Input}],disableTranslate3d:[{type:t.Input}],hideCursorInOverviewRuler:[{type:t.Input}],scrollBeyondLastLine:[{type:t.Input}],automaticLayout:[{type:t.Input}],wrappingColumn:[{type:t.Input}],wordWrap:[{type:t.Input}],wrappingIndent:[{type:t.Input}],wordWrapBreakBeforeCharacters:[{type:t.Input}],wordWrapBreakAfterCharacters:[{type:t.Input}],wordWrapBreakObtrusiveCharacters:[{type:t.Input}],stopRenderingLineAfter:[{type:t.Input}],hover:[{type:t.Input}],contextmenu:[{type:t.Input}],mouseWheelScrollSensitivity:[{type:t.Input}],quickSuggestions:[{type:t.Input}],quickSuggestionsDelay:[{type:t.Input}],parameterHints:[{type:t.Input}],iconsInSuggestions:[{type:t.Input}],autoClosingBrackets:[{type:t.Input}],formatOnType:[{type:t.Input}],suggestOnTriggerCharacters:[{type:t.Input}],acceptSuggestionOnEnter:[{type:t.Input}],snippetSuggestions:[{type:t.Input}],tabCompletion:[{type:t.Input}],wordBasedSuggestions:[{type:t.Input}],selectionHighlight:[{type:t.Input}],codeLens:[{type:t.Input}],folding:[{type:t.Input}],renderWhitespace:[{type:t.Input}],renderControlCharacters:[{type:t.Input}],renderIndentGuides:[{type:t.Input}],renderLineHighlight:[{type:t.Input}],useTabStops:[{type:t.Input}],fontFamily:[{type:t.Input}],fontWeight:[{type:t.Input}],fontSize:[{type:t.Input}],lineHeight:[{type:t.Input}],language:[{type:t.Input}],disableAutocomplete:[{type:t.Input}],autoFormatOnLoad:[{type:t.Input}],monacoLibPath:[{type:t.Input}],valueToCompare:[{type:t.Input}],value:[{type:t.Input}],valueChange:[{type:t.Output}],valueToCompareChange:[{type:t.Output}],init:[{type:t.Output}],editorContent:[{type:t.ViewChild,args:["editor"]}]},e}(),r=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[o],exports:[o]}]}],e}();e.AjfMonacoEditorModule=r,e.AjfMonacoEditor=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=material-monaco-editor.umd.min.js.map
