{"version":3,"sources":["src/material/material-report-builder.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ajf","material","reportBuilder","ng","common","core","forms","cdk","dragDrop","button","buttonToggle","card","dialog","gridList","icon","list","select","sidenav","slideToggle","slider","tabs","toolbar","tooltip","ngxTranslate","ngxColorPicker","map","table","text","image","monacoEditor","rxjs","tslib","models","reports","utils","operators","quill","this","core$1","common$1","forms$1","image$1","Quill","hasOwnProperty","AJF_REPORTS_CONFIG","InjectionToken","AjfReportBuilderService","reportsConfig","_this","_customWidgetsUpdate","Subject","_originUpdate","_savedReportUpdate","_jsonStack","BehaviorSubject","_emptyContent","_onDraggedUpdate","_onOverUpdate","_fixedZoomUpdate","_onDragEnterUpdate","_headerWidgetsUpdate","_contentWidgetsUpdate","_footerWidgetsUpdate","_colorUpdate","_defaultColor","_currentWidgetUpdate","_formsVariablesUpdate","_conditionNamesUpdate","_saveReport","_report","_reportStylesUpdate","_reportFormsUpdate","_updates","header","content","footer","color","customWidgets","_saveReportEvent","EventEmitter","_saveFormulaTOHtml","columnWidthChangedEmitter","_iconSets","ajf-icon","_lastDeletedJson","icons","__assign","_origin","pipe","startWith","share","_savedReport","_onDragged","_onOver","_fixedZoom","_onDragEnter","_reportStyles","scan","styles","op","_reportForms","_customWidgets","widgets","_formsVariables","filter","s","variables","publishReplay","refCount","_conditionNames","_headerWidgets","_headerStyles","_contentWidgets","_contentStyles","_footerWidgets","_footerStyles","_color","_currentWidget","widget","f","length","_c","fillFormsVariables","subscribe","reportObs","r","_colors","tempColors","parseColor","i","obj","widgetType","AjfWidgetType","Layout","layoutObj","j","columnObj","z","_styles","_widgets","json","_r","combineLatest","report","reportForms","w","deepCopy","ro","setSaveReport","next","pushJsonStack","JSON","stringify","prototype","getFormulaToHtmlEvent","asObservable","Object","defineProperty","get","enumerable","configurable","filterNodes","nodes","node","nodeType","AjfNodeType","AjfNodeGroup","AjfSlide","AjfRepeatingSlide","AjfField","fieldType","AjfFieldType","String","splice","cssStyles","colors","forEach","k","indexOf","push","labels","names","types","flattenNodes","extractLabelsNodes","extractNamesNodes","extractTypesNodes","label","name","setOrigin","origin","roundTo","value","decimalPositions","Math","pow","floor","isNumber","test","isNumberArray","fixedZoomIn","fixedZoomOut","dragEnter","array","index","dragStarted","dragEnded","overStarted","overEnded","dragLeave","saveReport","emit","saveImageFormula","formula","flag","saveFormulaToHtml","htmlFormula","reference","setEmptyContent","val","currentStack","getValue","popJsonStack","pop","updateCurrentWidget","updateArrayWidgets","type","newWidget","Error","_widget","instantColumnValue","newValue","idx","myObj","size","columns","spreadValue","objNum","sum","idxFirstNoObj","add","foundFirstNoObj","re1","RegExp","re2","re3","oldValue","Number","toFixed","setImageUrl","imageUrl","url","createFormula","setIcon","setFlag","saveCondition","conditionText","visibility","condition","saveChartFormula","_label","_level","_mainIndex","_index","formulaText","aggregationType","dataset","aggregation","createAggregation","saveTableFormula","removeTableMainData","_removeFromCurrentWidgetArrayProperty","removeData","setChartType","_setCurrentWidgetProperty","removeMainData","_idx","removeRelatedData","_mainIdx","setChartBackgroundColor","addChartBackgroundColor","_addToCurrentWidgetArrayProperty","removeChartBackgroundColor","setChartBorderColor","setChartBorderWidth","addChartBorderColor","removeChartBorderColor","setReport","setWidgetStyles","isPxStyle","Array","join","setSectionStyles","setReportStyles","setReportForms","_form","addCustomWidgets","position","resetCustomWidgets","changeLabelCustomWidget","addHeaderWidget","_addWidgetToContainer","addContentWidget","addfooterWidget","unfixedColumn","num","checkSum","parseFloat","addColumn","tmpValue","tempObj","createWidget","removeWidgetToColumn","column","remove","spread","addToContent","addToColumn","event","toColumn","dragData","fromColumn","fromIndex","arrayFrom","parse","changePositionOnColumn","toIndex","fromWidget","fixedColumn","changeColumn","from","to","layoutWidget","fromColumnValue","toColumnValue","addCustomColor","subj","propName","arr","decorators","Injectable","ctorParameters","undefined","Optional","Inject","args","AjfReportBuilderColumn","_service","showActions","layoutShow","onDragged","_onDraggedSub","Subscription","EMPTY","addToList","onDragEndHandler","onDragStartHandler","timer","unsubscribe","ngOnInit","x","ngOnDestroy","Component","selector","template","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","propDecorators","Input","ajfWidgetTypeStringToLabel","sanitizeConditionString","str","trim","replace","AjfDataType","AjfReportBuilderConditionEditor","isValid","_conditionNamesSub","extractNames","formsVariables","concat","setCurrent","id","currentId","appendText","checkValidation","validateCondition","validateExpression","_goBackNum","conditionTextArea","el","nativeElement","sStart","min","selectionStart","selectionEnd","sEnd","max","startingString","substr","endingString","initialLenght","closed","createTextRange","range","move","focus","setSelectionRange","conditionNames","ViewChild","static","AjfReportBuilderContent","_cdRef","fixedZoom","onDragEnter","show","headerWidgets","contentWidgets","footerWidgets","onOver","currentWidget","_fixedZoomSub","_onDragEnterSub","_headerWidgetsSub","_contentWidgetsSub","_footerWidgetsSub","_onOverSub","_currentWidgetSub","headerStyles","contentStyles","footerStyles","onMouseOver","onMouseLeave","canDropPredicate","dropZones","item","data","isLayout","onDragEnterHandler","onDragLeaveHandler","onDragEnterCheck","arrayTo","itemData","bool","ngAfterViewChecked","detectChanges","host","(mouseover)","(mouseleave)","ChangeDetectorRef","AjfReportBuilderCustomWidgetDialog","_dialogRef","changeLabel","close","MatDialogRef","AjfReportBuilderCustomWidgetToolbarButton","widgetIcon","ajfWidgetTypeStringToIcon","toLowerCase","widgetLabel","AjfReportBuilderCustomWidgetsToolbar","_customWidgetsSub","_threeColumnsLayout","_fourColumnsLayout","openDialog","open","componentInstance","MatDialog","AjfReportBuilderFormsAnalyzerDialog","_","aggregationTypes","sizedEnumToStringArray","AjfAggregationType","formulaDate","safeFormulaText","Sum","currentIndex","formsVariablesName","formsVariablesType","_formAnalyzerSub","_first","init","imageType","AjfImageType","Flag","onEditorInit","monaco","languages","typescript","javascriptDefaults","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","setCompilerOptions","target","ScriptTarget","ES2015","allowNonTsExtensions","allowJs","ModuleKind","addExtraLib","e","_extraLibs","_initFormsVariablesNames","_updateVariables","_updateFunctions","formVar","_fieldVarType","AjfExpressionUtils","UTIL_FUNCTIONS","Boolean","Date","DateInput","Time","Empty","Formula","MultipleChoice","SingleChoice","Table","Text","insertVariable","setCurrentId","setAggregationType","validateFormula","saveDataset","saveFormulaHtml","level","mainIndex","variable","editor","split","getPosition","ln","lineNumber","line","col","substring","setPosition","setVariable","setValue","reset","labelText","AjfValidationService","isFormula","AjfMonacoEditor","AjfReportBuilderFormsAnalyzer","choicesOrigins","currentMainDataIndex","_dataset","setCurrentIndex","isSelected","getMainData","mainData","getDataset","getRelatedData","relatedData","getTableHeader","getTableData","tableData","needMainData","chartType","AjfChartType","Scatter","Bubble","removeDataset","editMode","dialogRef","Chart","openDialogAddMainData","openDialogChartEditMainData","openDialogTableEditMainData","openDialogChartAddDataset","openDialogTableAddDataset","openDialogChartAddDataOfDataset","openDialogChartEditDataset","openDialogTableEditDataset","openDialogChartEditDataOfDataset","AjfImageFilterPipe","transform","items","info","includes","Pipe","AjfReportBuilderImageGroup","_icon","_classes","valueToSearch","formulaClick","fontSet","fontIcon","setSearch","currentTarget","emitFormula","getFlag","returnValue","class","prefixClass","toggle","Output","AjfReportBuilderProperties","_dialog","initChartType","formsJson","widgetName","marginExpanded","paddingExpanded","borderWidthExpanded","borderRadiusExpanded","backgroundColor","styleBackgroundColor","borderColor","styleColor","align","fonts","currentModule","quillModules","script","background","font","chartBorderColor","chartBorderWidth","htmlText","reportStyles","sectionStyles","widgetStyles","sectionColor","widgetColor","visibilitySection","currentColor","iconSet","title","flagSet","_formsSub","_colorSub","_headerStyleSub","_contentStylesSub","_footerStylesSub","_originSub","_stylesUpdatesSubs","_updateWidgetMarginEvt","_updateWidgetPaddingEvt","_updateWidgetBorderWidthEvt","_updateWidgetBorderRadiusEvt","tabValue","setForms","keys","iconSets","toNumber","matches","match","toNumberArray","v","fillPxNumberArray","v21","v22","v32","percent","setStyle","setWidgetMargin","setWidgetPadding","setWidgetBorderWidth","setWidgetBorderRadius","getModule","isChartTypeSelected","setTab","hideMenu","openFormulaDialog","getHTML","distinctUntilChanged","getHeightWidget","getFontSizeWidget","getFontAlignWidget","getBorderWidthWidget","getBorderWidthWidgetTop","m","getBorderWidthWidgetRight","getBorderWidthWidgetBottom","getBorderWidthWidgetLeft","getBorderRadiusWidget","getBorderRadiusWidgetTopLeft","getBorderRadiusWidgetTopRight","getBorderRadiusWidgetBottomRight","getBorderRadiusWidgetBottomLeft","getMarginWidget","getMarginWidgetTop","getMarginWidgetRight","getMarginWidgetBottom","getMarginWidgetLeft","getPaddingWidget","getPaddingWidgetTop","getPaddingWidgetRight","getPaddingWidgetBottom","getPaddingWidgetLeft","getBackgroundColorWidget","getColorWidget","withLatestFrom","ngOnChanges","changes","currentValue","AjfQuillEditor","_elementRef","_renderer","emptyArray","_init","dateFormats","validator","defaultModules","slice","import","editorCreated","contentChanged","selectionChanged","onModelChange","onModelTouched","_formulas","_formulaTextSub","whitelist","innerHTML","setAttribute","efs","formulaEntry","unlisten","listen","quillEditor","querySelector","link_1","createElement","check","linkLabel","createText","appendChild","setHTML","writeValue","initHTML","ngAfterViewInit","toolbarElem","modules","register","insertAdjacentHTML","editorElem","placeholder","readOnly","theme","formats","on","oldRange","source","delta","oldDelta","html","children","getText","elem","listenFunc","pasteHTML","querySelectorAll","innerText","setText","registerOnChange","fn","registerOnTouched","validate","err","valid","textLength","minLength","minLengthError","given","maxLength","maxLengthError","enable","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","NG_VALIDATORS","ElementRef","Renderer2","AjfReportBuilderRendererWidget","currentContentWidget","getColumnContent","getIcon","evaluateExpression","getPercent","toString","getImageUrl","getImageType","Image","getHtmlText","getCoordinate","coordinate","getTileLayer","tileLayer","getAttribution","attribution","getChartType","getTableTitles","tableTitle","getTableContent","tableContent","section","AjfReportBuilderThemeColorDialog","firstElementChild","AjfReportBuilderThemeColor","alphaColor","_colorsSub","setStyles","setChartStyle","setAlphaColor","lastComma","lastIndexOf","AjfReportBuilderToolbarDialog","resetReport","AjfReportBuilderToolbar","addClick","zoom","emptyContent","JSONRequest","onAddClick","toJson","undoLastOperation","isZoomed","outputs","AjfReportBuilderWidgetToolbarButton","ajfReportBuilderWidgetToString","AjfReportBuilderWidgetsRowButtons","isOver","isClicked","selectedWidget","onFocus","direction","isColumn","isOneColumn","widgetReportBuilderIconName","ajfWidgetTypeToLabel","child","AjfReportBuilderWidgetsToolbar","chartTypes","widgetTypes","pos","AjfReportBuilder","set","_setCurrentReport","ngAfterContentInit","startSidenav","MatSidenav","AjfReportBuilderModule","NgModule","imports","CommonModule","FormsModule","DragDropModule","MatButtonModule","MatButtonToggleModule","MatCardModule","MatDialogModule","MatGridListModule","MatIconModule","MatListModule","MatSelectModule","MatSidenavModule","MatSlideToggleModule","MatSliderModule","MatTabsModule","MatToolbarModule","MatTooltipModule","TranslateModule","ColorPickerModule","AjfCommonModule","AjfImageModule","AjfMapModule","AjfMonacoEditorModule","AjfTableModule","AjfTextModule","declarations","ɵajf_src_material_report_builder_report_builder_a","ɵajf_src_material_report_builder_report_builder_b","ɵajf_src_material_report_builder_report_builder_c","ɵajf_src_material_report_builder_report_builder_d","ɵajf_src_material_report_builder_report_builder_e","ɵajf_src_material_report_builder_report_builder_f","ɵajf_src_material_report_builder_report_builder_g","ɵajf_src_material_report_builder_report_builder_h","ɵajf_src_material_report_builder_report_builder_i","ɵajf_src_material_report_builder_report_builder_j","ɵajf_src_material_report_builder_report_builder_k","ɵajf_src_material_report_builder_report_builder_l","ɵajf_src_material_report_builder_report_builder_m","ɵajf_src_material_report_builder_report_builder_n","ɵajf_src_material_report_builder_report_builder_o","ɵajf_src_material_report_builder_report_builder_p","ɵajf_src_material_report_builder_report_builder_q","ɵajf_src_material_report_builder_report_builder_r","ɵajf_src_material_report_builder_report_builder_s","ɵajf_src_material_report_builder_report_builder_t"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('@angular/forms'), require('@angular/cdk/drag-drop'), require('@angular/material/button'), require('@angular/material/button-toggle'), require('@angular/material/card'), require('@angular/material/dialog'), require('@angular/material/grid-list'), require('@angular/material/icon'), require('@angular/material/list'), require('@angular/material/select'), require('@angular/material/sidenav'), require('@angular/material/slide-toggle'), require('@angular/material/slider'), require('@angular/material/tabs'), require('@angular/material/toolbar'), require('@angular/material/tooltip'), require('@ngx-translate/core'), require('ngx-color-picker'), require('@ajf/core/common'), require('@ajf/core/map'), require('@ajf/core/table'), require('@ajf/core/text'), require('@ajf/material/image'), require('@ajf/material/monaco-editor'), require('rxjs'), require('tslib'), require('@ajf/core/forms'), require('@ajf/core/models'), require('@ajf/core/reports'), require('@ajf/core/utils'), require('rxjs/operators'), require('@ajf/core/image'), require('quill')) :\n    typeof define === 'function' && define.amd ? define('@ajf/material/report-builder', ['exports', '@angular/common', '@angular/core', '@angular/forms', '@angular/cdk/drag-drop', '@angular/material/button', '@angular/material/button-toggle', '@angular/material/card', '@angular/material/dialog', '@angular/material/grid-list', '@angular/material/icon', '@angular/material/list', '@angular/material/select', '@angular/material/sidenav', '@angular/material/slide-toggle', '@angular/material/slider', '@angular/material/tabs', '@angular/material/toolbar', '@angular/material/tooltip', '@ngx-translate/core', 'ngx-color-picker', '@ajf/core/common', '@ajf/core/map', '@ajf/core/table', '@ajf/core/text', '@ajf/material/image', '@ajf/material/monaco-editor', 'rxjs', 'tslib', '@ajf/core/forms', '@ajf/core/models', '@ajf/core/reports', '@ajf/core/utils', 'rxjs/operators', '@ajf/core/image', 'quill'], factory) :\n    (global = global || self, factory((global.ajf = global.ajf || {}, global.ajf.material = global.ajf.material || {}, global.ajf.material.reportBuilder = {}), global.ng.common, global.ng.core, global.ng.forms, global.ng.cdk.dragDrop, global.ng.material.button, global.ng.material.buttonToggle, global.ng.material.card, global.ng.material.dialog, global.ng.material.gridList, global.ng.material.icon, global.ng.material.list, global.ng.material.select, global.ng.material.sidenav, global.ng.material.slideToggle, global.ng.material.slider, global.ng.material.tabs, global.ng.material.toolbar, global.ng.material.tooltip, global.ngxTranslate.core, global.ngxColorPicker, global.ng.core.common, global.ng.core.map, global.ng.core.table, global.ng.core.text, global.ng.material.image, global.ng.material.monacoEditor, global.rxjs, global.tslib, global.ng.core.forms, global.ng.core.models, global.ng.core.reports, global.ng.core.utils, global.rxjs.operators, global.ng.core.image, global.quill));\n}(this, (function (exports, common, core, forms, dragDrop, button, buttonToggle, card, dialog, gridList, icon, list, select, sidenav, slideToggle, slider, tabs, toolbar, tooltip, core$1, ngxColorPicker, common$1, map, table, text, image, monacoEditor, rxjs, tslib, forms$1, models, reports, utils, operators, image$1, Quill) { 'use strict';\n\n    Quill = Quill && Quill.hasOwnProperty('default') ? Quill['default'] : Quill;\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AJF_REPORTS_CONFIG = new core.InjectionToken('AJF_REPORTS_CONFIG');\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * This service contains all the logic to model the report widget.\n     *\n     * @export\n     */\n    var AjfReportBuilderService = /** @class */ (function () {\n        /**\n         * Creates an instance of AjfReportBuilderService.\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        function AjfReportBuilderService(reportsConfig) {\n            var _this = this;\n            this._customWidgetsUpdate = new rxjs.Subject();\n            this._originUpdate = new rxjs.Subject();\n            this._savedReportUpdate = new rxjs.Subject();\n            this._jsonStack = new rxjs.BehaviorSubject([]);\n            this._emptyContent = new rxjs.BehaviorSubject(true);\n            this._onDraggedUpdate = new rxjs.Subject();\n            this._onOverUpdate = new rxjs.Subject();\n            this._fixedZoomUpdate = new rxjs.Subject();\n            this._onDragEnterUpdate = new rxjs.Subject();\n            this._headerWidgetsUpdate = new rxjs.Subject();\n            this._contentWidgetsUpdate = new rxjs.Subject();\n            this._footerWidgetsUpdate = new rxjs.Subject();\n            this._colorUpdate = new rxjs.Subject();\n            this._defaultColor = [\n                'rgba(0, 0, 0, 1)', 'rgba(51, 153, 255, 1)', 'rgba(153, 204, 0, 1)', 'rgba(255, 102, 0, 1)',\n                'rgba(0, 204, 204, 1)', 'rgba(204, 204, 153, 1)', 'rgba(255, 153, 0, 1)', 'rgba(230, 0, 0, 1)',\n                'rgba(255, 153, 0, 1)', 'rgba(255, 255, 0, 1)', 'rgba(0, 138, 0, 1)', 'rgba(0, 102, 204, 1)',\n                'rgba(153, 51, 255, 1)', 'rgba(255, 255, 255, 1)', 'rgba(250, 204, 204, 1)',\n                'rgba(255, 235, 204, 1)', 'rgba(255, 255, 204, 1)', 'rgba(204, 232, 204, 1)',\n                'rgba(204, 224, 245, 1)', 'rgba(235, 214, 255, 1)', 'rgba(187, 187, 187, 1)',\n                'rgba(240, 102, 102, 1)', 'rgba(255, 194, 102, 1)', 'rgba(255, 255, 102, 1)',\n                'rgba(102, 185, 102, 1)', 'rgba(102, 163, 224, 1)', 'rgba(194, 133, 255, 1)',\n                'rgba(136, 136, 136, 1)', 'rgba(161, 0, 0, 1)', 'rgba(178, 107, 0, 1)',\n                'rgba(178, 178, 0, 1)', 'rgba(0, 97, 0, 1)', 'rgba(0, 71, 178, 1)',\n                'rgba(107, 36, 178, 1)', 'rgba(68, 68, 68, 1)', 'rgba(92, 0, 0, 1)', 'rgba(102, 61, 0, 1)',\n                'rgba(102, 102, 0, 1)', 'rgba(0, 55, 0, 1)', 'rgba(0, 41, 102, 1)', 'rgba(61, 20, 102, 1)'\n            ];\n            this._currentWidgetUpdate = new rxjs.BehaviorSubject(null);\n            this._formsVariablesUpdate = new rxjs.BehaviorSubject(null);\n            this._conditionNamesUpdate = new rxjs.BehaviorSubject(null);\n            /**\n             * this BehaviorSubject update export report.\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._saveReport = new rxjs.BehaviorSubject(null);\n            /**\n             * this BehaviorSubject contains the AjfReport.\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._report = new rxjs.BehaviorSubject(null);\n            this._reportStylesUpdate = new rxjs.Subject();\n            this._reportFormsUpdate = new rxjs.Subject();\n            /**\n             * dictionary for  widgetsUpdate\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._updates = {\n                header: this._headerWidgetsUpdate,\n                content: this._contentWidgetsUpdate,\n                footer: this._footerWidgetsUpdate,\n                color: this._colorUpdate,\n                customWidgets: this._customWidgetsUpdate\n            };\n            /**\n             * event emitter that notify when wont to save report\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._saveReportEvent = new core.EventEmitter();\n            this._saveFormulaTOHtml = new core.EventEmitter();\n            /**\n             * event emitter that notify when column width changed\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this.columnWidthChangedEmitter = new core.EventEmitter();\n            this._iconSets = {\n                'ajf-icon': []\n            };\n            this._lastDeletedJson = '';\n            if (reportsConfig != null) {\n                if (reportsConfig.icons != null) {\n                    this._iconSets = tslib.__assign(tslib.__assign({}, this._iconSets), reportsConfig.icons);\n                }\n            }\n            this._origin = this._originUpdate.pipe(operators.startWith('header'), operators.share());\n            this._savedReport = this._savedReportUpdate.pipe(operators.share());\n            this._onDragged = this._onDraggedUpdate.pipe(operators.startWith(false), operators.share());\n            this._onOver = this._onOverUpdate.pipe(operators.startWith(false), operators.share());\n            this._fixedZoom = this._fixedZoomUpdate.pipe(operators.startWith(false), operators.share());\n            this._onDragEnter = this._onDragEnterUpdate.pipe(operators.share());\n            this._reportStyles = this._reportStylesUpdate\n                .pipe(operators.scan(function (styles, op) {\n                return op(styles);\n            }, {}), operators.share(), operators.startWith({}));\n            this._reportForms = this._reportFormsUpdate\n                .pipe(operators.scan(function (forms, op) {\n                return op(forms);\n            }, []), operators.share(), operators.startWith([]));\n            this._customWidgets =\n                this._customWidgetsUpdate\n                    .pipe(operators.scan(function (widgets, op) {\n                    return op(widgets);\n                }, []), operators.share(), operators.startWith([]));\n            this._formsVariables =\n                this._formsVariablesUpdate\n                    .pipe(operators.filter(function (s) { return s != null; }), operators.scan(function (variables, op) {\n                    return op(variables);\n                }, []), operators.publishReplay(1), operators.refCount());\n            this._conditionNames =\n                this._conditionNamesUpdate\n                    .pipe(operators.filter(function (s) { return s != null; }), operators.scan(function (variables, op) {\n                    return op(variables);\n                }, []), operators.share(), operators.startWith([]));\n            this._headerWidgets = this._headerWidgetsUpdate\n                .pipe(operators.scan(function (widgets, op) {\n                return op(widgets);\n            }, { widgets: [], styles: {} }), operators.startWith({ widgets: [], styles: {} }), operators.publishReplay(1), operators.refCount());\n            this._headerStyles = this._headerWidgets.pipe(operators.map(function (widgets) {\n                return widgets != null ? widgets.styles : {};\n            }));\n            this._contentWidgets = this._contentWidgetsUpdate\n                .pipe(operators.scan(function (widgets, op) {\n                return op(widgets);\n            }, { widgets: [], styles: {} }), operators.startWith({ widgets: [], styles: {} }), operators.publishReplay(1), operators.refCount());\n            this._contentStyles = this._contentWidgets.pipe(operators.map(function (widgets) {\n                return widgets != null ? widgets.styles : {};\n            }));\n            this._footerWidgets = this._footerWidgetsUpdate\n                .pipe(operators.scan(function (widgets, op) {\n                return op(widgets);\n            }, { widgets: [], styles: {} }), operators.startWith({ widgets: [], styles: {} }), operators.publishReplay(1), operators.refCount());\n            this._footerStyles = this._footerWidgets.pipe(operators.map(function (widgets) {\n                return widgets != null ? widgets.styles : {};\n            }));\n            this._color = this._colorUpdate\n                .pipe(operators.scan(function (color, op) {\n                return op(color);\n            }, this._defaultColor), operators.share(), operators.startWith(this._defaultColor));\n            this._currentWidget = this._currentWidgetUpdate.pipe(operators.filter(function (s) { return s != null; }), operators.map(function (s) { return s; }), operators.scan(function (widget, op) {\n                return op(widget);\n            }, null), operators.publishReplay(1), operators.refCount());\n            this._reportForms.pipe(operators.filter(function (f) { return f.length != 0; }), operators.map(function (forms) {\n                return function (_c) {\n                    return _this.fillFormsVariables(forms);\n                };\n            })).subscribe(this._formsVariablesUpdate);\n            this._reportForms.pipe(operators.filter(function (f) { return f.length != 0; }), operators.map(function (forms) {\n                return function (_c) {\n                    return _this.fillFormsVariables(forms);\n                };\n            })).subscribe(this._conditionNamesUpdate);\n            var reportObs = this._report;\n            reportObs.pipe(operators.map(function (r) {\n                return function (_colors) {\n                    var tempColors = _this._defaultColor;\n                    if (r == null) {\n                        return [];\n                    }\n                    else {\n                        _this.parseColor(r.styles, tempColors);\n                        if (r.content) {\n                            _this.parseColor(r.content.styles, tempColors);\n                        }\n                        if (r.footer) {\n                            _this.parseColor(r.footer.styles, tempColors);\n                        }\n                        if (r.header) {\n                            _this.parseColor(r.header.styles, tempColors);\n                            for (var i = 0; i < r.header.content.length; i++) {\n                                var obj = r.header.content[i];\n                                _this.parseColor(obj.styles, tempColors);\n                                if (obj.widgetType === reports.AjfWidgetType.Layout) {\n                                    var layoutObj = obj;\n                                    for (var j = 0; j < layoutObj.content.length; j++) {\n                                        var columnObj = layoutObj.content[j];\n                                        _this.parseColor(columnObj.styles, tempColors);\n                                        for (var z = 0; z < columnObj.content.length; z++) {\n                                            var widgetObj = columnObj.content[z];\n                                            _this.parseColor(widgetObj.styles, tempColors);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    return tempColors;\n                };\n            })).subscribe(this._colorUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_styles) {\n                    if (r == null || r.styles == null) {\n                        return {};\n                    }\n                    else {\n                        return r.styles;\n                    }\n                };\n            }))\n                .subscribe(this._reportStylesUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_widgets) {\n                    if (r == null || r.header == null) {\n                        return { widgets: [], styles: {} };\n                    }\n                    else {\n                        return {\n                            widgets: r.header.content || [],\n                            styles: r.header.styles || {}\n                        };\n                    }\n                };\n            }))\n                .subscribe(this._headerWidgetsUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_widgets) {\n                    if (r == null || r.content == null) {\n                        return { widgets: [], styles: {} };\n                    }\n                    else {\n                        return {\n                            widgets: r.content.content || [],\n                            styles: r.content.styles || {}\n                        };\n                    }\n                };\n            }))\n                .subscribe(this._contentWidgetsUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_widgets) {\n                    if (r == null || r.footer == null) {\n                        return { widgets: [], styles: {} };\n                    }\n                    else {\n                        return {\n                            widgets: r.footer.content || [],\n                            styles: r.footer.styles || {}\n                        };\n                    }\n                };\n            }))\n                .subscribe(this._footerWidgetsUpdate);\n            this._saveReport.pipe(operators.map(function (json) {\n                return function (_r) {\n                    if (json = null) {\n                        return {};\n                    }\n                    return json;\n                };\n            }));\n            this._saveReportEvent\n                .pipe(operators.combineLatest(this.report, this.reportForms), operators.combineLatest(this._headerWidgets.pipe(operators.filter(function (w) { return w != null; })), this._contentWidgets.pipe(operators.filter(function (w) { return w != null; })), this._footerWidgets.pipe(operators.filter(function (w) { return w != null; })), this._reportStyles.pipe(operators.filter(function (w) { return w != null; }))))\n                .subscribe(function (r) {\n                var obj = {};\n                // const curRo = r[0][1];\n                // const forms = r[0][2] != null ? r[0][2] || []\n                //     : (curRo != null ? curRo.forms || [] : []);\n                obj.header = { content: r[1].widgets.map(function (w) { return utils.deepCopy(w); }), styles: r[1].styles };\n                obj.content = { content: r[2].widgets.map(function (w) { return utils.deepCopy(w); }), styles: r[2].styles };\n                obj.footer = { content: r[3].widgets.map(function (w) { return utils.deepCopy(w); }), styles: r[3].styles };\n                obj.styles = r[4];\n                var ro = {\n                    header: { content: r[1].widgets, styles: r[1].styles },\n                    content: { content: r[2].widgets, styles: r[2].styles },\n                    footer: { content: r[3].widgets, styles: r[3].styles },\n                    styles: r[4]\n                };\n                _this.setSaveReport(obj);\n                _this._savedReportUpdate.next(ro);\n                _this.pushJsonStack(JSON.stringify(obj));\n            });\n        }\n        AjfReportBuilderService.prototype.getFormulaToHtmlEvent = function () {\n            return this._saveFormulaTOHtml.asObservable();\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"iconSets\", {\n            get: function () { return this._iconSets; },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *\n         *  functions\n         *\n         */\n        /**\n         * utils:\n         * remove AjfNodeGroup, AjfSlide, AjfRepeatingSlide, AjfStringField from ajfnode array\n         *\n         * @param nodes\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.filterNodes = function (nodes) {\n            for (var i = 0; i < nodes.length; i++) {\n                var node = nodes[i];\n                if (node.nodeType === forms$1.AjfNodeType.AjfNodeGroup || node.nodeType === forms$1.AjfNodeType.AjfSlide ||\n                    node.nodeType === forms$1.AjfNodeType.AjfRepeatingSlide ||\n                    (node.nodeType === forms$1.AjfNodeType.AjfField &&\n                        node.fieldType === forms$1.AjfFieldType.String)) {\n                    nodes.splice(i, 1);\n                    i--;\n                }\n            }\n            return nodes;\n        };\n        AjfReportBuilderService.prototype.parseColor = function (cssStyles, colors) {\n            var styleKeys = ['background-color', 'backgroundColor', 'color'];\n            styleKeys.forEach(function (k) {\n                if (cssStyles[k] &&\n                    colors.indexOf(cssStyles[k]) == -1) {\n                    colors.push(cssStyles[k]);\n                }\n            });\n        };\n        AjfReportBuilderService.prototype.fillFormsVariables = function (forms) {\n            var variables = [];\n            for (var i = 0; i < forms.length; i++) {\n                variables[i] = { nodes: [], labels: [], names: [], types: [] };\n                if (forms[i].nodes != null && forms[i].nodes.length > 0) {\n                    variables[i].nodes = this.filterNodes(forms$1.flattenNodes(forms[i].nodes));\n                }\n                variables[i].labels = this.extractLabelsNodes(variables[i].nodes);\n                variables[i].names = this.extractNamesNodes(variables[i].nodes);\n                variables[i].types = this.extractTypesNodes(variables[i].nodes);\n            }\n            return variables;\n        };\n        /**\n         * utils:\n         *  the obj returned contains the label field of ajfNode\n         * @param nodes\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.extractLabelsNodes = function (nodes) {\n            var obj = [];\n            for (var i = 0; i < nodes.length; i++) {\n                obj.push(nodes[i].label);\n            }\n            return obj;\n        };\n        AjfReportBuilderService.prototype.extractNamesNodes = function (nodes) {\n            var obj = [];\n            for (var i = 0; i < nodes.length; i++) {\n                obj.push(nodes[i].name);\n            }\n            return obj;\n        };\n        AjfReportBuilderService.prototype.extractTypesNodes = function (nodes) {\n            var obj = [];\n            for (var i = 0; i < nodes.length; i++) {\n                var p = nodes[i];\n                obj.push(p.fieldType);\n            }\n            return obj;\n        };\n        AjfReportBuilderService.prototype.setOrigin = function (origin) {\n            this._originUpdate.next(origin);\n        };\n        /**\n         * utils:\n         * This method round the value to the decimal position\n         *\n         * @param value\n         * @param decimalpositions\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.roundTo = function (value, decimalPositions) {\n            var i = value * Math.pow(10, decimalPositions);\n            i = Math.floor(i);\n            return i / Math.pow(10, decimalPositions);\n        };\n        /**\n         * utils:\n         * This validator check if the value is a number.\n         *\n         * @param value\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.isNumber = function (value) {\n            return /^\\d+(\\.\\d+)?/.test(value);\n        };\n        AjfReportBuilderService.prototype.isNumberArray = function (value) {\n            for (var i = 0; i < value.length; i++) {\n                if (!this.isNumber(value[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"onDragged\", {\n            /**\n             * get _onDragged Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._onDragged;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"onOver\", {\n            /**\n             * get _onOver Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._onOver;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"fixedZoom\", {\n            /**\n             * get _fixedZoom Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._fixedZoom;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *  change status of _fixedZoom in true\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.fixedZoomIn = function () {\n            this._fixedZoomUpdate.next(true);\n        };\n        /**\n         *  change status of _fixedZoom in false\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.fixedZoomOut = function () {\n            this._fixedZoomUpdate.next(false);\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"onDragEnter\", {\n            /**\n             * get _onDragEnter observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._onDragEnter;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *  update _onDragEnter with  section(header,content,footer) and index\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragEnter = function (array, index) {\n            this._onDragEnterUpdate.next({ array: array, index: index });\n        };\n        /**\n         *  update _ondragged with true\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragStarted = function () {\n            this._onDraggedUpdate.next(true);\n        };\n        /**\n         *  update _onDragged with false\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragEnded = function () {\n            this._onDraggedUpdate.next(false);\n        };\n        /**\n         *  update _onOver with true\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.overStarted = function () {\n            this._onOverUpdate.next(true);\n        };\n        /**\n         * update _onOver with false\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.overEnded = function () {\n            this._onOverUpdate.next(false);\n        };\n        /**\n         *\n         *  update _onDragged with false\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragLeave = function () {\n            this._onDragEnterUpdate.next({});\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"report\", {\n            /**\n             * Get the report\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._report.asObservable();\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * emit save report event\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.saveReport = function () {\n            if (this._saveReportEvent != null) {\n                this._saveReportEvent.emit();\n            }\n        };\n        AjfReportBuilderService.prototype.saveImageFormula = function (formula) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return widget;\n                }\n                var w = widget;\n                w.flag = formula;\n                w.icon = formula;\n                return w;\n            });\n        };\n        AjfReportBuilderService.prototype.saveFormulaToHtml = function (htmlFormula, reference) {\n            if (this._saveFormulaTOHtml != null) {\n                var obj = {\n                    'formula': htmlFormula,\n                    'reference': reference\n                };\n                this._saveFormulaTOHtml.emit(obj);\n            }\n        };\n        AjfReportBuilderService.prototype.setEmptyContent = function (val) {\n            this._emptyContent.next(val);\n        };\n        AjfReportBuilderService.prototype.pushJsonStack = function (json) {\n            var currentStack = this._jsonStack.getValue();\n            if (currentStack.indexOf(json) === -1 && json !== this._lastDeletedJson) {\n                currentStack.push(json);\n            }\n            this._jsonStack.next(currentStack);\n        };\n        AjfReportBuilderService.prototype.popJsonStack = function () {\n            var emptyJson = '{\"header\":{\"content\":[],\"styles\":{}},' +\n                '\"content\":{\"content\":[],\"styles\":{}},\"' +\n                'footer\":{\"content\":[],\"styles\":{}},\"styles\":{}}';\n            var currentStack = this._jsonStack.getValue();\n            currentStack.pop();\n            this._lastDeletedJson = currentStack.pop();\n            if (currentStack.length <= 0) {\n                this._lastDeletedJson = '';\n                this._jsonStack.next([]);\n                this.updateCurrentWidget(null);\n                this.setEmptyContent(true);\n                return emptyJson;\n            }\n            this._jsonStack.next(currentStack);\n            return this._lastDeletedJson;\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"columnWidthChanged\", {\n            /**\n             * get the emitter\n             *\n             * @readonly\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this.columnWidthChangedEmitter;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"customWidgets\", {\n            /**\n             * get _customWidgets Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._customWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"headerWidgets\", {\n            /**\n             * Get the header widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._headerWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"headerStyles\", {\n            /**\n             * Get the header styles\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._headerStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"contentWidgets\", {\n            /**\n             * Get the Content widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._contentWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"contentStyles\", {\n            /**\n             * Get the content styles\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._contentStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"footerWidgets\", {\n            /**\n             * Get the footer widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._footerWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"footerStyles\", {\n            /**\n             * Get the footer styles\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._footerStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"colors\", {\n            /**\n             * Get the colors of report\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._color;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"emptyContent\", {\n            get: function () {\n                return this._emptyContent;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *\n         * @param type\n         * @param newWidget\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.updateArrayWidgets = function (type, newWidget) {\n            if ((type !== 'header') && (type !== 'content') && (type !== 'footer')) {\n                throw new Error('Unknown type ' + type);\n            }\n            this._updates[type].next(function (_widgets) {\n                return newWidget;\n            });\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"formsVariables\", {\n            /**\n             * get _formsVariables Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._formsVariables;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"conditionNames\", {\n            get: function () {\n                return this._conditionNames;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"currentWidget\", {\n            /**\n             * Get the current widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._currentWidget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * This method Update _currentWidgetUpdate with newWidget.\n         *\n         * @param newWidget\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.updateCurrentWidget = function (newWidget) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (_widget) {\n                _this._saveReportEvent.emit();\n                return newWidget;\n            });\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"getSaveReport\", {\n            /**\n             * Get the report\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._saveReport.asObservable();\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"reportSaved\", {\n            /**\n             * get _jsonSavedReport obeservable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._savedReport;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"reportStyles\", {\n            /**\n             * get _reportStyles observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._reportStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"reportForms\", {\n            /**\n             * get _reportForms observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._reportForms;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"origin\", {\n            /**\n             * get the _origin Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._origin;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * This method assigns the new width to the idx column\n         * and recalculates the width of the remaining columns of the layout.\n         * The range value are from 0,1 to 1.\n         *\n         * RULES:\n         * The min value for column is 0,1.\n         * The sum of all columns width is always 1.\n         * The method round the values.\n         * If is present only one column the width is always 1.\n         *\n         * When the new value `>` old value:\n         * the width of the remaining columns decreases.\n         * When the new value `<` old value:\n         * the width of the remaining columns increases.\n         *\n         * When values ​​are periodic, rounding assigns the gap to the current value.\n         * For example: 3 columns with 0,33 believe 1 column 0,34 and 2 columns 0,33.\n         *\n         * @param newValue\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.instantColumnValue = function (newValue, idx) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return widget;\n                }\n                var myObj = widget;\n                var size = myObj.columns.length;\n                var spreadValue = 0;\n                var objNum = 0;\n                var sum = 0;\n                var idxFirstNoObj = -1;\n                var add = false;\n                var foundFirstNoObj = false;\n                var re1 = new RegExp('(^[0]\\.\\[1-9][0-9]$)');\n                var re2 = new RegExp('(^[0]\\.\\[1-9]$)');\n                var re3 = new RegExp('^[1]$');\n                var oldValue = myObj.columns[idx];\n                newValue = Number(_this.roundTo(newValue, 2).toFixed(2));\n                if (myObj.columns[idx] == null) {\n                    throw new Error('invalid value');\n                }\n                for (var j = 0; j < size; j++) {\n                    if (myObj.columns[j] === -1) {\n                        objNum++;\n                    }\n                }\n                if (oldValue == -1) {\n                    oldValue = 0.1;\n                    objNum--;\n                    newValue = Number(_this.roundTo(1 / (size - objNum), 2).toFixed(2));\n                    myObj.columns[idx] = 0.1;\n                }\n                else if (oldValue < 0.1) {\n                    oldValue = 0.1;\n                }\n                if (newValue !== -1) {\n                    if (myObj.columns.length === 1) {\n                        myObj.columns[0] = 1;\n                        return myObj;\n                    }\n                    if (newValue < 0.1) {\n                        newValue = 0.1;\n                    }\n                    else if (newValue + 0.1 * (size - objNum - 1) > 1) {\n                        newValue = 1 - (0.1 * (size - objNum - 1));\n                    }\n                    if ((oldValue === newValue) && (oldValue === 0.1)) {\n                        myObj.columns[idx] = newValue;\n                        return myObj;\n                    }\n                    if (oldValue > newValue) {\n                        add = true;\n                        spreadValue = (oldValue - newValue) / (size - objNum - 1);\n                    }\n                    else {\n                        add = false;\n                        spreadValue = (newValue - oldValue) / (size - objNum - 1);\n                    }\n                    spreadValue = Number(_this.roundTo(spreadValue, 2).toFixed(2));\n                    if (spreadValue < 0.01) {\n                        spreadValue = 0.1;\n                    }\n                }\n                else {\n                    myObj.columns[idx] = -1;\n                    objNum++;\n                    add = true;\n                    if (myObj.columns.length == 1) {\n                        spreadValue = 1;\n                    }\n                    else {\n                        spreadValue = (oldValue) / (size - objNum);\n                    }\n                }\n                for (var i = 0; i < size; i++) {\n                    if (myObj.columns[i] !== -1) {\n                        if ((i == idx)) {\n                            myObj.columns[idx] = newValue;\n                        }\n                        else {\n                            if (add) {\n                                myObj.columns[i] += spreadValue;\n                                if ((myObj.columns[i] > 0.9) && (myObj.columns.length - objNum != 1)) {\n                                    myObj.columns[i] = 0.90;\n                                }\n                            }\n                            else {\n                                myObj.columns[i] -= spreadValue;\n                                if (myObj.columns[i] < 0.1) {\n                                    myObj.columns[i] = 0.10;\n                                }\n                            }\n                            myObj.columns[i] = Number(_this.roundTo(myObj.columns[i], 2).toFixed(2));\n                            sum += myObj.columns[i];\n                        }\n                        sum = Number(_this.roundTo(sum, 2).toFixed(2));\n                        if (foundFirstNoObj == false) {\n                            idxFirstNoObj = i;\n                            foundFirstNoObj = true;\n                        }\n                    }\n                }\n                if (newValue === -1) {\n                    myObj.columns[idx] = -1;\n                    if (foundFirstNoObj) {\n                        myObj.columns[idxFirstNoObj] += Number(_this.roundTo(1 - sum, 2).toFixed(2));\n                    }\n                }\n                else {\n                    myObj.columns[idx] = Number(_this.roundTo(1 - sum, 2).toFixed(2));\n                }\n                for (var j = 0; j < myObj.columns.length; j++) {\n                    if (myObj.columns[j] !== -1 &&\n                        !re1.test(String(myObj.columns[j])) &&\n                        !re2.test(String(myObj.columns[j])) &&\n                        !re3.test(String(myObj.columns[j]))) {\n                        _this.instantColumnValue(0.10, j);\n                    }\n                }\n                _this.columnWidthChangedEmitter.emit();\n                _this._saveReportEvent.emit();\n                return myObj;\n            });\n        };\n        /**\n         * This method set the imageUrl on the current AjfImageWidget.\n         *\n         * @param imageUrl\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setImageUrl = function (imageUrl) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                myObj.url = models.createFormula({ formula: \"\\\"\" + imageUrl + \"\\\"\" });\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.setIcon = function (icon) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                myObj.icon = models.createFormula({ formula: \"\\\"\" + icon + \"\\\"\" });\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.setFlag = function (value) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                myObj.flag = models.createFormula({ formula: \"\\\"\" + value + \"\\\"\" });\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.saveCondition = function (conditionText) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                if (widget.visibility != null) {\n                    widget.visibility.condition = conditionText;\n                }\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype.saveChartFormula = function (_label, _level, _mainIndex, _index, formulaText, aggregationType) {\n            this._currentWidgetUpdate.next(function (w) {\n                if (w == null) {\n                    return null;\n                }\n                var widget = w;\n                if (widget != null && widget.dataset != null) {\n                    var formula = models.createFormula({});\n                    var aggregation = reports.createAggregation({});\n                    // let obj: any;\n                    formula.formula = formulaText;\n                    aggregation.aggregation = aggregationType;\n                    // obj = {\n                    //   'formula': formula.toJson(),\n                    //   'aggregation': aggregation.toJson(),\n                    //   'label': label\n                    // };\n                    // dataset = AjfDataset.fromJson(obj);\n                    // check if the row that contains main data is defined\n                    /* if (widget.dataset[0] == null) {\n                      widget.dataset[0] = [];\n                    }\n            \n                    if (level == 0 && mainIndex == -1 && index == -1) {\n            \n                      widget.dataset[0].push(dataset);\n                    } else if (level == 1 && mainIndex == -1 && index == -1) {\n            \n                      widget.dataset[widget.dataset.length] = [];\n                      widget.dataset[widget.dataset.length - 1].push(dataset);\n                    } else if (index === - 1) {\n                      widget.dataset[mainIndex + 1].push(dataset);\n                    } else {\n                      widget.dataset[mainIndex].splice(index, 1, dataset);\n                    } */\n                }\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype.saveTableFormula = function (_label, aggregationType, formulaText, _mainIndex, _index) {\n            this._currentWidgetUpdate.next(function (w) {\n                if (w == null) {\n                    return null;\n                }\n                var widget = w;\n                if (widget.dataset != null) {\n                    var formula = models.createFormula({});\n                    var aggregation = reports.createAggregation({});\n                    // let dataset: AjfDataset = new AjfDataset();\n                    // let rowDataset: AjfDataset[] = [];\n                    // let obj: any;\n                    formula.formula = formulaText;\n                    aggregation.aggregation = aggregationType;\n                    // obj = {\n                    //   'formula': formula.toJson(),\n                    //   'aggregation': aggregation.toJson(),\n                    //   'label': label\n                    // };\n                    // dataset = AjfDataset.fromJson(obj);\n                    /* if (mainIndex === - 1) {\n                      widget.dataset[widget.dataset.length] = [];\n                      widget.dataset[widget.dataset.length - 1].push(dataset);\n                    } else {\n                      if (index === -1) {\n                        widget.dataset[mainIndex].push(dataset);\n                      } else {\n                        widget.dataset[mainIndex].splice(index, 1, dataset);\n                      }\n                    } */\n                }\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype.removeTableMainData = function (index) {\n            this._removeFromCurrentWidgetArrayProperty('dataset', index);\n        };\n        AjfReportBuilderService.prototype.removeData = function (_mainIndex, _index) {\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                /* if (index === -1) {\n                  myObj.dataset.splice(mainIndex, 1);\n                } else {\n                  myObj.dataset[mainIndex].splice(index, 1);\n                } */\n                return myObj;\n            });\n        };\n        /**\n         * update type field of AjfChartWidget current widget\n         *\n         * @param type\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setChartType = function (type) {\n            this._setCurrentWidgetProperty('type', type);\n        };\n        /**\n         * remove  idx element of xLabels field of AjfChartWidget current widget\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.removeMainData = function (_idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                // myObj.dataset[0].splice(idx, 1);\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.removeRelatedData = function (_mainIdx, _idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                /* if (idx == -1) {\n                  myObj.dataset.splice(mainIdx + 1, 1);\n                } else {\n                  myObj.dataset[mainIdx + 1].splice(idx, 1);\n                } */\n                return myObj;\n            });\n        };\n        /**\n         * update backgroundColor field of AjfChartWidget current widget\n         *\n         * @param colors\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setChartBackgroundColor = function (colors) {\n            this._setCurrentWidgetProperty('backgroundColor', colors);\n        };\n        AjfReportBuilderService.prototype.addChartBackgroundColor = function (color) {\n            this._addToCurrentWidgetArrayProperty('backgroundColor', color);\n        };\n        AjfReportBuilderService.prototype.removeChartBackgroundColor = function (idx) {\n            this._removeFromCurrentWidgetArrayProperty('backgroundColor', idx);\n        };\n        /**\n         * update borderColor field of AjfChartWidget current widget\n         *\n         * @param colors\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setChartBorderColor = function (colors) {\n            this._setCurrentWidgetProperty('borderColor', colors);\n        };\n        AjfReportBuilderService.prototype.setChartBorderWidth = function (value) {\n            this._setCurrentWidgetProperty('borderWidth', value);\n        };\n        AjfReportBuilderService.prototype.addChartBorderColor = function (color) {\n            this._addToCurrentWidgetArrayProperty('borderColor', color);\n        };\n        AjfReportBuilderService.prototype.removeChartBorderColor = function (idx) {\n            this._removeFromCurrentWidgetArrayProperty('borderColor', idx);\n        };\n        /**\n         * This method set the AjfReport.\n         *\n         * @param report\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setReport = function (report) {\n            this._report.next(report);\n        };\n        /**\n         * This method set the export report.\n         *\n         * @param report\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setSaveReport = function (json) {\n            this._saveReport.next(json);\n        };\n        /**\n         * This method set the font attribute on the current AjfWidget.\n         *\n         * There is a check on font-size attribute,\n         * if is no specificate the type of size font set 'pt' as default.\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setWidgetStyles = function (label, value) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                var pxStyles = [\n                    'font-size', 'height', 'width', 'border-width', 'border-radius', 'padding', 'margin'\n                ];\n                var isPxStyle = pxStyles.indexOf(label) > -1;\n                if (isPxStyle && !(value instanceof Array) && _this.isNumber(value)) {\n                    value += 'px';\n                }\n                else if (isPxStyle && value instanceof Array && _this.isNumberArray(value)) {\n                    value = value.join('px ') + \"px\";\n                }\n                myObj.styles[label] = value;\n                return myObj;\n            });\n        };\n        /**\n         * this method update the styles of origin widget array\n         *\n         * @param origin can be header content or footer\n         * @param label for example background-color\n         * @param value for example rgb(255,255,255,1)\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setSectionStyles = function (origin, label, value) {\n            if ((origin !== 'header') && (origin !== 'content') && (origin !== 'footer')) {\n                throw new Error('uncknow origin ' + origin);\n            }\n            this._updates[origin].next(function (widget) {\n                widget.styles[label] = value;\n                widget.styles = tslib.__assign({}, widget.styles);\n                return widget;\n            });\n        };\n        /**\n         * this method set the style of the whole report.\n         *\n         * @param label for example background-color\n         * @param value for example rgb(255,255,255,1)\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setReportStyles = function (label, value) {\n            this._reportStylesUpdate.next(function (styles) {\n                if (styles == null) {\n                    styles = {};\n                }\n                else {\n                    styles[label] = value;\n                    styles = tslib.__assign({}, styles);\n                }\n                return styles;\n            });\n        };\n        /**\n         *  update forms\n         *\n         * @param forms\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setReportForms = function (forms) {\n            this._reportFormsUpdate.next(function (_form) {\n                return forms || [];\n            });\n        };\n        /**\n         * update customWidgets\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addCustomWidgets = function (widget, position) {\n            this._customWidgetsUpdate.next(function (customWidgets) {\n                customWidgets = customWidgets || [];\n                if (position != null && position >= 0) {\n                    customWidgets.splice(position, 0, widget);\n                }\n                else {\n                    customWidgets.push(widget);\n                }\n                return customWidgets;\n            });\n        };\n        /**\n         * reset customWidgets\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.resetCustomWidgets = function () {\n            this._customWidgetsUpdate.next(function (customWidgets) {\n                customWidgets.length = 0;\n                return customWidgets;\n            });\n        };\n        /**\n         * update label of widget\n         *\n         * @param label\n         * @param position\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.changeLabelCustomWidget = function (label, position) {\n            this._customWidgetsUpdate.next(function (customWidgets) {\n                customWidgets[position].type = label;\n                return customWidgets;\n            });\n        };\n        /**\n         * Add an AjfWidget on _headerWidgetsUpdate\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addHeaderWidget = function (widget, position) {\n            this._addWidgetToContainer(this._headerWidgetsUpdate, widget, position);\n        };\n        /**\n         * Add an AjfWidget on _contentWidgetsUpdate\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addContentWidget = function (widget, position) {\n            this._addWidgetToContainer(this._contentWidgetsUpdate, widget, position);\n        };\n        /**\n         * Add an AjfWidget on _footerWidgetsUpdate\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addfooterWidget = function (widget, position) {\n            this._addWidgetToContainer(this._footerWidgetsUpdate, widget, position);\n        };\n        AjfReportBuilderService.prototype.unfixedColumn = function (idx) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return widget;\n                }\n                var myObj = widget;\n                var num = myObj.columns.length;\n                var checkSum = 0;\n                var objNum = 0;\n                var value = 1;\n                var spreadValue;\n                myObj.columns[idx] = 0;\n                for (var j = 0; j < num; j++) {\n                    if (myObj.columns[j] === -1) {\n                        objNum++;\n                    }\n                }\n                value = Number(_this.roundTo(1 / (num - objNum), 2).toFixed(2));\n                for (var i = 0; i < num; i++) {\n                    if (myObj.columns[i] !== -1) {\n                        myObj.columns[i] = value;\n                        checkSum = Number(_this.roundTo(checkSum + value, 2).toFixed(2));\n                    }\n                }\n                checkSum = Number(_this.roundTo(checkSum, 2).toFixed(2));\n                if (checkSum > 1) {\n                    spreadValue = parseFloat(_this.roundTo(((checkSum - 1) % 1), 2).toFixed(2));\n                    myObj.columns[idx] -= spreadValue;\n                    myObj.columns[idx] = _this.roundTo(myObj.columns[idx], 2);\n                }\n                else if (checkSum < 1) {\n                    myObj.columns[idx] += (1 - (checkSum % 1));\n                    myObj.columns[idx] = Number(_this.roundTo(myObj.columns[idx], 2).toFixed(2));\n                }\n                return myObj;\n            });\n        };\n        /**\n         * Add column on the current AjfLayoutWidget.\n         *\n         * When adding a column the width of the other columns is recalculated\n         * by dividing it by the number of column\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addColumn = function () {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                var tempObj = [];\n                var num = myObj.columns.length + 1;\n                var checkSum = 0;\n                var objNum = 0;\n                var value = 1;\n                var tmpValue;\n                if (num > 10) {\n                    throw new Error('exceed max columns');\n                }\n                for (var j = 0; j < num; j++) {\n                    if (myObj.columns[j] === -1) {\n                        objNum++;\n                    }\n                }\n                value = Number(_this.roundTo(1 / (num - objNum), 2).toFixed(2));\n                for (var i = 0; i < num; i++) {\n                    if (myObj.columns[i] === -1) {\n                        tempObj.push(-1);\n                    }\n                    else {\n                        tempObj.push(value);\n                        checkSum = Number(_this.roundTo(checkSum + value, 2).toFixed(2));\n                    }\n                }\n                checkSum = Number(_this.roundTo(checkSum, 2).toFixed(2));\n                if (checkSum > 1) {\n                    tmpValue =\n                        parseFloat(_this.roundTo(((checkSum - 1) % 1), 2).toFixed(2));\n                    tempObj[0] -= tmpValue;\n                    tempObj[0] = _this.roundTo(tempObj[0], 2);\n                }\n                else if (checkSum < 1) {\n                    tempObj[0] += (1 - (checkSum % 1));\n                    tempObj[0] = Number(_this.roundTo(tempObj[0], 2).toFixed(2));\n                }\n                myObj.columns = tempObj;\n                // TODO: @trik what's value?!?\n                var columnObj = reports.createWidget({\n                    widgetType: 7,\n                });\n                myObj.content.push(columnObj);\n                _this._saveReportEvent.emit();\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.removeWidgetToColumn = function (column, index) {\n            column.content.splice(index, 1);\n        };\n        /**\n         * This method remove a widget on the current AjfReport.\n         *\n         * @param node\n         * the position array:\n         *\n         * header -`>` headerWidgets\n         * content -`>` contentWidgets\n         * footer -`>` footerWidgets\n         * column -`>` column of layout\n         * layoutContent -`>` content of layout\n         * obj -`>` obj of layout\n         * customWidget -`>` custom widget\n         *\n         * @param idx the position array\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.remove = function (node, idx) {\n            var _this = this;\n            switch (node) {\n                case 'header':\n                case 'content':\n                case 'footer':\n                    this._updates[node].next(function (widgets) {\n                        if (widgets.widgets.length === 0) {\n                            throw new Error('you can not remove from empty array');\n                        }\n                        if (widgets.widgets[idx] == null) {\n                            throw new Error('invalid index');\n                        }\n                        widgets.widgets.splice(idx, 1);\n                        _this.updateCurrentWidget(null);\n                        return widgets;\n                    });\n                    break;\n                case 'layout':\n                    this._currentWidgetUpdate.next(function (widget) {\n                        if (widget == null) {\n                            return null;\n                        }\n                        var myObj = widget;\n                        if (myObj.columns.length === 1) {\n                            myObj.content[0].content.length = 0;\n                            return myObj;\n                        }\n                        if (myObj.columns[idx] == null) {\n                            throw new Error('this content is undefined');\n                        }\n                        else {\n                            var spread = myObj.columns[idx] / (myObj.columns.length - 1);\n                            if (myObj.columns.length > 1) {\n                                myObj.columns.splice(idx, 1);\n                                myObj.content.splice(idx, 1);\n                            }\n                            for (var i = 0; i < myObj.columns.length; i++) {\n                                myObj.columns[i] += spread;\n                            }\n                            _this.instantColumnValue(myObj.columns[0], 0);\n                        }\n                        return myObj;\n                    });\n                    break;\n                case 'column':\n                case 'layoutContent':\n                case 'unfixedColumn':\n                    this._currentWidgetUpdate.next(function (widget) {\n                        if (widget == null) {\n                            return null;\n                        }\n                        var myObj = widget;\n                        if (node === 'column') {\n                            var clm = widget;\n                            clm.content.splice(idx, 1);\n                        }\n                        else if (node === 'layoutContent') {\n                            if (myObj.columns.length === 0) {\n                                throw new Error('the column length is 0');\n                            }\n                            if (myObj.content.length === 0) {\n                                throw new Error('can not remove any widget from empty content');\n                            }\n                            if (myObj.columns[idx] != null && myObj.content[idx] == null) {\n                                throw new Error('this content is undefined');\n                            }\n                        }\n                        else if (node === 'unfixedColumn') {\n                            if (myObj.columns[idx] !== -1) {\n                                throw new Error('the column position value  isnt -1');\n                            }\n                            _this.unfixedColumn(idx);\n                        }\n                        // if (node !== 'obj') {\n                        //   let spread = myObj.columns[idx] / (myObj.columns.length - 1);\n                        //   myObj.content.splice(idx, 1);\n                        //   if (myObj.columns.length > 1) {\n                        //     myObj.columns.splice(idx, 1);\n                        //   }\n                        //   for (let i = 0; i < myObj.columns.length; i++) {\n                        //     myObj.columns[i] += spread;\n                        //   }\n                        //   this.instantColumnValue(myObj.columns[0], 0);\n                        // }\n                        return myObj;\n                    });\n                    break;\n                case 'customWidgets':\n                    {\n                        this._updates[node].next(function (widgets) {\n                            if (widgets.length === 0) {\n                                throw new Error('you can not remove from empty array');\n                            }\n                            if (widgets[idx] == null) {\n                                throw new Error('invalid index');\n                            }\n                            widgets.splice(idx, 1);\n                            return widgets;\n                        });\n                    }\n                    break;\n                default: throw new Error('unknown node ' + node);\n            }\n        };\n        /**\n         * This method add a AjfWidget on the current AjfLayoutWidget.\n         *\n         * @param newWidget\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addToContent = function (newWidget, idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                if (myObj.content[idx] != null) {\n                    myObj.content.splice(idx, 1);\n                }\n                myObj.content.splice(idx, 0, newWidget);\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.addToColumn = function (event, toColumn, position) {\n            if (event.dragData && event.dragData.fromColumn != null) {\n                var fromColumn = event.dragData.fromColumn;\n                var widget = event.dragData.widget;\n                var fromIndex = event.dragData.fromIndex;\n                fromColumn.content.splice(fromIndex, 1);\n                toColumn.content.push(widget);\n            }\n            else if (event.dragData && event.dragData.arrayFrom) {\n                this.remove(event.dragData.arrayFrom, event.dragData.fromIndex);\n                toColumn.content.push(event.dragData.widget);\n            }\n            else if (event.dragData && event.dragData.json) {\n                var obj = JSON.parse(event.dragData.json);\n                var newWidget = utils.deepCopy(obj);\n                if (position != null) {\n                    toColumn.content.splice(position, 0, newWidget);\n                }\n                else {\n                    toColumn.content.push(newWidget);\n                }\n            }\n            else {\n                var obj = { 'widgetType': reports.AjfWidgetType[event.dragData] };\n                var newWidget = utils.deepCopy(obj);\n                if (position != null) {\n                    toColumn.content.splice(position, 0, newWidget);\n                }\n                else {\n                    toColumn.content.push(newWidget);\n                }\n            }\n        };\n        AjfReportBuilderService.prototype.changePositionOnColumn = function (event, toColumn, toIndex) {\n            var fromColumn = event.dragData.fromColumn;\n            var fromIndex = event.dragData.fromIndex;\n            var fromWidget = fromColumn.content[fromIndex];\n            var toWidget = fromColumn.content[toIndex];\n            if (fromColumn == toColumn) {\n                fromColumn.content[fromIndex] = toWidget;\n                fromColumn.content[toIndex] = fromWidget;\n            }\n            else {\n                fromColumn.content.splice(fromIndex, 1);\n                toColumn.content.splice(toIndex, 0, fromWidget);\n            }\n        };\n        /**\n         * This method add the obj on the idx position.\n         * Obj have a no specificate width and is not calculate as columns\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.fixedColumn = function (idx) {\n            this.instantColumnValue(-1, idx);\n        };\n        AjfReportBuilderService.prototype.changeColumn = function (from, to, layoutWidget) {\n            if (to < 0 || to >= layoutWidget.content.length) {\n                return;\n            }\n            if (from > layoutWidget.content.length - 1 && to > from) {\n                return;\n            }\n            var fromColumn = layoutWidget.content[from];\n            var fromColumnValue = layoutWidget.columns[from];\n            var toColumn = layoutWidget.content[to];\n            var toColumnValue = layoutWidget.columns[to];\n            layoutWidget.content[from] = toColumn;\n            layoutWidget.columns[from] = toColumnValue;\n            layoutWidget.content[to] = fromColumn;\n            layoutWidget.columns[to] = fromColumnValue;\n            this.updateCurrentWidget(layoutWidget);\n        };\n        AjfReportBuilderService.prototype.addCustomColor = function (color) {\n            this._updates['color'].next(function (colors) {\n                if (colors.indexOf(color) < 0) {\n                    colors.push(color);\n                }\n                return colors;\n            });\n        };\n        AjfReportBuilderService.prototype._addWidgetToContainer = function (subj, widget, position) {\n            subj.next(function (widgets) {\n                if (position != null && position >= 0) {\n                    widgets.widgets.splice(position, 0, widget);\n                }\n                else {\n                    widgets.widgets.push(widget);\n                }\n                return widgets;\n            });\n            this.updateCurrentWidget(widget);\n            this.setEmptyContent(false);\n        };\n        AjfReportBuilderService.prototype._setCurrentWidgetProperty = function (propName, value) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                widget[propName] = value;\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype._addToCurrentWidgetArrayProperty = function (propName, value) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var arr = widget[propName];\n                arr.push(value);\n                widget[propName] = arr;\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype._removeFromCurrentWidgetArrayProperty = function (propName, idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                widget[propName].splice(idx, 1);\n                return widget;\n            });\n        };\n        AjfReportBuilderService.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderService.ctorParameters = function () { return [\n            { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [AJF_REPORTS_CONFIG,] }] }\n        ]; };\n        return AjfReportBuilderService;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component manages the report text\n     *\n     * @export\n     */\n    var AjfReportBuilderColumn = /** @class */ (function () {\n        function AjfReportBuilderColumn(_service) {\n            this._service = _service;\n            /**\n             * if true mouse event is on dragged status\n             *\n             * @memberOf AjfReportBuilderContent\n             */\n            this.showActions = false;\n            this.layoutShow = false;\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderColumn.prototype.addToList = function (event, idx, toColumn) {\n            this.onDragEndHandler();\n            if (event.dragData.fromColumn) {\n                this._service.changePositionOnColumn(event, toColumn, idx);\n            }\n            else {\n                this._service.addToColumn(event, toColumn, idx);\n            }\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderColumn.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200)\n                .subscribe(function () {\n                s.unsubscribe();\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderColumn.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        AjfReportBuilderColumn.prototype.ngOnInit = function () {\n            // this.widget = changes.widget.currentValue;\n            var _this = this;\n            this._onDraggedSub = this._service.onDragged\n                .subscribe(function (x) {\n                _this.onDragged = x;\n            });\n        };\n        AjfReportBuilderColumn.prototype.ngOnDestroy = function () {\n            this._onDraggedSub.unsubscribe();\n        };\n        AjfReportBuilderColumn.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-column',\n                        template: \"<ng-template [ngIf]=\\\"column.content != null\\\">\\n  <div class=\\\"ajf-column\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': showActions}\\\"\\n    (mouseenter)=\\\"showActions = true\\\"\\n    (mouseleave)=\\\"showActions = false\\\">\\n    <mat-list>\\n      <ng-template ngFor let-widget let-idx=\\\"index\\\" [ngForOf]=\\\"column.content\\\">\\n\\n        <ng-template [ngIf]=\\\"!onDragged\\\">\\n          <ajf-report-builder-widgets-row-buttons\\n              cdkDrag\\n              [cdkDragData]=\\\"{fromColumn: column, fromIndex: idx, widget: widget, dropZones: ['widget']}\\\"\\n              [from]=\\\"'column'\\\"\\n              [fromWidget]=\\\"column\\\"\\n              [widget]=\\\"widget\\\"\\n              [position]=\\\"idx\\\"\\n              [child]=\\\"true\\\"\\n              (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n              (cdkDragEnded)=\\\"onDragEndHandler()\\\">\\n          </ajf-report-builder-widgets-row-buttons>\\n        </ng-template>\\n        <ajf-report-builder-renderer-widget [widget]=\\\"widget\\\"></ajf-report-builder-renderer-widget>\\n      </ng-template>\\n    </mat-list>\\n  </div>\\n</ng-template>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\".ajf-column{max-width:100%;max-height:100%;background:rgba(0,0,0,0);z-index:100}.ajf-column span{flex-direction:row;width:100%}.ajf-column .mat-list{padding:0}.ajf-column:hover span,.ajf-is-on-over span{visibility:visible !important;display:block !important}.ajf-column-drop-zone{margin:10%;height:50px;background-color:#fff;border:9px solid rgba(66,134,244,.6);border-radius:16px}mat-list{height:100%;padding:0}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderColumn.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderColumn.propDecorators = {\n            column: [{ type: core.Input }]\n        };\n        return AjfReportBuilderColumn;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    function ajfReportBuilderWidgetToString(widgetType) {\n        return \"reportbuilder-\" + widgetType.toLowerCase();\n    }\n    function ajfWidgetTypeStringToIcon(widgetType) {\n        return \"widget-\" + widgetType.toLowerCase();\n    }\n    function ajfWidgetTypeToIcon(widgetType) {\n        return ajfWidgetTypeStringToIcon(reports.AjfWidgetType[widgetType]);\n    }\n    function ajfWidgetTypeStringToLabel(widgetType) {\n        return \"widgetType.\" + widgetType;\n    }\n    function ajfWidgetTypeToLabel(type) {\n        return ajfWidgetTypeStringToLabel(reports.AjfWidgetType[type]);\n    }\n    function widgetReportBuilderIconName(type) {\n        return \"reportbuilder-\" + reports.AjfWidgetType[type].toLowerCase();\n    }\n    function sanitizeConditionString(str) {\n        str = str.trim();\n        while (str.indexOf('  ') > 0) {\n            str = str.replace('  ', ' ');\n        }\n        return str;\n    }\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderConditionEditor = /** @class */ (function () {\n        /**\n         * this constructor will init current condition by ajfBuilderservice\n         * and init condition and availableFieldNames subscriptions\n         */\n        function AjfReportBuilderConditionEditor(_service) {\n            this._service = _service;\n            this.isValid = false;\n            this.names = [];\n            // conditionText is a string\n            this.conditionText = 'true';\n            //  operators is an array of any type that contains all allow operators\n            this.operators = [\n                '( )', '\\' \\'',\n                '<', '<=', '==', '>=', '>', '!=', '!',\n                '&&', '||',\n                '+', '-', '*', '/', '%',\n                'true', 'false'\n            ];\n            this._conditionNamesSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderConditionEditor.prototype.extractNames = function (formsVariables) {\n            this.names.length = 0;\n            for (var i = 0; i < formsVariables.length; i++) {\n                this.names = this.names.concat(formsVariables[i].names);\n            }\n        };\n        AjfReportBuilderConditionEditor.prototype.setCurrent = function (id, index) {\n            this.currentId = id;\n            this.appendText(this.formsVariables[id].names[index]);\n            this.checkValidation();\n        };\n        /**\n         * this method will return success if the current condtion is valid\n         * @return boolean\n         */\n        AjfReportBuilderConditionEditor.prototype.validateCondition = function () {\n            return models.validateExpression(this.conditionText, this.names);\n        };\n        // TODO complete the comment\n        /**\n         * this method will append text to json\n         * @param text      : string -\n         * @param goBackNum : number -\n         */\n        AjfReportBuilderConditionEditor.prototype.appendText = function (text, _goBackNum) {\n            if (text == null || this.conditionTextArea == null) {\n                return;\n            }\n            var el = this.conditionTextArea.nativeElement;\n            var sStart = Math.min(el.selectionStart, el.selectionEnd);\n            var sEnd = Math.max(el.selectionStart, el.selectionEnd);\n            var startingString = this.conditionText.substr(0, sStart);\n            var endingString = this.conditionText.substr(sEnd);\n            var initialLenght = startingString.length;\n            var newStr = '';\n            startingString = sanitizeConditionString(startingString);\n            endingString = sanitizeConditionString(endingString);\n            sStart += startingString.length - initialLenght +\n                text.length + (startingString.length > 0 ? 2 : 1);\n            newStr = startingString.length > 0 ? startingString + \" \" : '';\n            this.conditionText = \"\" + newStr + text + \" \" + endingString;\n            var s = rxjs.timer(0).subscribe(function () {\n                if (s && !s.closed) {\n                    s.unsubscribe();\n                }\n                if (el.createTextRange) {\n                    var range = el.createTextRange();\n                    range.move('character', sStart);\n                    range.select();\n                }\n                else {\n                    if (el.selectionStart) {\n                        el.focus();\n                        el.setSelectionRange(sStart, sStart);\n                    }\n                    else {\n                        el.focus();\n                    }\n                }\n            });\n        };\n        AjfReportBuilderConditionEditor.prototype.checkValidation = function () {\n            this.isValid = this.validateCondition();\n            if (this.isValid) {\n                this.saveCondition();\n            }\n        };\n        /**\n         * this method will save current condition\n         */\n        AjfReportBuilderConditionEditor.prototype.saveCondition = function () {\n            this._service.saveCondition(this.conditionText);\n        };\n        AjfReportBuilderConditionEditor.prototype.ngOnInit = function () {\n            var _this = this;\n            this.conditionText = this.visibility.condition;\n            this.isValid = true;\n            if (this.conditionText == 'true') {\n                this.conditionText = '';\n            }\n            this._conditionNamesSub = this._service.conditionNames\n                .subscribe(function (x) {\n                _this.formsVariables = x;\n                if (x != null) {\n                    _this.extractNames(_this.formsVariables);\n                }\n            });\n        };\n        /**\n         * this method will destroy a conditionSubscriptions\n         */\n        AjfReportBuilderConditionEditor.prototype.ngOnDestroy = function () {\n            this._conditionNamesSub.unsubscribe();\n        };\n        AjfReportBuilderConditionEditor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-condition-editor',\n                        template: \"<ng-template [ngIf]=\\\"formsVariables != null && visibility != null\\\">\\n  <mat-card>\\n    <mat-card-header>\\n      <mat-card-title>condition of visibility</mat-card-title>\\n      <mat-card-subtitle>\\n        <ng-template [ngIf]=\\\"visibility\\\">\\n          {{visibility.condition}}\\n        </ng-template>\\n      </mat-card-subtitle>\\n    </mat-card-header>\\n    <mat-card-content>\\n      <br>\\n      <form>\\n        <mat-select [(ngModel)]=\\\"a\\\" [ngModelOptions]=\\\"{standalone: true}\\\" placeholder=\\\"Select condition\\\">\\n          <ng-template ngFor let-form let-id=\\\"index\\\" [ngForOf]=\\\"formsVariables\\\">\\n            <mat-option *ngFor=\\\"let label of form.labels;let i = index;\\\" [value]=\\\"label\\\" (click)=\\\"setCurrent(id, i)\\\">\\n              {{ id}}: {{ label }}\\n            </mat-option>\\n          </ng-template>\\n        </mat-select>\\n        <mat-select [(ngModel)]=\\\"b\\\" [ngModelOptions]=\\\"{standalone: true}\\\" placeholder=\\\"Select operator\\\">\\n          <mat-option *ngFor=\\\"let operator of operators\\\" (click)=\\\"appendText(operator);\\\">\\n            {{ operator }}\\n          </mat-option>\\n        </mat-select>\\n      </form>\\n    </mat-card-content>\\n    <mat-card-actions>\\n      <ng-template [ngIf]=\\\"!isValid\\\">\\n        <ng-container translate>Invalid condition! Please check syntax.</ng-container>\\n      </ng-template>\\n      <textarea\\n          #conditionTextArea\\n          [(ngModel)]=\\\"conditionText\\\"\\n          (keyup)=\\\"checkValidation()\\\">\\n        </textarea>\\n    </mat-card-actions>\\n  </mat-card>\\n</ng-template>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-condition-editor textarea{width:100%}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderConditionEditor.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderConditionEditor.propDecorators = {\n            visibility: [{ type: core.Input }],\n            conditionTextArea: [{ type: core.ViewChild, args: ['conditionTextArea', { static: false },] }]\n        };\n        return AjfReportBuilderConditionEditor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     *  manage the content page\n     *\n     * @export\n     */\n    var AjfReportBuilderContent = /** @class */ (function () {\n        function AjfReportBuilderContent(_service, _cdRef) {\n            this._service = _service;\n            this._cdRef = _cdRef;\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            /**\n             *  observe the status of the fixed zoom\n             *\n             * @memberOf AjfReportBuilderContent\n             */\n            this.fixedZoom = false;\n            // this boolean sign if widget is in drag enter status\n            this.onDragEnter = {};\n            this.show = false;\n            // this array contains all widget locate in header zone\n            this.headerWidgets = [];\n            // this array contains all widget locate in content zone\n            this.contentWidgets = [];\n            // this array contains all widget locate in footer zone\n            this.footerWidgets = [];\n            this.onOver = false;\n            // this is the current widget\n            this.currentWidget = null;\n            /**\n             * if true mouse event is on dragged status\n             *\n             * @memberOf AjfReportBuilderContent\n             */\n            this.showActions = false;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n            this._fixedZoomSub = rxjs.Subscription.EMPTY;\n            this._onDragEnterSub = rxjs.Subscription.EMPTY;\n            this._headerWidgetsSub = rxjs.Subscription.EMPTY;\n            this._contentWidgetsSub = rxjs.Subscription.EMPTY;\n            this._footerWidgetsSub = rxjs.Subscription.EMPTY;\n            this._onOverSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this.headerStyles = this._service.headerStyles;\n            this.contentStyles = this._service.contentStyles;\n            this.footerStyles = this._service.footerStyles;\n        }\n        AjfReportBuilderContent.prototype.onMouseOver = function () {\n            this.showActions = true;\n            this._service.overStarted();\n        };\n        AjfReportBuilderContent.prototype.onMouseLeave = function () {\n            this.showActions = false;\n            this._service.overEnded();\n        };\n        AjfReportBuilderContent.prototype.canDropPredicate = function (dropZones) {\n            return function (item) {\n                for (var i = 0; i < item.data.dropZones.length; i++) {\n                    if (dropZones.indexOf(item.data.dropZones[i]) > -1) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n        };\n        AjfReportBuilderContent.prototype.isLayout = function (widget) {\n            return widget.widgetType === reports.AjfWidgetType.Layout;\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200)\n                .subscribe(function () {\n                if (s != null) {\n                    s.unsubscribe();\n                }\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        /**\n         *  sign the enter of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragEnterHandler = function (array, index) {\n            if (index == null) {\n                return;\n            }\n            this._service.dragEnter(array, index);\n        };\n        /**\n         * sign the leave of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragLeaveHandler = function () {\n            this._service.dragLeave();\n        };\n        /**\n         *  return true if array and index is === with array and index of onDragEnter\n         *\n         * @param array\n         * @param index\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragEnterCheck = function (array, index) {\n            if ((array === this.onDragEnter.array) &&\n                ((index === this.onDragEnter.index) || (index === -1))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        /**\n         * remove widget element from type array in idx position\n         *\n         * @param type can be header content or footer\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.remove = function (type, idx) {\n            this._service.remove(type, idx);\n        };\n        /**\n         * add widget element into type array in idx position\n         *\n         * @param type\n         * @param event\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.addToList = function (arrayTo, event, to) {\n            this.onDragEndHandler();\n            this._service.setOrigin(arrayTo);\n            var itemData = event.item.data;\n            if (itemData.fromColumn != null) {\n                this._service.removeWidgetToColumn(itemData.fromColumn, itemData.fromIndex);\n                this.currentWidget = itemData.widget;\n            }\n            else if (itemData.widget != null) {\n                this.remove(itemData.arrayFrom, itemData.from);\n                this.currentWidget = itemData.widget;\n            }\n            else if (itemData.json != null && itemData.json !== '') {\n                this.currentWidget = utils.deepCopy(itemData.json);\n            }\n            else {\n                var obj = { 'widgetType': reports.AjfWidgetType[itemData.widgetType] };\n                this.currentWidget = utils.deepCopy(obj);\n            }\n            this.onDragEndHandler();\n            if (this.currentWidget != null) {\n                switch (arrayTo) {\n                    case 'header':\n                        this._service.addHeaderWidget(this.currentWidget, to);\n                        break;\n                    case 'content':\n                        this._service.addContentWidget(this.currentWidget, to);\n                        break;\n                    case 'footer':\n                        this._service.addfooterWidget(this.currentWidget, to);\n                        break;\n                }\n            }\n            this.onDragLeaveHandler();\n        };\n        AjfReportBuilderContent.prototype.ngOnInit = function () {\n            var _this = this;\n            this._headerWidgetsSub = this._service.headerWidgets\n                .subscribe(function (x) {\n                _this.headerWidgets = x.widgets;\n            });\n            this._contentWidgetsSub = this._service.contentWidgets\n                .subscribe(function (x) {\n                _this.contentWidgets = x.widgets;\n            });\n            this._footerWidgetsSub = this._service.footerWidgets\n                .subscribe(function (x) {\n                _this.footerWidgets = x.widgets;\n            });\n            this._onDraggedSub = this._service.onDragged\n                .subscribe(function (x) {\n                _this.onDragged = x;\n            });\n            this._fixedZoomSub = this._service.fixedZoom\n                .subscribe(function (bool) {\n                _this.fixedZoom = bool;\n            });\n            this._onDragEnterSub = this._service.onDragEnter\n                .subscribe(function (x) {\n                _this.onDragEnter = x;\n            });\n            this._onOverSub = this._service.onOver\n                .subscribe(function (x) {\n                _this.onOver = x;\n            });\n        };\n        AjfReportBuilderContent.prototype.ngAfterViewChecked = function () {\n            this._cdRef.detectChanges();\n        };\n        AjfReportBuilderContent.prototype.ngOnDestroy = function () {\n            [\n                this._headerWidgetsSub, this._contentWidgetsSub, this._footerWidgetsSub,\n                this._currentWidgetSub, this._onDraggedSub, this._fixedZoomSub,\n                this._onOverSub, this._onDragEnterSub\n            ].forEach(function (s) { s.unsubscribe(); });\n        };\n        AjfReportBuilderContent.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-content',\n                        template: \"<div\\n  class=\\\"ajf-overlay\\\"\\n  [ngClass]=\\\"{'ajf-drag-mode': onDragged, 'ajf-zoom-mode': fixedZoom}\\\"\\n  [applyStyles]=\\\"reportStyles|async\\\"\\n  (mouseenter)=\\\"show = true\\\"\\n  (mouseleave)=\\\"show = false\\\">\\n  <div\\n    class=\\\"ajf-header\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': onDragged || show}\\\"\\n    [applyStyles]=\\\"(headerStyles|async)\\\">\\n    <mat-list *ngFor=\\\"let t of headerWidgets; let i = index\\\">\\n      <div cdkDropList\\n          class=\\\"ajf-drop-zone\\\"\\n          [ngClass]=\\\"{'ajf-show': true}\\\"\\n          [cdkDropListEnterPredicate]=\\\"canDropPredicate(['widget','column'])\\\"\\n          (cdkDropListDropped)=\\\"addToList('header', $event, i);\\\"\\n          (dragenter)=\\\"onDragEnterHandler('header', i)\\\"\\n          (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      </div>\\n      <ajf-report-builder-widgets-row-buttons\\n          cdkDrag\\n          [cdkDragData]=\\\"{widget: t,fromIndex: i,arrayFrom: 'header', dropZones: ['widget','column']}\\\"\\n          [style.display]=\\\"(showActions || onDragged)? 'block' : 'none'\\\"\\n          [from]=\\\"'header'\\\"\\n          [widget]=\\\"t\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler();\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler()\\\">\\n      </ajf-report-builder-widgets-row-buttons>\\n      <ajf-report-builder-renderer-widget [widget]=\\\"t\\\" [position]=\\\"i\\\" [section]=\\\"'header'\\\" (currentWidget)=\\\"currentWidget\\\"></ajf-report-builder-renderer-widget>\\n    </mat-list>\\n    <div cdkDropList\\n        class=\\\"ajf-drop-zone-container\\\"\\n        [ngClass]=\\\"{'ajf-show': true}\\\"\\n        [cdkDropListEnterPredicate]=\\\"canDropPredicate(['header','widget','column'])\\\"\\n        (cdkDropListDropped)=\\\"addToList('header', $event)\\\"\\n        (dragenter)=\\\"onDragEnterHandler('header', headerWidgets?.length)\\\"\\n        (dragleave)=\\\"onDragLeaveHandler()\\\">\\n    </div>\\n  </div>\\n  <div\\n    class=\\\"ajf-content\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': onDragged || show}\\\"\\n    [applyStyles]=\\\"contentStyles|async\\\">\\n    <mat-list *ngFor=\\\"let t of contentWidgets; let i = index\\\">\\n      <div cdkDropList\\n          class=\\\"ajf-drop-zone\\\"\\n          [ngClass]=\\\"{'ajf-show': true}\\\"\\n          [cdkDropListEnterPredicate]=\\\"canDropPredicate(['widget','column'])\\\"\\n          (cdkDropListDropped)=\\\"addToList('content', $event, i)\\\"\\n          (dragenter)=\\\"onDragEnterHandler('content', i)\\\"\\n          (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      </div>\\n      <ajf-report-builder-widgets-row-buttons\\n          cdkDrag\\n          [cdkDragData]=\\\"{widget: t, fromIndex: i, arrayFrom: 'content', dropZones: ['widget','column']}\\\"\\n          [style.display]=\\\"showActions ? 'block' : 'none'\\\"\\n          [from]=\\\"'content'\\\"\\n          [widget]=\\\"t\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler();\\\">\\n      </ajf-report-builder-widgets-row-buttons>\\n      <ajf-report-builder-renderer-widget [widget]=\\\"t\\\" [position]=\\\"i\\\" [section]=\\\"'content'\\\" (currentWidget)=\\\"currentWidget\\\"></ajf-report-builder-renderer-widget>\\n    </mat-list>\\n    <div cdkDropList\\n        class=\\\"ajf-drop-zone-container\\\"\\n        [ngClass]=\\\"{'ajf-show': onDragged}\\\"\\n        [cdkDropListEnterPredicate]=\\\"canDropPredicate(['content','widget','column'])\\\"\\n        (cdkDropListDropped)=\\\"addToList('content', $event)\\\"\\n        (dragenter)=\\\"onDragEnterHandler('content', contentWidgets?.length)\\\"\\n        (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      <label translate>Drop here</label>\\n    </div>\\n  </div>\\n  <div\\n    class=\\\"ajf-footer\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': onDragged || show}\\\"\\n    [applyStyles]=\\\"footerStyles|async\\\">\\n    <mat-list *ngFor=\\\"let t of footerWidgets; let i = index\\\">\\n      <div cdkDropList\\n          class=\\\"ajf-drop-zone\\\"\\n          [ngClass]=\\\"{'ajf-show': true}\\\"\\n          [cdkDropListEnterPredicate]=\\\"canDropPredicate(['widget','column'])\\\"\\n          (cdkDropListDropped)=\\\"addToList('footer', $event, i)\\\"\\n          (dragenter)=\\\"onDragEnterHandler('footer', i)\\\"\\n          (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      </div>\\n      <ajf-report-builder-widgets-row-buttons\\n          cdkDrag\\n          [cdkDragData]=\\\"{widget: t, fromIndex: i, arrayFrom: 'footer', dropZones: ['widget','column']}\\\"\\n          [style.display]=\\\"showActions ? 'block' : 'none'\\\"\\n          [from]=\\\"'footer'\\\"\\n          [widget]=\\\"t\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler()\\\">\\n      </ajf-report-builder-widgets-row-buttons>\\n      <ajf-report-builder-renderer-widget [widget]=\\\"t\\\" [position]=\\\"i\\\" [section]=\\\"'footer'\\\" (currentWidget)=\\\"currentWidget\\\"></ajf-report-builder-renderer-widget>\\n    </mat-list>\\n    <div cdkDropList\\n        class=\\\"ajf-drop-zone-container\\\"\\n        [ngClass]=\\\"{'ajf-show': onDragged}\\\"\\n        [cdkDropListEnterPredicate]=\\\"canDropPredicate(['footer','widget','column'])\\\"\\n        (cdkDropListDropped)=\\\"addToList('footer', $event)\\\"\\n        (dragenter)=\\\"onDragEnterHandler('footer', headerWidgets?.length)\\\"\\n        (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      <label translate>Drop here</label>\\n    </div>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        host: {\n                            '(mouseover)': 'onMouseOver()',\n                            '(mouseleave)': 'onMouseLeave()'\n                        },\n                        styles: [\"ajf-report-builder-content{text-align:center;display:block;margin-bottom:300px}ajf-report-builder-content .ajf-overlay.ajf-drag-mode{max-height:700px;margin-top:50px;background-color:beige}ajf-report-builder-content .ajf-drag-mode{overflow:scroll;zoom:50%}ajf-report-builder-content .ajf-drag-mode .ajf-header,ajf-report-builder-content .ajf-drag-mode .ajf-content,ajf-report-builder-content .ajf-drag-mode .ajf-footer{margin-bottom:20px;border:23px solid rgba(66,134,244,.2)}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-content .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone{width:auto;background-color:rgba(66,134,244,.2);border:23px solid #fff;position:relative;min-height:50px !important;z-index:0;opacity:1}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-content .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone-container{background-color:rgba(66,134,244,.2) !important;border:23px solid #fff !important}ajf-report-builder-content .ajf-drag-mode .ajf-header,ajf-report-builder-content .ajf-drag-mode .ajf-footer{border:23px solid rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone-container{background-color:rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone{background-color:rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-drop-zone-container{background-color:#000;border:16px solid #fff;position:relative;opacity:0;z-index:0;min-height:50px !important;display:none !important}ajf-report-builder-content .ajf-zoom-mode{zoom:50%}ajf-report-builder-content .ajf-header,ajf-report-builder-content .ajf-content,ajf-report-builder-content .ajf-footer{height:100%;min-height:50px;position:relative;text-align:center;display:block}ajf-report-builder-content .ajf-header .mat-list,ajf-report-builder-content .ajf-content .mat-list,ajf-report-builder-content .ajf-footer .mat-list{padding:0}ajf-report-builder-content .ajf-header .ajf-zoom:hover,ajf-report-builder-content .ajf-content .ajf-zoom:hover,ajf-report-builder-content .ajf-footer .ajf-zoom:hover{padding-bottom:100px;overflow-y:scroll}ajf-report-builder-content .ajf-content:hover{background-color:rgba(66,134,244,.2) !important}ajf-report-builder-content .ajf-header:hover,ajf-report-builder-content .ajf-footer:hover{background-color:rgba(255,102,102,.4)}ajf-report-builder-content .ajf-header:hover,ajf-report-builder-content .ajf-content:hover,ajf-report-builder-content .ajf-footer:hover,ajf-report-builder-content .ajf-is-on-over{border:3px dotted #3a7999}ajf-report-builder-content .ajf-header:hover label,ajf-report-builder-content .ajf-content:hover label,ajf-report-builder-content .ajf-footer:hover label,ajf-report-builder-content .ajf-is-on-over label{visibility:visible !important;opacity:.4;display:block !important}ajf-report-builder-content .ajf-header:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-content:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-footer:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-is-on-over .ajf-drop-zone-container{display:block !important}ajf-report-builder-content .ajf-header:hover mat-list button,ajf-report-builder-content .ajf-content:hover mat-list button,ajf-report-builder-content .ajf-footer:hover mat-list button,ajf-report-builder-content .ajf-is-on-over mat-list button{display:inline}ajf-report-builder-content .ajf-my-content{width:100%;white-space:nowrap;overflow-y:auto}ajf-report-builder-content .ajf-show,ajf-report-builder-content .ajf-on-drag-over{opacity:1 !important;z-index:10}ajf-report-builder-content mat-list{position:relative;display:block}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderContent.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: core.ChangeDetectorRef }\n        ]; };\n        return AjfReportBuilderContent;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderCustomWidgetDialog = /** @class */ (function () {\n        function AjfReportBuilderCustomWidgetDialog(_service, _dialogRef) {\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n        }\n        AjfReportBuilderCustomWidgetDialog.prototype.changeLabel = function () {\n            this._service.changeLabelCustomWidget(this.label, this.position);\n            this._dialogRef.close();\n        };\n        AjfReportBuilderCustomWidgetDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'custom-widget-dialog',\n                        template: \"<h3 matDialogTitle> set the label widget</h3>\\n<mat-form-field>\\n  <input matInput placeholder=\\\"add the label of this custom widget\\\" [(ngModel)]=\\\"label\\\"/>\\n</mat-form-field>\\n<button matDialogClose (click)=\\\"changeLabel()\\\"> Ok </button>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderCustomWidgetDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        AjfReportBuilderCustomWidgetDialog.propDecorators = {\n            label: [{ type: core.Input }],\n            position: [{ type: core.Input }]\n        };\n        return AjfReportBuilderCustomWidgetDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderCustomWidgetToolbarButton = /** @class */ (function () {\n        // {...t, dropZones: ['header','content','footer','column','widget']}\n        /**\n         * this constructor will init icon registry\n         */\n        function AjfReportBuilderCustomWidgetToolbarButton(_service) {\n            this._service = _service;\n            this.customWidgets = [];\n        }\n        /**\n         * this method call a service method for remove custom widget\n         *\n         * @memberOf AjfReportBuilderCustomWidgetToolbarButton\n         */\n        AjfReportBuilderCustomWidgetToolbarButton.prototype.remove = function () {\n            this._service.remove('customWidgets', this.position);\n        };\n        /**\n         * this method will init  fieldIcon and fieldLabel\n         */\n        AjfReportBuilderCustomWidgetToolbarButton.prototype.ngOnInit = function () {\n            this.widgetIcon = ajfWidgetTypeStringToIcon(this.widgetType);\n            this.widgetLabel = ajfWidgetTypeStringToLabel(this.widgetType);\n        };\n        AjfReportBuilderCustomWidgetToolbarButton.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-custom-widget-toolbar-button',\n                        template: \"<a mat-button>\\n  {{ widgetType}}\\n  <i class=\\\"material-icons\\\"(click)=\\\"remove()\\\">remove_circle_outline</i>\\n</a>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-custom-widget-toolbar-button{margin-right:20px}ajf-report-builder-custom-widget-toolbar-button a{min-height:60px;margin-top:20px}ajf-report-builder-custom-widget-toolbar-button a i{display:none}ajf-report-builder-custom-widget-toolbar-button a:hover i{display:inline;position:absolute !important;margin-left:5px !important;z-index:5}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderCustomWidgetToolbarButton.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderCustomWidgetToolbarButton.propDecorators = {\n            widgetType: [{ type: core.Input }],\n            position: [{ type: core.Input }]\n        };\n        return AjfReportBuilderCustomWidgetToolbarButton;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderCustomWidgetsToolbar = /** @class */ (function () {\n        function AjfReportBuilderCustomWidgetsToolbar(_service, dialog) {\n            this._service = _service;\n            this.dialog = dialog;\n            this.customWidgets = [];\n            this._customWidgetsSub = rxjs.Subscription.EMPTY;\n            this._threeColumnsLayout = '{\"widgetType\":0,' +\n                '\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"columns\":[0.34,0.33,0.33],' +\n                '\"content\":' +\n                '[{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]}]}';\n            this._fourColumnsLayout = '{\"widgetType\":0,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},' +\n                '\"columns\":[0.25,0.25,0.25,0.25],\"content\":' +\n                '[{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]}]}';\n        }\n        AjfReportBuilderCustomWidgetsToolbar.prototype.openDialog = function (idx) {\n            this._dialogRef = this.dialog.open(AjfReportBuilderCustomWidgetDialog);\n            this._dialogRef.componentInstance.label = this.customWidgets[idx].type;\n            this._dialogRef.componentInstance.position = idx;\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200)\n                .subscribe(function () {\n                if (s != null) {\n                    s.unsubscribe();\n                }\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        /**\n         *  sign the enter of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragEnterHandler = function (array, index) {\n            this._service.dragEnter(array, index);\n        };\n        /**\n         * sign the leave of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragLeaveHandler = function () {\n            this._service.dragLeave();\n        };\n        AjfReportBuilderCustomWidgetsToolbar.prototype.ngOnInit = function () {\n            var _this = this;\n            this._customWidgetsSub = this._service.customWidgets\n                .subscribe(function (x) {\n                _this.customWidgets = x;\n                if (_this.customWidgets.length > 0 &&\n                    _this.customWidgets[_this.customWidgets.length - 1].type == '') {\n                    _this.openDialog(_this.customWidgets.length - 1);\n                }\n            });\n            this._service.addCustomWidgets({\n                json: this._threeColumnsLayout,\n                type: 'LayoutWidgetWith3Columns',\n            });\n            this._service.addCustomWidgets({\n                json: this._fourColumnsLayout,\n                type: 'LayoutWidgetWith4Columns'\n            });\n        };\n        AjfReportBuilderCustomWidgetsToolbar.prototype.ngOnDestroy = function () {\n            this._customWidgetsSub.unsubscribe();\n            this._service.resetCustomWidgets();\n        };\n        AjfReportBuilderCustomWidgetsToolbar.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-custom-widgets-toolbar',\n                        template: \"<mat-toolbar>\\n  <ng-template ngFor let-t [ngForOf]=\\\"customWidgets\\\" let-i=\\\"index\\\">\\n    <ajf-report-builder-custom-widget-toolbar-button\\n          cdkDrag\\n          [cdkDragData]=\\\"t\\\"\\n          [widgetType]=\\\"t.type\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler();\\\"\\n          (click)=\\\"openDialog(i)\\\">\\n    </ajf-report-builder-custom-widget-toolbar-button>\\n   </ng-template>\\n</mat-toolbar>\\n\\n\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-custom-widgets-toolbar .mat-toolbar{background-color:rgba(144,238,144,.6);border-radius:16px}ajf-report-builder-custom-widgets-toolbar .ajf-hide{display:none}ajf-report-builder-custom-widgets-toolbar .ajf-show{display:block}ajf-report-builder-custom-widgets-toolbar a{margin-right:10px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderCustomWidgetsToolbar.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        return AjfReportBuilderCustomWidgetsToolbar;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfDataType;\n    (function (AjfDataType) {\n        AjfDataType[AjfDataType[\"MainData\"] = 0] = \"MainData\";\n        AjfDataType[AjfDataType[\"Dataset\"] = 1] = \"Dataset\";\n        AjfDataType[AjfDataType[\"RelatedData\"] = 2] = \"RelatedData\";\n        AjfDataType[AjfDataType[\"LENGTH\"] = 3] = \"LENGTH\";\n    })(AjfDataType || (AjfDataType = {}));\n    var AjfReportBuilderFormsAnalyzerDialog = /** @class */ (function () {\n        function AjfReportBuilderFormsAnalyzerDialog(_service, _dialogRef, _) {\n            var _this = this;\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n            this.aggregationTypes = utils.sizedEnumToStringArray(reports.AjfAggregationType);\n            //  operators is an array of any type that contains all allow operators\n            this.operators = [\n                'true', 'false', '( )', '\\' \\'',\n                '<', '<=', '>=', '>', '!=', '!',\n                '&&', '||',\n                '+', '-', '*', '/', '%', '=='\n            ];\n            this.formulaText = '';\n            this.formulaDate = '';\n            this.safeFormulaText = '';\n            this.label = '';\n            this.condition = '';\n            this.aggregationType = reports.AjfAggregationType.Sum;\n            this.currentId = 0;\n            this.currentIndex = 0;\n            this.labels = [];\n            this.currentWidget = null;\n            this.formsVariablesName = [];\n            this.formsVariablesType = [];\n            this._formAnalyzerSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._first = true;\n            if (this.init == false) {\n                this.formulaText = '';\n                this.aggregationType = reports.AjfAggregationType.Sum;\n            }\n            this._currentWidgetSub = this._service.currentWidget\n                .subscribe(function (x) {\n                if (x != null) {\n                    _this.currentWidget = x;\n                    if (_this.currentWidget.widgetType == 2) {\n                        var myObj = _this.currentWidget;\n                        if (myObj.imageType == image$1.AjfImageType.Flag) {\n                            _this.formula = (myObj.flag) ? myObj.flag.formula : '';\n                        }\n                        else {\n                            _this.formula = (myObj.icon) ? myObj.icon.formula : '';\n                        }\n                    }\n                }\n            });\n            this._formAnalyzerSub = this._service.formsVariables\n                .subscribe(function (x) {\n                if (x != null) {\n                    _this.formsVariables = x;\n                }\n            });\n        }\n        AjfReportBuilderFormsAnalyzerDialog.prototype.onEditorInit = function () {\n            monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\n                noSemanticValidation: false,\n                noSyntaxValidation: false\n            });\n            monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n                target: monaco.languages.typescript.ScriptTarget.ES2015,\n                allowNonTsExtensions: true,\n                allowJs: true,\n                module: monaco.languages.typescript.ModuleKind.None\n            });\n            try {\n                monaco.languages.typescript.javascriptDefaults.addExtraLib('', 'condition-editor-variables.d.ts');\n            }\n            catch (e) {\n                monaco.languages.typescript.javascriptDefaults\n                    ._extraLibs['condition-editor-variables.d.ts'] = '';\n            }\n            try {\n                monaco.languages.typescript.javascriptDefaults.addExtraLib('', 'condition-editor-functions.d.ts');\n            }\n            catch (e) {\n                monaco.languages.typescript.javascriptDefaults\n                    ._extraLibs['condition-editor-functions.d.ts'] = '';\n            }\n            this._initFormsVariablesNames();\n            this._updateVariables();\n            this._updateFunctions();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._initFormsVariablesNames = function () {\n            var _this = this;\n            this.formsVariables.forEach(function (formVar) {\n                formVar.names.forEach(function (name) {\n                    _this.formsVariablesName.push(name);\n                });\n                formVar.types.forEach(function (type) {\n                    _this.formsVariablesType.push(_this._fieldVarType(type) || '');\n                });\n            });\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._updateVariables = function () {\n            if (this.formsVariables == null) {\n                return;\n            }\n            try {\n                var value = '';\n                for (var i = 0; i < this.formsVariablesName.length; i++) {\n                    value += \"declare const \" + this.formsVariablesName[i] + \": \" + this.formsVariablesType[i] + \";\";\n                }\n                value += \"\\n\";\n                monaco.languages.typescript.javascriptDefaults\n                    ._extraLibs['condition-editor-variables.d.ts'] = value;\n            }\n            catch (e) { }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._updateFunctions = function () {\n            try {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-functions.d.ts'] =\n                    models.AjfExpressionUtils.UTIL_FUNCTIONS;\n            }\n            catch (e) { }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._fieldVarType = function (fieldType) {\n            switch (fieldType) {\n                case forms$1.AjfFieldType.Boolean:\n                    return 'boolean';\n                case forms$1.AjfFieldType.Date:\n                case forms$1.AjfFieldType.DateInput:\n                case forms$1.AjfFieldType.Time:\n                    return 'Date';\n                case forms$1.AjfFieldType.Empty:\n                    return 'void';\n                case forms$1.AjfFieldType.Formula:\n                    return 'number';\n                case forms$1.AjfFieldType.MultipleChoice:\n                case forms$1.AjfFieldType.SingleChoice:\n                    return 'any';\n                case forms$1.AjfFieldType.Number:\n                    return 'number';\n                case forms$1.AjfFieldType.Table:\n                    return 'Array';\n                case forms$1.AjfFieldType.String:\n                case forms$1.AjfFieldType.Text:\n                    return 'string';\n            }\n            return null;\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setCurrent = function (id, label, index) {\n            if (!this.init) {\n                this.label = label;\n                this.init = true;\n            }\n            this.insertVariable(this.formsVariables[id].names[index] || '');\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setCurrentId = function (id) {\n            this.currentId = id;\n            this.labels = this.formsVariables[id].labels;\n            this._updateVariables();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setAggregationType = function (type) {\n            this.aggregationType = type;\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.checkValidation = function () {\n            if (this.validateFormula()) {\n                this.safeFormulaText = this.formulaText;\n                this.isValid = true;\n            }\n            else {\n                this.isValid = false;\n            }\n            if (this.formulaText == '') {\n                this.isValid = false;\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.validateFormula = function () {\n            if (this.formulaText == '') {\n                this.init = false;\n            }\n            if (this.formsVariables == null) {\n                return false;\n            }\n            else {\n                return models.validateExpression(this.formulaText, this.formsVariablesName);\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveDataset = function () {\n            if (this.currentWidget != null) {\n                switch (this.currentWidget.widgetType) {\n                    case 2:\n                        this.saveImageFormula();\n                        break;\n                    case 3:\n                        this.saveFormulaHtml();\n                        break;\n                    case 4:\n                        this.saveChartFormula();\n                        break;\n                    case 5:\n                        this.saveTableFormula();\n                        break;\n                }\n            }\n            this.close();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveImageFormula = function () {\n            this._service.saveImageFormula(models.createFormula({ formula: this.formulaText }));\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveFormulaHtml = function () {\n            this._service.saveFormulaToHtml(this.formulaText, this.reference);\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveChartFormula = function () {\n            this._service.saveChartFormula(this.label, this.level, this.mainIndex, this.index, this.formulaText, this.aggregationType);\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveTableFormula = function () {\n            this._service.saveTableFormula(this.label, this.aggregationType, this.formulaText, this.mainIndex, this.index);\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.insertVariable = function (variable) {\n            if (this.monacoEditor != null && this.monacoEditor.editor != null) {\n                var editor = this.monacoEditor.editor;\n                var value = editor.getValue().split('\\n');\n                var position = editor.getPosition();\n                var ln = position.lineNumber - 1;\n                var line = value[ln];\n                var col = position.column - 1;\n                line = line.substring(0, col) + variable + line.substring(col);\n                value[ln] = line;\n                position.column += variable.length;\n                this.monacoEditor.value = value.join('\\n');\n                editor.setPosition(position);\n                editor.focus();\n                this.formulaText = editor.getValue();\n                this.checkValidation();\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setVariable = function (variable) {\n            if (this.monacoEditor != null && this.monacoEditor.editor != null) {\n                var editor = this.monacoEditor.editor;\n                editor.setValue(variable);\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.reset = function () {\n            this.formulaText = '';\n            this.aggregationType = reports.AjfAggregationType.None;\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.close = function () {\n            this.reset();\n            this._dialogRef.close();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.ngOnInit = function () {\n            this.formulaText = this.formula;\n            this.aggregationType = this.aggregation;\n            this.label = this.labelText;\n            if (this.formulaText == '' || this.formulaText == null) {\n                this.isValid = false;\n            }\n            else {\n                this.isValid = true;\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.ngAfterViewChecked = function () {\n            if (this._first && this.monacoEditor != null && this.monacoEditor.editor != null) {\n                this.insertVariable(this.formulaText || '');\n                this._first = false;\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.ngOnDestroy = function () {\n            this._formAnalyzerSub.unsubscribe();\n            this._currentWidgetSub.unsubscribe();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'forms-analyzer-dialog',\n                        template: \"<h3 matDialogTitle> Formula editor </h3>\\n<div mat-dialog-content #elem>\\n  <ng-template [ngIf]=\\\"currentWidget != null && formsVariables != null\\\">\\n    <div class=\\\"ajf-left\\\">\\n      <mat-list>\\n        <mat-list-item *ngFor=\\\"let operator of operators\\\">\\n          <button mat-button (click)=\\\"insertVariable(operator)\\\">\\n            <h4 matLine>{{operator}}</h4>\\n          </button>\\n        </mat-list-item>\\n      </mat-list>\\n    </div>\\n    <div class=\\\"ajf-main\\\">\\n      <mat-select *ngIf=\\\"!isFormula\\\" placeholder=\\\"Select type of agregation\\\" [(ngModel)]=\\\"aggregationType\\\">\\n          <mat-option [value]=\\\"idx\\\" *ngFor=\\\"let ag of aggregationTypes; let idx = index\\\"> {{ ag }} </mat-option>\\n      </mat-select>\\n      <mat-form-field *ngIf=\\\"!isFormula\\\">\\n        <textarea matInput placeholder=\\\"Name field\\\" [(ngModel)]=\\\"label\\\" ></textarea>\\n      </mat-form-field>\\n        <ajf-monaco-editor\\n          (init)=\\\"onEditorInit()\\\"\\n          (valueChange)=\\\"formulaText = $event;checkValidation();\\\"\\n          [value]=\\\"condition\\\" language=\\\"javascript\\\">\\n        </ajf-monaco-editor>\\n    </div>\\n    <div class=\\\"ajf-menu\\\">\\n      <form>\\n        <mat-select placeholder=\\\"Select form\\\" (selectionChange)=\\\"setCurrentId($event.value)\\\">\\n          <ng-template ngFor let-form let-id=\\\"index\\\" [ngForOf]=\\\"formsVariables\\\">\\n            <mat-option [value]=\\\"id\\\"> {{ id }} </mat-option>\\n          </ng-template>\\n        </mat-select>\\n      </form>\\n      <mat-list>\\n        <h3 matSubheader>Field list</h3>\\n        <mat-list-item *ngFor=\\\"let label of labels;let i = index\\\">\\n          <button mat-button (click)=\\\"setCurrent(currentId, label, i)\\\">\\n            <h4 matLine>{{label}}</h4>\\n          </button>\\n        </mat-list-item>\\n      </mat-list>\\n    </div>\\n  </ng-template>\\n</div>\\n<div mat-dialog-actions>\\n  <button mat-button (click)=\\\"saveDataset()\\\" [disabled]=\\\"!isValid\\\">Save</button>\\n</div>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"forms-analyzer-dialog{height:512px}forms-analyzer-dialog h4[matLine]{font-size:xx-small}forms-analyzer-dialog [mat-dialog-content]{flex-direction:row;display:flex;align-items:stretch;min-width:1000px}forms-analyzer-dialog [mat-dialog-content] .ajf-left{flex:1 0 10%;width:10%;overflow-y:auto}forms-analyzer-dialog [mat-dialog-content] .ajf-left form>mat-select{width:90%;margin-left:10px;margin-right:10px}forms-analyzer-dialog [mat-dialog-content] .ajf-main{flex:1 0 55%;min-width:512px}forms-analyzer-dialog [mat-dialog-content] .ajf-main monaco-editor{height:450px;min-width:300px}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-select{width:80%}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-form-field{width:80%}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-form-field textarea{width:auto;height:auto}forms-analyzer-dialog [mat-dialog-content] .ajf-main textarea{width:80%;height:75px}forms-analyzer-dialog [mat-dialog-content] .ajf-menu{flex:1 0 30%;overflow-y:auto;min-width:350px}forms-analyzer-dialog [mat-dialog-content] .ajf-menu form>mat-select{width:90%;margin-left:10px;margin-right:10px}forms-analyzer-dialog ajf-monaco-editor{min-width:400px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderFormsAnalyzerDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef },\n            { type: forms$1.AjfValidationService }\n        ]; };\n        AjfReportBuilderFormsAnalyzerDialog.propDecorators = {\n            formula: [{ type: core.Input }],\n            isFormula: [{ type: core.Input }],\n            labelText: [{ type: core.Input }],\n            aggregation: [{ type: core.Input }],\n            init: [{ type: core.Input }],\n            level: [{ type: core.Input }],\n            index: [{ type: core.Input }],\n            mainIndex: [{ type: core.Input }],\n            reference: [{ type: core.Input }],\n            monacoEditor: [{ type: core.ViewChild, args: [monacoEditor.AjfMonacoEditor, { static: false },] }]\n        };\n        return AjfReportBuilderFormsAnalyzerDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component provides the support for connect the form fields with the report\n     *\n     * @export\n     */\n    var AjfReportBuilderFormsAnalyzer = /** @class */ (function () {\n        function AjfReportBuilderFormsAnalyzer(_service, dialog) {\n            var _this = this;\n            this._service = _service;\n            this.dialog = dialog;\n            this.currentWidget = null;\n            this.forms = [];\n            this.choicesOrigins = {};\n            this.currentMainDataIndex = -1;\n            this._dataset = [];\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._formAnalyzerSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = this._service.currentWidget\n                .subscribe(function (x) {\n                if (x != null) {\n                    _this.currentWidget = x;\n                    // this._dataset = myObj.dataset;\n                }\n                else {\n                    _this.currentWidget = null;\n                }\n            });\n            this._formAnalyzerSub = this._service.formsVariables\n                .subscribe(function (x) {\n                if (x != null) {\n                    _this.formsVariables = x;\n                }\n            });\n        }\n        AjfReportBuilderFormsAnalyzer.prototype.setCurrentIndex = function (index) {\n            this.currentMainDataIndex = index;\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.isSelected = function (index) {\n            if (index === this.currentMainDataIndex) {\n                return 'primary';\n            }\n            else {\n                return undefined;\n            }\n        };\n        /**\n         *  get the X components label of the chart.\n         *  they are contained in the first row of dataset\n         *\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.getMainData = function () {\n            if (this._dataset[0] != null) {\n                var mainData = [];\n                for (var i = 0; i < this._dataset[0].length; i++) {\n                    mainData.push(this._dataset[0][i].label || '');\n                }\n                return mainData;\n            }\n            else {\n                return [];\n            }\n        };\n        /**\n         *  get the Y components label of the chart.\n         *  they are contained in the first column of dataset\n         *\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.getDataset = function () {\n            var dataset = [];\n            if (this._dataset[0] != null) {\n                for (var i = 1; i < this._dataset.length; i++) {\n                    dataset.push(this._dataset[i][0].label || '');\n                }\n                return dataset;\n            }\n            else {\n                return [];\n            }\n        };\n        /**\n         * get the related data label of the chart.\n         * they are contained in the row of the Y component\n         *\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.getRelatedData = function () {\n            if (this._dataset[this.currentMainDataIndex + 1] != null) {\n                var relatedData = [];\n                for (var i = 1; i < this._dataset[this.currentMainDataIndex + 1].length; i++) {\n                    relatedData.push(this._dataset[this.currentMainDataIndex + 1][i].label || '');\n                }\n                return relatedData;\n            }\n            else {\n                return [];\n            }\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.getTableHeader = function () {\n            var mainData = [];\n            if (this._dataset != null) {\n                for (var i = 0; i < this._dataset.length; i++) {\n                    if (this._dataset[i][0] != null) {\n                        mainData.push(this._dataset[i][0].label || '');\n                    }\n                }\n            }\n            return mainData;\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.getTableData = function () {\n            if (this._dataset[this.currentMainDataIndex] != null) {\n                var tableData = [];\n                for (var i = 1; i < this._dataset[this.currentMainDataIndex].length; i++) {\n                    if (this._dataset[this.currentMainDataIndex][i] != null) {\n                        tableData.push(this._dataset[this.currentMainDataIndex][i].label || '');\n                    }\n                }\n                return tableData;\n            }\n            else {\n                return [];\n            }\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.needMainData = function () {\n            var myObj = this.currentWidget;\n            if (myObj.chartType === reports.AjfChartType.Scatter ||\n                myObj.chartType === reports.AjfChartType.Bubble) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeMainData = function (index) {\n            this._service.removeMainData(index);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeDataset = function (index) {\n            this.currentMainDataIndex = index;\n            this._service.removeRelatedData(this.currentMainDataIndex, -1);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeTableMainData = function (index) {\n            this._service.removeTableMainData(index);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeRelatedData = function (index) {\n            this._service.removeRelatedData(this.currentMainDataIndex, index);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeData = function (mainIndex, index) {\n            this._service.removeData(mainIndex, index);\n        };\n        /**\n         *\n         *\n         *\n         * @param index\n         * @param editMode\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.openDialog = function (level, mainIndex, index, editMode) {\n            this.dialogRef = this.dialog.open(AjfReportBuilderFormsAnalyzerDialog);\n            if (editMode) {\n                if (level === 1 && index === -1) {\n                    index = 0;\n                }\n                if (level === 1) {\n                    if (this.currentWidget != null && this.currentWidget.widgetType == reports.AjfWidgetType.Chart) {\n                        mainIndex++;\n                    }\n                    index++;\n                }\n                this.dialogRef.componentInstance.labelText =\n                    this._dataset[mainIndex] &&\n                        this._dataset[mainIndex][index].label || '';\n                /* this.dialogRef.componentInstance.formula =\n                  this._dataset[mainIndex] &&\n                  this._dataset[mainIndex][index].formula.formula || ''; */\n                this.dialogRef.componentInstance.aggregation =\n                    this._dataset[mainIndex] &&\n                        this._dataset[mainIndex][index].aggregation.aggregation || reports.AjfAggregationType.None;\n            }\n            else {\n                this.dialogRef.componentInstance.labelText = '';\n                this.dialogRef.componentInstance.formula = '';\n                this.dialogRef.componentInstance.aggregation = 0;\n            }\n            // this.dialogRef.componentInstance.formsVariables = this.formsVariables;\n            this.dialogRef.componentInstance.currentWidget = this.currentWidget;\n            this.dialogRef.componentInstance.level = level;\n            this.dialogRef.componentInstance.mainIndex = mainIndex;\n            this.dialogRef.componentInstance.index = index;\n            this.dialogRef.componentInstance.init = false;\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogAddMainData = function () {\n            this.openDialog(0, -1, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartEditMainData = function () {\n            this.openDialog(0, 0, this.currentMainDataIndex, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogTableEditMainData = function () {\n            this.openDialog(0, this.currentMainDataIndex, 0, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartAddDataset = function () {\n            this.openDialog(1, -1, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogTableAddDataset = function () {\n            this.openDialog(1, this.currentMainDataIndex, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartAddDataOfDataset = function () {\n            this.openDialog(1, this.currentMainDataIndex, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartEditDataset = function () {\n            this.openDialog(1, this.currentMainDataIndex, -1, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogTableEditDataset = function (index) {\n            this.openDialog(1, this.currentMainDataIndex, index, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartEditDataOfDataset = function (index) {\n            this.openDialog(1, this.currentMainDataIndex, index, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.ngOnDestroy = function () {\n            this._currentWidgetSub.unsubscribe();\n            this._formAnalyzerSub.unsubscribe();\n        };\n        AjfReportBuilderFormsAnalyzer.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-forms-analyzer',\n                        template: \"<ng-template [ngIf]=\\\"currentWidget != null && formsVariables != null\\\">\\n  <ng-template [ngIf]=\\\"currentWidget.widgetType == 4\\\">\\n    <ng-template  [ngIf]=\\\"needMainData()\\\">\\n      <mat-tab-group>\\n        <mat-tab [label]=\\\"'Main Data' | translate\\\">\\n          <button mat-button (click)=\\\"openDialogAddMainData()\\\" style=\\\"width:100%;\\\">\\n            Add Main Data\\n          </button>\\n          <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"3\\\">\\n            <ng-template ngFor let-label [ngForOf]=\\\"getMainData()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                  {{ label }}\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"setCurrentIndex(idx);openDialogChartEditMainData()\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeMainData(idx)\\\">Remove</button>\\n              </mat-grid-tile>\\n            </ng-template>\\n          </mat-grid-list>\\n          <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n        </mat-tab>\\n      </mat-tab-group>\\n    </ng-template>\\n    <mat-tab-group>\\n      <mat-tab label=\\\"dataset\\\">\\n        <button mat-button (click)=\\\"openDialogChartAddDataset()\\\" style=\\\"width:100%\\\">\\n            add dataset\\n        </button>\\n        <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"4\\\">\\n          <ng-template ngFor let-label [ngForOf]=\\\"getDataset()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                <button mat-button [color]=\\\"isSelected(idx)\\\"(click)=\\\"setCurrentIndex(idx)\\\">\\n                  {{ label }}\\n                </button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button (click)=\\\"setCurrentIndex(idx);openDialogChartAddDataOfDataset()\\\" style=\\\"width:100%\\\">\\n                  add data\\n                </button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n              <button mat-button translate\\n                  (click)=\\\"setCurrentIndex(idx);openDialogChartEditDataset()\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeDataset(idx)\\\">Remove</button>\\n              </mat-grid-tile>\\n          </ng-template>\\n        </mat-grid-list>\\n      </mat-tab>\\n      <mat-tab label=\\\"data\\\">\\n        <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"3\\\">\\n          <ng-template ngFor let-label [ngForOf]=\\\"getRelatedData()\\\" let-idx=\\\"index\\\">\\n            <mat-grid-tile>\\n                {{ label }}\\n            </mat-grid-tile>\\n            <mat-grid-tile>\\n              <button mat-button translate\\n                  (click)=\\\"openDialogChartEditDataOfDataset(idx)\\\">Edit</button>\\n            </mat-grid-tile>\\n            <mat-grid-tile>\\n              <button mat-button translate\\n                  (click)=\\\"removeRelatedData(idx)\\\">Remove</button>\\n            </mat-grid-tile>\\n          </ng-template>\\n        </mat-grid-list>\\n        <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n      </mat-tab>\\n    </mat-tab-group>\\n  </ng-template>\\n  <ng-template [ngIf]=\\\"currentWidget.widgetType == 5\\\">\\n    <ng-template  [ngIf]=\\\"needMainData()\\\">\\n      <mat-tab-group>\\n        <mat-tab [label]=\\\"'Main Data' | translate\\\">\\n          <button mat-button (click)=\\\"openDialogAddMainData()\\\"\\n              translate\\n              style=\\\"width:100%;\\\">Add Main Data</button>\\n          <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"4\\\">\\n            <ng-template ngFor let-label [ngForOf]=\\\"getTableHeader()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                <button mat-button [color]=\\\"isSelected(idx)\\\"(click)=\\\"setCurrentIndex(idx)\\\">\\n                  {{ label }}\\n                </button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"setCurrentIndex(idx);openDialogTableAddDataset()\\\"\\n                    style=\\\"width:100%\\\">add data</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"setCurrentIndex(idx);openDialogTableEditMainData()\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeTableMainData(idx)\\\">Remove</button>\\n              </mat-grid-tile>\\n            </ng-template>\\n          </mat-grid-list>\\n          <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n        </mat-tab>\\n        <mat-tab [label]=\\\"'data' | translate\\\">\\n          <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"3\\\">\\n            <ng-template ngFor let-label [ngForOf]=\\\"getTableData()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                  {{ label }}\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"openDialogTableEditDataset(idx)\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeData(currentMainDataIndex, idx + 1)\\\">Remove</button>\\n              </mat-grid-tile>\\n            </ng-template>\\n          </mat-grid-list>\\n          <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n      </mat-tab>\\n      </mat-tab-group>\\n    </ng-template>\\n  </ng-template>\\n</ng-template>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-forms-analyzer{min-height:512px}ajf-report-builder-forms-analyzer .ajf-editor{flex:.75 0 auto;display:flex;flex-direction:row;align-items:stretch}ajf-report-builder-forms-analyzer .ajf-editor monaco-editor{flex:1 0 auto;min-width:512px;min-height:256px}ajf-report-builder-forms-analyzer mat-dialog-container{flex:1 0 auto;min-width:512px;min-height:256px}ajf-report-builder-forms-analyzer .ajf-editor-panel{flex:.25 0 auto;overflow-y:auto}ajf-report-builder-forms-analyzer .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-forms-analyzer mat-tab-group .mat-tab-body-wrapper,ajf-report-builder-forms-analyzer mat-tab-group .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderFormsAnalyzer.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        return AjfReportBuilderFormsAnalyzer;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfImageFilterPipe = /** @class */ (function () {\n        function AjfImageFilterPipe() {\n        }\n        AjfImageFilterPipe.prototype.transform = function (items, args) {\n            return items.filter(function (item) {\n                return (args.length === 0) || item.info.toLowerCase().includes(args.toLowerCase());\n            });\n        };\n        AjfImageFilterPipe.decorators = [\n            { type: core.Pipe, args: [{\n                        name: 'ajfImageFilter'\n                    },] },\n            { type: core.Injectable }\n        ];\n        return AjfImageFilterPipe;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component handle a group of image object\n     * there are 2 types of view\n     *  ajf-icon and class\n     *\n     * take a json in input\n     *  'icon': 'false', // if true ajf-icon activated\n     *  'class': ['flag-icon'], // add class in object style\n     *  'prefixClass': 'flag-icon-', // prefix of class contained on data set\n     *  'title': 'flags', title of data set\n     *  'data': [\n     *    {\n     *      'class': 'dz', strind added on prefix\n     *      'info': 'Algeria' info related to object (exploit on toolTip)\n     *    }\n     *  ]\n     * };\n     *\n     * @export\n     */\n    var AjfReportBuilderImageGroup = /** @class */ (function () {\n        function AjfReportBuilderImageGroup(_service) {\n            this._service = _service;\n            this._icon = null;\n            this._classes = '';\n            this.open = false;\n            this.valueToSearch = '';\n            /**\n             * this event is fired when the user click on formula button on quill editor rool barƒ\n             *\n             * @memberof QuillEditorComponent\n             */\n            this.formulaClick = new core.EventEmitter();\n        }\n        Object.defineProperty(AjfReportBuilderImageGroup.prototype, \"icon\", {\n            get: function () { return this._icon; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderImageGroup.prototype, \"classes\", {\n            get: function () { return this._classes; },\n            enumerable: true,\n            configurable: true\n        });\n        AjfReportBuilderImageGroup.prototype.setIcon = function (fontSet, fontIcon) {\n            this._icon = { fontSet: fontSet, fontIcon: fontIcon };\n            this._service.setIcon(this._icon);\n        };\n        AjfReportBuilderImageGroup.prototype.setFlag = function (value) {\n            this._classes = value;\n            this._service.setFlag(value);\n        };\n        AjfReportBuilderImageGroup.prototype.setSearch = function (value) {\n            this.valueToSearch = value.currentTarget.value;\n        };\n        AjfReportBuilderImageGroup.prototype.emitFormula = function () {\n            this.formulaClick.emit();\n        };\n        AjfReportBuilderImageGroup.prototype.getFlag = function (value) {\n            var returnValue = '';\n            for (var i = 0; i < this.data.class.length; i++) {\n                returnValue += this.data.class[i] + ' ';\n            }\n            returnValue += this.data.prefixClass + value;\n            return returnValue;\n        };\n        AjfReportBuilderImageGroup.prototype.toggle = function () {\n            this.open = !this.open;\n        };\n        AjfReportBuilderImageGroup.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-image-group',\n                        template: \"<ng-template [ngIf]=\\\"data != null\\\">\\n  <button mat-button (click)=\\\"toggle()\\\" style=\\\"width:100%\\\">{{data.title}}</button>\\n  <ng-template [ngIf]=\\\"open\\\">\\n    <button mat-button (click)=\\\"emitFormula()\\\">Set formula</button>\\n    <mat-card *ngIf=\\\"data.icon === 'true'\\\">\\n      <mat-card-header>\\n        {{data.title}}\\n      </mat-card-header>\\n      <mat-card-content>\\n        <mat-grid-list cols=\\\"3\\\" rowHeight=\\\"100px\\\">\\n          <ng-container *ngFor=\\\"let value of data.data\\\">\\n            <mat-grid-tile *ngFor=\\\"let icon of value.icons\\\" [colspan]=\\\"1\\\" [rowspan]=\\\"1\\\">\\n              <button style=\\\"height:100%\\\" (click)=\\\"setIcon(value.name, icon.name)\\\" [matTooltip]=\\\"icon.label\\\" matTooltipPosition=\\\"above\\\" mat-button>\\n                <mat-icon\\n                  [fontSet]=\\\"value.name\\\"\\n                  [fontIcon]=\\\"icon.name\\\">\\n                </mat-icon>\\n              </button>\\n            </mat-grid-tile>\\n          </ng-container>\\n        </mat-grid-list>\\n      </mat-card-content>\\n    </mat-card>\\n    <mat-card *ngIf=\\\"data.icon === 'false'\\\">\\n      <mat-card-header>\\n        <mat-card-title>\\n          {{data.title}}\\n        </mat-card-title>\\n        <mat-card-subtitle>\\n          <mat-form-field>\\n            <input matInput placeholder=\\\"{{data.title}} to search\\\" [(ngModel)]=\\\"valueToSearch\\\">\\n          </mat-form-field>\\n        </mat-card-subtitle>\\n      </mat-card-header>\\n      <mat-card-content>\\n        <div class=\\\"ajf-image-group-container\\\">\\n          <mat-grid-list cols=\\\"3\\\">\\n            <mat-grid-tile *ngFor=\\\"let value of data.data | ajfImageFilter: valueToSearch\\\" [colspan]=\\\"1\\\" [rowspan]=\\\"1\\\">\\n              <button style=\\\"height:100%\\\" (click)=\\\"setFlag(getFlag(value.class))\\\" matTooltip=\\\"{{value.info}}\\\" [matTooltipPosition]=\\\"'above'\\\" mat-button>\\n                <span class={{getFlag(value.class)}} style=\\\"width: 100%;height: 100%;\\\"></span>\\n              </button>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </div>\\n      </mat-card-content>\\n    </mat-card>\\n    <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n  </ng-template>\\n</ng-template>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-image-group mat-grid-list{height:300px !important;overflow-y:auto}ajf-image-group .mat-grid-list{height:300px !important}ajf-image-group mat-card>mat-card-content>.ajf-image-group-container{overflow-y:scroll;height:300px}ajf-image-group mat-icon{font-size:30px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderImageGroup.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderImageGroup.propDecorators = {\n            data: [{ type: core.Input }],\n            formulaClick: [{ type: core.Output }]\n        };\n        return AjfReportBuilderImageGroup;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderProperties = /** @class */ (function () {\n        function AjfReportBuilderProperties(_dialog, _service) {\n            var _this = this;\n            this._dialog = _dialog;\n            this._service = _service;\n            /**\n             *  true when the first time chart type is setted\n             *\n             * @memberOf AjfReportBuilderProperties\n             */\n            this.initChartType = false;\n            /**\n             * the current widget\n             *\n             * @memberOf AjfReportBuilderProperties\n             */\n            this.currentWidget = null;\n            /**\n             * this array contains the forms exploited for generate data labels\n             *\n             * @memberOf AjfReportBuilderProperties\n             */\n            this.forms = [];\n            this.colors = [];\n            /**\n             * FAKE DATA\n             */\n            this.formsJson = { forms: [] };\n            /**\n             * WIDGET\n             */\n            this.widgetName = '';\n            this.marginExpanded = false;\n            this.paddingExpanded = false;\n            this.borderWidthExpanded = false;\n            this.borderRadiusExpanded = false;\n            this.backgroundColor = '#127bdc';\n            this.styleBackgroundColor = 'rgb(255,255,255,0)';\n            this.borderColor = '#127bdc';\n            this.styleColor = 'rgb(0,0,0,0)';\n            this.align = [false, 'center', 'right', 'justify'];\n            this.fonts = [\n                false,\n                'blackr',\n                'black-italic',\n                'bold',\n                'bold-condensed',\n                'bold-condensed-italic',\n                'bold-italic',\n                'condensed',\n                'condensed-italic',\n                'italic',\n                'light',\n                'light-italic',\n                'medium',\n                'medium-italic',\n                'thinr',\n                'thin-italic'\n            ];\n            this.currentModule = {};\n            this.quillModules = {\n                toolbar: [\n                    ['formula'],\n                    ['bold', 'italic', 'underline', 'strike'],\n                    // ['blockquote', 'code-block'],\n                    [{ 'header': 1 }, { 'header': 2 }],\n                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n                    [{ 'script': 'sub' }, { 'script': 'super' }],\n                    // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n                    // [{ 'direction': 'rtl' }],                         // text direction\n                    [{ 'size': ['small', false, 'large', 'huge'] }],\n                    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n                    [{ 'color': this.colors },\n                        { 'background': this.colors }],\n                    [{ 'font': this.fonts }],\n                    [{ 'align': this.align }],\n                    ['clean'],\n                ]\n            };\n            this.chartBorderColor = [];\n            this.chartBorderWidth = 3;\n            /**\n             *\n             * IMAGE\n             */\n            this.imageUrl = 'https://angular.io/resources/images/logos/angular2/angular.png';\n            /**\n             *\n             * TEXT\n             */\n            this.htmlText = '';\n            /**\n             * these variables indicate that the user want to change section\n             */\n            this.reportStyles = false;\n            this.sectionStyles = false;\n            this.widgetStyles = true;\n            this.sectionColor = false;\n            this.widgetColor = false;\n            this.visibilitySection = false;\n            this.currentColor = '';\n            this._icon = null;\n            this.iconSet = {\n                'icon': 'true',\n                'title': 'report',\n                'data': null\n            };\n            this.flagSet = {\n                'icon': 'false',\n                'class': ['flag-icon'],\n                'prefixClass': 'flag-icon-',\n                'title': 'flags',\n                'data': [\n                    {\n                        'class': 'dz',\n                        'info': 'Algeria'\n                    },\n                    {\n                        'class': 'ao',\n                        'info': 'Angola'\n                    },\n                    {\n                        'class': 'bj',\n                        'info': 'Benin'\n                    },\n                    {\n                        'class': 'bw',\n                        'info': 'Botswana'\n                    },\n                    {\n                        'class': 'bf',\n                        'info': 'Burkina Faso'\n                    },\n                    {\n                        'class': 'bi',\n                        'info': 'Burundi'\n                    },\n                    {\n                        'class': 'cm',\n                        'info': 'Cameroon'\n                    },\n                    {\n                        'class': 'cv',\n                        'info': 'Cabo Verde'\n                    },\n                    {\n                        'class': 'cf',\n                        'info': 'The Central African Republic'\n                    },\n                    {\n                        'class': 'td',\n                        'info': 'Chad'\n                    },\n                    {\n                        'class': 'km',\n                        'info': 'The Comoros'\n                    },\n                    {\n                        'class': 'ci',\n                        'info': 'Cote D\\'avoire'\n                    },\n                    {\n                        'class': 'cd',\n                        'info': 'The Democratic Republic of Congo'\n                    },\n                    {\n                        'class': 'dj',\n                        'info': 'Dijibouti'\n                    },\n                    {\n                        'class': 'eg',\n                        'info': 'Egypt'\n                    },\n                    {\n                        'class': 'gq',\n                        'info': 'Equatorial Guinea'\n                    },\n                    {\n                        'class': 'er',\n                        'info': 'Eritrea'\n                    },\n                    {\n                        'class': 'et',\n                        'info': 'Ethiopia'\n                    },\n                    {\n                        'class': 'tf',\n                        'info': 'French Southern Territories'\n                    },\n                    {\n                        'class': 'ga',\n                        'info': 'Gabon'\n                    },\n                    {\n                        'class': 'gm',\n                        'info': 'The Gambia'\n                    },\n                    {\n                        'class': 'gh',\n                        'info': 'Ghana'\n                    },\n                    {\n                        'class': 'gn',\n                        'info': 'Guinea'\n                    },\n                    {\n                        'class': 'gw',\n                        'info': 'Guinea-Bissau'\n                    },\n                    {\n                        'class': 'ke',\n                        'info': 'Kenya'\n                    },\n                    {\n                        'class': 'ls',\n                        'info': 'Leshotho'\n                    },\n                    {\n                        'class': 'lr',\n                        'info': 'Liberia'\n                    },\n                    {\n                        'class': 'ly',\n                        'info': 'Libya'\n                    },\n                    {\n                        'class': 'mg',\n                        'info': 'Madagascar'\n                    },\n                    {\n                        'class': 'mw',\n                        'info': 'Malawy'\n                    },\n                    {\n                        'class': 'ml',\n                        'info': 'Mali'\n                    },\n                    {\n                        'class': 'mr',\n                        'info': 'Mauritania'\n                    },\n                    {\n                        'class': 'mu',\n                        'info': 'Mauritius'\n                    },\n                    {\n                        'class': 'yt',\n                        'info': 'Mayotte'\n                    },\n                    {\n                        'class': 'ma',\n                        'info': 'Marocco'\n                    },\n                    {\n                        'class': 'mz',\n                        'info': 'Mozambique'\n                    },\n                    {\n                        'class': 'na',\n                        'info': 'Namibia'\n                    },\n                    {\n                        'class': 'ne',\n                        'info': 'Niger'\n                    },\n                    {\n                        'class': 'ng',\n                        'info': 'Nigeria'\n                    },\n                    {\n                        'class': 'cg',\n                        'info': 'Republic of the Congo'\n                    },\n                    {\n                        'class': 'rw',\n                        'info': 'Rwnda'\n                    },\n                    {\n                        'class': 're',\n                        'info': 'rèunion'\n                    },\n                    {\n                        'class': 'sh',\n                        'info': 'Saint Helena, Ascension and Tristan da Cunha'\n                    },\n                    {\n                        'class': 'st',\n                        'info': 'Sao Tome and Principe'\n                    },\n                    {\n                        'class': 'sn',\n                        'info': 'Senegal'\n                    },\n                    {\n                        'class': 'sc',\n                        'info': 'Seychelles'\n                    },\n                    {\n                        'class': 'sl',\n                        'info': 'Sierra Leone'\n                    },\n                    {\n                        'class': 'so',\n                        'info': 'Somalia'\n                    },\n                    {\n                        'class': 'za',\n                        'info': 'South Africa'\n                    },\n                    {\n                        'class': 'ss',\n                        'info': 'South Sudan'\n                    },\n                    {\n                        'class': 'sd',\n                        'info': 'Sudan'\n                    },\n                    {\n                        'class': 'sz',\n                        'info': 'Swaziland'\n                    },\n                    {\n                        'class': 'tz',\n                        'info': 'Tanzania'\n                    },\n                    {\n                        'class': 'tg',\n                        'info': 'Togo'\n                    },\n                    {\n                        'class': 'tn',\n                        'info': 'Tunisia'\n                    },\n                    {\n                        'class': 'ug',\n                        'info': 'Uganda'\n                    },\n                    {\n                        'class': 'eh',\n                        'info': 'Western Sahara'\n                    },\n                    {\n                        'class': 'zm',\n                        'info': 'Zambia'\n                    },\n                    {\n                        'class': 'zw',\n                        'info': 'Zimbawe'\n                    },\n                    {\n                        'class': 'iq',\n                        'info': 'Iraq'\n                    },\n                    {\n                        'class': 'lb',\n                        'info': 'Lebanon'\n                    },\n                    {\n                        'class': 'bd',\n                        'info': 'Bangladesh'\n                    },\n                    {\n                        'class': 'ir',\n                        'info': 'Iran (Islamic Republic of)'\n                    },\n                    {\n                        'class': 'my',\n                        'info': 'Malaysia'\n                    },\n                    {\n                        'class': 'np',\n                        'info': 'Nepal'\n                    },\n                    {\n                        'class': 'pk',\n                        'info': 'Pakistan'\n                    },\n                    {\n                        'class': 'th',\n                        'info': 'Thailand'\n                    },\n                    {\n                        'class': 'jo',\n                        'info': 'Jordan'\n                    },\n                    {\n                        'class': 'ye',\n                        'info': 'Yemen'\n                    }\n                ]\n            };\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._formsSub = rxjs.Subscription.EMPTY;\n            this._colorSub = rxjs.Subscription.EMPTY;\n            this._headerStyleSub = rxjs.Subscription.EMPTY;\n            this._contentStylesSub = rxjs.Subscription.EMPTY;\n            this._footerStylesSub = rxjs.Subscription.EMPTY;\n            this._originSub = rxjs.Subscription.EMPTY;\n            this._stylesUpdatesSubs = rxjs.Subscription.EMPTY;\n            this._updateWidgetMarginEvt = new core.EventEmitter();\n            this._updateWidgetPaddingEvt = new core.EventEmitter();\n            this._updateWidgetBorderWidthEvt = new core.EventEmitter();\n            this._updateWidgetBorderRadiusEvt = new core.EventEmitter();\n            this.tabValue = 'backgroundColor';\n            this.setForms();\n            this.iconSet.data = Object.keys(_service.iconSets).filter(function (x) { return x != 'ajf-icon'; }).map(function (i) {\n                return { name: i, icons: _service.iconSets[i] };\n            });\n            this._headerStyleSub = this._service.headerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._contentStylesSub = this._service.contentStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._footerStylesSub = this._service.footerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._originSub = this._service.origin.subscribe(function (s) {\n                _this.origin = s;\n            });\n        }\n        Object.defineProperty(AjfReportBuilderProperties.prototype, \"currentLayoutWidget\", {\n            get: function () {\n                return this.currentWidget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderProperties.prototype, \"currentTextWidget\", {\n            get: function () {\n                return this.currentWidget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderProperties.prototype, \"icon\", {\n            get: function () { return this._icon; },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *\n         * UTILS\n         */\n        /**\n         * return a number value\n         *\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.toNumber = function (value) {\n            var numberPattern = /^(-)?\\d+/g;\n            if (value == null) {\n                return 0;\n            }\n            else {\n                var matches = value.match(numberPattern);\n                if (matches == null || matches.length == 0) {\n                    return 0;\n                }\n                return Number(matches[0]);\n            }\n        };\n        AjfReportBuilderProperties.prototype.toNumberArray = function (value) {\n            var _this = this;\n            if (value == null) {\n                return [];\n            }\n            else {\n                return (value || '').replace('px', '').split(' ')\n                    .filter(function (v) { return v !== '' && v != null; })\n                    .map(function (v) { return _this.toNumber(v); });\n            }\n        };\n        AjfReportBuilderProperties.prototype.fillPxNumberArray = function (value) {\n            var vl = value.length;\n            switch (vl) {\n                case 0:\n                    return [0, 0, 0, 0];\n                case 1:\n                    var v = value[0];\n                    return [v, v, v, v];\n                case 2:\n                    var v21 = value[0];\n                    var v22 = value[1];\n                    return [v21, v22, v21, v22];\n                case 3:\n                    var v31 = value[0];\n                    var v32 = value[1];\n                    var v33 = value[2];\n                    return [v31, v32, v33, v32];\n                default:\n                    return value;\n            }\n        };\n        AjfReportBuilderProperties.prototype.percent = function (value) {\n            var temp = this.roundTo(value * 100, 3);\n            return temp;\n        };\n        AjfReportBuilderProperties.prototype.roundTo = function (value, decimalPositions) {\n            var i = value * Math.pow(10, decimalPositions);\n            i = Math.floor(i);\n            return i / Math.pow(10, decimalPositions);\n        };\n        /**\n         * call to service to set the forms\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setForms = function () {\n            var forms = [];\n            try {\n                for (var i = 0; i < this.formsJson.forms.length; i++) {\n                    forms.push(utils.deepCopy(this.formsJson.forms[i]));\n                }\n                this._service.setReportForms(forms);\n            }\n            catch (e) { }\n        };\n        /**\n         * call to service to set the width of the idx column of layout widget\n         *\n         * @param col\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.instantColumnValue = function (col, idx) {\n            if (col === null) {\n                return;\n            }\n            this._service.instantColumnValue(col, idx);\n        };\n        /**\n         *  force copy of style\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        // TODO delete this\n        AjfReportBuilderProperties.prototype.setStyle = function () {\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.currentWidget.styles = utils.deepCopy(this.currentWidget.styles);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        /**\n         * call to service to add new style to widget\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setWidgetStyles = function (label, value) {\n            this._service.setWidgetStyles(label, value);\n            this.currentColor = value;\n            this.setStyle();\n        };\n        AjfReportBuilderProperties.prototype.setWidgetMargin = function (idx, value) {\n            this._updateWidgetMarginEvt.emit({ idx: idx, value: value });\n        };\n        AjfReportBuilderProperties.prototype.setWidgetPadding = function (idx, value) {\n            this._updateWidgetPaddingEvt.emit({ idx: idx, value: value });\n        };\n        AjfReportBuilderProperties.prototype.setWidgetBorderWidth = function (idx, value) {\n            this._updateWidgetBorderWidthEvt.emit({ idx: idx, value: value });\n        };\n        AjfReportBuilderProperties.prototype.setWidgetBorderRadius = function (idx, value) {\n            this._updateWidgetBorderRadiusEvt.emit({ idx: idx, value: value });\n        };\n        /**\n         * call to service to add new style to section\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setSectionStyles = function (label, value) {\n            this._service.setSectionStyles(this.origin, label, value);\n            this.styleColor = value;\n        };\n        /**\n         * call to service to add new style to report\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setReportStyles = function (label, value) {\n            this._service.setReportStyles(label, value);\n            this.styleBackgroundColor = value;\n        };\n        /**\n         * add custom color\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.addCustomColor = function () {\n            this._service.addCustomColor(this.currentColor);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        /**\n         * get the module exploit to quill text editor\n         *\n         * @returns\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.getModule = function () {\n            return this.quillModules;\n        };\n        /**\n         * true is the input type value is equal to current widget type\n         *\n         * @param value\n         * @returns\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.isChartTypeSelected = function (value) {\n            if (this.initChartType == false) {\n                return false;\n            }\n            var myObj = this.currentWidget;\n            if (value === myObj.chartType) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        /* layout functions */\n        /**\n         * call to service to add a column to current layout widget\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.addColumn = function () {\n            this._service.addColumn();\n        };\n        /**\n         * call to service to add a obj to current layout widget\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.fixedColumn = function (idx) {\n            this._service.fixedColumn(idx);\n        };\n        /**\n         * call to service to remove obj of current layout widget\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.unfixedColumn = function (idx) {\n            this._service.remove('unfixedColumn', idx);\n        };\n        /* image functions */\n        /**\n         * call to service to set image url\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setImageUrl = function () {\n            this._service.setImageUrl(this.imageUrl);\n        };\n        AjfReportBuilderProperties.prototype.setIcon = function (icon) {\n            this._icon = icon;\n            this._service.setIcon(icon);\n        };\n        /* chart functions */\n        /**\n         * call to service to set the type of chart\n         *\n         * @param type\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setChartType = function (type) {\n            this.initChartType = true;\n            this._service.setChartType(type);\n        };\n        AjfReportBuilderProperties.prototype.setChartBorderColor = function (value) {\n            if (value == null) {\n                return;\n            }\n            this._service.setChartBorderWidth(value);\n        };\n        AjfReportBuilderProperties.prototype.setTab = function (event) {\n            if (event.index === 0) {\n                this.tabValue = 'backgroundColor';\n            }\n            else {\n                this.tabValue = 'borderColor';\n            }\n        };\n        /**\n         * call to service to remove background color to current chart\n         *\n         * @param index\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.removeChartBackgroundColor = function (index) {\n            this._service.removeChartBackgroundColor(index);\n        };\n        /**\n         * call to service to remove border color to current chart\n         *\n         * @param index\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.removeChartBorderColor = function (index) {\n            this._service.removeChartBorderColor(index);\n        };\n        AjfReportBuilderProperties.prototype.hideMenu = function () {\n            this._service.updateCurrentWidget(null);\n        };\n        AjfReportBuilderProperties.prototype.openFormulaDialog = function (event) {\n            this.dialogRef = this._dialog.open(AjfReportBuilderFormsAnalyzerDialog);\n            this.dialogRef.componentInstance.aggregation = reports.AjfAggregationType.None;\n            this.dialogRef.componentInstance.isFormula = true;\n            if (event != null && event.reference != null) {\n                this.dialogRef.componentInstance.formula = event.formula;\n                this.dialogRef.componentInstance.reference = event.reference;\n            }\n        };\n        AjfReportBuilderProperties.prototype.ngOnInit = function () {\n            var _this = this;\n            this._formsSub = this._service.reportForms\n                .subscribe(function (x) {\n                _this.forms = x || [];\n            });\n            this._currentWidgetSub = this._service.currentWidget\n                .subscribe(function (x) {\n                if (x != null) {\n                    if (_this.currentWidget !== x) {\n                        _this.currentWidget = x;\n                        _this.widgetName = reports.AjfWidgetType[x.widgetType];\n                        _this.reportStyles = false;\n                        _this.sectionStyles = false;\n                        _this.widgetStyles = false;\n                        _this.sectionColor = false;\n                        _this.widgetColor = false;\n                        _this.visibilitySection = false;\n                    }\n                }\n                else {\n                    _this.currentWidget = null;\n                    _this.widgetName = '';\n                }\n            });\n            this._colorSub = this._service.colors\n                .subscribe(function (x) {\n                if (x && x.length > 0) {\n                    _this.colors = x;\n                    _this.quillModules = {\n                        toolbar: [\n                            ['bold', 'italic', 'underline', 'strike'],\n                            // ['blockquote', 'code-block'],\n                            [{ 'header': 1 }, { 'header': 2 }],\n                            [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n                            [{ 'script': 'sub' }, { 'script': 'super' }],\n                            // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n                            // [{ 'direction': 'rtl' }],                         // text direction\n                            [{ 'size': ['small', false, 'large', 'huge'] }],\n                            [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n                            [{ 'color': _this.colors },\n                                { 'background': _this.colors }],\n                            [{ 'font': _this.fonts }],\n                            [{ 'align': _this.align }],\n                            ['formula'],\n                            ['clean'],\n                        ]\n                    };\n                }\n            });\n            this.getHTML = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget != null) {\n                    var myObj = _this.currentWidget;\n                    return myObj.htmlText;\n                }\n                return '';\n            }), operators.distinctUntilChanged(), operators.startWith('<p><br></p>'));\n            this.getHeightWidget = this._service.currentWidget.pipe(operators.filter(function (x) { return x != null; }), operators.map(function (myObj) {\n                if (myObj != null) {\n                    var value = _this.toNumber(myObj.styles['height']);\n                    if (value != null || value != null) {\n                        return value;\n                    }\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getFontSizeWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return (_this.toNumber(myObj.styles['font-size']) || 12);\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getFontAlignWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return ((myObj.styles['text-align']) || 'center');\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getBorderWidthWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['border-width']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged(), operators.startWith([0, 0, 0, 0]));\n            this.getBorderWidthWidgetTop = this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getBorderWidthWidgetRight = this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getBorderWidthWidgetBottom = this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getBorderWidthWidgetLeft = this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getBorderRadiusWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['border-radius']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged(), operators.startWith([0, 0, 0, 0]));\n            this.getBorderRadiusWidgetTopLeft = this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getBorderRadiusWidgetTopRight = this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getBorderRadiusWidgetBottomRight = this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getBorderRadiusWidgetBottomLeft = this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getMarginWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null && myObj.styles['margin'] != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['margin']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged(), operators.startWith([0, 0, 0, 0]));\n            this.getMarginWidgetTop = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getMarginWidgetRight = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getMarginWidgetBottom = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getMarginWidgetLeft = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getPaddingWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null && myObj.styles['padding'] != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['padding']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getPaddingWidgetTop = this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getPaddingWidgetRight = this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getPaddingWidgetBottom = this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getPaddingWidgetLeft = this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getBackgroundColorWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null) {\n                    return myObj.styles['backgroundColor'] || '';\n                }\n            }), operators.distinctUntilChanged());\n            this.getColorWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null) {\n                    return myObj.styles['color'] || '';\n                }\n            }), operators.distinctUntilChanged());\n            this._stylesUpdatesSubs = this._updateWidgetMarginEvt\n                .pipe(operators.withLatestFrom(this.getMarginWidget))\n                .subscribe(function (r) {\n                if (r == null) {\n                    return;\n                }\n                var idx = r[0].idx;\n                var value = r[0].value;\n                var v = r[1] || [0, 0, 0, 0];\n                if (v == null || v.length < idx) {\n                    return;\n                }\n                v[idx] = value;\n                _this.setWidgetStyles('margin', v);\n            });\n            this._stylesUpdatesSubs.add(this._updateWidgetPaddingEvt\n                .pipe(operators.withLatestFrom(this.getPaddingWidget))\n                .subscribe(function (r) {\n                if (r == null) {\n                    return;\n                }\n                var idx = r[0].idx;\n                var value = r[0].value;\n                var v = r[1] || [0, 0, 0, 0];\n                if (v == null || v.length < idx) {\n                    return;\n                }\n                v[idx] = value;\n                _this.setWidgetStyles('padding', v);\n            }));\n            this._stylesUpdatesSubs\n                .add(this._updateWidgetBorderWidthEvt\n                .pipe(operators.withLatestFrom(this.getBorderWidthWidget))\n                .subscribe(function (r) {\n                if (r == null) {\n                    return;\n                }\n                var idx = r[0].idx;\n                var value = r[0].value;\n                var v = r[1] || [0, 0, 0, 0];\n                if (v == null || v.length < idx) {\n                    return;\n                }\n                v[idx] = value;\n                _this.setWidgetStyles('border-width', v);\n            }));\n            this._stylesUpdatesSubs.add(this._updateWidgetBorderRadiusEvt\n                .pipe(operators.withLatestFrom(this.getBorderRadiusWidget))\n                .subscribe(function (r) {\n                if (r == null) {\n                    return;\n                }\n                var idx = r[0].idx;\n                var value = r[0].value;\n                var v = r[1] || [0, 0, 0, 0];\n                if (v == null || v.length < idx) {\n                    return;\n                }\n                v[idx] = value;\n                _this.setWidgetStyles('border-radius', v);\n            }));\n        };\n        AjfReportBuilderProperties.prototype.ngOnChanges = function (changes) {\n            this.currentWidget = changes.widget.currentValue;\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.widgetName = reports.AjfWidgetType[this.currentWidget.widgetType];\n        };\n        AjfReportBuilderProperties.prototype.ngOnDestroy = function () {\n            this._currentWidgetSub.unsubscribe();\n            this._formsSub.unsubscribe();\n            this._colorSub.unsubscribe();\n            this._headerStyleSub.unsubscribe();\n            this._contentStylesSub.unsubscribe();\n            this._footerStylesSub.unsubscribe();\n            this._originSub.unsubscribe();\n            this._stylesUpdatesSubs.unsubscribe();\n        };\n        AjfReportBuilderProperties.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-properties',\n                        template: \"<ng-template [ngIf]=\\\"currentWidget != null\\\">\\n  <div class=\\\"ajf-content\\\">\\n    <button\\n      mat-button\\n      class=\\\"ajf-hide-menu\\\"\\n      matTooltip=\\\"hide-menu\\\"\\n      (click)=\\\"hideMenu()\\\"\\n      [matTooltipPosition]=\\\"'above'\\\">\\n      <mat-icon>remove_circle_outline</mat-icon>\\n    </button>\\n    <mat-button-toggle-group class=\\\"ajf-menu-css\\\">\\n      <mat-button-toggle\\n        (click)=\\\"reportStyles = !reportStyles; sectionStyles = false; widgetStyles = false\\\" value=\\\"left\\\"\\n        [ngClass]=\\\"{'ajf-selected': reportStyles}\\\">\\n        report\\n        <ng-container translate>CSS style</ng-container>\\n      </mat-button-toggle>\\n      <mat-button-toggle\\n        (click)=\\\"sectionStyles = !sectionStyles; reportStyles = false; widgetStyles = false\\\"\\n        [ngClass]=\\\"{'ajf-selected': sectionStyles}\\\">\\n        {{ origin }}\\n        <ng-container translate>CSS style</ng-container>\\n      </mat-button-toggle>\\n      <mat-button-toggle\\n        (click)=\\\"widgetStyles = !widgetStyles; sectionStyles = false; reportStyles = false\\\"\\n        [ngClass]=\\\"{'ajf-selected': widgetStyles}\\\">\\n        {{ widgetName }}\\n        <ng-container translate>CSS style</ng-container>\\n      </mat-button-toggle>\\n    </mat-button-toggle-group>\\n    <div class=\\\"ajf-style-container\\\" *ngIf=\\\"(reportStyles) ? true : false \\\">\\n      <mat-tab-group>\\n        <mat-tab label=\\\"Background Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'report'\\\" [label]=\\\"'color'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n      </mat-tab-group>\\n    </div>\\n    <div class=\\\"ajf-style-container\\\" *ngIf=\\\"(sectionStyles) ? true : false \\\">\\n      <mat-tab-group>\\n        <mat-tab label=\\\"Background Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'section'\\\" [label]=\\\"'color'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n      </mat-tab-group>\\n    </div>\\n    <div class=\\\"ajf-style-container\\\" *ngIf=\\\"(widgetStyles) ? true : false \\\">\\n      <mat-tab-group *ngIf=\\\"(currentWidget.widgetType != 4)\\\">\\n        <mat-tab label=\\\"Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'widget'\\\" [label]=\\\"'color'\\\" [init]=\\\"'icon'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n        <mat-tab label=\\\"Background Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'widget'\\\" [label]=\\\"'background-color'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n      </mat-tab-group>\\n      <div class=\\\"properties-container\\\" *ngIf=\\\"(currentWidget.widgetType !== 8)\\\">\\n        <div class=\\\"ajf-layout-preview\\\">\\n          <div class=\\\"ajf-vbottom\\\">\\n            <div translate>height</div>\\n            <div>{{ getHeightWidget|async }}</div>\\n          </div>\\n          <div class=\\\"ajf-margin-box\\\">\\n            <div class=\\\"ajf-top-label\\\" translate>margin</div>\\n            <div class=\\\"ajf-vtop\\\">{{ getMarginWidgetTop|async }}</div>\\n            <div class=\\\"ajf-vright\\\">{{ getMarginWidgetRight|async }}</div>\\n            <div class=\\\"ajf-vbottom\\\">{{ getMarginWidgetBottom|async }}</div>\\n            <div class=\\\"ajf-vleft\\\">{{ getMarginWidgetLeft|async }}</div>\\n            <div class=\\\"ajf-border-box\\\">\\n              <div class=\\\"ajf-vtop\\\">{{ getBorderWidthWidgetTop|async }}</div>\\n              <div class=\\\"ajf-vright\\\">{{ getBorderWidthWidgetRight|async }}</div>\\n              <div class=\\\"ajf-vbottom\\\">{{ getBorderWidthWidgetBottom|async }}</div>\\n              <div class=\\\"ajf-vleft\\\">{{ getBorderWidthWidgetLeft|async }}</div>\\n              <div class=\\\"ajf-vtl\\\">{{ getBorderRadiusWidgetTopLeft|async }}</div>\\n              <div class=\\\"ajf-vtr\\\">{{ getBorderRadiusWidgetTopRight|async }}</div>\\n              <div class=\\\"ajf-vbr\\\">{{ getBorderRadiusWidgetBottomRight|async }}</div>\\n              <div class=\\\"ajf-vbl\\\">{{ getBorderRadiusWidgetBottomLeft|async }}</div>\\n              <div class=\\\"ajf-top-label\\\" translate>border</div>\\n              <div class=\\\"ajf-padding-box\\\">\\n                <div class=\\\"ajf-top-label\\\" translate>padding</div>\\n                <div class=\\\"ajf-vtop\\\">{{ getPaddingWidgetTop|async }}</div>\\n                <div class=\\\"ajf-vright\\\">{{ getPaddingWidgetRight|async }}</div>\\n                <div class=\\\"ajf-vbottom\\\">{{ getPaddingWidgetBottom|async }}</div>\\n                <div class=\\\"ajf-vleft\\\">{{ getPaddingWidgetLeft|async }}</div>\\n                <div class=\\\"ajf-content-box\\\" translate>content</div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n        <mat-grid-list rowHeight=\\\"2em\\\" cols=\\\"12\\\">\\n          <mat-grid-tile></mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span>height</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('height', $event.value)\\\"\\n              min=\\\"0\\\"\\n              max=\\\"200\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getHeightWidget|async\\\"\\n              tickInterval=\\\"1\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!marginExpanded\\\"\\n                (click)=\\\"marginExpanded = !marginExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"marginExpanded\\\"\\n                (click)=\\\"marginExpanded = !marginExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>margin</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              [disabled]=\\\"marginExpanded\\\"\\n              (change)=\\\"setWidgetStyles('margin', $event.value)\\\"\\n              min=\\\"-50\\\"\\n              max=\\\"50\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getMarginWidgetTop|async\\\"\\n              tickInterval=\\\"auto\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"marginExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin top</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(0, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetTop|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(1, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin bottom</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(2, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetBottom|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(3, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!paddingExpanded\\\"\\n                (click)=\\\"paddingExpanded = !paddingExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"paddingExpanded\\\"\\n                (click)=\\\"paddingExpanded = !paddingExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>padding</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('padding', $event.value)\\\"\\n              min=\\\"-50\\\"\\n              max=\\\"50\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getPaddingWidgetTop|async\\\"\\n              tickInterval=\\\"auto\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"paddingExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding top</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(0, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetTop|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(1, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding bottom</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(2, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetBottom|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(3, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!borderWidthExpanded\\\"\\n                (click)=\\\"borderWidthExpanded = !borderWidthExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"borderWidthExpanded\\\"\\n                (click)=\\\"borderWidthExpanded = !borderWidthExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>border width</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('border-width', $event.value)\\\"\\n              min=\\\"0\\\"\\n              max=\\\"10\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getBorderWidthWidgetTop|async\\\"\\n              tickInterval=\\\"1\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"borderWidthExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width top</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(0, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetTop|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(1, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width bottom</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(2, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetBottom|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(3, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!borderRadiusExpanded\\\"\\n                (click)=\\\"borderRadiusExpanded = !borderRadiusExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"borderRadiusExpanded\\\"\\n                (click)=\\\"borderRadiusExpanded = !borderRadiusExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>border radius</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('border-radius', $event.value)\\\"\\n              min=\\\"0\\\"\\n              max=\\\"100\\\"\\n              step=\\\"1\\\"\\n              tickInterval=\\\"10\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"borderRadiusExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius top left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(0, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetTopLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius top right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(1, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetTopRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius bottom left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(2, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetBottomLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius bottom right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(3, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetBottomRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n      </div>\\n      <div class=\\\"properties-container\\\" *ngIf=\\\"currentWidget.widgetType === 2\\\">\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile></mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"3\\\">\\n            <span translate>font size</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('font-size', $event.value);\\\"\\n              min=\\\"1\\\"\\n              max=\\\"150\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getFontSizeWidget|async\\\"\\n              tickInterval=\\\"1\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n      </div>\\n      <ng-template [ngIf]=\\\"currentWidget.widgetType === 5\\\">\\n        <br>\\n        <form>\\n          <mat-form-field>\\n            <input\\n              matInput\\n              [placeholder]=\\\"'Font size' | translate\\\"\\n              [value]=\\\"getFontSizeWidget|async\\\"\\n              [(ngModel)]=\\\"fontSize\\\"\\n              [ngModelOptions]=\\\"{standalone: true}\\\"\\n              (change)=\\\"setWidgetStyles('font-size', fontSize)\\\">\\n          </mat-form-field>\\n          <mat-select\\n              (selectionChange)=\\\"setWidgetStyles('font-style', $event.value)\\\"\\n              [placeholder]=\\\"'Font style' | translate\\\">\\n            <mat-option translate value=\\\"normal\\\">Normal</mat-option>\\n            <mat-option translate value=\\\"italic\\\">Italic</mat-option>\\n            <mat-option translate value=\\\"oblique\\\">Oblique</mat-option>\\n          </mat-select>\\n          <mat-select\\n              (selectionChange)=\\\"setWidgetStyles('text-align', $event.value)\\\"\\n              [placeholder]=\\\"'Align' | translate\\\">\\n            <mat-option translate value=\\\"center\\\">Center</mat-option>\\n            <mat-option translate value=\\\"left\\\">Left</mat-option>\\n            <mat-option translate value=\\\"right\\\">Right</mat-option>\\n          </mat-select>\\n        </form>\\n      </ng-template>\\n      <h1>\\n        <ng-container translate>properties of</ng-container>\\n        {{ widgetName }}\\n      </h1>\\n    </div>\\n    <div [ngSwitch]=\\\"currentWidget.widgetType\\\">\\n      <ng-template [ngSwitchCase]=\\\"0\\\">\\n        <h1 translate>Column</h1>\\n        <ng-template ngFor let-col [ngForOf]=\\\"currentLayoutWidget.columns\\\" let-idx=\\\"index\\\">\\n          <mat-toolbar>\\n              <mat-toolbar-row *ngIf=\\\"col !== -1\\\">\\n                <mat-grid-list cols=\\\"12\\\">\\n                  <mat-grid-tile colspan=\\\"1\\\">\\n                    {{idx + 1}}\\n                  </mat-grid-tile>\\n                  <mat-grid-tile colspan=\\\"9\\\">\\n                    <mat-slider\\n                      style=\\\"width: 90%;\\\"\\n                      min=\\\"0.1\\\"\\n                      max=\\\"1\\\"\\n                      step=\\\"0.01\\\"\\n                      value=\\\"{{col}}\\\"\\n                      thumb-label=\\\"true\\\"\\n                      tick-interval=\\\"true\\\"\\n                      (change)=\\\"instantColumnValue($event.value,idx)\\\">\\n                    </mat-slider>\\n                    {{percent(col)}}%\\n                  </mat-grid-tile>\\n                  <mat-grid-tile colspan=\\\"2\\\">\\n                    <button style=\\\"width: 5%;\\\" mat-button (click)=\\\"fixedColumn(idx)\\\">fixed</button>\\n                  </mat-grid-tile>\\n                </mat-grid-list>\\n              </mat-toolbar-row>\\n              <mat-toolbar-row *ngIf=\\\"col == -1\\\">\\n                <mat-grid-list cols=\\\"12\\\">\\n                  <mat-grid-tile colspan=\\\"1\\\">\\n                    {{idx + 1}}\\n                  </mat-grid-tile>\\n                  <mat-grid-tile colspan=\\\"11\\\">\\n                    <button  style=\\\"width: 90%;\\\" mat-button (click)=\\\"unfixedColumn(idx)\\\">percent</button>\\n                  </mat-grid-tile>\\n                </mat-grid-list>\\n              </mat-toolbar-row>\\n          </mat-toolbar>\\n        </ng-template>\\n        <mat-toolbar>\\n          <mat-toolbar-row>\\n            <button mat-button\\n                translate\\n                (click)=\\\"addColumn()\\\"\\n                *ngIf=\\\"currentLayoutWidget.columns.length < 10\\\">Add column</button>\\n          </mat-toolbar-row>\\n        </mat-toolbar>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"2\\\">\\n        <ajf-image-group (formulaClick)=\\\"openFormulaDialog($event)\\\" [data]=\\\"iconSet\\\"></ajf-image-group>\\n        <ajf-image-group (formulaClick)=\\\"openFormulaDialog($event)\\\" [data]=\\\"flagSet\\\"></ajf-image-group>\\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n        <input\\n            mat-input\\n            [placeholder]=\\\"'paste a link' | translate\\\"\\n            style=\\\"width: 100%;\\\"\\n            [(ngModel)]=\\\"imageUrl\\\">\\n        <button mat-button (click)=\\\"setImageUrl()\\\"\\n            translate>Set image</button>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"3\\\">\\n        <div style=\\\"width:500px;\\\">\\n          <ajf-quill-editor\\n            [(ngModel)]=\\\"currentTextWidget.htmlText\\\"\\n            [modules]=\\\"getModule()\\\"\\n            [maxLength]=\\\"200\\\"\\n            [theme]=\\\"bubble\\\"\\n            [initHTML]=\\\"(getHTML|async) || ''\\\"\\n            (formulaClick)=\\\"openFormulaDialog($event)\\\">\\n          </ajf-quill-editor>\\n        </div>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"4\\\">\\n        <h3 translate>Choose type of Chart</h3>\\n        <mat-button-toggle-group class=\\\"ajf-chart-buttons\\\">\\n          <div class=\\\"ajf-row\\\">\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-linechart\\\"\\n              (click)=\\\"setChartType(0)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-linechart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-barchartvertical\\\"\\n              (click)=\\\"setChartType(1)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-barchartvertical\\\">\\n              </mat-icon>\\n              </mat-button-toggle>\\n            <mat-button-toggle\\n                value=\\\"reportbuilder-bubblechart\\\"\\n                (click)=\\\"setChartType(8)\\\">\\n                <mat-icon\\n                  fontSet=\\\"ajf-icon\\\"\\n                  fontIcon=\\\"reportbuilder-bubblechart\\\">\\n                </mat-icon>\\n              </mat-button-toggle>\\n          </div>\\n          <div class=row>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-barcharthorizontal\\\"\\n              (click)=\\\"setChartType(2)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-barcharthorizontal\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-radarchart\\\"\\n              (click)=\\\"setChartType(3)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-radarchart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n             <mat-button-toggle\\n              value=\\\"reportbuilder-barchartvertical\\\"\\n              (click)=\\\"setChartType(1)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-barchartvertical\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n          </div>\\n          <div class=\\\"ajf-row\\\">\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-scatterchart\\\"\\n              (click)=\\\"setChartType(4)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-scatterchart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-polarareachart\\\"\\n              (click)=\\\"setChartType(5)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-polarareachart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n          </div>\\n          <div class=\\\"ajf-row\\\">\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-piechart\\\"\\n              (click)=\\\"setChartType(6)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-piechart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-donoughtchart\\\"\\n              (click)=\\\"setChartType(7)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-donoughtchart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n          </div>\\n        </mat-button-toggle-group>\\n        <h3 translate>Labels</h3>\\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n        <ajf-theme-color [section]=\\\"'chart'\\\" [label]=\\\"tabValue\\\"></ajf-theme-color>\\n          <mat-card>\\n            <mat-card-header>\\n              <mat-card-title>Border width</mat-card-title>\\n            </mat-card-header>\\n            <mat-card-content>\\n              <mat-slider\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                style=\\\"width:99%;\\\"\\n                step=\\\"1\\\"\\n                (change)=\\\"setChartBorderColor($event.value)\\\"\\n                [value]=\\\"chartBorderWidth\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-card-content>\\n          </mat-card>\\n          <mat-tab-group (selectChange)=\\\"setTab($event)\\\">\\n            <mat-tab label=\\\"Background\\\">\\n              <mat-list>\\n                <ng-template ngFor let-color [ngForOf]=\\\"(getChartBackgroundColor|async)\\\" let-idx=\\\"index\\\">\\n                  <mat-list-item>\\n                    <span [style.background]=\\\"color\\\">\\n                      {{ color }}\\n                    </span>\\n                    <button mat-button translate\\n                        (click)=\\\"removeChartBackgroundColor(idx)\\\">Remove</button>\\n                  </mat-list-item>\\n                </ng-template>\\n              </mat-list>\\n            </mat-tab>\\n            <mat-tab label=\\\"Border\\\">\\n              <mat-list>\\n                <ng-template ngFor let-color [ngForOf]=\\\"(getChartBorderColor|async)\\\" let-idx=\\\"index\\\">\\n                  <mat-list-item>\\n                    <span [style.background]=\\\"color\\\">\\n                      {{ color }}\\n                    </span>\\n                    <button mat-button (click)=\\\"removeChartBorderColor(idx)\\\">remove</button>\\n                  </mat-list-item>\\n                </ng-template>\\n              </mat-list>\\n            </mat-tab>\\n          </mat-tab-group>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"5\\\">\\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n      </ng-template>\\n    </div>\\n    <button mat-button\\n        (click)=\\\"visibilitySection = !visibilitySection\\\"\\n        [ngClass]=\\\"{'ajf-selected': visibilitySection}\\\">\\n      {{ widgetName }}\\n      <ng-container translate>Visibility</ng-container>\\n    </button>\\n    <div [style.display]=\\\"visibilitySection ? 'block' : 'none'\\\">\\n      <ajf-report-builder-condition-editor [visibility]=\\\"currentWidget.visibility\\\"></ajf-report-builder-condition-editor>\\n    </div>\\n  </div>\\n</ng-template>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-properties .ajf-selected{background-color:darkred;color:#fff}ajf-report-builder-properties .ajf-style-container{height:auto;width:100%;position:relative;margin-bottom:60px;text-align:center}ajf-report-builder-properties .ajf-style-container mat-tab-group .ajf-style-panel{min-height:350px}ajf-report-builder-properties .ajf-style-container .ajf-style-background,ajf-report-builder-properties .ajf-style-container .ajf-style-color{width:100%;height:350px;position:relative;margin:30px}ajf-report-builder-properties .ajf-style-container .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-properties .ajf-style-container mat-tab-group .mat-tab-body-wrapper,ajf-report-builder-properties .ajf-style-container mat-tab-group .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-properties .ajf-content{margin-top:10px;margin-right:15px;margin-bottom:290px;margin-left:15px}ajf-report-builder-properties .ajf-content .ajf-menu-css{width:100% !important;font-size:10px !important}ajf-report-builder-properties .ajf-content .ajf-menu-css mat-button-toggle{width:33% !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group{width:100% !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group mat-button-toggle{width:auto !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group mat-button-toggle mat-icon{margin:15px}ajf-report-builder-properties button{width:100%;margin-bottom:30px}ajf-report-builder-properties .ajf-hide-menu{width:auto !important}ajf-report-builder-properties h1,ajf-report-builder-properties h3,ajf-report-builder-properties h5{text-align:center}ajf-report-builder-properties .ajf-row{display:flex;flex-direction:column;width:100%}ajf-report-builder-properties .mat-tab-body.mat-tab-active{min-height:600px}ajf-report-builder-properties mat-grid-list{width:100%}ajf-report-builder-properties mat-grid-tile{overflow:visible !important}ajf-report-builder-properties mat-grid-tile.ajf-lal{text-align:left}ajf-report-builder-properties .ajf-chart-buttons mat-icon{font-size:15px}ajf-report-builder-properties .ajf-layout-preview{background-color:#fff;width:100%;font-size:.9em;box-sizing:border-box;position:relative}ajf-report-builder-properties .ajf-layout-preview .ajf-top-label{position:absolute;top:1em;left:1em;text-align:left}ajf-report-builder-properties .ajf-layout-preview .ajf-vtop{position:absolute;top:1em;right:0;left:0}ajf-report-builder-properties .ajf-layout-preview .ajf-vbottom{position:absolute;bottom:0;right:0;left:0}ajf-report-builder-properties .ajf-layout-preview .ajf-vright{position:absolute;top:50%;right:1em;margin-top:.5em}ajf-report-builder-properties .ajf-layout-preview .ajf-vleft{position:absolute;top:50%;left:1em;margin-top:.5em}ajf-report-builder-properties .ajf-layout-preview .ajf-vtl{position:absolute;top:1em;left:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vtr{position:absolute;top:1em;right:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vbl{position:absolute;bottom:1em;left:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vbr{position:absolute;bottom:1em;right:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box{background-color:#fff;padding:3em;position:relative;border:solid 1px #ccc}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box{background-color:#ddd;padding:3em;position:relative;box-sizing:border-box}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box>.ajf-top-label{left:4em}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box .ajf-padding-box{padding:3em;background-color:#aaa;position:relative;box-sizing:border-box}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box .ajf-padding-box .ajf-content-box{background-color:#888;padding:2em;text-align:center;box-sizing:border-box}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderProperties.ctorParameters = function () { return [\n            { type: dialog.MatDialog },\n            { type: AjfReportBuilderService }\n        ]; };\n        return AjfReportBuilderProperties;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfQuillEditor = /** @class */ (function () {\n        function AjfQuillEditor(_elementRef, _renderer, _service) {\n            var _this = this;\n            this._elementRef = _elementRef;\n            this._renderer = _renderer;\n            this._service = _service;\n            this.emptyArray = [];\n            this._init = false;\n            this.dateFormats = [\n                {\n                    'label': 'June 23rd 2017, 12:39:12 pm',\n                    'value': 'MMMM Do YYYY, h:mm:ss a',\n                    'validator': 'MMMMDoYYYYhmmssa'\n                }, {\n                    'label': 'Friday',\n                    'value': 'dddd',\n                    'validator': 'dddd'\n                }, {\n                    'label': 'Jun 23rd 17',\n                    'value': 'MMM Do YY',\n                    'validator': 'MMMDoYY'\n                }\n            ];\n            this.fonts = [\n                false,\n                'blackr',\n                'black-italic',\n                'bold',\n                'bold-condensed',\n                'bold-condensed-italic',\n                'bold-italic',\n                'condensed',\n                'condensed-italic',\n                'italic',\n                'light',\n                'light-italic',\n                'medium',\n                'medium-italic',\n                'thinr',\n                'thin-italic'\n            ];\n            this.defaultModules = {\n                formula: true,\n                toolbar: [\n                    ['formula'],\n                    ['bold', 'italic', 'underline', 'strike'],\n                    // ['blockquote', 'code-block'],\n                    [{ 'header': 1 }, { 'header': 2 }],\n                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n                    [{ 'script': 'sub' }, { 'script': 'super' }],\n                    // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n                    // [{ 'direction': 'rtl' }],                         // text direction\n                    [{ 'size': ['small', false, 'large', 'huge'] }],\n                    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n                    [{ 'color': this.emptyArray.slice() },\n                        { 'background': this.emptyArray.slice() }],\n                    [{ 'font': this.fonts }],\n                    [{ 'align': this.emptyArray.slice() }],\n                    ['clean'],\n                ]\n            };\n            this.font = Quill.import('formats/font');\n            this.editorCreated = new core.EventEmitter();\n            this.contentChanged = new core.EventEmitter();\n            this.selectionChanged = new core.EventEmitter();\n            /**\n             * this event is fired when the user click on formula button on quill editor rool barƒ\n             *\n             * @memberof QuillEditorComponent\n             */\n            this.formulaClick = new core.EventEmitter();\n            this.onModelChange = function () { };\n            this.onModelTouched = function () { };\n            this._formulas = [];\n            this._formulaTextSub = rxjs.Subscription.EMPTY;\n            this.font.whitelist = this.fonts;\n            this.font.whitelist.push('regular');\n            this._formulaTextSub =\n                this._service.getFormulaToHtmlEvent()\n                    .subscribe(function (event) {\n                    // reference is defined only when the user want to edit the formula\n                    if (event.reference !== undefined) {\n                        event.reference.innerHTML = event.formula;\n                        _this._renderer.setAttribute(event.reference, 'formula', event.formula);\n                        var efs = _this._formulas.filter(function (f) { return f.formula === event.reference; });\n                        var formulaEntry = void 0;\n                        var unlisten = void 0;\n                        if (efs.length > 0) {\n                            formulaEntry = efs[0];\n                            unlisten = formulaEntry.unlisten;\n                            if (unlisten != null) {\n                                unlisten();\n                            }\n                        }\n                        else {\n                            formulaEntry = { formula: event.reference, unlisten: null };\n                            _this._formulas.push(formulaEntry);\n                        }\n                        formulaEntry.unlisten = _this._renderer.listen(event.reference, 'click', function () {\n                            var obj = {\n                                'formula': event.formula,\n                                'reference': event.reference\n                            };\n                            _this.formulaClick.emit(obj);\n                        });\n                    }\n                    else {\n                        var quillEditor = _this._elementRef.nativeElement.querySelector('.ajf-ql-editor');\n                        var link_1 = _this._renderer.createElement('a');\n                        _this._renderer.setAttribute(link_1, 'href', 'javascript:void(0)');\n                        _this._renderer.setStyle(link_1, 'cursor', 'pointer');\n                        _this._renderer.setAttribute(link_1, 'formula', _this.check(event.formula));\n                        var linkLabel = _this._renderer.createText(event.formula);\n                        _this._renderer.appendChild(link_1, linkLabel);\n                        // add listener related on the click event of the new formula\n                        var unlisten = _this._renderer.listen(link_1, 'click', function (_) {\n                            var obj = {\n                                'formula': _this.check(event.formula),\n                                'reference': link_1\n                            };\n                            _this.formulaClick.emit(obj);\n                        });\n                        _this._renderer.appendChild(quillEditor, link_1);\n                        _this._formulas.push({ unlisten: unlisten, formula: link_1 });\n                    }\n                });\n        }\n        AjfQuillEditor.prototype.check = function (value) {\n            for (var i = 0; i < this.dateFormats.length; i++) {\n                if (this.dateFormats[i].value == value) {\n                    return this.dateFormats[i].validator;\n                }\n            }\n            return value;\n        };\n        /**\n         * this function search fomulas inside the init text\n         * and allocate the related listener on click event\n         *\n         * @memberof QuillEditorComponent\n         */\n        AjfQuillEditor.prototype.setHTML = function () {\n            this.writeValue(this.initHTML);\n        };\n        AjfQuillEditor.prototype.ngAfterViewInit = function () {\n            var _this = this;\n            var toolbarElem = this._elementRef.nativeElement.querySelector('[ajf-quill-editor-toolbar]');\n            var modules = this.modules || this.defaultModules;\n            Quill.register(this.font, true);\n            if (toolbarElem) {\n                modules['toolbar'] = toolbarElem;\n                modules['formula'] = true;\n            }\n            this._elementRef.nativeElement.insertAdjacentHTML('beforeend', '<div quill-editor-element></div>');\n            this.editorElem = this._elementRef.nativeElement.querySelector('[quill-editor-element]');\n            this.quillEditor = new Quill(this.editorElem, {\n                modules: modules,\n                placeholder: this.placeholder || 'Insert text here ...',\n                readOnly: this.readOnly || false,\n                theme: this.theme || 'snow',\n                formats: this.formats\n            });\n            this.editorCreated.emit(this.quillEditor);\n            this.setHTML();\n            // mark model as touched if editor lost focus\n            this.quillEditor.on('selection-change', function (range, oldRange, source) {\n                _this.selectionChanged.emit({\n                    editor: _this.quillEditor,\n                    range: range,\n                    oldRange: oldRange,\n                    source: source\n                });\n                if (!range) {\n                    _this.onModelTouched();\n                }\n            });\n            // update model if text changes\n            this.quillEditor.on('text-change', function (delta, oldDelta, source) {\n                var html = _this.editorElem.children[0].innerHTML;\n                var text = _this.quillEditor.getText();\n                if (html === '<p><br></p>') {\n                    html = null;\n                }\n                _this.onModelChange(html);\n                _this.contentChanged.emit({\n                    editor: _this.quillEditor,\n                    html: html,\n                    text: text,\n                    delta: delta,\n                    oldDelta: oldDelta,\n                    source: source\n                });\n            });\n            var elem = this._elementRef.nativeElement.querySelector('.ajf-ql-formula');\n            this.listenFunc = this._renderer.listen(elem, 'click', function (_) {\n                _this.formulaClick.emit();\n            });\n        };\n        AjfQuillEditor.prototype.writeValue = function (currentValue) {\n            var _this = this;\n            this.content = currentValue;\n            if (this.quillEditor) {\n                if (currentValue) {\n                    if (currentValue == this.initHTML && !this._init) {\n                        var editor = this._elementRef.nativeElement.querySelector('.ajf-ql-editor');\n                        editor.innerHTML = this.initHTML;\n                        var allFormulas = this._elementRef.nativeElement.querySelectorAll('[formula]');\n                        allFormulas.forEach(function (elem) {\n                            var unlisten = _this._renderer.listen(elem, 'click', function (_) {\n                                var obj = {\n                                    'formula': _this.check(elem.innerText),\n                                    'reference': elem\n                                };\n                                _this.formulaClick.emit(obj);\n                            });\n                            _this._renderer.setStyle(elem, 'cursor', 'pointer');\n                            _this._formulas.push({ unlisten: unlisten, formula: elem });\n                            _this._init = true;\n                        });\n                    }\n                    else if (currentValue != this.initHTML) {\n                        this.quillEditor.pasteHTML(currentValue);\n                    }\n                    return;\n                }\n                this.quillEditor.setText('');\n            }\n        };\n        AjfQuillEditor.prototype.registerOnChange = function (fn) {\n            this.onModelChange = fn;\n        };\n        AjfQuillEditor.prototype.registerOnTouched = function (fn) {\n            this.onModelTouched = fn;\n        };\n        AjfQuillEditor.prototype.validate = function (_c) {\n            if (!this.quillEditor) {\n                return null;\n            }\n            var err = {}, valid = true;\n            var textLength = this.quillEditor.getText().trim().length;\n            if (this.minLength) {\n                err.minLengthError = {\n                    given: textLength,\n                    minLength: this.minLength\n                };\n                valid = textLength >= this.minLength || !textLength;\n            }\n            if (this.maxLength) {\n                err.maxLengthError = {\n                    given: textLength,\n                    maxLength: this.maxLength\n                };\n                valid = textLength <= this.maxLength && valid;\n            }\n            return valid ? null : err;\n        };\n        AjfQuillEditor.prototype.ngOnChanges = function (changes) {\n            if (changes['readOnly'] && this.quillEditor) {\n                this.quillEditor.enable(!changes['readOnly'].currentValue);\n            }\n            if (changes['modules'] && this.quillEditor) {\n                Quill.register(this.font, true);\n                this.quillEditor = new Quill(this.editorElem, {\n                    modules: changes['modules']['currentValue'],\n                    placeholder: this.placeholder || 'Insert text here ...',\n                    readOnly: this.readOnly || false,\n                    theme: this.theme || 'snow',\n                    formats: this.formats\n                });\n                this._elementRef.nativeElement.children[0].remove();\n            }\n        };\n        AjfQuillEditor.prototype.ngOnDestroy = function () {\n            for (var i = 0; i < this._formulas.length; i++) {\n                var unlisten = this._formulas[i].unlisten;\n                if (unlisten != null) {\n                    unlisten();\n                }\n            }\n            this._formulaTextSub.unsubscribe();\n        };\n        AjfQuillEditor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-quill-editor',\n                        template: \"\\n    <ng-content select=\\\"[ajf-quill-editor-toolbar]\\\"></ng-content>\\n  \",\n                        providers: [{\n                                provide: forms.NG_VALUE_ACCESSOR,\n                                useExisting: core.forwardRef(function () { return AjfQuillEditor; }),\n                                multi: true\n                            }, {\n                                provide: forms.NG_VALIDATORS,\n                                useExisting: core.forwardRef(function () { return AjfQuillEditor; }),\n                                multi: true\n                            }],\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-quill-editor .ajf-ql-container .ajf-ql-editor{min-height:200px;width:500px !important;padding-bottom:50px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfQuillEditor.ctorParameters = function () { return [\n            { type: core.ElementRef },\n            { type: core.Renderer2 },\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfQuillEditor.propDecorators = {\n            theme: [{ type: core.Input }],\n            modules: [{ type: core.Input }],\n            readOnly: [{ type: core.Input }],\n            placeholder: [{ type: core.Input }],\n            maxLength: [{ type: core.Input }],\n            minLength: [{ type: core.Input }],\n            formats: [{ type: core.Input }],\n            initHTML: [{ type: core.Input }],\n            editorCreated: [{ type: core.Output }],\n            contentChanged: [{ type: core.Output }],\n            selectionChanged: [{ type: core.Output }],\n            formulaClick: [{ type: core.Output }]\n        };\n        return AjfQuillEditor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderRendererWidget = /** @class */ (function () {\n        function AjfReportBuilderRendererWidget(_service) {\n            this._service = _service;\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            this.currentContentWidget = null;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n        }\n        Object.defineProperty(AjfReportBuilderRendererWidget.prototype, \"widgetTypes\", {\n            get: function () {\n                return reports.AjfWidgetType;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderRendererWidget.prototype, \"layoutWidget\", {\n            get: function () {\n                return this.widget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AjfReportBuilderRendererWidget.prototype.canDropPredicate = function (item) {\n            for (var i = 0; i < item.data.dropZones.length; i++) {\n                if (['header', 'widget'].indexOf(item.data.dropZones[i]) > -1) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderRendererWidget.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200)\n                .subscribe(function () {\n                s.unsubscribe();\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderRendererWidget.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        AjfReportBuilderRendererWidget.prototype.getColumnContent = function () {\n            var myObj = this.widget;\n            return myObj.content;\n        };\n        AjfReportBuilderRendererWidget.prototype.getIcon = function () {\n            var defVal = { fontSet: '', fontIcon: '' };\n            var myObj = this.widget;\n            if (myObj.icon == null) {\n                return null;\n            }\n            return models.evaluateExpression(myObj.icon.formula) || defVal;\n        };\n        AjfReportBuilderRendererWidget.prototype.getFlag = function () {\n            var defVal = 'ch';\n            var myObj = this.widget;\n            if (myObj.flag == null) {\n                return null;\n            }\n            return models.evaluateExpression(myObj.flag.formula) || defVal;\n        };\n        AjfReportBuilderRendererWidget.prototype.getPercent = function (index) {\n            var myObj = this.widget;\n            var percent = myObj.columns[index] * 100;\n            return percent.toString() + \"%\";\n        };\n        AjfReportBuilderRendererWidget.prototype.getImageUrl = function () {\n            var defVal = '';\n            var myObj = this.widget;\n            if (myObj.url == null) {\n                return null;\n            }\n            return models.evaluateExpression(myObj.url.formula) || defVal;\n        };\n        AjfReportBuilderRendererWidget.prototype.getImageType = function () {\n            return this.widget != null ? this.widget.imageType : image$1.AjfImageType.Image;\n        };\n        AjfReportBuilderRendererWidget.prototype.getHtmlText = function () {\n            var myObj = this.widget;\n            if (myObj.htmlText === '') {\n                return '...';\n            }\n            else {\n                return myObj.htmlText;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.getCoordinate = function () {\n            var myObj = this.widget;\n            if (myObj.coordinate == null) {\n                return [51.505, -0.09, 13];\n            }\n            else {\n                return myObj.coordinate;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.getTileLayer = function () {\n            var myObj = this.widget;\n            if (myObj.tileLayer === '') {\n                return 'http://{s}.tile.osm.org/{z}/{x}/{y}.png';\n            }\n            else {\n                return myObj.tileLayer;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.getAttribution = function () {\n            var myObj;\n            myObj = this.widget;\n            if (myObj.attribution === '') {\n                return \"&copy; <a href='http://osm.org/copyright'>O</a> contributors\";\n            }\n            else {\n                return myObj.attribution;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.addToList = function (event, toColumn) {\n            this.onDragEndHandler();\n            this._service.addToColumn(event, toColumn);\n        };\n        AjfReportBuilderRendererWidget.prototype.ngOnInit = function () {\n            var _this = this;\n            this._onDraggedSub = this._service.onDragged\n                .subscribe(function (x) {\n                _this.onDragged = x;\n            });\n            this.getChartType = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget == null) {\n                    return 0;\n                }\n                var myObj = _this.widget;\n                return (myObj.chartType);\n            }), operators.distinctUntilChanged(), operators.startWith(0));\n            this.getDataset = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget != null && widget.dataset != null) {\n                    var myObj = _this.widget;\n                    return myObj.dataset;\n                }\n                else {\n                    return [];\n                }\n            }), operators.distinctUntilChanged());\n            this.getTableTitles = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget == null) {\n                    return [];\n                }\n                var myObj = _this.widget;\n                if (myObj.dataset != null) {\n                    var tableTitle = [];\n                    for (var i = 0; i < myObj.dataset.length; i++) {\n                        if (myObj.dataset[i][0] != null) {\n                            tableTitle.push(myObj.dataset[i][0].label || '');\n                        }\n                    }\n                    return tableTitle;\n                }\n                else {\n                    return [];\n                }\n            }));\n            this.getTableContent = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget == null) {\n                    return [];\n                }\n                var myObj = _this.widget;\n                if (myObj.dataset != null) {\n                    var tableContent = [];\n                    for (var i = 0; i < myObj.dataset.length; i++) {\n                        for (var j = 0; j < myObj.dataset[i].length; j++) {\n                            if ((myObj.dataset[i] != null) && (myObj.dataset[i][j + 1] != null)) {\n                                if (tableContent[j] == null) {\n                                    tableContent[j] = [];\n                                }\n                                if (tableContent[j][i] == null) {\n                                    tableContent[j][i] = ' ';\n                                }\n                                tableContent[j].splice(i, 1, myObj.dataset[i][j + 1].label || '');\n                            }\n                        }\n                    }\n                    return tableContent;\n                }\n                return [];\n            }));\n            this._service.updateCurrentWidget(this.widget);\n        };\n        AjfReportBuilderRendererWidget.prototype.ngOnChanges = function (changes) {\n            if (changes.widget && changes.widget.currentValue != null) {\n                this.widget = changes.widget.currentValue;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.ngOnDestroy = function () {\n            this._onDraggedSub.unsubscribe();\n        };\n        AjfReportBuilderRendererWidget.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-renderer-widget',\n                        template: \"<div class=\\\"ajf-container\\\"\\n    [ngSwitch]=\\\"widget?.widgetType\\\"\\n    [ngClass]=\\\"{'ajf-drag-mode': (onDragged || fixedZoom)}\\\">\\n  <div *ngSwitchCase=\\\"widgetTypes.Layout\\\" class=\\\"ajf-row ajf-layout\\\"\\n    [applyStyles]=\\\"widget.styles\\\">\\n      <div class=\\\"ajf-columns\\\">\\n        <ng-template ngFor let-clm [ngForOf]=\\\"getColumnContent()\\\" let-idx=\\\"index\\\">\\n          <div class=\\\"ajf-column\\\"\\n            [ngClass]=\\\"{'ajf-fixed': layoutWidget.columns[idx] == -1}\\\"\\n            [style.width]=getPercent(idx)\\n            [applyStyles]=\\\"layoutWidget.content[idx].styles\\\">\\n            <ajf-report-builder-widgets-row-buttons\\n              [from]=\\\"'layout'\\\"\\n              [fromWidget]=\\\"widget\\\"\\n              [widget]=\\\"clm\\\"\\n              [position]=\\\"idx\\\"\\n              (onDragStart)=\\\"onDragStartHandler();\\\"\\n              (onDragEnd)=\\\"onDragEndHandler();\\\"\\n              [child]=\\\"true\\\">\\n            </ajf-report-builder-widgets-row-buttons>\\n            <ajf-column\\n              [column]=\\\"clm\\\"\\n              [applyStyles]=\\\"widget.styles\\\">\\n            </ajf-column>\\n            <ng-template [ngIf]=\\\"onDragged === true\\\">\\n              <div cdkDropList\\n                [cdkDropListEnterPredicate]=\\\"canDropPredicate\\\"\\n                [style.display]=\\\"onDragged ? 'block' : 'none'\\\"\\n                (cdkDropListDropped)=\\\"addToList($event, clm)\\\"\\n                class=\\\"ajf-column-drop-zone\\\"\\n                (dragover)=\\\"layoutShow = true;\\\"\\n                (dragleave)=\\\"layoutShow = false;\\\">\\n              </div>\\n            </ng-template>\\n          </div>\\n        </ng-template>\\n      </div>\\n  </div>\\n  <div *ngSwitchCase=\\\"widgetTypes.Image\\\" class=\\\"ajf-row\\\">\\n    <ajf-image\\n      [applyStyles]=\\\"widget.styles\\\"\\n      [type]=\\\"getImageType()\\\"\\n      [imageUrl]=\\\"getImageUrl()\\\"\\n      [icon]=\\\"getIcon()\\\"\\n      [flag]=\\\"getFlag()\\\">\\n    </ajf-image>\\n  </div>\\n  <div *ngSwitchCase=\\\"widgetTypes.Text\\\" class=\\\"ajf-row ajf-text\\\">\\n    <ajf-text [htmlText]=\\\"getHtmlText() | translate\\\"  [applyStyles]=\\\"widget.styles\\\"></ajf-text>\\n  </div>\\n  <div *ngSwitchCase=\\\"widgetTypes.Chart\\\" class=\\\"ajf-row\\\" [applyStyles]=\\\"widget.styles\\\">\\n  </div>\\n  <!-- <div *ngSwitchCase=\\\"widgetTypes.Table\\\" class=\\\"ajf-row\\\" [applyStyles]=\\\"widget.styles\\\">\\n    <ajf-table *ngIf=\\\"getTableContent|async as tc\\\" [data]=\\\"tc!\\\" ></ajf-table>\\n  </div> -->\\n  <div *ngSwitchCase=\\\"widgetTypes.Map\\\" class=\\\"ajf-row\\\" [applyStyles]=\\\"widget.styles\\\">\\n    <ajf-map [coordinate]=\\\"getCoordinate()\\\" [tileLayer]=\\\"getTileLayer()\\\" [attribution]=\\\"getAttribution()\\\">\\n    </ajf-map>\\n  </div>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-layout{border:none !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row{border:9px solid blue;border-radius:36px;height:100%}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns{border:9px solid red !important;height:100%;margin-bottom:20px;padding-bottom:20px;padding-top:20px}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-fixed{border:9px solid #ff0 !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column{border:9px solid #9acd32;margin-left:10px;margin-right:10px;border-radius:36px;height:100%}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column ajf-report-builder-widgets-row-buttons{visibility:visible !important;display:block !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column .ajf-container{min-height:50px}ajf-report-builder-renderer-widget .ajf-container{height:inherit;display:block;min-height:50px}ajf-report-builder-renderer-widget .ajf-row-button{width:100%}ajf-report-builder-renderer-widget .ajf-container:hover{border:3px dotted blue;border-radius:16px;opacity:1;min-height:50px}ajf-report-builder-renderer-widget .ajf-on-dragged{border:23px dotted blue}ajf-report-builder-renderer-widget .ajf-selected{background-color:red}ajf-report-builder-renderer-widget .ajf-show,ajf-report-builder-renderer-widget .ajf-on-drag-over{border:33px dotted blue;opacity:1 !important;z-index:10}ajf-report-builder-renderer-widget .ajf-no-obj{max-width:200px;max-height:200px;width:auto;height:auto}ajf-report-builder-renderer-widget .ajf-row{display:flex;flex-direction:column;height:100%}ajf-report-builder-renderer-widget .ajf-columns{display:flex;flex-direction:row}ajf-report-builder-renderer-widget .ajf-column{min-height:50px}ajf-report-builder-renderer-widget .ajf-column ajf-report-builder-widgets-row-buttons{visibility:hidden !important;display:none !important}ajf-report-builder-renderer-widget .ajf-column:hover{border:3px dashed #9acd32;border-radius:16px}ajf-report-builder-renderer-widget .ajf-column:hover ajf-report-builder-widgets-row-buttons{visibility:visible !important;display:block !important}ajf-report-builder-renderer-widget .ajf-column:hover .ajf-container{min-height:50px}ajf-report-builder-renderer-widget .ajf-fixed:hover{border:3px dashed red !important}ajf-report-builder-renderer-widget .ajf-fixed{min-width:100px}ajf-report-builder-renderer-widget .ajf-column-drop-zone{margin:10%;height:50px;background-color:#fff;border:9px solid rgba(66,134,244,.6);border-radius:16px}ajf-report-builder-renderer-widget .ajf-text{min-height:20px}ajf-report-builder-renderer-widget ajf-map{z-index:30}ajf-report-builder-renderer-widget ajf-column{width:100%}ajf-report-builder-renderer-widget button{width:100%}ajf-report-builder-renderer-widget mat-list{height:100%;padding:0}ajf-report-builder-renderer-widget .ajf-ui.ajf-fluid.ajf-image{max-width:100%;height:auto}ajf-report-builder-renderer-widget .ajf-column-right{float:right;width:33%;background-color:#8b4513}ajf-report-builder-renderer-widget .ajf-column-center{display:inline-block;width:33%;background-color:olive}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderRendererWidget.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderRendererWidget.propDecorators = {\n            widget: [{ type: core.Input }],\n            position: [{ type: core.Input }],\n            section: [{ type: core.Input }]\n        };\n        return AjfReportBuilderRendererWidget;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderThemeColorDialog = /** @class */ (function () {\n        function AjfReportBuilderThemeColorDialog(_service, _dialogRef) {\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n            this.currentWidget = null;\n            this.currentColor = 'rgb(255,255,255,0)';\n            this.section = 'color';\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderThemeColorDialog.prototype.setWidgetStyles = function (value) {\n            this._service.setWidgetStyles(this.section, value);\n            this.currentColor = value;\n            this.setStyle();\n        };\n        AjfReportBuilderThemeColorDialog.prototype.setStyle = function () {\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.currentWidget.styles = utils.deepCopy(this.currentWidget.styles);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        AjfReportBuilderThemeColorDialog.prototype.addCustomColor = function () {\n            this._service.addCustomColor(this.currentColor);\n            this._service.updateCurrentWidget(this.currentWidget);\n            this._dialogRef.close();\n        };\n        AjfReportBuilderThemeColorDialog.prototype.close = function () {\n            this._dialogRef.close();\n        };\n        AjfReportBuilderThemeColorDialog.prototype.ngOnInit = function () {\n            var _this = this;\n            this._currentWidgetSub = this._service.currentWidget\n                .subscribe(function (x) {\n                if (x !== null) {\n                    if (_this.currentWidget !== x) {\n                        _this.currentWidget = x;\n                    }\n                }\n                else {\n                    _this.currentWidget = null;\n                }\n            });\n        };\n        AjfReportBuilderThemeColorDialog.prototype.ngAfterViewInit = function () {\n            this.elem.nativeElement.children[1].firstElementChild['style']['position'] = 'initial';\n        };\n        AjfReportBuilderThemeColorDialog.prototype.ngOnDestroy = function () {\n            this._currentWidgetSub.unsubscribe();\n        };\n        AjfReportBuilderThemeColorDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'theme-color-dialog',\n                        template: \"<div mat-dialog-content #colorpic>\\n   <input\\n          [hidden]=false\\n          [colorPicker]=\\\"currentColor\\\"\\n          [style.background]=\\\"currentColor\\\"\\n          [value]=\\\"currentColor\\\"\\n          [cpDialogDisplay]=\\\"'inline'\\\"\\n          [cpPosition]=\\\"'top'\\\"\\n          [cpToggle]=\\\"true\\\"\\n          [cpWidth]=\\\"'400px'\\\"\\n          [cpOutputFormat]=\\\"'rgba'\\\"\\n          (colorPickerChange)=\\\"setWidgetStyles($event)\\\"/>\\n</div>\\n<div mat-dialog-actions>\\n  <button mat-button (click)=\\\"addCustomColor()\\\">Save color</button>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderThemeColorDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        AjfReportBuilderThemeColorDialog.propDecorators = {\n            elem: [{ type: core.ViewChild, args: ['colorpic', { static: true },] }]\n        };\n        return AjfReportBuilderThemeColorDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component manages the report text\n     *\n     * @export\n     */\n    var AjfReportBuilderThemeColor = /** @class */ (function () {\n        function AjfReportBuilderThemeColor(_service, dialog) {\n            this._service = _service;\n            this.dialog = dialog;\n            this.currentWidget = null;\n            this.alphaColor = 1;\n            this.styleBackgroundColor = 'rgb(255,255,255,0)';\n            this.styleColor = 'rgb(0,0,0,0)';\n            this._colorsSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._originSub = rxjs.Subscription.EMPTY;\n            this._headerStyleSub = rxjs.Subscription.EMPTY;\n            this._contentStylesSub = rxjs.Subscription.EMPTY;\n            this._footerStylesSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderThemeColor.prototype.setStyles = function (value) {\n            switch (this.section) {\n                case 'widget':\n                    this.setWidgetStyles(value);\n                    break;\n                case 'report':\n                    this.setReportStyles(value);\n                    break;\n                case 'section':\n                    this.setSectionStyles(value);\n                    break;\n                case 'chart':\n                    this.setChartStyle(value);\n                    break;\n            }\n        };\n        AjfReportBuilderThemeColor.prototype.setChartStyle = function (value) {\n            if (this.label === 'backgroundColor') {\n                this.addChartBackgroundColor(value);\n            }\n            else {\n                this.addChartBorderColor(value);\n            }\n        };\n        AjfReportBuilderThemeColor.prototype.setAlphaColor = function (value) {\n            value = value.toFixed(2);\n            for (var i = 0; i < this.colors.length; i++) {\n                var lastComma = this.colors[i].lastIndexOf(',');\n                this.colors[i] = this.colors[i].substring(0, lastComma) + ',' + value + ')';\n            }\n        };\n        /**\n         * call to service to add new style to widget\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.setWidgetStyles = function (value) {\n            if (this.section === 'chart') {\n                this.setChartStyle(value);\n            }\n            else {\n                this._service.setWidgetStyles(this.label, value);\n                this.currentColor = value;\n                this.setStyle();\n            }\n        };\n        /**\n         * call to service to add new style to section\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.setSectionStyles = function (value) {\n            this._service.setSectionStyles(this.origin, this.label, value);\n            this.styleColor = value;\n        };\n        /**\n         * call to service to add new style to report\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.setReportStyles = function (value) {\n            this._service.setReportStyles(this.label, value);\n            this.styleBackgroundColor = value;\n        };\n        /**\n         * call to service to add background color to current chart\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.addChartBackgroundColor = function (value) {\n            this._service.addChartBackgroundColor(value);\n        };\n        /**\n         * call to service to add border color to current chart\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.addChartBorderColor = function (value) {\n            this._service.addChartBorderColor(value);\n        };\n        AjfReportBuilderThemeColor.prototype.setStyle = function () {\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.currentWidget.styles = utils.deepCopy(this.currentWidget.styles);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        AjfReportBuilderThemeColor.prototype.openDialog = function () {\n            this.dialogRef = this.dialog.open(AjfReportBuilderThemeColorDialog);\n        };\n        AjfReportBuilderThemeColor.prototype.ngOnInit = function () {\n            var _this = this;\n            this._colorsSub = this._service.colors\n                .subscribe(function (x) {\n                _this.colors = x;\n            });\n            this._currentWidgetSub = this._service.currentWidget\n                .subscribe(function (x) {\n                if (x != null) {\n                    if (_this.currentWidget !== x) {\n                        _this.currentWidget = x;\n                    }\n                }\n                else {\n                    _this.currentWidget = null;\n                }\n            });\n            this.getColorWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return myObj.styles['color'] || '';\n                }\n            }), operators.distinctUntilChanged());\n            this._originSub = this._service.origin.subscribe(function (s) {\n                _this.origin = s;\n            });\n            this._headerStyleSub = this._service.headerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._contentStylesSub = this._service.contentStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._footerStylesSub = this._service.footerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n        };\n        AjfReportBuilderThemeColor.prototype.ngOnDestroy = function () {\n            this._colorsSub.unsubscribe();\n            this._currentWidgetSub.unsubscribe();\n            this._originSub.unsubscribe();\n            this._headerStyleSub.unsubscribe();\n            this._contentStylesSub.unsubscribe();\n            this._footerStylesSub.unsubscribe();\n        };\n        AjfReportBuilderThemeColor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-theme-color',\n                        template: \"<mat-card style=\\\"width:90%\\\">\\n  <mat-card-header>\\n    <mat-card-title> {{ label }} Trasparency</mat-card-title>\\n  </mat-card-header>\\n  <mat-card-content>\\n       <mat-slider\\n      style=\\\"width:90%\\\"\\n      (change)=\\\"setAlphaColor($event.value)\\\"\\n      min=\\\"0\\\"\\n      max=\\\"1\\\"\\n      step=\\\"0.1\\\"\\n      [value]=\\\"alphaColor\\\"\\n      thumbLabel>\\n    </mat-slider>\\n  </mat-card-content>\\n</mat-card>\\n<mat-card style=\\\"width:90%\\\">\\n  <mat-card-header>\\n    <mat-card-title> {{ label }} </mat-card-title>\\n  </mat-card-header>\\n  <mat-card-content>\\n    <mat-grid-list\\n      cols=\\\"8\\\"\\n      rowHeight=\\\"25px\\\">\\n      <mat-grid-tile\\n        *ngFor=\\\"let color of colors\\\"\\n        [colspan]=\\\"1\\\"\\n        [rowspan]=\\\"1\\\"\\n        [style.background]=\\\"color\\\">\\n        <button\\n          style=\\\"height:100%\\\"\\n          (click)=\\\"setStyles(color)\\\"\\n          mat-button>\\n        </button>\\n      </mat-grid-tile>\\n    </mat-grid-list>\\n  </mat-card-content>\\n  <mat-card-actions>\\n    <button mat-button (click)=\\\"openDialog()\\\" style=\\\"width:90%;\\\">Add color</button>\\n    <button mat-button (click)=\\\"setStyles('')\\\" style=\\\"width:90%\\\"> Reset </button>\\n  </mat-card-actions>\\n</mat-card>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderThemeColor.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        AjfReportBuilderThemeColor.propDecorators = {\n            section: [{ type: core.Input }],\n            label: [{ type: core.Input }],\n            init: [{ type: core.Input }]\n        };\n        return AjfReportBuilderThemeColor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderToolbarDialog = /** @class */ (function () {\n        function AjfReportBuilderToolbarDialog(_service, _dialogRef) {\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n        }\n        AjfReportBuilderToolbarDialog.prototype.resetReport = function () {\n            var emptyReport = {\n                'header': { 'content': [], 'styles': {} },\n                'content': { 'content': [], 'styles': {} },\n                'footer': { 'content': [], 'styles': {} },\n                'styles': {}\n            };\n            this._service.setReport(emptyReport);\n            this._dialogRef.close();\n        };\n        AjfReportBuilderToolbarDialog.prototype.close = function () {\n            this._dialogRef.close();\n        };\n        AjfReportBuilderToolbarDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'toolbar-dialog',\n                        template: \"<h1 matDialogTitle>Dialog</h1>\\n<div mat-dialog-content>Are you sure you want to erase the report?</div>\\n<div mat-dialog-actions>\\n  <button mat-button (click)=\\\"resetReport()\\\">Yes</button>\\n  <button mat-button (click)=\\\"close()\\\">No</button>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderToolbarDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        return AjfReportBuilderToolbarDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderToolbar = /** @class */ (function () {\n        function AjfReportBuilderToolbar(_service, dialog) {\n            this._service = _service;\n            this.dialog = dialog;\n            // this is an any EventEmitter\n            this.addClick = new core.EventEmitter();\n            this.zoom = false;\n            this.emptyContent = this._service.emptyContent;\n        }\n        AjfReportBuilderToolbar.prototype.canDropPredicate = function (item) {\n            return item.data.dropZones.indexOf('widget') > -1;\n        };\n        AjfReportBuilderToolbar.prototype.JSONRequest = function () {\n        };\n        /**\n         * this method will pass event to event emitter\n         */\n        AjfReportBuilderToolbar.prototype.onAddClick = function (event) {\n            this.addClick.emit(event);\n        };\n        AjfReportBuilderToolbar.prototype.addToList = function (event) {\n            if (event.item.data.widget != null) {\n                this._service.addCustomWidgets({\n                    json: JSON.stringify(event.item.data.widget.toJson()),\n                    type: ''\n                });\n            }\n        };\n        AjfReportBuilderToolbar.prototype.undoLastOperation = function () {\n            try {\n                var myObj = JSON.parse(this._service.popJsonStack() || '');\n                this._service.setReport(utils.deepCopy(myObj));\n            }\n            catch (e) { }\n        };\n        AjfReportBuilderToolbar.prototype.isZoomed = function () {\n            this.zoom = !this.zoom;\n            if (this.zoom) {\n                this._service.fixedZoomIn();\n            }\n            else {\n                this._service.fixedZoomOut();\n            }\n        };\n        AjfReportBuilderToolbar.prototype.openDialog = function () {\n            this.dialogRef = this.dialog.open(AjfReportBuilderToolbarDialog);\n        };\n        AjfReportBuilderToolbar.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-toolbar',\n                        outputs: ['addClick'],\n                        template: \"<mat-toolbar>\\n  <button\\n    mat-button\\n    (click)=\\\"onAddClick($event)\\\"\\n    matTooltip=\\\"open widget sidebar\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">\\n    Open\\n  </button>\\n  <button\\n    mat-button\\n    (click)=\\\"openDialog()\\\"\\n    matTooltip=\\\"reset the current report\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">reset\\n  </button>\\n  <button\\n    mat-button\\n    (click)=\\\"undoLastOperation()\\\"\\n    matTooltip=\\\"undo the last operation\\\"\\n    [disabled]=\\\"emptyContent|async\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">Undo</button>\\n\\n  <button mat-button\\n    class=\\\"ajf-custom-widget-drop-zone\\\"\\n    cdkDropList\\n    [cdkDropListEnterPredicate]=\\\"canDropPredicate\\\"\\n    (cdkDropListDropped)=\\\"addToList($event);\\\"\\n    matTooltip=\\\"add custom widget on toolbar\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">\\n    add custom widget here\\n    <i class=\\\"material-icons\\\">add_circle_outline</i>\\n  </button>\\n  <section class=\\\"example-section\\\">\\n    <mat-slide-toggle\\n        [checked]=\\\"zoom\\\"\\n        (change)=isZoomed()\\n        matTooltip=\\\"apply zoom out\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n      zoom out\\n    </mat-slide-toggle>\\n  </section>\\n</mat-toolbar>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-toolbar a{margin-right:10px}ajf-report-builder-toolbar .ajf-custom-widget-drop-zone{position:absolute;right:0;background-color:#90ee90}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderToolbar.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        return AjfReportBuilderToolbar;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderWidgetToolbarButton = /** @class */ (function () {\n        function AjfReportBuilderWidgetToolbarButton() {\n        }\n        AjfReportBuilderWidgetToolbarButton.prototype.ngOnInit = function () {\n            this.widgetIcon = ajfReportBuilderWidgetToString(this.widgetType);\n        };\n        AjfReportBuilderWidgetToolbarButton.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-widget-toolbar-button',\n                        template: \"<button\\n  mat-button\\n  matTooltip=\\\"{{ widgetType}}\\\"\\n  [matTooltipPosition]=\\\"'above'\\\">\\n  <mat-icon\\n    fontSet=\\\"ajf-icon\\\"\\n    fontIcon=\\\"{{ widgetIcon }}\\\">\\n  </mat-icon>\\n</button>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-widget-toolbar-button button mat-icon{font-size:35px;padding-top:10px;padding-bottom:10px;padding-right:20px;color:#3f51b5}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderWidgetToolbarButton.ctorParameters = function () { return []; };\n        AjfReportBuilderWidgetToolbarButton.propDecorators = {\n            widgetType: [{ type: core.Input }]\n        };\n        return AjfReportBuilderWidgetToolbarButton;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderWidgetsRowButtons = /** @class */ (function () {\n        /**\n         *\n         * @param private _afjBuilderService: AjfBuilderService\n         */\n        function AjfReportBuilderWidgetsRowButtons(_service) {\n            this._service = _service;\n            this.isOver = false;\n            this.currentWidget = null;\n            this.isClicked = false;\n            this.color = [];\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            // this boolean sign if is on over a widget\n            this.onOver = false;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n            this._onOverSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderWidgetsRowButtons.prototype.selectedWidget = function () {\n            this.isClicked = !this.isClicked;\n            this._service.setOrigin(this.from);\n            this._service.updateCurrentWidget(this.widget);\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.remove = function () {\n            if (this.fromWidget != null) {\n                this._service.updateCurrentWidget(this.fromWidget);\n            }\n            this._service.remove(this.from, this.position);\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.onFocus = function () {\n            if (this.widget === this.currentWidget) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.changeColumn = function (direction) {\n            if (direction == 'back') {\n                this._service.changeColumn(this.position, this.position - 1, this.fromWidget);\n            }\n            else {\n                this._service.changeColumn(this.position, this.position + 1, this.fromWidget);\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.isColumn = function () {\n            if (this.label === 'Column') {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.isOneColumn = function () {\n            var rootObj = this.fromWidget;\n            if (rootObj.columns.length > 1) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.ngOnInit = function () {\n            var _this = this;\n            this.label = reports.AjfWidgetType[this.widget.widgetType];\n            this.widgetIcon = widgetReportBuilderIconName(this.widget.widgetType);\n            this.widgetLabel = ajfWidgetTypeToLabel(this.widget.widgetType);\n            this._onDraggedSub = this._service.onDragged\n                .subscribe(function (x) {\n                _this.onDragged = x;\n            });\n            this._onOverSub = this._service.onOver\n                .subscribe(function (x) {\n                _this.onOver = x;\n            });\n            this._currentWidgetSub = this._service.currentWidget\n                .subscribe(function (x) {\n                _this.currentWidget = x;\n                if (x !== _this.widget) {\n                    _this.isClicked = false;\n                }\n            });\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.ngOnDestroy = function () {\n            this._onDraggedSub.unsubscribe();\n            this._onOverSub.unsubscribe();\n            this._currentWidgetSub.unsubscribe();\n        };\n        AjfReportBuilderWidgetsRowButtons.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-widgets-row-buttons',\n                        template: \"<div class=\\\"ajf-container\\\" *ngIf=\\\"onOver || onDragged\\\">\\n  <div class=\\\"ajf-button-row\\\">\\n    <ng-template [ngIf]=\\\"isColumn() && onDragged == false\\\">\\n      <span\\n        (click)=\\\"changeColumn('forward')\\\"\\n        matTooltip=\\\"move right\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n        <i class=\\\"material-icons\\\">arrow_forward</i>\\n      </span>\\n    </ng-template>\\n    <ng-template [ngIf]=\\\"(isColumn()== false && onDragged == true) || true\\\">\\n      <span mat-button\\n        [ngClass]=\\\"{'ajf-selected': onFocus()}\\\"\\n        matTooltip=\\\"{{label}}\\\"\\n        [matTooltipPosition]=\\\"'above'\\\"\\n        (click)=\\\"selectedWidget()\\\">\\n        <ng-template [ngIf]=\\\"isColumn()\\\">\\n        <i class=\\\"material-icons\\\" >settings</i>\\n        </ng-template>\\n        <ng-template [ngIf]=\\\"(isColumn()) ? false : true\\\">\\n          <mat-icon\\n            fontSet=\\\"ajf-icon\\\"\\n            fontIcon=\\\"{{ widgetIcon }}\\\">\\n          </mat-icon>\\n        </ng-template>\\n      </span>\\n      <span\\n        mat-button\\n        matTooltip=\\\"remove\\\"\\n        (click)=\\\"remove()\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n        <mat-icon>remove_circle_outline</mat-icon>\\n      </span>\\n    </ng-template>\\n    <ng-template [ngIf]=\\\"isColumn() && onDragged == false\\\">\\n      <span\\n        (click)=\\\"changeColumn('back')\\\"\\n        matTooltip=\\\"move left\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n        <i class=\\\"material-icons\\\">arrow_back</i>\\n      </span>\\n    </ng-template>\\n  </div>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-widgets-row-buttons{position:relative;display:block}ajf-report-builder-widgets-row-buttons .ajf-container{height:30px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row{margin:0;width:100% !important;padding:0;position:absolute;right:0;display:flex;flex-direction:row-reverse;z-index:50;overflow-x:auto;background-color:rgba(144,238,144,.6);color:#000 !important;border-radius:16px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row button,ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row span{flex-flow:wrap row;margin-right:10px;cursor:pointer}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row button mat-icon,ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row span mat-icon{margin-top:5px;font-size:20px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-selected{background-color:#3b623b;color:#81d481}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderWidgetsRowButtons.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderWidgetsRowButtons.propDecorators = {\n            from: [{ type: core.Input }],\n            fromWidget: [{ type: core.Input }],\n            position: [{ type: core.Input }],\n            widget: [{ type: core.Input }],\n            child: [{ type: core.Input }],\n            isOver: [{ type: core.Input }]\n        };\n        return AjfReportBuilderWidgetsRowButtons;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderWidgetsToolbar = /** @class */ (function () {\n        /**\n         *\n         * @param private _afjBuilderService: AjfBuilderService\n         */\n        function AjfReportBuilderWidgetsToolbar(_service) {\n            this._service = _service;\n            // fieldTypes is an array string that contains the field options\n            this.chartTypes = utils.sizedEnumToStringArray(reports.AjfChartType);\n            this.widgetTypes = utils.sizedEnumToStringArray(reports.AjfWidgetType);\n            // delete Column widget\n            var pos = this.widgetTypes.indexOf('Column');\n            if (pos !== -1) {\n                this.widgetTypes.splice(pos, 1);\n            }\n        }\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderWidgetsToolbar.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200)\n                .subscribe(function () {\n                if (s != null) {\n                    s.unsubscribe();\n                }\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderWidgetsToolbar.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        AjfReportBuilderWidgetsToolbar.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-widgets-toolbar',\n                        template: \"<mat-list>\\n  <mat-list-item *ngFor=\\\"let t of widgetTypes\\\">\\n    <ajf-report-builder-widget-toolbar-button ng-if=\\\"t != 'Column'\\\"\\n        cdkDrag\\n        [cdkDragData]=\\\"{widgetType: t, dropZones: ['header','content','footer','column','widget']}\\\"\\n        [widgetType]=\\\"t\\\"\\n        (onDragStart)=\\\"onDragStartHandler();\\\"\\n        (onDragEnd)=\\\"onDragEndHandler();\\\">\\n    </ajf-report-builder-widget-toolbar-button>\\n  </mat-list-item>\\n</mat-list>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderWidgetsToolbar.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        return AjfReportBuilderWidgetsToolbar;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilder = /** @class */ (function () {\n        function AjfReportBuilder(_service) {\n            this._service = _service;\n            this._init = false;\n        }\n        Object.defineProperty(AjfReportBuilder.prototype, \"report\", {\n            get: function () { return this._report; },\n            set: function (report) {\n                if (report != null) {\n                    this._report = report;\n                    if (this._init) {\n                        this._setCurrentReport();\n                    }\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AjfReportBuilder.prototype.ngAfterContentInit = function () {\n            this._setCurrentReport();\n            this._init = true;\n        };\n        AjfReportBuilder.prototype._setCurrentReport = function () {\n            this._service.setReportForms(this.report != null ? this.report.forms || [] : []);\n            this._service.setReport(this.report);\n        };\n        AjfReportBuilder.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder',\n                        template: \"<ajf-report-builder-toolbar (addClick)=\\\"start.toggle()\\\"></ajf-report-builder-toolbar>\\n<ajf-report-builder-custom-widgets-toolbar (addClick)=\\\"start.toggle()\\\"></ajf-report-builder-custom-widgets-toolbar>\\n<mat-drawer-container>\\n    <mat-drawer #start position=\\\"start\\\" mode=\\\"side\\\" class=\\\"ajf-builder-sidebar\\\">\\n        <ajf-report-builder-widgets-toolbar></ajf-report-builder-widgets-toolbar>\\n    </mat-drawer>\\n    <ajf-report-builder-content></ajf-report-builder-content>\\n    <mat-drawer #end position=\\\"end\\\" mode=\\\"side\\\" class=\\\"ajf-builder-prop\\\" [opened]=\\\"true\\\">\\n      <ajf-report-builder-properties></ajf-report-builder-properties>\\n    </mat-drawer>\\n</mat-drawer-container>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder{display:block;position:relative;width:100%;height:100%;overflow:hidden}ajf-report-builder mat-sidenav-container{height:100%}ajf-report-builder mat-sidenav-container .ajf-builder-sidebar{max-width:7%}ajf-report-builder mat-sidenav-container .ajf-builder-prop{max-width:30%}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilder.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilder.propDecorators = {\n            startSidenav: [{ type: core.ViewChild, args: [sidenav.MatSidenav, { static: true },] }],\n            report: [{ type: core.Input }]\n        };\n        return AjfReportBuilder;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderModule = /** @class */ (function () {\n        function AjfReportBuilderModule() {\n        }\n        AjfReportBuilderModule.decorators = [\n            { type: core.NgModule, args: [{\n                        imports: [\n                            common.CommonModule,\n                            forms.FormsModule,\n                            dragDrop.DragDropModule,\n                            button.MatButtonModule,\n                            buttonToggle.MatButtonToggleModule,\n                            card.MatCardModule,\n                            dialog.MatDialogModule,\n                            gridList.MatGridListModule,\n                            icon.MatIconModule,\n                            list.MatListModule,\n                            select.MatSelectModule,\n                            sidenav.MatSidenavModule,\n                            slideToggle.MatSlideToggleModule,\n                            slider.MatSliderModule,\n                            tabs.MatTabsModule,\n                            toolbar.MatToolbarModule,\n                            tooltip.MatTooltipModule,\n                            core$1.TranslateModule,\n                            ngxColorPicker.ColorPickerModule,\n                            common$1.AjfCommonModule,\n                            image.AjfImageModule,\n                            map.AjfMapModule,\n                            monacoEditor.AjfMonacoEditorModule,\n                            table.AjfTableModule,\n                            text.AjfTextModule,\n                        ],\n                        declarations: [\n                            AjfQuillEditor,\n                            AjfReportBuilderColumn,\n                            AjfReportBuilderConditionEditor,\n                            AjfReportBuilderContent,\n                            AjfReportBuilderCustomWidgetDialog,\n                            AjfReportBuilderCustomWidgetToolbarButton,\n                            AjfReportBuilderCustomWidgetsToolbar,\n                            AjfReportBuilderFormsAnalyzerDialog,\n                            AjfReportBuilderFormsAnalyzer,\n                            AjfReportBuilderImageGroup,\n                            AjfReportBuilderProperties,\n                            AjfReportBuilderRendererWidget,\n                            AjfReportBuilderThemeColorDialog,\n                            AjfReportBuilderThemeColor,\n                            AjfReportBuilderToolbarDialog,\n                            AjfReportBuilderToolbar,\n                            AjfReportBuilderWidgetToolbarButton,\n                            AjfReportBuilderWidgetsRowButtons,\n                            AjfReportBuilderWidgetsToolbar,\n                            AjfReportBuilder,\n                            AjfImageFilterPipe,\n                        ],\n                        exports: [\n                            AjfReportBuilder,\n                        ],\n                        providers: [\n                            AjfReportBuilderService,\n                        ]\n                    },] }\n        ];\n        return AjfReportBuilderModule;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) 2018 Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.AJF_REPORTS_CONFIG = AJF_REPORTS_CONFIG;\n    exports.AjfReportBuilder = AjfReportBuilder;\n    exports.AjfReportBuilderModule = AjfReportBuilderModule;\n    exports.AjfReportBuilderService = AjfReportBuilderService;\n    exports.ɵajf_src_material_report_builder_report_builder_a = AjfQuillEditor;\n    exports.ɵajf_src_material_report_builder_report_builder_b = AjfReportBuilderColumn;\n    exports.ɵajf_src_material_report_builder_report_builder_c = AjfReportBuilderConditionEditor;\n    exports.ɵajf_src_material_report_builder_report_builder_d = AjfReportBuilderContent;\n    exports.ɵajf_src_material_report_builder_report_builder_e = AjfReportBuilderCustomWidgetDialog;\n    exports.ɵajf_src_material_report_builder_report_builder_f = AjfReportBuilderCustomWidgetToolbarButton;\n    exports.ɵajf_src_material_report_builder_report_builder_g = AjfReportBuilderCustomWidgetsToolbar;\n    exports.ɵajf_src_material_report_builder_report_builder_h = AjfReportBuilderFormsAnalyzerDialog;\n    exports.ɵajf_src_material_report_builder_report_builder_i = AjfReportBuilderFormsAnalyzer;\n    exports.ɵajf_src_material_report_builder_report_builder_j = AjfReportBuilderImageGroup;\n    exports.ɵajf_src_material_report_builder_report_builder_k = AjfReportBuilderProperties;\n    exports.ɵajf_src_material_report_builder_report_builder_l = AjfReportBuilderRendererWidget;\n    exports.ɵajf_src_material_report_builder_report_builder_m = AjfReportBuilderThemeColorDialog;\n    exports.ɵajf_src_material_report_builder_report_builder_n = AjfReportBuilderThemeColor;\n    exports.ɵajf_src_material_report_builder_report_builder_o = AjfReportBuilderToolbarDialog;\n    exports.ɵajf_src_material_report_builder_report_builder_p = AjfReportBuilderToolbar;\n    exports.ɵajf_src_material_report_builder_report_builder_q = AjfReportBuilderWidgetToolbarButton;\n    exports.ɵajf_src_material_report_builder_report_builder_r = AjfReportBuilderWidgetsRowButtons;\n    exports.ɵajf_src_material_report_builder_report_builder_s = AjfReportBuilderWidgetsToolbar;\n    exports.ɵajf_src_material_report_builder_report_builder_t = AjfImageFilterPipe;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=material-report-builder.umd.js.map\n"]}