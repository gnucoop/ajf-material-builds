{"version":3,"sources":["src/material/material-report-builder.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ajf","material","reportBuilder","ng","core","common","map","table","text","image","monacoEditor","cdk","dragDrop","forms","button","buttonToggle","card","dialog","gridList","icon","list","select","sidenav","slideToggle","slider","tabs","toolbar","tooltip","ngxTranslate","ngxColorPicker","rxjs","models","reports","utils","operators","quill","this","common$1","core$1","forms$1","image$1","Quill","hasOwnProperty","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","call","apply","AJF_REPORTS_CONFIG","InjectionToken","AjfReportBuilderService","reportsConfig","_this","_customWidgetsUpdate","Subject","_originUpdate","_savedReportUpdate","_jsonStack","BehaviorSubject","_emptyContent","_onDraggedUpdate","_onOverUpdate","_fixedZoomUpdate","_onDragEnterUpdate","_headerWidgetsUpdate","_contentWidgetsUpdate","_footerWidgetsUpdate","_colorUpdate","_defaultColor","_currentWidgetUpdate","_formsVariablesUpdate","_conditionNamesUpdate","_saveReport","_report","_reportStylesUpdate","_reportFormsUpdate","_updates","header","content","footer","color","customWidgets","_saveReportEvent","EventEmitter","_saveFormulaTOHtml","columnWidthChangedEmitter","_iconSets","ajf-icon","_lastDeletedJson","icons","_origin","pipe","startWith","share","_savedReport","_onDragged","_onOver","_fixedZoom","_onDragEnter","_reportStyles","scan","styles","op","_reportForms","_customWidgets","widgets","_formsVariables","filter","variables","publishReplay","refCount","_conditionNames","_headerWidgets","_headerStyles","_contentWidgets","_contentStyles","_footerWidgets","_footerStyles","_color","_currentWidget","widget","f","_c","fillFormsVariables","subscribe","reportObs","r","_colors","tempColors","parseColor","obj","widgetType","AjfWidgetType","Layout","layoutObj","j","columnObj","z","_styles","_widgets","json","_r","combineLatest","report","reportForms","w","deepCopy","ro","setSaveReport","next","pushJsonStack","JSON","stringify","getFormulaToHtmlEvent","asObservable","defineProperty","get","enumerable","configurable","filterNodes","nodes","node","nodeType","AjfNodeType","AjfNodeGroup","AjfSlide","AjfRepeatingSlide","AjfField","fieldType","AjfFieldType","String","splice","cssStyles","colors","forEach","k","indexOf","push","labels","names","types","flattenNodes","extractLabelsNodes","extractNamesNodes","extractTypesNodes","label","name","setOrigin","origin","roundTo","value","decimalPositions","Math","pow","floor","isNumber","test","isNumberArray","fixedZoomIn","fixedZoomOut","dragEnter","array","index","dragStarted","dragEnded","overStarted","overEnded","dragLeave","saveReport","emit","saveImageFormula","formula","flag","saveFormulaToHtml","htmlFormula","reference","setEmptyContent","val","currentStack","getValue","popJsonStack","pop","updateCurrentWidget","updateArrayWidgets","type","newWidget","Error","_widget","instantColumnValue","newValue","idx","myObj","size","columns","spreadValue","objNum","sum","idxFirstNoObj","add","foundFirstNoObj","re1","RegExp","re2","re3","oldValue","Number","toFixed","setImageUrl","imageUrl","url","createFormula","setIcon","setFlag","saveCondition","conditionText","visibility","condition","saveChartFormula","_label","_level","_mainIndex","_index","formulaText","aggregationType","dataset","aggregation","createAggregation","saveTableFormula","removeTableMainData","_removeFromCurrentWidgetArrayProperty","removeData","setChartType","_setCurrentWidgetProperty","removeMainData","_idx","removeRelatedData","_mainIdx","setChartBackgroundColor","addChartBackgroundColor","_addToCurrentWidgetArrayProperty","removeChartBackgroundColor","setChartBorderColor","setChartBorderWidth","addChartBorderColor","removeChartBorderColor","setReport","setWidgetStyles","isPxStyle","Array","join","setSectionStyles","setReportStyles","setReportForms","_form","addCustomWidgets","position","resetCustomWidgets","changeLabelCustomWidget","addHeaderWidget","_addWidgetToContainer","addContentWidget","addfooterWidget","unfixedColumn","num","checkSum","parseFloat","addColumn","tmpValue","tempObj","createWidget","removeWidgetToColumn","column","remove","spread","addToContent","addToColumn","event","toColumn","dragData","fromColumn","fromIndex","arrayFrom","parse","changePositionOnColumn","toIndex","fromWidget","fixedColumn","changeColumn","from","to","layoutWidget","fromColumnValue","toColumnValue","addCustomColor","subj","propName","arr","decorators","Injectable","ctorParameters","undefined","Optional","Inject","args","AjfReportBuilderColumn","_service","showActions","layoutShow","onDragged","_onDraggedSub","Subscription","EMPTY","addToList","onDragEndHandler","onDragStartHandler","timer","unsubscribe","ngOnInit","x","ngOnDestroy","Component","selector","template","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","propDecorators","Input","ajfWidgetTypeStringToLabel","sanitizeConditionString","str","trim","replace","AjfReportBuilderConditionEditor","isValid","_conditionNamesSub","extractNames","formsVariables","concat","setCurrent","id","currentId","appendText","checkValidation","validateCondition","validateExpression","_goBackNum","conditionTextArea","el","nativeElement","sStart","min","selectionStart","selectionEnd","sEnd","max","startingString","substr","endingString","initialLenght","closed","createTextRange","range","move","focus","setSelectionRange","conditionNames","ViewChild","static","AjfReportBuilderContent","_cdRef","fixedZoom","onDragEnter","show","headerWidgets","contentWidgets","footerWidgets","onOver","currentWidget","_fixedZoomSub","_onDragEnterSub","_headerWidgetsSub","_contentWidgetsSub","_footerWidgetsSub","_onOverSub","_currentWidgetSub","headerStyles","contentStyles","footerStyles","onMouseOver","onMouseLeave","canDropPredicate","dropZones","item","data","isLayout","onDragEnterHandler","onDragLeaveHandler","onDragEnterCheck","arrayTo","itemData","bool","ngAfterViewChecked","detectChanges","host","(mouseover)","(mouseleave)","ChangeDetectorRef","AjfReportBuilderCustomWidgetDialog","_dialogRef","changeLabel","close","MatDialogRef","AjfReportBuilderCustomWidgetToolbarButton","widgetIcon","ajfWidgetTypeStringToIcon","toLowerCase","widgetLabel","AjfReportBuilderCustomWidgetsToolbar","_customWidgetsSub","_threeColumnsLayout","_fourColumnsLayout","openDialog","open","componentInstance","MatDialog","AjfReportBuilderFormsAnalyzerDialog","_","aggregationTypes","sizedEnumToStringArray","AjfAggregationType","formulaDate","safeFormulaText","Sum","currentIndex","formsVariablesName","formsVariablesType","_formAnalyzerSub","_first","init","imageType","AjfImageType","Flag","onEditorInit","monaco","languages","typescript","javascriptDefaults","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","setCompilerOptions","target","ScriptTarget","ES2015","allowNonTsExtensions","allowJs","ModuleKind","addExtraLib","e","_extraLibs","_initFormsVariablesNames","_updateVariables","_updateFunctions","formVar","_fieldVarType","AjfExpressionUtils","UTIL_FUNCTIONS","Boolean","Date","DateInput","Time","Empty","Formula","MultipleChoice","SingleChoice","Table","Text","insertVariable","setCurrentId","setAggregationType","validateFormula","saveDataset","saveFormulaHtml","level","mainIndex","variable","editor","split","getPosition","ln","lineNumber","line","col","substring","setPosition","setVariable","setValue","reset","labelText","AjfValidationService","isFormula","AjfMonacoEditor","AjfReportBuilderFormsAnalyzer","choicesOrigins","currentMainDataIndex","_dataset","setCurrentIndex","isSelected","getMainData","mainData","getDataset","getRelatedData","relatedData","getTableHeader","getTableData","tableData","needMainData","chartType","AjfChartType","Scatter","Bubble","removeDataset","editMode","dialogRef","Chart","openDialogAddMainData","openDialogChartEditMainData","openDialogTableEditMainData","openDialogChartAddDataset","openDialogTableAddDataset","openDialogChartAddDataOfDataset","openDialogChartEditDataset","openDialogTableEditDataset","openDialogChartEditDataOfDataset","AjfImageFilterPipe","transform","items","info","includes","Pipe","AjfReportBuilderImageGroup","_icon","_classes","valueToSearch","formulaClick","fontSet","fontIcon","setSearch","currentTarget","emitFormula","getFlag","returnValue","class","prefixClass","toggle","Output","AjfReportBuilderProperties","_dialog","initChartType","formsJson","widgetName","marginExpanded","paddingExpanded","borderWidthExpanded","borderRadiusExpanded","backgroundColor","styleBackgroundColor","borderColor","styleColor","align","fonts","currentModule","quillModules","script","background","font","chartBorderColor","chartBorderWidth","htmlText","reportStyles","sectionStyles","widgetStyles","sectionColor","widgetColor","visibilitySection","currentColor","iconSet","title","flagSet","_formsSub","_colorSub","_headerStyleSub","_contentStylesSub","_footerStylesSub","_originSub","_stylesUpdatesSubs","_updateWidgetMarginEvt","_updateWidgetPaddingEvt","_updateWidgetBorderWidthEvt","_updateWidgetBorderRadiusEvt","tabValue","setForms","keys","iconSets","toNumber","matches","match","toNumberArray","v","fillPxNumberArray","v21","v22","v32","percent","setStyle","setWidgetMargin","setWidgetPadding","setWidgetBorderWidth","setWidgetBorderRadius","getModule","isChartTypeSelected","setTab","hideMenu","openFormulaDialog","getHTML","distinctUntilChanged","getHeightWidget","getFontSizeWidget","getFontAlignWidget","getBorderWidthWidget","getBorderWidthWidgetTop","m","getBorderWidthWidgetRight","getBorderWidthWidgetBottom","getBorderWidthWidgetLeft","getBorderRadiusWidget","getBorderRadiusWidgetTopLeft","getBorderRadiusWidgetTopRight","getBorderRadiusWidgetBottomRight","getBorderRadiusWidgetBottomLeft","getMarginWidget","getMarginWidgetTop","getMarginWidgetRight","getMarginWidgetBottom","getMarginWidgetLeft","getPaddingWidget","getPaddingWidgetTop","getPaddingWidgetRight","getPaddingWidgetBottom","getPaddingWidgetLeft","getBackgroundColorWidget","getColorWidget","withLatestFrom","ngOnChanges","changes","currentValue","AjfQuillEditor","_elementRef","_renderer","emptyArray","_init","dateFormats","validator","defaultModules","slice","import","editorCreated","contentChanged","selectionChanged","onModelChange","onModelTouched","_formulas","_formulaTextSub","whitelist","innerHTML","setAttribute","efs","formulaEntry","unlisten","listen","quillEditor","querySelector","link_1","createElement","check","linkLabel","createText","appendChild","setHTML","writeValue","initHTML","ngAfterViewInit","toolbarElem","modules","register","insertAdjacentHTML","editorElem","placeholder","readOnly","theme","formats","on","oldRange","source","delta","oldDelta","html","children","getText","elem","listenFunc","pasteHTML","querySelectorAll","innerText","setText","registerOnChange","fn","registerOnTouched","validate","err","valid","textLength","minLength","minLengthError","given","maxLength","maxLengthError","enable","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","NG_VALIDATORS","ElementRef","Renderer2","AjfReportBuilderRendererWidget","currentContentWidget","getColumnContent","getIcon","evaluateExpression","getPercent","toString","getImageUrl","getImageType","Image","getHtmlText","getCoordinate","coordinate","getTileLayer","tileLayer","getAttribution","attribution","getChartType","getTableTitles","tableTitle","getTableContent","tableContent","section","AjfReportBuilder","set","_setCurrentReport","ngAfterContentInit","startSidenav","MatSidenav","AjfReportBuilderThemeColorDialog","firstElementChild","AjfReportBuilderThemeColor","alphaColor","_colorsSub","setStyles","setChartStyle","setAlphaColor","lastComma","lastIndexOf","AjfReportBuilderToolbarDialog","resetReport","AjfReportBuilderToolbar","addClick","zoom","emptyContent","JSONRequest","onAddClick","toJson","undoLastOperation","isZoomed","outputs","AjfReportBuilderWidgetToolbarButton","ajfReportBuilderWidgetToString","AjfReportBuilderWidgetsRowButtons","isOver","isClicked","selectedWidget","onFocus","direction","isColumn","isOneColumn","widgetReportBuilderIconName","ajfWidgetTypeToLabel","child","AjfReportBuilderWidgetsToolbar","chartTypes","widgetTypes","pos","AjfReportBuilderModule","NgModule","imports","AjfCommonModule","AjfImageModule","AjfMapModule","AjfMonacoEditorModule","AjfTableModule","AjfTextModule","ColorPickerModule","CommonModule","DragDropModule","FormsModule","MatButtonModule","MatButtonToggleModule","MatCardModule","MatDialogModule","MatGridListModule","MatIconModule","MatListModule","MatSelectModule","MatSidenavModule","MatSlideToggleModule","MatSliderModule","MatTabsModule","MatToolbarModule","MatTooltipModule","TranslateModule","declarations","ɵgc_ajf_src_material_report_builder_report_builder_a","ɵgc_ajf_src_material_report_builder_report_builder_b","ɵgc_ajf_src_material_report_builder_report_builder_c","ɵgc_ajf_src_material_report_builder_report_builder_d","ɵgc_ajf_src_material_report_builder_report_builder_e","ɵgc_ajf_src_material_report_builder_report_builder_f","ɵgc_ajf_src_material_report_builder_report_builder_g","ɵgc_ajf_src_material_report_builder_report_builder_h","ɵgc_ajf_src_material_report_builder_report_builder_i","ɵgc_ajf_src_material_report_builder_report_builder_j","ɵgc_ajf_src_material_report_builder_report_builder_k","ɵgc_ajf_src_material_report_builder_report_builder_l","ɵgc_ajf_src_material_report_builder_report_builder_m","ɵgc_ajf_src_material_report_builder_report_builder_n","ɵgc_ajf_src_material_report_builder_report_builder_o","ɵgc_ajf_src_material_report_builder_report_builder_p","ɵgc_ajf_src_material_report_builder_report_builder_q","ɵgc_ajf_src_material_report_builder_report_builder_r","ɵgc_ajf_src_material_report_builder_report_builder_s","ɵgc_ajf_src_material_report_builder_report_builder_t"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@ajf/core/common'), require('@ajf/core/map'), require('@ajf/core/table'), require('@ajf/core/text'), require('@ajf/material/image'), require('@ajf/material/monaco-editor'), require('@angular/cdk/drag-drop'), require('@angular/common'), require('@angular/core'), require('@angular/forms'), require('@angular/material/button'), require('@angular/material/button-toggle'), require('@angular/material/card'), require('@angular/material/dialog'), require('@angular/material/grid-list'), require('@angular/material/icon'), require('@angular/material/list'), require('@angular/material/select'), require('@angular/material/sidenav'), require('@angular/material/slide-toggle'), require('@angular/material/slider'), require('@angular/material/tabs'), require('@angular/material/toolbar'), require('@angular/material/tooltip'), require('@ngx-translate/core'), require('ngx-color-picker'), require('rxjs'), require('@ajf/core/forms'), require('@ajf/core/models'), require('@ajf/core/reports'), require('@ajf/core/utils'), require('rxjs/operators'), require('@ajf/core/image'), require('quill')) :\n    typeof define === 'function' && define.amd ? define('@ajf/material/report-builder', ['exports', '@ajf/core/common', '@ajf/core/map', '@ajf/core/table', '@ajf/core/text', '@ajf/material/image', '@ajf/material/monaco-editor', '@angular/cdk/drag-drop', '@angular/common', '@angular/core', '@angular/forms', '@angular/material/button', '@angular/material/button-toggle', '@angular/material/card', '@angular/material/dialog', '@angular/material/grid-list', '@angular/material/icon', '@angular/material/list', '@angular/material/select', '@angular/material/sidenav', '@angular/material/slide-toggle', '@angular/material/slider', '@angular/material/tabs', '@angular/material/toolbar', '@angular/material/tooltip', '@ngx-translate/core', 'ngx-color-picker', 'rxjs', '@ajf/core/forms', '@ajf/core/models', '@ajf/core/reports', '@ajf/core/utils', 'rxjs/operators', '@ajf/core/image', 'quill'], factory) :\n    (global = global || self, factory((global.ajf = global.ajf || {}, global.ajf.material = global.ajf.material || {}, global.ajf.material.reportBuilder = {}), global.ng.core.common, global.ng.core.map, global.ng.core.table, global.ng.core.text, global.ng.material.image, global.ng.material.monacoEditor, global.ng.cdk.dragDrop, global.ng.common, global.ng.core, global.ng.forms, global.ng.material.button, global.ng.material.buttonToggle, global.ng.material.card, global.ng.material.dialog, global.ng.material.gridList, global.ng.material.icon, global.ng.material.list, global.ng.material.select, global.ng.material.sidenav, global.ng.material.slideToggle, global.ng.material.slider, global.ng.material.tabs, global.ng.material.toolbar, global.ng.material.tooltip, global.ngxTranslate.core, global.ngxColorPicker, global.rxjs, global.ng.core.forms, global.ng.core.models, global.ng.core.reports, global.ng.core.utils, global.rxjs.operators, global.ng.core.image, global.quill));\n}(this, (function (exports, common, map, table, text, image, monacoEditor, dragDrop, common$1, core, forms, button, buttonToggle, card, dialog, gridList, icon, list, select, sidenav, slideToggle, slider, tabs, toolbar, tooltip, core$1, ngxColorPicker, rxjs, forms$1, models, reports, utils, operators, image$1, Quill) { 'use strict';\n\n    Quill = Quill && Quill.hasOwnProperty('default') ? Quill['default'] : Quill;\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __rest(s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    }\r\n\r\n    function __decorate(decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    }\r\n\r\n    function __param(paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    }\r\n\r\n    function __metadata(metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    }\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    function __exportStar(m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    }\r\n\r\n    function __values(o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spread() {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    }\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    };\r\n\r\n    function __await(v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    }\r\n\r\n    function __asyncGenerator(thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    }\r\n\r\n    function __asyncDelegator(o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    }\r\n\r\n    function __asyncValues(o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    }\r\n\r\n    function __makeTemplateObject(cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    function __importStar(mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result.default = mod;\r\n        return result;\r\n    }\r\n\r\n    function __importDefault(mod) {\r\n        return (mod && mod.__esModule) ? mod : { default: mod };\r\n    }\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AJF_REPORTS_CONFIG = new core.InjectionToken('AJF_REPORTS_CONFIG');\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * This service contains all the logic to model the report widget.\n     *\n     * @export\n     */\n    var AjfReportBuilderService = /** @class */ (function () {\n        /**\n         * Creates an instance of AjfReportBuilderService.\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        function AjfReportBuilderService(reportsConfig) {\n            var _this = this;\n            this._customWidgetsUpdate = new rxjs.Subject();\n            this._originUpdate = new rxjs.Subject();\n            this._savedReportUpdate = new rxjs.Subject();\n            this._jsonStack = new rxjs.BehaviorSubject([]);\n            this._emptyContent = new rxjs.BehaviorSubject(true);\n            this._onDraggedUpdate = new rxjs.Subject();\n            this._onOverUpdate = new rxjs.Subject();\n            this._fixedZoomUpdate = new rxjs.Subject();\n            this._onDragEnterUpdate = new rxjs.Subject();\n            this._headerWidgetsUpdate = new rxjs.Subject();\n            this._contentWidgetsUpdate = new rxjs.Subject();\n            this._footerWidgetsUpdate = new rxjs.Subject();\n            this._colorUpdate = new rxjs.Subject();\n            this._defaultColor = [\n                'rgba(0, 0, 0, 1)', 'rgba(51, 153, 255, 1)', 'rgba(153, 204, 0, 1)',\n                'rgba(255, 102, 0, 1)', 'rgba(0, 204, 204, 1)', 'rgba(204, 204, 153, 1)',\n                'rgba(255, 153, 0, 1)', 'rgba(230, 0, 0, 1)', 'rgba(255, 153, 0, 1)',\n                'rgba(255, 255, 0, 1)', 'rgba(0, 138, 0, 1)', 'rgba(0, 102, 204, 1)',\n                'rgba(153, 51, 255, 1)', 'rgba(255, 255, 255, 1)', 'rgba(250, 204, 204, 1)',\n                'rgba(255, 235, 204, 1)', 'rgba(255, 255, 204, 1)', 'rgba(204, 232, 204, 1)',\n                'rgba(204, 224, 245, 1)', 'rgba(235, 214, 255, 1)', 'rgba(187, 187, 187, 1)',\n                'rgba(240, 102, 102, 1)', 'rgba(255, 194, 102, 1)', 'rgba(255, 255, 102, 1)',\n                'rgba(102, 185, 102, 1)', 'rgba(102, 163, 224, 1)', 'rgba(194, 133, 255, 1)',\n                'rgba(136, 136, 136, 1)', 'rgba(161, 0, 0, 1)', 'rgba(178, 107, 0, 1)',\n                'rgba(178, 178, 0, 1)', 'rgba(0, 97, 0, 1)', 'rgba(0, 71, 178, 1)',\n                'rgba(107, 36, 178, 1)', 'rgba(68, 68, 68, 1)', 'rgba(92, 0, 0, 1)',\n                'rgba(102, 61, 0, 1)', 'rgba(102, 102, 0, 1)', 'rgba(0, 55, 0, 1)',\n                'rgba(0, 41, 102, 1)', 'rgba(61, 20, 102, 1)'\n            ];\n            this._currentWidgetUpdate = new rxjs.BehaviorSubject(null);\n            this._formsVariablesUpdate = new rxjs.BehaviorSubject(null);\n            this._conditionNamesUpdate = new rxjs.BehaviorSubject(null);\n            /**\n             * this BehaviorSubject update export report.\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._saveReport = new rxjs.BehaviorSubject(null);\n            /**\n             * this BehaviorSubject contains the AjfReport.\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._report = new rxjs.BehaviorSubject(null);\n            this._reportStylesUpdate = new rxjs.Subject();\n            this._reportFormsUpdate = new rxjs.Subject();\n            /**\n             * dictionary for  widgetsUpdate\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._updates = {\n                header: this._headerWidgetsUpdate,\n                content: this._contentWidgetsUpdate,\n                footer: this._footerWidgetsUpdate,\n                color: this._colorUpdate,\n                customWidgets: this._customWidgetsUpdate\n            };\n            /**\n             * event emitter that notify when wont to save report\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this._saveReportEvent = new core.EventEmitter();\n            this._saveFormulaTOHtml = new core.EventEmitter();\n            /**\n             * event emitter that notify when column width changed\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            this.columnWidthChangedEmitter = new core.EventEmitter();\n            this._iconSets = { 'ajf-icon': [] };\n            this._lastDeletedJson = '';\n            if (reportsConfig != null) {\n                if (reportsConfig.icons != null) {\n                    this._iconSets = __assign(__assign({}, this._iconSets), reportsConfig.icons);\n                }\n            }\n            this._origin = this._originUpdate.pipe(operators.startWith('header'), operators.share());\n            this._savedReport = this._savedReportUpdate.pipe(operators.share());\n            this._onDragged = this._onDraggedUpdate.pipe(operators.startWith(false), operators.share());\n            this._onOver = this._onOverUpdate.pipe(operators.startWith(false), operators.share());\n            this._fixedZoom = this._fixedZoomUpdate.pipe(operators.startWith(false), operators.share());\n            this._onDragEnter = this._onDragEnterUpdate.pipe(operators.share());\n            this._reportStyles = this._reportStylesUpdate\n                .pipe(operators.scan(function (styles, op) {\n                return op(styles);\n            }, {}), operators.share(), operators.startWith({}));\n            this._reportForms = this._reportFormsUpdate\n                .pipe(operators.scan(function (forms, op) {\n                return op(forms);\n            }, []), operators.share(), operators.startWith([]));\n            this._customWidgets =\n                this._customWidgetsUpdate\n                    .pipe(operators.scan(function (widgets, op) {\n                    return op(widgets);\n                }, []), operators.share(), operators.startWith([]));\n            this._formsVariables =\n                this._formsVariablesUpdate\n                    .pipe(operators.filter(function (s) { return s != null; }), operators.scan(function (variables, op) {\n                    return op(variables);\n                }, []), operators.publishReplay(1), operators.refCount());\n            this._conditionNames =\n                this._conditionNamesUpdate\n                    .pipe(operators.filter(function (s) { return s != null; }), operators.scan(function (variables, op) {\n                    return op(variables);\n                }, []), operators.share(), operators.startWith([]));\n            this._headerWidgets = this._headerWidgetsUpdate\n                .pipe(operators.scan(function (widgets, op) {\n                return op(widgets);\n            }, { widgets: [], styles: {} }), operators.startWith({ widgets: [], styles: {} }), operators.publishReplay(1), operators.refCount());\n            this._headerStyles = this._headerWidgets.pipe(operators.map(function (widgets) {\n                return widgets != null ? widgets.styles : {};\n            }));\n            this._contentWidgets = this._contentWidgetsUpdate\n                .pipe(operators.scan(function (widgets, op) {\n                return op(widgets);\n            }, { widgets: [], styles: {} }), operators.startWith({ widgets: [], styles: {} }), operators.publishReplay(1), operators.refCount());\n            this._contentStyles = this._contentWidgets.pipe(operators.map(function (widgets) {\n                return widgets != null ? widgets.styles : {};\n            }));\n            this._footerWidgets = this._footerWidgetsUpdate\n                .pipe(operators.scan(function (widgets, op) {\n                return op(widgets);\n            }, { widgets: [], styles: {} }), operators.startWith({ widgets: [], styles: {} }), operators.publishReplay(1), operators.refCount());\n            this._footerStyles = this._footerWidgets.pipe(operators.map(function (widgets) {\n                return widgets != null ? widgets.styles : {};\n            }));\n            this._color = this._colorUpdate\n                .pipe(operators.scan(function (color, op) {\n                return op(color);\n            }, this._defaultColor), operators.share(), operators.startWith(this._defaultColor));\n            this._currentWidget = this._currentWidgetUpdate.pipe(operators.filter(function (s) { return s != null; }), operators.map(function (s) { return s; }), operators.scan(function (widget, op) {\n                return op(widget);\n            }, null), operators.publishReplay(1), operators.refCount());\n            this._reportForms\n                .pipe(operators.filter(function (f) { return f.length != 0; }), operators.map(function (forms) {\n                return function (_c) {\n                    return _this.fillFormsVariables(forms);\n                };\n            }))\n                .subscribe(this._formsVariablesUpdate);\n            this._reportForms\n                .pipe(operators.filter(function (f) { return f.length != 0; }), operators.map(function (forms) {\n                return function (_c) {\n                    return _this.fillFormsVariables(forms);\n                };\n            }))\n                .subscribe(this._conditionNamesUpdate);\n            var reportObs = this._report;\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_colors) {\n                    var tempColors = _this._defaultColor;\n                    if (r == null) {\n                        return [];\n                    }\n                    else {\n                        _this.parseColor(r.styles, tempColors);\n                        if (r.content) {\n                            _this.parseColor(r.content.styles, tempColors);\n                        }\n                        if (r.footer) {\n                            _this.parseColor(r.footer.styles, tempColors);\n                        }\n                        if (r.header) {\n                            _this.parseColor(r.header.styles, tempColors);\n                            for (var i = 0; i < r.header.content.length; i++) {\n                                var obj = r.header.content[i];\n                                _this.parseColor(obj.styles, tempColors);\n                                if (obj.widgetType === reports.AjfWidgetType.Layout) {\n                                    var layoutObj = obj;\n                                    for (var j = 0; j < layoutObj.content.length; j++) {\n                                        var columnObj = layoutObj.content[j];\n                                        _this.parseColor(columnObj.styles, tempColors);\n                                        for (var z = 0; z < columnObj.content.length; z++) {\n                                            var widgetObj = columnObj.content[z];\n                                            _this.parseColor(widgetObj.styles, tempColors);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    return tempColors;\n                };\n            }))\n                .subscribe(this._colorUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_styles) {\n                    if (r == null || r.styles == null) {\n                        return {};\n                    }\n                    else {\n                        return r.styles;\n                    }\n                };\n            }))\n                .subscribe(this._reportStylesUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_widgets) {\n                    if (r == null || r.header == null) {\n                        return { widgets: [], styles: {} };\n                    }\n                    else {\n                        return {\n                            widgets: r.header.content || [],\n                            styles: r.header.styles || {}\n                        };\n                    }\n                };\n            }))\n                .subscribe(this._headerWidgetsUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_widgets) {\n                    if (r == null || r.content == null) {\n                        return { widgets: [], styles: {} };\n                    }\n                    else {\n                        return {\n                            widgets: r.content.content || [],\n                            styles: r.content.styles || {}\n                        };\n                    }\n                };\n            }))\n                .subscribe(this._contentWidgetsUpdate);\n            reportObs\n                .pipe(operators.map(function (r) {\n                return function (_widgets) {\n                    if (r == null || r.footer == null) {\n                        return { widgets: [], styles: {} };\n                    }\n                    else {\n                        return {\n                            widgets: r.footer.content || [],\n                            styles: r.footer.styles || {}\n                        };\n                    }\n                };\n            }))\n                .subscribe(this._footerWidgetsUpdate);\n            this._saveReport.pipe(operators.map(function (json) {\n                return function (_r) {\n                    if (json = null) {\n                        return {};\n                    }\n                    return json;\n                };\n            }));\n            this._saveReportEvent\n                .pipe(operators.combineLatest(this.report, this.reportForms), operators.combineLatest(this._headerWidgets.pipe(operators.filter(function (w) { return w != null; })), this._contentWidgets.pipe(operators.filter(function (w) { return w != null; })), this._footerWidgets.pipe(operators.filter(function (w) { return w != null; })), this._reportStyles.pipe(operators.filter(function (w) { return w != null; }))))\n                .subscribe(function (r) {\n                var obj = {};\n                // const curRo = r[0][1];\n                // const forms = r[0][2] != null ? r[0][2] || []\n                //     : (curRo != null ? curRo.forms || [] : []);\n                obj.header = { content: r[1].widgets.map(function (w) { return utils.deepCopy(w); }), styles: r[1].styles };\n                obj.content = { content: r[2].widgets.map(function (w) { return utils.deepCopy(w); }), styles: r[2].styles };\n                obj.footer = { content: r[3].widgets.map(function (w) { return utils.deepCopy(w); }), styles: r[3].styles };\n                obj.styles = r[4];\n                var ro = {\n                    header: { content: r[1].widgets, styles: r[1].styles },\n                    content: { content: r[2].widgets, styles: r[2].styles },\n                    footer: { content: r[3].widgets, styles: r[3].styles },\n                    styles: r[4]\n                };\n                _this.setSaveReport(obj);\n                _this._savedReportUpdate.next(ro);\n                _this.pushJsonStack(JSON.stringify(obj));\n            });\n        }\n        AjfReportBuilderService.prototype.getFormulaToHtmlEvent = function () {\n            return this._saveFormulaTOHtml.asObservable();\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"iconSets\", {\n            get: function () {\n                return this._iconSets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *\n         *  functions\n         *\n         */\n        /**\n         * utils:\n         * remove AjfNodeGroup, AjfSlide, AjfRepeatingSlide, AjfStringField from ajfnode array\n         *\n         * @param nodes\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.filterNodes = function (nodes) {\n            for (var i = 0; i < nodes.length; i++) {\n                var node = nodes[i];\n                if (node.nodeType === forms$1.AjfNodeType.AjfNodeGroup || node.nodeType === forms$1.AjfNodeType.AjfSlide ||\n                    node.nodeType === forms$1.AjfNodeType.AjfRepeatingSlide ||\n                    (node.nodeType === forms$1.AjfNodeType.AjfField &&\n                        node.fieldType === forms$1.AjfFieldType.String)) {\n                    nodes.splice(i, 1);\n                    i--;\n                }\n            }\n            return nodes;\n        };\n        AjfReportBuilderService.prototype.parseColor = function (cssStyles, colors) {\n            var styleKeys = ['background-color', 'backgroundColor', 'color'];\n            styleKeys.forEach(function (k) {\n                if (cssStyles[k] && colors.indexOf(cssStyles[k]) == -1) {\n                    colors.push(cssStyles[k]);\n                }\n            });\n        };\n        AjfReportBuilderService.prototype.fillFormsVariables = function (forms) {\n            var variables = [];\n            for (var i = 0; i < forms.length; i++) {\n                variables[i] = { nodes: [], labels: [], names: [], types: [] };\n                if (forms[i].nodes != null && forms[i].nodes.length > 0) {\n                    variables[i].nodes = this.filterNodes(forms$1.flattenNodes(forms[i].nodes));\n                }\n                variables[i].labels = this.extractLabelsNodes(variables[i].nodes);\n                variables[i].names = this.extractNamesNodes(variables[i].nodes);\n                variables[i].types = this.extractTypesNodes(variables[i].nodes);\n            }\n            return variables;\n        };\n        /**\n         * utils:\n         *  the obj returned contains the label field of ajfNode\n         * @param nodes\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.extractLabelsNodes = function (nodes) {\n            var obj = [];\n            for (var i = 0; i < nodes.length; i++) {\n                obj.push(nodes[i].label);\n            }\n            return obj;\n        };\n        AjfReportBuilderService.prototype.extractNamesNodes = function (nodes) {\n            var obj = [];\n            for (var i = 0; i < nodes.length; i++) {\n                obj.push(nodes[i].name);\n            }\n            return obj;\n        };\n        AjfReportBuilderService.prototype.extractTypesNodes = function (nodes) {\n            var obj = [];\n            for (var i = 0; i < nodes.length; i++) {\n                var p = nodes[i];\n                obj.push(p.fieldType);\n            }\n            return obj;\n        };\n        AjfReportBuilderService.prototype.setOrigin = function (origin) {\n            this._originUpdate.next(origin);\n        };\n        /**\n         * utils:\n         * This method round the value to the decimal position\n         *\n         * @param value\n         * @param decimalpositions\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.roundTo = function (value, decimalPositions) {\n            var i = value * Math.pow(10, decimalPositions);\n            i = Math.floor(i);\n            return i / Math.pow(10, decimalPositions);\n        };\n        /**\n         * utils:\n         * This validator check if the value is a number.\n         *\n         * @param value\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.isNumber = function (value) {\n            return /^\\d+(\\.\\d+)?/.test(value);\n        };\n        AjfReportBuilderService.prototype.isNumberArray = function (value) {\n            for (var i = 0; i < value.length; i++) {\n                if (!this.isNumber(value[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"onDragged\", {\n            /**\n             * get _onDragged Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._onDragged;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"onOver\", {\n            /**\n             * get _onOver Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._onOver;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"fixedZoom\", {\n            /**\n             * get _fixedZoom Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._fixedZoom;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *  change status of _fixedZoom in true\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.fixedZoomIn = function () {\n            this._fixedZoomUpdate.next(true);\n        };\n        /**\n         *  change status of _fixedZoom in false\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.fixedZoomOut = function () {\n            this._fixedZoomUpdate.next(false);\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"onDragEnter\", {\n            /**\n             * get _onDragEnter observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._onDragEnter;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *  update _onDragEnter with  section(header,content,footer) and index\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragEnter = function (array, index) {\n            this._onDragEnterUpdate.next({ array: array, index: index });\n        };\n        /**\n         *  update _ondragged with true\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragStarted = function () {\n            this._onDraggedUpdate.next(true);\n        };\n        /**\n         *  update _onDragged with false\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragEnded = function () {\n            this._onDraggedUpdate.next(false);\n        };\n        /**\n         *  update _onOver with true\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.overStarted = function () {\n            this._onOverUpdate.next(true);\n        };\n        /**\n         * update _onOver with false\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.overEnded = function () {\n            this._onOverUpdate.next(false);\n        };\n        /**\n         *\n         *  update _onDragged with false\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.dragLeave = function () {\n            this._onDragEnterUpdate.next({});\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"report\", {\n            /**\n             * Get the report\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._report.asObservable();\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * emit save report event\n         *\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.saveReport = function () {\n            if (this._saveReportEvent != null) {\n                this._saveReportEvent.emit();\n            }\n        };\n        AjfReportBuilderService.prototype.saveImageFormula = function (formula) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return widget;\n                }\n                var w = widget;\n                w.flag = formula;\n                w.icon = formula;\n                return w;\n            });\n        };\n        AjfReportBuilderService.prototype.saveFormulaToHtml = function (htmlFormula, reference) {\n            if (this._saveFormulaTOHtml != null) {\n                var obj = { 'formula': htmlFormula, 'reference': reference };\n                this._saveFormulaTOHtml.emit(obj);\n            }\n        };\n        AjfReportBuilderService.prototype.setEmptyContent = function (val) {\n            this._emptyContent.next(val);\n        };\n        AjfReportBuilderService.prototype.pushJsonStack = function (json) {\n            var currentStack = this._jsonStack.getValue();\n            if (currentStack.indexOf(json) === -1 && json !== this._lastDeletedJson) {\n                currentStack.push(json);\n            }\n            this._jsonStack.next(currentStack);\n        };\n        AjfReportBuilderService.prototype.popJsonStack = function () {\n            var emptyJson = '{\"header\":{\"content\":[],\"styles\":{}},' +\n                '\"content\":{\"content\":[],\"styles\":{}},\"' +\n                'footer\":{\"content\":[],\"styles\":{}},\"styles\":{}}';\n            var currentStack = this._jsonStack.getValue();\n            currentStack.pop();\n            this._lastDeletedJson = currentStack.pop();\n            if (currentStack.length <= 0) {\n                this._lastDeletedJson = '';\n                this._jsonStack.next([]);\n                this.updateCurrentWidget(null);\n                this.setEmptyContent(true);\n                return emptyJson;\n            }\n            this._jsonStack.next(currentStack);\n            return this._lastDeletedJson;\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"columnWidthChanged\", {\n            /**\n             * get the emitter\n             *\n             * @readonly\n             *\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this.columnWidthChangedEmitter;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"customWidgets\", {\n            /**\n             * get _customWidgets Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._customWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"headerWidgets\", {\n            /**\n             * Get the header widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._headerWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"headerStyles\", {\n            /**\n             * Get the header styles\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._headerStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"contentWidgets\", {\n            /**\n             * Get the Content widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._contentWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"contentStyles\", {\n            /**\n             * Get the content styles\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._contentStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"footerWidgets\", {\n            /**\n             * Get the footer widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._footerWidgets;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"footerStyles\", {\n            /**\n             * Get the footer styles\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._footerStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"colors\", {\n            /**\n             * Get the colors of report\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._color;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"emptyContent\", {\n            get: function () {\n                return this._emptyContent;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *\n         * @param type\n         * @param newWidget\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.updateArrayWidgets = function (type, newWidget) {\n            if ((type !== 'header') && (type !== 'content') && (type !== 'footer')) {\n                throw new Error('Unknown type ' + type);\n            }\n            this._updates[type].next(function (_widgets) {\n                return newWidget;\n            });\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"formsVariables\", {\n            /**\n             * get _formsVariables Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._formsVariables;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"conditionNames\", {\n            get: function () {\n                return this._conditionNames;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"currentWidget\", {\n            /**\n             * Get the current widget\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._currentWidget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * This method Update _currentWidgetUpdate with newWidget.\n         *\n         * @param newWidget\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.updateCurrentWidget = function (newWidget) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (_widget) {\n                _this._saveReportEvent.emit();\n                return newWidget;\n            });\n        };\n        Object.defineProperty(AjfReportBuilderService.prototype, \"getSaveReport\", {\n            /**\n             * Get the report\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._saveReport.asObservable();\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"reportSaved\", {\n            /**\n             * get _jsonSavedReport obeservable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._savedReport;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"reportStyles\", {\n            /**\n             * get _reportStyles observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._reportStyles;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"reportForms\", {\n            /**\n             * get _reportForms observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._reportForms;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderService.prototype, \"origin\", {\n            /**\n             * get the _origin Observable\n             *\n             * @readonly\n             * @memberOf AjfReportBuilderService\n             */\n            get: function () {\n                return this._origin;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * This method assigns the new width to the idx column\n         * and recalculates the width of the remaining columns of the layout.\n         * The range value are from 0,1 to 1.\n         *\n         * RULES:\n         * The min value for column is 0,1.\n         * The sum of all columns width is always 1.\n         * The method round the values.\n         * If is present only one column the width is always 1.\n         *\n         * When the new value `>` old value:\n         * the width of the remaining columns decreases.\n         * When the new value `<` old value:\n         * the width of the remaining columns increases.\n         *\n         * When values ​​are periodic, rounding assigns the gap to the current value.\n         * For example: 3 columns with 0,33 believe 1 column 0,34 and 2 columns 0,33.\n         *\n         * @param newValue\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.instantColumnValue = function (newValue, idx) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return widget;\n                }\n                var myObj = widget;\n                var size = myObj.columns.length;\n                var spreadValue = 0;\n                var objNum = 0;\n                var sum = 0;\n                var idxFirstNoObj = -1;\n                var add = false;\n                var foundFirstNoObj = false;\n                var re1 = new RegExp('(^[0]\\.\\[1-9][0-9]$)');\n                var re2 = new RegExp('(^[0]\\.\\[1-9]$)');\n                var re3 = new RegExp('^[1]$');\n                var oldValue = myObj.columns[idx];\n                newValue = Number(_this.roundTo(newValue, 2).toFixed(2));\n                if (myObj.columns[idx] == null) {\n                    throw new Error('invalid value');\n                }\n                for (var j = 0; j < size; j++) {\n                    if (myObj.columns[j] === -1) {\n                        objNum++;\n                    }\n                }\n                if (oldValue == -1) {\n                    oldValue = 0.1;\n                    objNum--;\n                    newValue = Number(_this.roundTo(1 / (size - objNum), 2).toFixed(2));\n                    myObj.columns[idx] = 0.1;\n                }\n                else if (oldValue < 0.1) {\n                    oldValue = 0.1;\n                }\n                if (newValue !== -1) {\n                    if (myObj.columns.length === 1) {\n                        myObj.columns[0] = 1;\n                        return myObj;\n                    }\n                    if (newValue < 0.1) {\n                        newValue = 0.1;\n                    }\n                    else if (newValue + 0.1 * (size - objNum - 1) > 1) {\n                        newValue = 1 - (0.1 * (size - objNum - 1));\n                    }\n                    if ((oldValue === newValue) && (oldValue === 0.1)) {\n                        myObj.columns[idx] = newValue;\n                        return myObj;\n                    }\n                    if (oldValue > newValue) {\n                        add = true;\n                        spreadValue = (oldValue - newValue) / (size - objNum - 1);\n                    }\n                    else {\n                        add = false;\n                        spreadValue = (newValue - oldValue) / (size - objNum - 1);\n                    }\n                    spreadValue = Number(_this.roundTo(spreadValue, 2).toFixed(2));\n                    if (spreadValue < 0.01) {\n                        spreadValue = 0.1;\n                    }\n                }\n                else {\n                    myObj.columns[idx] = -1;\n                    objNum++;\n                    add = true;\n                    if (myObj.columns.length == 1) {\n                        spreadValue = 1;\n                    }\n                    else {\n                        spreadValue = (oldValue) / (size - objNum);\n                    }\n                }\n                for (var i = 0; i < size; i++) {\n                    if (myObj.columns[i] !== -1) {\n                        if ((i == idx)) {\n                            myObj.columns[idx] = newValue;\n                        }\n                        else {\n                            if (add) {\n                                myObj.columns[i] += spreadValue;\n                                if ((myObj.columns[i] > 0.9) && (myObj.columns.length - objNum != 1)) {\n                                    myObj.columns[i] = 0.90;\n                                }\n                            }\n                            else {\n                                myObj.columns[i] -= spreadValue;\n                                if (myObj.columns[i] < 0.1) {\n                                    myObj.columns[i] = 0.10;\n                                }\n                            }\n                            myObj.columns[i] = Number(_this.roundTo(myObj.columns[i], 2).toFixed(2));\n                            sum += myObj.columns[i];\n                        }\n                        sum = Number(_this.roundTo(sum, 2).toFixed(2));\n                        if (foundFirstNoObj == false) {\n                            idxFirstNoObj = i;\n                            foundFirstNoObj = true;\n                        }\n                    }\n                }\n                if (newValue === -1) {\n                    myObj.columns[idx] = -1;\n                    if (foundFirstNoObj) {\n                        myObj.columns[idxFirstNoObj] += Number(_this.roundTo(1 - sum, 2).toFixed(2));\n                    }\n                }\n                else {\n                    myObj.columns[idx] = Number(_this.roundTo(1 - sum, 2).toFixed(2));\n                }\n                for (var j = 0; j < myObj.columns.length; j++) {\n                    if (myObj.columns[j] !== -1 && !re1.test(String(myObj.columns[j])) &&\n                        !re2.test(String(myObj.columns[j])) && !re3.test(String(myObj.columns[j]))) {\n                        _this.instantColumnValue(0.10, j);\n                    }\n                }\n                _this.columnWidthChangedEmitter.emit();\n                _this._saveReportEvent.emit();\n                return myObj;\n            });\n        };\n        /**\n         * This method set the imageUrl on the current AjfImageWidget.\n         *\n         * @param imageUrl\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setImageUrl = function (imageUrl) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                myObj.url = models.createFormula({ formula: \"\\\"\" + imageUrl + \"\\\"\" });\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.setIcon = function (icon) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                myObj.icon = models.createFormula({ formula: \"\\\"\" + icon + \"\\\"\" });\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.setFlag = function (value) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                myObj.flag = models.createFormula({ formula: \"\\\"\" + value + \"\\\"\" });\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.saveCondition = function (conditionText) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                if (widget.visibility != null) {\n                    widget.visibility.condition = conditionText;\n                }\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype.saveChartFormula = function (_label, _level, _mainIndex, _index, formulaText, aggregationType) {\n            this._currentWidgetUpdate.next(function (w) {\n                if (w == null) {\n                    return null;\n                }\n                var widget = w;\n                if (widget != null && widget.dataset != null) {\n                    var formula = models.createFormula({});\n                    var aggregation = reports.createAggregation({});\n                    // let obj: any;\n                    formula.formula = formulaText;\n                    aggregation.aggregation = aggregationType;\n                    // obj = {\n                    //   'formula': formula.toJson(),\n                    //   'aggregation': aggregation.toJson(),\n                    //   'label': label\n                    // };\n                    // dataset = AjfDataset.fromJson(obj);\n                    // check if the row that contains main data is defined\n                    /* if (widget.dataset[0] == null) {\n                      widget.dataset[0] = [];\n                    }\n            \n                    if (level == 0 && mainIndex == -1 && index == -1) {\n            \n                      widget.dataset[0].push(dataset);\n                    } else if (level == 1 && mainIndex == -1 && index == -1) {\n            \n                      widget.dataset[widget.dataset.length] = [];\n                      widget.dataset[widget.dataset.length - 1].push(dataset);\n                    } else if (index === - 1) {\n                      widget.dataset[mainIndex + 1].push(dataset);\n                    } else {\n                      widget.dataset[mainIndex].splice(index, 1, dataset);\n                    } */\n                }\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype.saveTableFormula = function (_label, aggregationType, formulaText, _mainIndex, _index) {\n            this._currentWidgetUpdate.next(function (w) {\n                if (w == null) {\n                    return null;\n                }\n                var widget = w;\n                if (widget.dataset != null) {\n                    var formula = models.createFormula({});\n                    var aggregation = reports.createAggregation({});\n                    // let dataset: AjfDataset = new AjfDataset();\n                    // let rowDataset: AjfDataset[] = [];\n                    // let obj: any;\n                    formula.formula = formulaText;\n                    aggregation.aggregation = aggregationType;\n                    // obj = {\n                    //   'formula': formula.toJson(),\n                    //   'aggregation': aggregation.toJson(),\n                    //   'label': label\n                    // };\n                    // dataset = AjfDataset.fromJson(obj);\n                    /* if (mainIndex === - 1) {\n                      widget.dataset[widget.dataset.length] = [];\n                      widget.dataset[widget.dataset.length - 1].push(dataset);\n                    } else {\n                      if (index === -1) {\n                        widget.dataset[mainIndex].push(dataset);\n                      } else {\n                        widget.dataset[mainIndex].splice(index, 1, dataset);\n                      }\n                    } */\n                }\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype.removeTableMainData = function (index) {\n            this._removeFromCurrentWidgetArrayProperty('dataset', index);\n        };\n        AjfReportBuilderService.prototype.removeData = function (_mainIndex, _index) {\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                /* if (index === -1) {\n                  myObj.dataset.splice(mainIndex, 1);\n                } else {\n                  myObj.dataset[mainIndex].splice(index, 1);\n                } */\n                return myObj;\n            });\n        };\n        /**\n         * update type field of AjfChartWidget current widget\n         *\n         * @param type\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setChartType = function (type) {\n            this._setCurrentWidgetProperty('type', type);\n        };\n        /**\n         * remove  idx element of xLabels field of AjfChartWidget current widget\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.removeMainData = function (_idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                // myObj.dataset[0].splice(idx, 1);\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.removeRelatedData = function (_mainIdx, _idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                /* if (idx == -1) {\n                  myObj.dataset.splice(mainIdx + 1, 1);\n                } else {\n                  myObj.dataset[mainIdx + 1].splice(idx, 1);\n                } */\n                return myObj;\n            });\n        };\n        /**\n         * update backgroundColor field of AjfChartWidget current widget\n         *\n         * @param colors\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setChartBackgroundColor = function (colors) {\n            this._setCurrentWidgetProperty('backgroundColor', colors);\n        };\n        AjfReportBuilderService.prototype.addChartBackgroundColor = function (color) {\n            this._addToCurrentWidgetArrayProperty('backgroundColor', color);\n        };\n        AjfReportBuilderService.prototype.removeChartBackgroundColor = function (idx) {\n            this._removeFromCurrentWidgetArrayProperty('backgroundColor', idx);\n        };\n        /**\n         * update borderColor field of AjfChartWidget current widget\n         *\n         * @param colors\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setChartBorderColor = function (colors) {\n            this._setCurrentWidgetProperty('borderColor', colors);\n        };\n        AjfReportBuilderService.prototype.setChartBorderWidth = function (value) {\n            this._setCurrentWidgetProperty('borderWidth', value);\n        };\n        AjfReportBuilderService.prototype.addChartBorderColor = function (color) {\n            this._addToCurrentWidgetArrayProperty('borderColor', color);\n        };\n        AjfReportBuilderService.prototype.removeChartBorderColor = function (idx) {\n            this._removeFromCurrentWidgetArrayProperty('borderColor', idx);\n        };\n        /**\n         * This method set the AjfReport.\n         *\n         * @param report\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setReport = function (report) {\n            this._report.next(report);\n        };\n        /**\n         * This method set the export report.\n         *\n         * @param report\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setSaveReport = function (json) {\n            this._saveReport.next(json);\n        };\n        /**\n         * This method set the font attribute on the current AjfWidget.\n         *\n         * There is a check on font-size attribute,\n         * if is no specificate the type of size font set 'pt' as default.\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setWidgetStyles = function (label, value) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                var myObj = widget;\n                var pxStyles = ['font-size', 'height', 'width', 'border-width', 'border-radius', 'padding', 'margin'];\n                var isPxStyle = pxStyles.indexOf(label) > -1;\n                if (isPxStyle && !(value instanceof Array) && _this.isNumber(value)) {\n                    value += 'px';\n                }\n                else if (isPxStyle && value instanceof Array && _this.isNumberArray(value)) {\n                    value = value.join('px ') + \"px\";\n                }\n                myObj.styles[label] = value;\n                return myObj;\n            });\n        };\n        /**\n         * this method update the styles of origin widget array\n         *\n         * @param origin can be header content or footer\n         * @param label for example background-color\n         * @param value for example rgb(255,255,255,1)\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setSectionStyles = function (origin, label, value) {\n            if ((origin !== 'header') && (origin !== 'content') && (origin !== 'footer')) {\n                throw new Error('uncknow origin ' + origin);\n            }\n            this._updates[origin].next(function (widget) {\n                widget.styles[label] = value;\n                widget.styles = __assign({}, widget.styles);\n                return widget;\n            });\n        };\n        /**\n         * this method set the style of the whole report.\n         *\n         * @param label for example background-color\n         * @param value for example rgb(255,255,255,1)\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setReportStyles = function (label, value) {\n            this._reportStylesUpdate.next(function (styles) {\n                if (styles == null) {\n                    styles = {};\n                }\n                else {\n                    styles[label] = value;\n                    styles = __assign({}, styles);\n                }\n                return styles;\n            });\n        };\n        /**\n         *  update forms\n         *\n         * @param forms\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.setReportForms = function (forms) {\n            this._reportFormsUpdate.next(function (_form) {\n                return forms || [];\n            });\n        };\n        /**\n         * update customWidgets\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addCustomWidgets = function (widget, position) {\n            this._customWidgetsUpdate.next(function (customWidgets) {\n                customWidgets = customWidgets || [];\n                if (position != null && position >= 0) {\n                    customWidgets.splice(position, 0, widget);\n                }\n                else {\n                    customWidgets.push(widget);\n                }\n                return customWidgets;\n            });\n        };\n        /**\n         * reset customWidgets\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.resetCustomWidgets = function () {\n            this._customWidgetsUpdate.next(function (customWidgets) {\n                customWidgets.length = 0;\n                return customWidgets;\n            });\n        };\n        /**\n         * update label of widget\n         *\n         * @param label\n         * @param position\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.changeLabelCustomWidget = function (label, position) {\n            this._customWidgetsUpdate.next(function (customWidgets) {\n                customWidgets[position].type = label;\n                return customWidgets;\n            });\n        };\n        /**\n         * Add an AjfWidget on _headerWidgetsUpdate\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addHeaderWidget = function (widget, position) {\n            this._addWidgetToContainer(this._headerWidgetsUpdate, widget, position);\n        };\n        /**\n         * Add an AjfWidget on _contentWidgetsUpdate\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addContentWidget = function (widget, position) {\n            this._addWidgetToContainer(this._contentWidgetsUpdate, widget, position);\n        };\n        /**\n         * Add an AjfWidget on _footerWidgetsUpdate\n         *\n         * @param widget\n         * @param [position]\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addfooterWidget = function (widget, position) {\n            this._addWidgetToContainer(this._footerWidgetsUpdate, widget, position);\n        };\n        AjfReportBuilderService.prototype.unfixedColumn = function (idx) {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return widget;\n                }\n                var myObj = widget;\n                var num = myObj.columns.length;\n                var checkSum = 0;\n                var objNum = 0;\n                var value = 1;\n                var spreadValue;\n                myObj.columns[idx] = 0;\n                for (var j = 0; j < num; j++) {\n                    if (myObj.columns[j] === -1) {\n                        objNum++;\n                    }\n                }\n                value = Number(_this.roundTo(1 / (num - objNum), 2).toFixed(2));\n                for (var i = 0; i < num; i++) {\n                    if (myObj.columns[i] !== -1) {\n                        myObj.columns[i] = value;\n                        checkSum = Number(_this.roundTo(checkSum + value, 2).toFixed(2));\n                    }\n                }\n                checkSum = Number(_this.roundTo(checkSum, 2).toFixed(2));\n                if (checkSum > 1) {\n                    spreadValue = parseFloat(_this.roundTo(((checkSum - 1) % 1), 2).toFixed(2));\n                    myObj.columns[idx] -= spreadValue;\n                    myObj.columns[idx] = _this.roundTo(myObj.columns[idx], 2);\n                }\n                else if (checkSum < 1) {\n                    myObj.columns[idx] += (1 - (checkSum % 1));\n                    myObj.columns[idx] = Number(_this.roundTo(myObj.columns[idx], 2).toFixed(2));\n                }\n                return myObj;\n            });\n        };\n        /**\n         * Add column on the current AjfLayoutWidget.\n         *\n         * When adding a column the width of the other columns is recalculated\n         * by dividing it by the number of column\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addColumn = function () {\n            var _this = this;\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                var tempObj = [];\n                var num = myObj.columns.length + 1;\n                var checkSum = 0;\n                var objNum = 0;\n                var value = 1;\n                var tmpValue;\n                if (num > 10) {\n                    throw new Error('exceed max columns');\n                }\n                for (var j = 0; j < num; j++) {\n                    if (myObj.columns[j] === -1) {\n                        objNum++;\n                    }\n                }\n                value = Number(_this.roundTo(1 / (num - objNum), 2).toFixed(2));\n                for (var i = 0; i < num; i++) {\n                    if (myObj.columns[i] === -1) {\n                        tempObj.push(-1);\n                    }\n                    else {\n                        tempObj.push(value);\n                        checkSum = Number(_this.roundTo(checkSum + value, 2).toFixed(2));\n                    }\n                }\n                checkSum = Number(_this.roundTo(checkSum, 2).toFixed(2));\n                if (checkSum > 1) {\n                    tmpValue = parseFloat(_this.roundTo(((checkSum - 1) % 1), 2).toFixed(2));\n                    tempObj[0] -= tmpValue;\n                    tempObj[0] = _this.roundTo(tempObj[0], 2);\n                }\n                else if (checkSum < 1) {\n                    tempObj[0] += (1 - (checkSum % 1));\n                    tempObj[0] = Number(_this.roundTo(tempObj[0], 2).toFixed(2));\n                }\n                myObj.columns = tempObj;\n                // TODO: @trik what's value?!?\n                var columnObj = reports.createWidget({\n                    widgetType: 7,\n                });\n                myObj.content.push(columnObj);\n                _this._saveReportEvent.emit();\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.removeWidgetToColumn = function (column, index) {\n            column.content.splice(index, 1);\n        };\n        /**\n         * This method remove a widget on the current AjfReport.\n         *\n         * @param node\n         * the position array:\n         *\n         * header -`>` headerWidgets\n         * content -`>` contentWidgets\n         * footer -`>` footerWidgets\n         * column -`>` column of layout\n         * layoutContent -`>` content of layout\n         * obj -`>` obj of layout\n         * customWidget -`>` custom widget\n         *\n         * @param idx the position array\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.remove = function (node, idx) {\n            var _this = this;\n            switch (node) {\n                case 'header':\n                case 'content':\n                case 'footer':\n                    this._updates[node].next(function (widgets) {\n                        if (widgets.widgets.length === 0) {\n                            throw new Error('you can not remove from empty array');\n                        }\n                        if (widgets.widgets[idx] == null) {\n                            throw new Error('invalid index');\n                        }\n                        widgets.widgets.splice(idx, 1);\n                        _this.updateCurrentWidget(null);\n                        return widgets;\n                    });\n                    break;\n                case 'layout':\n                    this._currentWidgetUpdate.next(function (widget) {\n                        if (widget == null) {\n                            return null;\n                        }\n                        var myObj = widget;\n                        if (myObj.columns.length === 1) {\n                            myObj.content[0].content.length = 0;\n                            return myObj;\n                        }\n                        if (myObj.columns[idx] == null) {\n                            throw new Error('this content is undefined');\n                        }\n                        else {\n                            var spread = myObj.columns[idx] / (myObj.columns.length - 1);\n                            if (myObj.columns.length > 1) {\n                                myObj.columns.splice(idx, 1);\n                                myObj.content.splice(idx, 1);\n                            }\n                            for (var i = 0; i < myObj.columns.length; i++) {\n                                myObj.columns[i] += spread;\n                            }\n                            _this.instantColumnValue(myObj.columns[0], 0);\n                        }\n                        return myObj;\n                    });\n                    break;\n                case 'column':\n                case 'layoutContent':\n                case 'unfixedColumn':\n                    this._currentWidgetUpdate.next(function (widget) {\n                        if (widget == null) {\n                            return null;\n                        }\n                        var myObj = widget;\n                        if (node === 'column') {\n                            var clm = widget;\n                            clm.content.splice(idx, 1);\n                        }\n                        else if (node === 'layoutContent') {\n                            if (myObj.columns.length === 0) {\n                                throw new Error('the column length is 0');\n                            }\n                            if (myObj.content.length === 0) {\n                                throw new Error('can not remove any widget from empty content');\n                            }\n                            if (myObj.columns[idx] != null && myObj.content[idx] == null) {\n                                throw new Error('this content is undefined');\n                            }\n                        }\n                        else if (node === 'unfixedColumn') {\n                            if (myObj.columns[idx] !== -1) {\n                                throw new Error('the column position value  isnt -1');\n                            }\n                            _this.unfixedColumn(idx);\n                        }\n                        // if (node !== 'obj') {\n                        //   let spread = myObj.columns[idx] / (myObj.columns.length - 1);\n                        //   myObj.content.splice(idx, 1);\n                        //   if (myObj.columns.length > 1) {\n                        //     myObj.columns.splice(idx, 1);\n                        //   }\n                        //   for (let i = 0; i < myObj.columns.length; i++) {\n                        //     myObj.columns[i] += spread;\n                        //   }\n                        //   this.instantColumnValue(myObj.columns[0], 0);\n                        // }\n                        return myObj;\n                    });\n                    break;\n                case 'customWidgets':\n                    {\n                        this._updates[node].next(function (widgets) {\n                            if (widgets.length === 0) {\n                                throw new Error('you can not remove from empty array');\n                            }\n                            if (widgets[idx] == null) {\n                                throw new Error('invalid index');\n                            }\n                            widgets.splice(idx, 1);\n                            return widgets;\n                        });\n                    }\n                    break;\n                default:\n                    throw new Error('unknown node ' + node);\n            }\n        };\n        /**\n         * This method add a AjfWidget on the current AjfLayoutWidget.\n         *\n         * @param newWidget\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.addToContent = function (newWidget, idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var myObj = widget;\n                if (myObj.content[idx] != null) {\n                    myObj.content.splice(idx, 1);\n                }\n                myObj.content.splice(idx, 0, newWidget);\n                return myObj;\n            });\n        };\n        AjfReportBuilderService.prototype.addToColumn = function (event, toColumn, position) {\n            if (event.dragData && event.dragData.fromColumn != null) {\n                var fromColumn = event.dragData.fromColumn;\n                var widget = event.dragData.widget;\n                var fromIndex = event.dragData.fromIndex;\n                fromColumn.content.splice(fromIndex, 1);\n                toColumn.content.push(widget);\n            }\n            else if (event.dragData && event.dragData.arrayFrom) {\n                this.remove(event.dragData.arrayFrom, event.dragData.fromIndex);\n                toColumn.content.push(event.dragData.widget);\n            }\n            else if (event.dragData && event.dragData.json) {\n                var obj = JSON.parse(event.dragData.json);\n                var newWidget = utils.deepCopy(obj);\n                if (position != null) {\n                    toColumn.content.splice(position, 0, newWidget);\n                }\n                else {\n                    toColumn.content.push(newWidget);\n                }\n            }\n            else {\n                var obj = { 'widgetType': reports.AjfWidgetType[event.dragData] };\n                var newWidget = utils.deepCopy(obj);\n                if (position != null) {\n                    toColumn.content.splice(position, 0, newWidget);\n                }\n                else {\n                    toColumn.content.push(newWidget);\n                }\n            }\n        };\n        AjfReportBuilderService.prototype.changePositionOnColumn = function (event, toColumn, toIndex) {\n            var fromColumn = event.dragData.fromColumn;\n            var fromIndex = event.dragData.fromIndex;\n            var fromWidget = fromColumn.content[fromIndex];\n            var toWidget = fromColumn.content[toIndex];\n            if (fromColumn == toColumn) {\n                fromColumn.content[fromIndex] = toWidget;\n                fromColumn.content[toIndex] = fromWidget;\n            }\n            else {\n                fromColumn.content.splice(fromIndex, 1);\n                toColumn.content.splice(toIndex, 0, fromWidget);\n            }\n        };\n        /**\n         * This method add the obj on the idx position.\n         * Obj have a no specificate width and is not calculate as columns\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderService\n         */\n        AjfReportBuilderService.prototype.fixedColumn = function (idx) {\n            this.instantColumnValue(-1, idx);\n        };\n        AjfReportBuilderService.prototype.changeColumn = function (from, to, layoutWidget) {\n            if (to < 0 || to >= layoutWidget.content.length) {\n                return;\n            }\n            if (from > layoutWidget.content.length - 1 && to > from) {\n                return;\n            }\n            var fromColumn = layoutWidget.content[from];\n            var fromColumnValue = layoutWidget.columns[from];\n            var toColumn = layoutWidget.content[to];\n            var toColumnValue = layoutWidget.columns[to];\n            layoutWidget.content[from] = toColumn;\n            layoutWidget.columns[from] = toColumnValue;\n            layoutWidget.content[to] = fromColumn;\n            layoutWidget.columns[to] = fromColumnValue;\n            this.updateCurrentWidget(layoutWidget);\n        };\n        AjfReportBuilderService.prototype.addCustomColor = function (color) {\n            this._updates['color'].next(function (colors) {\n                if (colors.indexOf(color) < 0) {\n                    colors.push(color);\n                }\n                return colors;\n            });\n        };\n        AjfReportBuilderService.prototype._addWidgetToContainer = function (subj, widget, position) {\n            subj.next(function (widgets) {\n                if (position != null && position >= 0) {\n                    widgets.widgets.splice(position, 0, widget);\n                }\n                else {\n                    widgets.widgets.push(widget);\n                }\n                return widgets;\n            });\n            this.updateCurrentWidget(widget);\n            this.setEmptyContent(false);\n        };\n        AjfReportBuilderService.prototype._setCurrentWidgetProperty = function (propName, value) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                widget[propName] = value;\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype._addToCurrentWidgetArrayProperty = function (propName, value) {\n            this._currentWidgetUpdate.next(function (widget) {\n                if (widget == null) {\n                    return null;\n                }\n                var arr = widget[propName];\n                arr.push(value);\n                widget[propName] = arr;\n                return widget;\n            });\n        };\n        AjfReportBuilderService.prototype._removeFromCurrentWidgetArrayProperty = function (propName, idx) {\n            this._currentWidgetUpdate.next(function (widget) {\n                widget[propName].splice(idx, 1);\n                return widget;\n            });\n        };\n        AjfReportBuilderService.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderService.ctorParameters = function () { return [\n            { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [AJF_REPORTS_CONFIG,] }] }\n        ]; };\n        return AjfReportBuilderService;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component manages the report text\n     *\n     * @export\n     */\n    var AjfReportBuilderColumn = /** @class */ (function () {\n        function AjfReportBuilderColumn(_service) {\n            this._service = _service;\n            /**\n             * if true mouse event is on dragged status\n             *\n             * @memberOf AjfReportBuilderContent\n             */\n            this.showActions = false;\n            this.layoutShow = false;\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderColumn.prototype.addToList = function (event, idx, toColumn) {\n            this.onDragEndHandler();\n            if (event.dragData.fromColumn) {\n                this._service.changePositionOnColumn(event, toColumn, idx);\n            }\n            else {\n                this._service.addToColumn(event, toColumn, idx);\n            }\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderColumn.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200).subscribe(function () {\n                s.unsubscribe();\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderColumn.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        AjfReportBuilderColumn.prototype.ngOnInit = function () {\n            // this.widget = changes.widget.currentValue;\n            var _this = this;\n            this._onDraggedSub = this._service.onDragged.subscribe(function (x) {\n                _this.onDragged = x;\n            });\n        };\n        AjfReportBuilderColumn.prototype.ngOnDestroy = function () {\n            this._onDraggedSub.unsubscribe();\n        };\n        AjfReportBuilderColumn.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-column',\n                        template: \"<ng-template [ngIf]=\\\"column.content != null\\\">\\n  <div class=\\\"ajf-column\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': showActions}\\\"\\n    (mouseenter)=\\\"showActions = true\\\"\\n    (mouseleave)=\\\"showActions = false\\\">\\n    <mat-list>\\n      <ng-template ngFor let-widget let-idx=\\\"index\\\" [ngForOf]=\\\"column.content\\\">\\n\\n        <ng-template [ngIf]=\\\"!onDragged\\\">\\n          <ajf-report-builder-widgets-row-buttons\\n              cdkDrag\\n              [cdkDragData]=\\\"{fromColumn: column, fromIndex: idx, widget: widget, dropZones: ['widget']}\\\"\\n              [from]=\\\"'column'\\\"\\n              [fromWidget]=\\\"column\\\"\\n              [widget]=\\\"widget\\\"\\n              [position]=\\\"idx\\\"\\n              [child]=\\\"true\\\"\\n              (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n              (cdkDragEnded)=\\\"onDragEndHandler()\\\">\\n          </ajf-report-builder-widgets-row-buttons>\\n        </ng-template>\\n        <ajf-report-builder-renderer-widget [widget]=\\\"widget\\\"></ajf-report-builder-renderer-widget>\\n      </ng-template>\\n    </mat-list>\\n  </div>\\n</ng-template>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\".ajf-column{max-width:100%;max-height:100%;background:rgba(0,0,0,0);z-index:100}.ajf-column span{flex-direction:row;width:100%}.ajf-column .mat-list{padding:0}.ajf-column:hover span,.ajf-is-on-over span{visibility:visible !important;display:block !important}.ajf-column-drop-zone{margin:10%;height:50px;background-color:#fff;border:9px solid rgba(66,134,244,.6);border-radius:16px}mat-list{height:100%;padding:0}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderColumn.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderColumn.propDecorators = {\n            column: [{ type: core.Input }]\n        };\n        return AjfReportBuilderColumn;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    function ajfReportBuilderWidgetToString(widgetType) {\n        return \"reportbuilder-\" + widgetType.toLowerCase();\n    }\n    function ajfWidgetTypeStringToIcon(widgetType) {\n        return \"widget-\" + widgetType.toLowerCase();\n    }\n    function ajfWidgetTypeToIcon(widgetType) {\n        return ajfWidgetTypeStringToIcon(reports.AjfWidgetType[widgetType]);\n    }\n    function ajfWidgetTypeStringToLabel(widgetType) {\n        return \"widgetType.\" + widgetType;\n    }\n    function ajfWidgetTypeToLabel(type) {\n        return ajfWidgetTypeStringToLabel(reports.AjfWidgetType[type]);\n    }\n    function widgetReportBuilderIconName(type) {\n        return \"reportbuilder-\" + reports.AjfWidgetType[type].toLowerCase();\n    }\n    function sanitizeConditionString(str) {\n        str = str.trim();\n        while (str.indexOf('  ') > 0) {\n            str = str.replace('  ', ' ');\n        }\n        return str;\n    }\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderConditionEditor = /** @class */ (function () {\n        /**\n         * this constructor will init current condition by ajfBuilderservice\n         * and init condition and availableFieldNames subscriptions\n         */\n        function AjfReportBuilderConditionEditor(_service) {\n            this._service = _service;\n            this.isValid = false;\n            this.names = [];\n            // conditionText is a string\n            this.conditionText = 'true';\n            //  operators is an array of any type that contains all allow operators\n            this.operators = [\n                '( )', '\\' \\'', '<', '<=', '==', '>=', '>', '!=', '!', '&&', '||', '+', '-', '*', '/', '%',\n                'true', 'false'\n            ];\n            this._conditionNamesSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderConditionEditor.prototype.extractNames = function (formsVariables) {\n            this.names.length = 0;\n            for (var i = 0; i < formsVariables.length; i++) {\n                this.names = this.names.concat(formsVariables[i].names);\n            }\n        };\n        AjfReportBuilderConditionEditor.prototype.setCurrent = function (id, index) {\n            this.currentId = id;\n            this.appendText(this.formsVariables[id].names[index]);\n            this.checkValidation();\n        };\n        /**\n         * this method will return success if the current condtion is valid\n         * @return boolean\n         */\n        AjfReportBuilderConditionEditor.prototype.validateCondition = function () {\n            return models.validateExpression(this.conditionText, this.names);\n        };\n        // TODO complete the comment\n        /**\n         * this method will append text to json\n         * @param text      : string -\n         * @param goBackNum : number -\n         */\n        AjfReportBuilderConditionEditor.prototype.appendText = function (text, _goBackNum) {\n            if (text == null || this.conditionTextArea == null) {\n                return;\n            }\n            var el = this.conditionTextArea.nativeElement;\n            var sStart = Math.min(el.selectionStart, el.selectionEnd);\n            var sEnd = Math.max(el.selectionStart, el.selectionEnd);\n            var startingString = this.conditionText.substr(0, sStart);\n            var endingString = this.conditionText.substr(sEnd);\n            var initialLenght = startingString.length;\n            var newStr = '';\n            startingString = sanitizeConditionString(startingString);\n            endingString = sanitizeConditionString(endingString);\n            sStart +=\n                startingString.length - initialLenght + text.length + (startingString.length > 0 ? 2 : 1);\n            newStr = startingString.length > 0 ? startingString + \" \" : '';\n            this.conditionText = \"\" + newStr + text + \" \" + endingString;\n            var s = rxjs.timer(0).subscribe(function () {\n                if (s && !s.closed) {\n                    s.unsubscribe();\n                }\n                if (el.createTextRange) {\n                    var range = el.createTextRange();\n                    range.move('character', sStart);\n                    range.select();\n                }\n                else {\n                    if (el.selectionStart) {\n                        el.focus();\n                        el.setSelectionRange(sStart, sStart);\n                    }\n                    else {\n                        el.focus();\n                    }\n                }\n            });\n        };\n        AjfReportBuilderConditionEditor.prototype.checkValidation = function () {\n            this.isValid = this.validateCondition();\n            if (this.isValid) {\n                this.saveCondition();\n            }\n        };\n        /**\n         * this method will save current condition\n         */\n        AjfReportBuilderConditionEditor.prototype.saveCondition = function () {\n            this._service.saveCondition(this.conditionText);\n        };\n        AjfReportBuilderConditionEditor.prototype.ngOnInit = function () {\n            var _this = this;\n            this.conditionText = this.visibility.condition;\n            this.isValid = true;\n            if (this.conditionText == 'true') {\n                this.conditionText = '';\n            }\n            this._conditionNamesSub = this._service.conditionNames.subscribe(function (x) {\n                _this.formsVariables = x;\n                if (x != null) {\n                    _this.extractNames(_this.formsVariables);\n                }\n            });\n        };\n        /**\n         * this method will destroy a conditionSubscriptions\n         */\n        AjfReportBuilderConditionEditor.prototype.ngOnDestroy = function () {\n            this._conditionNamesSub.unsubscribe();\n        };\n        AjfReportBuilderConditionEditor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-condition-editor',\n                        template: \"<ng-template [ngIf]=\\\"formsVariables != null && visibility != null\\\">\\n  <mat-card>\\n    <mat-card-header>\\n      <mat-card-title>condition of visibility</mat-card-title>\\n      <mat-card-subtitle>\\n        <ng-template [ngIf]=\\\"visibility\\\">\\n          {{visibility.condition}}\\n        </ng-template>\\n      </mat-card-subtitle>\\n    </mat-card-header>\\n    <mat-card-content>\\n      <br>\\n      <form>\\n        <mat-select [(ngModel)]=\\\"a\\\" [ngModelOptions]=\\\"{standalone: true}\\\" placeholder=\\\"Select condition\\\">\\n          <ng-template ngFor let-form let-id=\\\"index\\\" [ngForOf]=\\\"formsVariables\\\">\\n            <mat-option *ngFor=\\\"let label of form.labels;let i = index;\\\" [value]=\\\"label\\\" (click)=\\\"setCurrent(id, i)\\\">\\n              {{ id}}: {{ label }}\\n            </mat-option>\\n          </ng-template>\\n        </mat-select>\\n        <mat-select [(ngModel)]=\\\"b\\\" [ngModelOptions]=\\\"{standalone: true}\\\" placeholder=\\\"Select operator\\\">\\n          <mat-option *ngFor=\\\"let operator of operators\\\" (click)=\\\"appendText(operator);\\\">\\n            {{ operator }}\\n          </mat-option>\\n        </mat-select>\\n      </form>\\n    </mat-card-content>\\n    <mat-card-actions>\\n      <ng-template [ngIf]=\\\"!isValid\\\">\\n        <ng-container translate>Invalid condition! Please check syntax.</ng-container>\\n      </ng-template>\\n      <textarea\\n          #conditionTextArea\\n          [(ngModel)]=\\\"conditionText\\\"\\n          (keyup)=\\\"checkValidation()\\\">\\n        </textarea>\\n    </mat-card-actions>\\n  </mat-card>\\n</ng-template>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-condition-editor textarea{width:100%}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderConditionEditor.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderConditionEditor.propDecorators = {\n            visibility: [{ type: core.Input }],\n            conditionTextArea: [{ type: core.ViewChild, args: ['conditionTextArea', { static: false },] }]\n        };\n        return AjfReportBuilderConditionEditor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     *  manage the content page\n     *\n     * @export\n     */\n    var AjfReportBuilderContent = /** @class */ (function () {\n        function AjfReportBuilderContent(_service, _cdRef) {\n            this._service = _service;\n            this._cdRef = _cdRef;\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            /**\n             *  observe the status of the fixed zoom\n             *\n             * @memberOf AjfReportBuilderContent\n             */\n            this.fixedZoom = false;\n            // this boolean sign if widget is in drag enter status\n            this.onDragEnter = {};\n            this.show = false;\n            // this array contains all widget locate in header zone\n            this.headerWidgets = [];\n            // this array contains all widget locate in content zone\n            this.contentWidgets = [];\n            // this array contains all widget locate in footer zone\n            this.footerWidgets = [];\n            this.onOver = false;\n            // this is the current widget\n            this.currentWidget = null;\n            /**\n             * if true mouse event is on dragged status\n             *\n             * @memberOf AjfReportBuilderContent\n             */\n            this.showActions = false;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n            this._fixedZoomSub = rxjs.Subscription.EMPTY;\n            this._onDragEnterSub = rxjs.Subscription.EMPTY;\n            this._headerWidgetsSub = rxjs.Subscription.EMPTY;\n            this._contentWidgetsSub = rxjs.Subscription.EMPTY;\n            this._footerWidgetsSub = rxjs.Subscription.EMPTY;\n            this._onOverSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this.headerStyles = this._service.headerStyles;\n            this.contentStyles = this._service.contentStyles;\n            this.footerStyles = this._service.footerStyles;\n        }\n        AjfReportBuilderContent.prototype.onMouseOver = function () {\n            this.showActions = true;\n            this._service.overStarted();\n        };\n        AjfReportBuilderContent.prototype.onMouseLeave = function () {\n            this.showActions = false;\n            this._service.overEnded();\n        };\n        AjfReportBuilderContent.prototype.canDropPredicate = function (dropZones) {\n            return function (item) {\n                for (var i = 0; i < item.data.dropZones.length; i++) {\n                    if (dropZones.indexOf(item.data.dropZones[i]) > -1) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n        };\n        AjfReportBuilderContent.prototype.isLayout = function (widget) {\n            return widget.widgetType === reports.AjfWidgetType.Layout;\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200).subscribe(function () {\n                if (s != null) {\n                    s.unsubscribe();\n                }\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        /**\n         *  sign the enter of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragEnterHandler = function (array, index) {\n            if (index == null) {\n                return;\n            }\n            this._service.dragEnter(array, index);\n        };\n        /**\n         * sign the leave of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragLeaveHandler = function () {\n            this._service.dragLeave();\n        };\n        /**\n         *  return true if array and index is === with array and index of onDragEnter\n         *\n         * @param array\n         * @param index\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.onDragEnterCheck = function (array, index) {\n            if ((array === this.onDragEnter.array) &&\n                ((index === this.onDragEnter.index) || (index === -1))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        /**\n         * remove widget element from type array in idx position\n         *\n         * @param type can be header content or footer\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.remove = function (type, idx) {\n            this._service.remove(type, idx);\n        };\n        /**\n         * add widget element into type array in idx position\n         *\n         * @param type\n         * @param event\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderContent.prototype.addToList = function (arrayTo, event, to) {\n            this.onDragEndHandler();\n            this._service.setOrigin(arrayTo);\n            var itemData = event.item.data;\n            if (itemData.fromColumn != null) {\n                this._service.removeWidgetToColumn(itemData.fromColumn, itemData.fromIndex);\n                this.currentWidget = itemData.widget;\n            }\n            else if (itemData.widget != null) {\n                this.remove(itemData.arrayFrom, itemData.from);\n                this.currentWidget = itemData.widget;\n            }\n            else if (itemData.json != null && itemData.json !== '') {\n                this.currentWidget = utils.deepCopy(itemData.json);\n            }\n            else {\n                var obj = { 'widgetType': reports.AjfWidgetType[itemData.widgetType] };\n                this.currentWidget = utils.deepCopy(obj);\n            }\n            this.onDragEndHandler();\n            if (this.currentWidget != null) {\n                switch (arrayTo) {\n                    case 'header':\n                        this._service.addHeaderWidget(this.currentWidget, to);\n                        break;\n                    case 'content':\n                        this._service.addContentWidget(this.currentWidget, to);\n                        break;\n                    case 'footer':\n                        this._service.addfooterWidget(this.currentWidget, to);\n                        break;\n                }\n            }\n            this.onDragLeaveHandler();\n        };\n        AjfReportBuilderContent.prototype.ngOnInit = function () {\n            var _this = this;\n            this._headerWidgetsSub = this._service.headerWidgets.subscribe(function (x) {\n                _this.headerWidgets = x.widgets;\n            });\n            this._contentWidgetsSub = this._service.contentWidgets.subscribe(function (x) {\n                _this.contentWidgets = x.widgets;\n            });\n            this._footerWidgetsSub = this._service.footerWidgets.subscribe(function (x) {\n                _this.footerWidgets = x.widgets;\n            });\n            this._onDraggedSub = this._service.onDragged.subscribe(function (x) {\n                _this.onDragged = x;\n            });\n            this._fixedZoomSub = this._service.fixedZoom.subscribe(function (bool) {\n                _this.fixedZoom = bool;\n            });\n            this._onDragEnterSub = this._service.onDragEnter.subscribe(function (x) {\n                _this.onDragEnter = x;\n            });\n            this._onOverSub = this._service.onOver.subscribe(function (x) {\n                _this.onOver = x;\n            });\n        };\n        AjfReportBuilderContent.prototype.ngAfterViewChecked = function () {\n            this._cdRef.detectChanges();\n        };\n        AjfReportBuilderContent.prototype.ngOnDestroy = function () {\n            [this._headerWidgetsSub, this._contentWidgetsSub, this._footerWidgetsSub,\n                this._currentWidgetSub, this._onDraggedSub, this._fixedZoomSub, this._onOverSub,\n                this._onDragEnterSub]\n                .forEach(function (s) {\n                s.unsubscribe();\n            });\n        };\n        AjfReportBuilderContent.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-content',\n                        template: \"<div\\n  class=\\\"ajf-overlay\\\"\\n  [ngClass]=\\\"{'ajf-drag-mode': onDragged, 'ajf-zoom-mode': fixedZoom}\\\"\\n  [applyStyles]=\\\"reportStyles|async\\\"\\n  (mouseenter)=\\\"show = true\\\"\\n  (mouseleave)=\\\"show = false\\\">\\n  <div\\n    class=\\\"ajf-header\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': onDragged || show}\\\"\\n    [applyStyles]=\\\"(headerStyles|async)\\\">\\n    <mat-list *ngFor=\\\"let t of headerWidgets; let i = index\\\">\\n      <div cdkDropList\\n          class=\\\"ajf-drop-zone\\\"\\n          [ngClass]=\\\"{'ajf-show': true}\\\"\\n          [cdkDropListEnterPredicate]=\\\"canDropPredicate(['widget','column'])\\\"\\n          (cdkDropListDropped)=\\\"addToList('header', $event, i);\\\"\\n          (dragenter)=\\\"onDragEnterHandler('header', i)\\\"\\n          (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      </div>\\n      <ajf-report-builder-widgets-row-buttons\\n          cdkDrag\\n          [cdkDragData]=\\\"{widget: t,fromIndex: i,arrayFrom: 'header', dropZones: ['widget','column']}\\\"\\n          [style.display]=\\\"(showActions || onDragged)? 'block' : 'none'\\\"\\n          [from]=\\\"'header'\\\"\\n          [widget]=\\\"t\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler();\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler()\\\">\\n      </ajf-report-builder-widgets-row-buttons>\\n      <ajf-report-builder-renderer-widget [widget]=\\\"t\\\" [position]=\\\"i\\\" [section]=\\\"'header'\\\" (currentWidget)=\\\"currentWidget\\\"></ajf-report-builder-renderer-widget>\\n    </mat-list>\\n    <div cdkDropList\\n        class=\\\"ajf-drop-zone-container\\\"\\n        [ngClass]=\\\"{'ajf-show': true}\\\"\\n        [cdkDropListEnterPredicate]=\\\"canDropPredicate(['header','widget','column'])\\\"\\n        (cdkDropListDropped)=\\\"addToList('header', $event)\\\"\\n        (dragenter)=\\\"onDragEnterHandler('header', headerWidgets?.length)\\\"\\n        (dragleave)=\\\"onDragLeaveHandler()\\\">\\n    </div>\\n  </div>\\n  <div\\n    class=\\\"ajf-content\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': onDragged || show}\\\"\\n    [applyStyles]=\\\"contentStyles|async\\\">\\n    <mat-list *ngFor=\\\"let t of contentWidgets; let i = index\\\">\\n      <div cdkDropList\\n          class=\\\"ajf-drop-zone\\\"\\n          [ngClass]=\\\"{'ajf-show': true}\\\"\\n          [cdkDropListEnterPredicate]=\\\"canDropPredicate(['widget','column'])\\\"\\n          (cdkDropListDropped)=\\\"addToList('content', $event, i)\\\"\\n          (dragenter)=\\\"onDragEnterHandler('content', i)\\\"\\n          (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      </div>\\n      <ajf-report-builder-widgets-row-buttons\\n          cdkDrag\\n          [cdkDragData]=\\\"{widget: t, fromIndex: i, arrayFrom: 'content', dropZones: ['widget','column']}\\\"\\n          [style.display]=\\\"showActions ? 'block' : 'none'\\\"\\n          [from]=\\\"'content'\\\"\\n          [widget]=\\\"t\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler();\\\">\\n      </ajf-report-builder-widgets-row-buttons>\\n      <ajf-report-builder-renderer-widget [widget]=\\\"t\\\" [position]=\\\"i\\\" [section]=\\\"'content'\\\" (currentWidget)=\\\"currentWidget\\\"></ajf-report-builder-renderer-widget>\\n    </mat-list>\\n    <div cdkDropList\\n        class=\\\"ajf-drop-zone-container\\\"\\n        [ngClass]=\\\"{'ajf-show': onDragged}\\\"\\n        [cdkDropListEnterPredicate]=\\\"canDropPredicate(['content','widget','column'])\\\"\\n        (cdkDropListDropped)=\\\"addToList('content', $event)\\\"\\n        (dragenter)=\\\"onDragEnterHandler('content', contentWidgets?.length)\\\"\\n        (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      <label translate>Drop here</label>\\n    </div>\\n  </div>\\n  <div\\n    class=\\\"ajf-footer\\\"\\n    [ngClass]=\\\"{'ajf-is-on-over': onDragged || show}\\\"\\n    [applyStyles]=\\\"footerStyles|async\\\">\\n    <mat-list *ngFor=\\\"let t of footerWidgets; let i = index\\\">\\n      <div cdkDropList\\n          class=\\\"ajf-drop-zone\\\"\\n          [ngClass]=\\\"{'ajf-show': true}\\\"\\n          [cdkDropListEnterPredicate]=\\\"canDropPredicate(['widget','column'])\\\"\\n          (cdkDropListDropped)=\\\"addToList('footer', $event, i)\\\"\\n          (dragenter)=\\\"onDragEnterHandler('footer', i)\\\"\\n          (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      </div>\\n      <ajf-report-builder-widgets-row-buttons\\n          cdkDrag\\n          [cdkDragData]=\\\"{widget: t, fromIndex: i, arrayFrom: 'footer', dropZones: ['widget','column']}\\\"\\n          [style.display]=\\\"showActions ? 'block' : 'none'\\\"\\n          [from]=\\\"'footer'\\\"\\n          [widget]=\\\"t\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler()\\\">\\n      </ajf-report-builder-widgets-row-buttons>\\n      <ajf-report-builder-renderer-widget [widget]=\\\"t\\\" [position]=\\\"i\\\" [section]=\\\"'footer'\\\" (currentWidget)=\\\"currentWidget\\\"></ajf-report-builder-renderer-widget>\\n    </mat-list>\\n    <div cdkDropList\\n        class=\\\"ajf-drop-zone-container\\\"\\n        [ngClass]=\\\"{'ajf-show': onDragged}\\\"\\n        [cdkDropListEnterPredicate]=\\\"canDropPredicate(['footer','widget','column'])\\\"\\n        (cdkDropListDropped)=\\\"addToList('footer', $event)\\\"\\n        (dragenter)=\\\"onDragEnterHandler('footer', headerWidgets?.length)\\\"\\n        (dragleave)=\\\"onDragLeaveHandler()\\\">\\n      <label translate>Drop here</label>\\n    </div>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        host: { '(mouseover)': 'onMouseOver()', '(mouseleave)': 'onMouseLeave()' },\n                        styles: [\"ajf-report-builder-content{text-align:center;display:block;margin-bottom:300px}ajf-report-builder-content .ajf-overlay.ajf-drag-mode{max-height:700px;margin-top:50px;background-color:beige}ajf-report-builder-content .ajf-drag-mode{overflow:scroll;zoom:50%}ajf-report-builder-content .ajf-drag-mode .ajf-header,ajf-report-builder-content .ajf-drag-mode .ajf-content,ajf-report-builder-content .ajf-drag-mode .ajf-footer{margin-bottom:20px;border:23px solid rgba(66,134,244,.2)}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-content .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone{width:auto;background-color:rgba(66,134,244,.2);border:23px solid #fff;position:relative;min-height:50px !important;z-index:0;opacity:1}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-content .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone-container{background-color:rgba(66,134,244,.2) !important;border:23px solid #fff !important}ajf-report-builder-content .ajf-drag-mode .ajf-header,ajf-report-builder-content .ajf-drag-mode .ajf-footer{border:23px solid rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone-container,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone-container{background-color:rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-header .ajf-drop-zone,ajf-report-builder-content .ajf-drag-mode .ajf-footer .ajf-drop-zone{background-color:rgba(255,102,102,.4) !important}ajf-report-builder-content .ajf-drag-mode .ajf-drop-zone-container{background-color:#000;border:16px solid #fff;position:relative;opacity:0;z-index:0;min-height:50px !important;display:none !important}ajf-report-builder-content .ajf-zoom-mode{zoom:50%}ajf-report-builder-content .ajf-header,ajf-report-builder-content .ajf-content,ajf-report-builder-content .ajf-footer{height:100%;min-height:50px;position:relative;text-align:center;display:block}ajf-report-builder-content .ajf-header .mat-list,ajf-report-builder-content .ajf-content .mat-list,ajf-report-builder-content .ajf-footer .mat-list{padding:0}ajf-report-builder-content .ajf-header .ajf-zoom:hover,ajf-report-builder-content .ajf-content .ajf-zoom:hover,ajf-report-builder-content .ajf-footer .ajf-zoom:hover{padding-bottom:100px;overflow-y:scroll}ajf-report-builder-content .ajf-content:hover{background-color:rgba(66,134,244,.2) !important}ajf-report-builder-content .ajf-header:hover,ajf-report-builder-content .ajf-footer:hover{background-color:rgba(255,102,102,.4)}ajf-report-builder-content .ajf-header:hover,ajf-report-builder-content .ajf-content:hover,ajf-report-builder-content .ajf-footer:hover,ajf-report-builder-content .ajf-is-on-over{border:3px dotted #3a7999}ajf-report-builder-content .ajf-header:hover label,ajf-report-builder-content .ajf-content:hover label,ajf-report-builder-content .ajf-footer:hover label,ajf-report-builder-content .ajf-is-on-over label{visibility:visible !important;opacity:.4;display:block !important}ajf-report-builder-content .ajf-header:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-content:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-footer:hover .ajf-drop-zone-container,ajf-report-builder-content .ajf-is-on-over .ajf-drop-zone-container{display:block !important}ajf-report-builder-content .ajf-header:hover mat-list button,ajf-report-builder-content .ajf-content:hover mat-list button,ajf-report-builder-content .ajf-footer:hover mat-list button,ajf-report-builder-content .ajf-is-on-over mat-list button{display:inline}ajf-report-builder-content .ajf-my-content{width:100%;white-space:nowrap;overflow-y:auto}ajf-report-builder-content .ajf-show,ajf-report-builder-content .ajf-on-drag-over{opacity:1 !important;z-index:10}ajf-report-builder-content mat-list{position:relative;display:block}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderContent.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: core.ChangeDetectorRef }\n        ]; };\n        return AjfReportBuilderContent;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderCustomWidgetDialog = /** @class */ (function () {\n        function AjfReportBuilderCustomWidgetDialog(_service, _dialogRef) {\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n        }\n        AjfReportBuilderCustomWidgetDialog.prototype.changeLabel = function () {\n            this._service.changeLabelCustomWidget(this.label, this.position);\n            this._dialogRef.close();\n        };\n        AjfReportBuilderCustomWidgetDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'custom-widget-dialog',\n                        template: \"<h3 matDialogTitle> set the label widget</h3>\\n<mat-form-field>\\n  <input matInput placeholder=\\\"add the label of this custom widget\\\" [(ngModel)]=\\\"label\\\"/>\\n</mat-form-field>\\n<button matDialogClose (click)=\\\"changeLabel()\\\"> Ok </button>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderCustomWidgetDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        AjfReportBuilderCustomWidgetDialog.propDecorators = {\n            label: [{ type: core.Input }],\n            position: [{ type: core.Input }]\n        };\n        return AjfReportBuilderCustomWidgetDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderCustomWidgetToolbarButton = /** @class */ (function () {\n        // {...t, dropZones: ['header','content','footer','column','widget']}\n        /**\n         * this constructor will init icon registry\n         */\n        function AjfReportBuilderCustomWidgetToolbarButton(_service) {\n            this._service = _service;\n            this.customWidgets = [];\n        }\n        /**\n         * this method call a service method for remove custom widget\n         *\n         * @memberOf AjfReportBuilderCustomWidgetToolbarButton\n         */\n        AjfReportBuilderCustomWidgetToolbarButton.prototype.remove = function () {\n            this._service.remove('customWidgets', this.position);\n        };\n        /**\n         * this method will init  fieldIcon and fieldLabel\n         */\n        AjfReportBuilderCustomWidgetToolbarButton.prototype.ngOnInit = function () {\n            this.widgetIcon = ajfWidgetTypeStringToIcon(this.widgetType);\n            this.widgetLabel = ajfWidgetTypeStringToLabel(this.widgetType);\n        };\n        AjfReportBuilderCustomWidgetToolbarButton.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-custom-widget-toolbar-button',\n                        template: \"<a mat-button>\\n  {{ widgetType}}\\n  <i class=\\\"material-icons\\\"(click)=\\\"remove()\\\">remove_circle_outline</i>\\n</a>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-custom-widget-toolbar-button{margin-right:20px}ajf-report-builder-custom-widget-toolbar-button a{min-height:60px;margin-top:20px}ajf-report-builder-custom-widget-toolbar-button a i{display:none}ajf-report-builder-custom-widget-toolbar-button a:hover i{display:inline;position:absolute !important;margin-left:5px !important;z-index:5}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderCustomWidgetToolbarButton.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderCustomWidgetToolbarButton.propDecorators = {\n            widgetType: [{ type: core.Input }],\n            position: [{ type: core.Input }]\n        };\n        return AjfReportBuilderCustomWidgetToolbarButton;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderCustomWidgetsToolbar = /** @class */ (function () {\n        function AjfReportBuilderCustomWidgetsToolbar(_service, dialog) {\n            this._service = _service;\n            this.dialog = dialog;\n            this.customWidgets = [];\n            this._customWidgetsSub = rxjs.Subscription.EMPTY;\n            this._threeColumnsLayout = '{\"widgetType\":0,' +\n                '\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"columns\":[0.34,0.33,0.33],' +\n                '\"content\":' +\n                '[{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]}]}';\n            this._fourColumnsLayout = '{\"widgetType\":0,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},' +\n                '\"columns\":[0.25,0.25,0.25,0.25],\"content\":' +\n                '[{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]},' +\n                '{\"widgetType\":7,\"content\":[],\"styles\":{},\"visibility\":{\"condition\":\"true\"},\"content\":[]}]}';\n        }\n        AjfReportBuilderCustomWidgetsToolbar.prototype.openDialog = function (idx) {\n            this._dialogRef = this.dialog.open(AjfReportBuilderCustomWidgetDialog);\n            this._dialogRef.componentInstance.label = this.customWidgets[idx].type;\n            this._dialogRef.componentInstance.position = idx;\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200).subscribe(function () {\n                if (s != null) {\n                    s.unsubscribe();\n                }\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        /**\n         *  sign the enter of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragEnterHandler = function (array, index) {\n            this._service.dragEnter(array, index);\n        };\n        /**\n         * sign the leave of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderCustomWidgetsToolbar.prototype.onDragLeaveHandler = function () {\n            this._service.dragLeave();\n        };\n        AjfReportBuilderCustomWidgetsToolbar.prototype.ngOnInit = function () {\n            var _this = this;\n            this._customWidgetsSub = this._service.customWidgets.subscribe(function (x) {\n                _this.customWidgets = x;\n                if (_this.customWidgets.length > 0 &&\n                    _this.customWidgets[_this.customWidgets.length - 1].type == '') {\n                    _this.openDialog(_this.customWidgets.length - 1);\n                }\n            });\n            this._service.addCustomWidgets({\n                json: this._threeColumnsLayout,\n                type: 'LayoutWidgetWith3Columns',\n            });\n            this._service.addCustomWidgets({ json: this._fourColumnsLayout, type: 'LayoutWidgetWith4Columns' });\n        };\n        AjfReportBuilderCustomWidgetsToolbar.prototype.ngOnDestroy = function () {\n            this._customWidgetsSub.unsubscribe();\n            this._service.resetCustomWidgets();\n        };\n        AjfReportBuilderCustomWidgetsToolbar.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-custom-widgets-toolbar',\n                        template: \"<mat-toolbar>\\n  <ng-template ngFor let-t [ngForOf]=\\\"customWidgets\\\" let-i=\\\"index\\\">\\n    <ajf-report-builder-custom-widget-toolbar-button\\n          cdkDrag\\n          [cdkDragData]=\\\"t\\\"\\n          [widgetType]=\\\"t.type\\\"\\n          [position]=\\\"i\\\"\\n          (cdkDragStarted)=\\\"onDragStartHandler()\\\"\\n          (cdkDragEnded)=\\\"onDragEndHandler();\\\"\\n          (click)=\\\"openDialog(i)\\\">\\n    </ajf-report-builder-custom-widget-toolbar-button>\\n   </ng-template>\\n</mat-toolbar>\\n\\n\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-custom-widgets-toolbar .mat-toolbar{background-color:rgba(144,238,144,.6);border-radius:16px}ajf-report-builder-custom-widgets-toolbar .ajf-hide{display:none}ajf-report-builder-custom-widgets-toolbar .ajf-show{display:block}ajf-report-builder-custom-widgets-toolbar a{margin-right:10px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderCustomWidgetsToolbar.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        return AjfReportBuilderCustomWidgetsToolbar;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderFormsAnalyzerDialog = /** @class */ (function () {\n        function AjfReportBuilderFormsAnalyzerDialog(_service, _dialogRef, _) {\n            var _this = this;\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n            this.aggregationTypes = utils.sizedEnumToStringArray(reports.AjfAggregationType);\n            //  operators is an array of any type that contains all allow operators\n            this.operators = [\n                'true', 'false', '( )', '\\' \\'', '<', '<=', '>=', '>', '!=', '!', '&&', '||', '+', '-', '*',\n                '/', '%', '=='\n            ];\n            this.formulaText = '';\n            this.formulaDate = '';\n            this.safeFormulaText = '';\n            this.label = '';\n            this.condition = '';\n            this.aggregationType = reports.AjfAggregationType.Sum;\n            this.currentId = 0;\n            this.currentIndex = 0;\n            this.labels = [];\n            this.currentWidget = null;\n            this.formsVariablesName = [];\n            this.formsVariablesType = [];\n            this._formAnalyzerSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._first = true;\n            if (this.init == false) {\n                this.formulaText = '';\n                this.aggregationType = reports.AjfAggregationType.Sum;\n            }\n            this._currentWidgetSub = this._service.currentWidget.subscribe(function (x) {\n                if (x != null) {\n                    _this.currentWidget = x;\n                    if (_this.currentWidget.widgetType == 2) {\n                        var myObj = _this.currentWidget;\n                        if (myObj.imageType == image$1.AjfImageType.Flag) {\n                            _this.formula = (myObj.flag) ? myObj.flag.formula : '';\n                        }\n                        else {\n                            _this.formula = (myObj.icon) ? myObj.icon.formula : '';\n                        }\n                    }\n                }\n            });\n            this._formAnalyzerSub = this._service.formsVariables.subscribe(function (x) {\n                if (x != null) {\n                    _this.formsVariables = x;\n                }\n            });\n        }\n        AjfReportBuilderFormsAnalyzerDialog.prototype.onEditorInit = function () {\n            monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({ noSemanticValidation: false, noSyntaxValidation: false });\n            monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n                target: monaco.languages.typescript.ScriptTarget.ES2015,\n                allowNonTsExtensions: true,\n                allowJs: true,\n                module: monaco.languages.typescript.ModuleKind.None\n            });\n            try {\n                monaco.languages.typescript.javascriptDefaults.addExtraLib('', 'condition-editor-variables.d.ts');\n            }\n            catch (e) {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-variables.d.ts'] =\n                    '';\n            }\n            try {\n                monaco.languages.typescript.javascriptDefaults.addExtraLib('', 'condition-editor-functions.d.ts');\n            }\n            catch (e) {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-functions.d.ts'] =\n                    '';\n            }\n            this._initFormsVariablesNames();\n            this._updateVariables();\n            this._updateFunctions();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._initFormsVariablesNames = function () {\n            var _this = this;\n            this.formsVariables.forEach(function (formVar) {\n                formVar.names.forEach(function (name) {\n                    _this.formsVariablesName.push(name);\n                });\n                formVar.types.forEach(function (type) {\n                    _this.formsVariablesType.push(_this._fieldVarType(type) || '');\n                });\n            });\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._updateVariables = function () {\n            if (this.formsVariables == null) {\n                return;\n            }\n            try {\n                var value = '';\n                for (var i = 0; i < this.formsVariablesName.length; i++) {\n                    value += \"declare const \" + this.formsVariablesName[i] + \": \" + this.formsVariablesType[i] + \";\";\n                }\n                value += \"\\n\";\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-variables.d.ts'] =\n                    value;\n            }\n            catch (e) {\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._updateFunctions = function () {\n            try {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-functions.d.ts'] =\n                    models.AjfExpressionUtils.UTIL_FUNCTIONS;\n            }\n            catch (e) {\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype._fieldVarType = function (fieldType) {\n            switch (fieldType) {\n                case forms$1.AjfFieldType.Boolean:\n                    return 'boolean';\n                case forms$1.AjfFieldType.Date:\n                case forms$1.AjfFieldType.DateInput:\n                case forms$1.AjfFieldType.Time:\n                    return 'Date';\n                case forms$1.AjfFieldType.Empty:\n                    return 'void';\n                case forms$1.AjfFieldType.Formula:\n                    return 'number';\n                case forms$1.AjfFieldType.MultipleChoice:\n                case forms$1.AjfFieldType.SingleChoice:\n                    return 'any';\n                case forms$1.AjfFieldType.Number:\n                    return 'number';\n                case forms$1.AjfFieldType.Table:\n                    return 'Array';\n                case forms$1.AjfFieldType.String:\n                case forms$1.AjfFieldType.Text:\n                    return 'string';\n            }\n            return null;\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setCurrent = function (id, label, index) {\n            if (!this.init) {\n                this.label = label;\n                this.init = true;\n            }\n            this.insertVariable(this.formsVariables[id].names[index] || '');\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setCurrentId = function (id) {\n            this.currentId = id;\n            this.labels = this.formsVariables[id].labels;\n            this._updateVariables();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setAggregationType = function (type) {\n            this.aggregationType = type;\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.checkValidation = function () {\n            if (this.validateFormula()) {\n                this.safeFormulaText = this.formulaText;\n                this.isValid = true;\n            }\n            else {\n                this.isValid = false;\n            }\n            if (this.formulaText == '') {\n                this.isValid = false;\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.validateFormula = function () {\n            if (this.formulaText == '') {\n                this.init = false;\n            }\n            if (this.formsVariables == null) {\n                return false;\n            }\n            else {\n                return models.validateExpression(this.formulaText, this.formsVariablesName);\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveDataset = function () {\n            if (this.currentWidget != null) {\n                switch (this.currentWidget.widgetType) {\n                    case 2:\n                        this.saveImageFormula();\n                        break;\n                    case 3:\n                        this.saveFormulaHtml();\n                        break;\n                    case 4:\n                        this.saveChartFormula();\n                        break;\n                    case 5:\n                        this.saveTableFormula();\n                        break;\n                }\n            }\n            this.close();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveImageFormula = function () {\n            this._service.saveImageFormula(models.createFormula({ formula: this.formulaText }));\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveFormulaHtml = function () {\n            this._service.saveFormulaToHtml(this.formulaText, this.reference);\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveChartFormula = function () {\n            this._service.saveChartFormula(this.label, this.level, this.mainIndex, this.index, this.formulaText, this.aggregationType);\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.saveTableFormula = function () {\n            this._service.saveTableFormula(this.label, this.aggregationType, this.formulaText, this.mainIndex, this.index);\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.insertVariable = function (variable) {\n            if (this.monacoEditor != null && this.monacoEditor.editor != null) {\n                var editor = this.monacoEditor.editor;\n                var value = editor.getValue().split('\\n');\n                var position = editor.getPosition();\n                var ln = position.lineNumber - 1;\n                var line = value[ln];\n                var col = position.column - 1;\n                line = line.substring(0, col) + variable + line.substring(col);\n                value[ln] = line;\n                position.column += variable.length;\n                this.monacoEditor.value = value.join('\\n');\n                editor.setPosition(position);\n                editor.focus();\n                this.formulaText = editor.getValue();\n                this.checkValidation();\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.setVariable = function (variable) {\n            if (this.monacoEditor != null && this.monacoEditor.editor != null) {\n                var editor = this.monacoEditor.editor;\n                editor.setValue(variable);\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.reset = function () {\n            this.formulaText = '';\n            this.aggregationType = reports.AjfAggregationType.None;\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.close = function () {\n            this.reset();\n            this._dialogRef.close();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.ngOnInit = function () {\n            this.formulaText = this.formula;\n            this.aggregationType = this.aggregation;\n            this.label = this.labelText;\n            if (this.formulaText == '' || this.formulaText == null) {\n                this.isValid = false;\n            }\n            else {\n                this.isValid = true;\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.ngAfterViewChecked = function () {\n            if (this._first && this.monacoEditor != null && this.monacoEditor.editor != null) {\n                this.insertVariable(this.formulaText || '');\n                this._first = false;\n            }\n        };\n        AjfReportBuilderFormsAnalyzerDialog.prototype.ngOnDestroy = function () {\n            this._formAnalyzerSub.unsubscribe();\n            this._currentWidgetSub.unsubscribe();\n        };\n        AjfReportBuilderFormsAnalyzerDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'forms-analyzer-dialog',\n                        template: \"<h3 matDialogTitle> Formula editor </h3>\\n<div mat-dialog-content #elem>\\n  <ng-template [ngIf]=\\\"currentWidget != null && formsVariables != null\\\">\\n    <div class=\\\"ajf-left\\\">\\n      <mat-list>\\n        <mat-list-item *ngFor=\\\"let operator of operators\\\">\\n          <button mat-button (click)=\\\"insertVariable(operator)\\\">\\n            <h4 matLine>{{operator}}</h4>\\n          </button>\\n        </mat-list-item>\\n      </mat-list>\\n    </div>\\n    <div class=\\\"ajf-main\\\">\\n      <mat-select *ngIf=\\\"!isFormula\\\" placeholder=\\\"Select type of agregation\\\" [(ngModel)]=\\\"aggregationType\\\">\\n          <mat-option [value]=\\\"idx\\\" *ngFor=\\\"let ag of aggregationTypes; let idx = index\\\"> {{ ag }} </mat-option>\\n      </mat-select>\\n      <mat-form-field *ngIf=\\\"!isFormula\\\">\\n        <textarea matInput placeholder=\\\"Name field\\\" [(ngModel)]=\\\"label\\\" ></textarea>\\n      </mat-form-field>\\n        <ajf-monaco-editor\\n          (init)=\\\"onEditorInit()\\\"\\n          (valueChange)=\\\"formulaText = $event;checkValidation();\\\"\\n          [value]=\\\"condition\\\" language=\\\"javascript\\\">\\n        </ajf-monaco-editor>\\n    </div>\\n    <div class=\\\"ajf-menu\\\">\\n      <form>\\n        <mat-select placeholder=\\\"Select form\\\" (selectionChange)=\\\"setCurrentId($event.value)\\\">\\n          <ng-template ngFor let-form let-id=\\\"index\\\" [ngForOf]=\\\"formsVariables\\\">\\n            <mat-option [value]=\\\"id\\\"> {{ id }} </mat-option>\\n          </ng-template>\\n        </mat-select>\\n      </form>\\n      <mat-list>\\n        <h3 matSubheader>Field list</h3>\\n        <mat-list-item *ngFor=\\\"let label of labels;let i = index\\\">\\n          <button mat-button (click)=\\\"setCurrent(currentId, label, i)\\\">\\n            <h4 matLine>{{label}}</h4>\\n          </button>\\n        </mat-list-item>\\n      </mat-list>\\n    </div>\\n  </ng-template>\\n</div>\\n<div mat-dialog-actions>\\n  <button mat-button (click)=\\\"saveDataset()\\\" [disabled]=\\\"!isValid\\\">Save</button>\\n</div>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"forms-analyzer-dialog{height:512px}forms-analyzer-dialog h4[matLine]{font-size:xx-small}forms-analyzer-dialog [mat-dialog-content]{flex-direction:row;display:flex;align-items:stretch;min-width:1000px}forms-analyzer-dialog [mat-dialog-content] .ajf-left{flex:1 0 10%;width:10%;overflow-y:auto}forms-analyzer-dialog [mat-dialog-content] .ajf-left form>mat-select{width:90%;margin-left:10px;margin-right:10px}forms-analyzer-dialog [mat-dialog-content] .ajf-main{flex:1 0 55%;min-width:512px}forms-analyzer-dialog [mat-dialog-content] .ajf-main monaco-editor{height:450px;min-width:300px}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-select{width:80%}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-form-field{width:80%}forms-analyzer-dialog [mat-dialog-content] .ajf-main mat-form-field textarea{width:auto;height:auto}forms-analyzer-dialog [mat-dialog-content] .ajf-main textarea{width:80%;height:75px}forms-analyzer-dialog [mat-dialog-content] .ajf-menu{flex:1 0 30%;overflow-y:auto;min-width:350px}forms-analyzer-dialog [mat-dialog-content] .ajf-menu form>mat-select{width:90%;margin-left:10px;margin-right:10px}forms-analyzer-dialog ajf-monaco-editor{min-width:400px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderFormsAnalyzerDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef },\n            { type: forms$1.AjfValidationService }\n        ]; };\n        AjfReportBuilderFormsAnalyzerDialog.propDecorators = {\n            formula: [{ type: core.Input }],\n            isFormula: [{ type: core.Input }],\n            labelText: [{ type: core.Input }],\n            aggregation: [{ type: core.Input }],\n            init: [{ type: core.Input }],\n            level: [{ type: core.Input }],\n            index: [{ type: core.Input }],\n            mainIndex: [{ type: core.Input }],\n            reference: [{ type: core.Input }],\n            monacoEditor: [{ type: core.ViewChild, args: [monacoEditor.AjfMonacoEditor, { static: false },] }]\n        };\n        return AjfReportBuilderFormsAnalyzerDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component provides the support for connect the form fields with the report\n     *\n     * @export\n     */\n    var AjfReportBuilderFormsAnalyzer = /** @class */ (function () {\n        function AjfReportBuilderFormsAnalyzer(_service, dialog) {\n            var _this = this;\n            this._service = _service;\n            this.dialog = dialog;\n            this.currentWidget = null;\n            this.forms = [];\n            this.choicesOrigins = {};\n            this.currentMainDataIndex = -1;\n            this._dataset = [];\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._formAnalyzerSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = this._service.currentWidget.subscribe(function (x) {\n                if (x != null) {\n                    _this.currentWidget = x;\n                    // this._dataset = myObj.dataset;\n                }\n                else {\n                    _this.currentWidget = null;\n                }\n            });\n            this._formAnalyzerSub = this._service.formsVariables.subscribe(function (x) {\n                if (x != null) {\n                    _this.formsVariables = x;\n                }\n            });\n        }\n        AjfReportBuilderFormsAnalyzer.prototype.setCurrentIndex = function (index) {\n            this.currentMainDataIndex = index;\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.isSelected = function (index) {\n            if (index === this.currentMainDataIndex) {\n                return 'primary';\n            }\n            else {\n                return undefined;\n            }\n        };\n        /**\n         *  get the X components label of the chart.\n         *  they are contained in the first row of dataset\n         *\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.getMainData = function () {\n            if (this._dataset[0] != null) {\n                var mainData = [];\n                for (var i = 0; i < this._dataset[0].length; i++) {\n                    mainData.push(this._dataset[0][i].label || '');\n                }\n                return mainData;\n            }\n            else {\n                return [];\n            }\n        };\n        /**\n         *  get the Y components label of the chart.\n         *  they are contained in the first column of dataset\n         *\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.getDataset = function () {\n            var dataset = [];\n            if (this._dataset[0] != null) {\n                for (var i = 1; i < this._dataset.length; i++) {\n                    dataset.push(this._dataset[i][0].label || '');\n                }\n                return dataset;\n            }\n            else {\n                return [];\n            }\n        };\n        /**\n         * get the related data label of the chart.\n         * they are contained in the row of the Y component\n         *\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.getRelatedData = function () {\n            if (this._dataset[this.currentMainDataIndex + 1] != null) {\n                var relatedData = [];\n                for (var i = 1; i < this._dataset[this.currentMainDataIndex + 1].length; i++) {\n                    relatedData.push(this._dataset[this.currentMainDataIndex + 1][i].label || '');\n                }\n                return relatedData;\n            }\n            else {\n                return [];\n            }\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.getTableHeader = function () {\n            var mainData = [];\n            if (this._dataset != null) {\n                for (var i = 0; i < this._dataset.length; i++) {\n                    if (this._dataset[i][0] != null) {\n                        mainData.push(this._dataset[i][0].label || '');\n                    }\n                }\n            }\n            return mainData;\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.getTableData = function () {\n            if (this._dataset[this.currentMainDataIndex] != null) {\n                var tableData = [];\n                for (var i = 1; i < this._dataset[this.currentMainDataIndex].length; i++) {\n                    if (this._dataset[this.currentMainDataIndex][i] != null) {\n                        tableData.push(this._dataset[this.currentMainDataIndex][i].label || '');\n                    }\n                }\n                return tableData;\n            }\n            else {\n                return [];\n            }\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.needMainData = function () {\n            var myObj = this.currentWidget;\n            if (myObj.chartType === reports.AjfChartType.Scatter || myObj.chartType === reports.AjfChartType.Bubble) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeMainData = function (index) {\n            this._service.removeMainData(index);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeDataset = function (index) {\n            this.currentMainDataIndex = index;\n            this._service.removeRelatedData(this.currentMainDataIndex, -1);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeTableMainData = function (index) {\n            this._service.removeTableMainData(index);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeRelatedData = function (index) {\n            this._service.removeRelatedData(this.currentMainDataIndex, index);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.removeData = function (mainIndex, index) {\n            this._service.removeData(mainIndex, index);\n        };\n        /**\n         *\n         *\n         *\n         * @param index\n         * @param editMode\n         *\n         * @memberof AjfReportBuilderFormsAnalyzer\n         */\n        AjfReportBuilderFormsAnalyzer.prototype.openDialog = function (level, mainIndex, index, editMode) {\n            this.dialogRef = this.dialog.open(AjfReportBuilderFormsAnalyzerDialog);\n            if (editMode) {\n                if (level === 1 && index === -1) {\n                    index = 0;\n                }\n                if (level === 1) {\n                    if (this.currentWidget != null && this.currentWidget.widgetType == reports.AjfWidgetType.Chart) {\n                        mainIndex++;\n                    }\n                    index++;\n                }\n                this.dialogRef.componentInstance.labelText =\n                    this._dataset[mainIndex] && this._dataset[mainIndex][index].label || '';\n                /* this.dialogRef.componentInstance.formula =\n                  this._dataset[mainIndex] &&\n                  this._dataset[mainIndex][index].formula.formula || ''; */\n                this.dialogRef.componentInstance.aggregation =\n                    this._dataset[mainIndex] && this._dataset[mainIndex][index].aggregation.aggregation ||\n                        reports.AjfAggregationType.None;\n            }\n            else {\n                this.dialogRef.componentInstance.labelText = '';\n                this.dialogRef.componentInstance.formula = '';\n                this.dialogRef.componentInstance.aggregation = 0;\n            }\n            // this.dialogRef.componentInstance.formsVariables = this.formsVariables;\n            this.dialogRef.componentInstance.currentWidget = this.currentWidget;\n            this.dialogRef.componentInstance.level = level;\n            this.dialogRef.componentInstance.mainIndex = mainIndex;\n            this.dialogRef.componentInstance.index = index;\n            this.dialogRef.componentInstance.init = false;\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogAddMainData = function () {\n            this.openDialog(0, -1, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartEditMainData = function () {\n            this.openDialog(0, 0, this.currentMainDataIndex, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogTableEditMainData = function () {\n            this.openDialog(0, this.currentMainDataIndex, 0, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartAddDataset = function () {\n            this.openDialog(1, -1, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogTableAddDataset = function () {\n            this.openDialog(1, this.currentMainDataIndex, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartAddDataOfDataset = function () {\n            this.openDialog(1, this.currentMainDataIndex, -1, false);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartEditDataset = function () {\n            this.openDialog(1, this.currentMainDataIndex, -1, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogTableEditDataset = function (index) {\n            this.openDialog(1, this.currentMainDataIndex, index, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.openDialogChartEditDataOfDataset = function (index) {\n            this.openDialog(1, this.currentMainDataIndex, index, true);\n        };\n        AjfReportBuilderFormsAnalyzer.prototype.ngOnDestroy = function () {\n            this._currentWidgetSub.unsubscribe();\n            this._formAnalyzerSub.unsubscribe();\n        };\n        AjfReportBuilderFormsAnalyzer.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-forms-analyzer',\n                        template: \"<ng-template [ngIf]=\\\"currentWidget != null && formsVariables != null\\\">\\n  <ng-template [ngIf]=\\\"currentWidget.widgetType == 4\\\">\\n    <ng-template  [ngIf]=\\\"needMainData()\\\">\\n      <mat-tab-group>\\n        <mat-tab [label]=\\\"'Main Data' | translate\\\">\\n          <button mat-button (click)=\\\"openDialogAddMainData()\\\" style=\\\"width:100%;\\\">\\n            Add Main Data\\n          </button>\\n          <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"3\\\">\\n            <ng-template ngFor let-label [ngForOf]=\\\"getMainData()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                  {{ label }}\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"setCurrentIndex(idx);openDialogChartEditMainData()\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeMainData(idx)\\\">Remove</button>\\n              </mat-grid-tile>\\n            </ng-template>\\n          </mat-grid-list>\\n          <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n        </mat-tab>\\n      </mat-tab-group>\\n    </ng-template>\\n    <mat-tab-group>\\n      <mat-tab label=\\\"dataset\\\">\\n        <button mat-button (click)=\\\"openDialogChartAddDataset()\\\" style=\\\"width:100%\\\">\\n            add dataset\\n        </button>\\n        <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"4\\\">\\n          <ng-template ngFor let-label [ngForOf]=\\\"getDataset()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                <button mat-button [color]=\\\"isSelected(idx)\\\"(click)=\\\"setCurrentIndex(idx)\\\">\\n                  {{ label }}\\n                </button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button (click)=\\\"setCurrentIndex(idx);openDialogChartAddDataOfDataset()\\\" style=\\\"width:100%\\\">\\n                  add data\\n                </button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n              <button mat-button translate\\n                  (click)=\\\"setCurrentIndex(idx);openDialogChartEditDataset()\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeDataset(idx)\\\">Remove</button>\\n              </mat-grid-tile>\\n          </ng-template>\\n        </mat-grid-list>\\n      </mat-tab>\\n      <mat-tab label=\\\"data\\\">\\n        <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"3\\\">\\n          <ng-template ngFor let-label [ngForOf]=\\\"getRelatedData()\\\" let-idx=\\\"index\\\">\\n            <mat-grid-tile>\\n                {{ label }}\\n            </mat-grid-tile>\\n            <mat-grid-tile>\\n              <button mat-button translate\\n                  (click)=\\\"openDialogChartEditDataOfDataset(idx)\\\">Edit</button>\\n            </mat-grid-tile>\\n            <mat-grid-tile>\\n              <button mat-button translate\\n                  (click)=\\\"removeRelatedData(idx)\\\">Remove</button>\\n            </mat-grid-tile>\\n          </ng-template>\\n        </mat-grid-list>\\n        <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n      </mat-tab>\\n    </mat-tab-group>\\n  </ng-template>\\n  <ng-template [ngIf]=\\\"currentWidget.widgetType == 5\\\">\\n    <ng-template  [ngIf]=\\\"needMainData()\\\">\\n      <mat-tab-group>\\n        <mat-tab [label]=\\\"'Main Data' | translate\\\">\\n          <button mat-button (click)=\\\"openDialogAddMainData()\\\"\\n              translate\\n              style=\\\"width:100%;\\\">Add Main Data</button>\\n          <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"4\\\">\\n            <ng-template ngFor let-label [ngForOf]=\\\"getTableHeader()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                <button mat-button [color]=\\\"isSelected(idx)\\\"(click)=\\\"setCurrentIndex(idx)\\\">\\n                  {{ label }}\\n                </button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"setCurrentIndex(idx);openDialogTableAddDataset()\\\"\\n                    style=\\\"width:100%\\\">add data</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"setCurrentIndex(idx);openDialogTableEditMainData()\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeTableMainData(idx)\\\">Remove</button>\\n              </mat-grid-tile>\\n            </ng-template>\\n          </mat-grid-list>\\n          <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n        </mat-tab>\\n        <mat-tab [label]=\\\"'data' | translate\\\">\\n          <mat-grid-list rowHeight=\\\"50px\\\" cols=\\\"3\\\">\\n            <ng-template ngFor let-label [ngForOf]=\\\"getTableData()\\\" let-idx=\\\"index\\\">\\n              <mat-grid-tile>\\n                  {{ label }}\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"openDialogTableEditDataset(idx)\\\">Edit</button>\\n              </mat-grid-tile>\\n              <mat-grid-tile>\\n                <button mat-button translate\\n                    (click)=\\\"removeData(currentMainDataIndex, idx + 1)\\\">Remove</button>\\n              </mat-grid-tile>\\n            </ng-template>\\n          </mat-grid-list>\\n          <div class=\\\"ajf-ui ajf-divider\\\"></div>\\n      </mat-tab>\\n      </mat-tab-group>\\n    </ng-template>\\n  </ng-template>\\n</ng-template>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-forms-analyzer{min-height:512px}ajf-report-builder-forms-analyzer .ajf-editor{flex:.75 0 auto;display:flex;flex-direction:row;align-items:stretch}ajf-report-builder-forms-analyzer .ajf-editor monaco-editor{flex:1 0 auto;min-width:512px;min-height:256px}ajf-report-builder-forms-analyzer mat-dialog-container{flex:1 0 auto;min-width:512px;min-height:256px}ajf-report-builder-forms-analyzer .ajf-editor-panel{flex:.25 0 auto;overflow-y:auto}ajf-report-builder-forms-analyzer .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-forms-analyzer mat-tab-group .mat-tab-body-wrapper,ajf-report-builder-forms-analyzer mat-tab-group .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderFormsAnalyzer.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        return AjfReportBuilderFormsAnalyzer;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfImageFilterPipe = /** @class */ (function () {\n        function AjfImageFilterPipe() {\n        }\n        AjfImageFilterPipe.prototype.transform = function (items, args) {\n            return items.filter(function (item) { return (args.length === 0) || item.info.toLowerCase().includes(args.toLowerCase()); });\n        };\n        AjfImageFilterPipe.decorators = [\n            { type: core.Pipe, args: [{ name: 'ajfImageFilter' },] },\n            { type: core.Injectable }\n        ];\n        return AjfImageFilterPipe;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component handle a group of image object\n     * there are 2 types of view\n     *  ajf-icon and class\n     *\n     * take a json in input\n     *  'icon': 'false', // if true ajf-icon activated\n     *  'class': ['flag-icon'], // add class in object style\n     *  'prefixClass': 'flag-icon-', // prefix of class contained on data set\n     *  'title': 'flags', title of data set\n     *  'data': [\n     *    {\n     *      'class': 'dz', strind added on prefix\n     *      'info': 'Algeria' info related to object (exploit on toolTip)\n     *    }\n     *  ]\n     * };\n     *\n     * @export\n     */\n    var AjfReportBuilderImageGroup = /** @class */ (function () {\n        function AjfReportBuilderImageGroup(_service) {\n            this._service = _service;\n            this._icon = null;\n            this._classes = '';\n            this.open = false;\n            this.valueToSearch = '';\n            /**\n             * this event is fired when the user click on formula button on quill editor rool barƒ\n             *\n             * @memberof QuillEditorComponent\n             */\n            this.formulaClick = new core.EventEmitter();\n        }\n        Object.defineProperty(AjfReportBuilderImageGroup.prototype, \"icon\", {\n            get: function () {\n                return this._icon;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderImageGroup.prototype, \"classes\", {\n            get: function () {\n                return this._classes;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AjfReportBuilderImageGroup.prototype.setIcon = function (fontSet, fontIcon) {\n            this._icon = { fontSet: fontSet, fontIcon: fontIcon };\n            this._service.setIcon(this._icon);\n        };\n        AjfReportBuilderImageGroup.prototype.setFlag = function (value) {\n            this._classes = value;\n            this._service.setFlag(value);\n        };\n        AjfReportBuilderImageGroup.prototype.setSearch = function (value) {\n            this.valueToSearch = value.currentTarget.value;\n        };\n        AjfReportBuilderImageGroup.prototype.emitFormula = function () {\n            this.formulaClick.emit();\n        };\n        AjfReportBuilderImageGroup.prototype.getFlag = function (value) {\n            var returnValue = '';\n            for (var i = 0; i < this.data.class.length; i++) {\n                returnValue += this.data.class[i] + ' ';\n            }\n            returnValue += this.data.prefixClass + value;\n            return returnValue;\n        };\n        AjfReportBuilderImageGroup.prototype.toggle = function () {\n            this.open = !this.open;\n        };\n        AjfReportBuilderImageGroup.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-image-group',\n                        template: \"<ng-template [ngIf]=\\\"data != null\\\">\\n  <button mat-button (click)=\\\"toggle()\\\" style=\\\"width:100%\\\">{{data.title}}</button>\\n  <ng-template [ngIf]=\\\"open\\\">\\n    <button mat-button (click)=\\\"emitFormula()\\\">Set formula</button>\\n    <mat-card *ngIf=\\\"data.icon === 'true'\\\">\\n      <mat-card-header>\\n        {{data.title}}\\n      </mat-card-header>\\n      <mat-card-content>\\n        <mat-grid-list cols=\\\"3\\\" rowHeight=\\\"100px\\\">\\n          <ng-container *ngFor=\\\"let value of data.data\\\">\\n            <mat-grid-tile *ngFor=\\\"let icon of value.icons\\\" [colspan]=\\\"1\\\" [rowspan]=\\\"1\\\">\\n              <button style=\\\"height:100%\\\" (click)=\\\"setIcon(value.name, icon.name)\\\" [matTooltip]=\\\"icon.label\\\" matTooltipPosition=\\\"above\\\" mat-button>\\n                <mat-icon\\n                  [fontSet]=\\\"value.name\\\"\\n                  [fontIcon]=\\\"icon.name\\\">\\n                </mat-icon>\\n              </button>\\n            </mat-grid-tile>\\n          </ng-container>\\n        </mat-grid-list>\\n      </mat-card-content>\\n    </mat-card>\\n    <mat-card *ngIf=\\\"data.icon === 'false'\\\">\\n      <mat-card-header>\\n        <mat-card-title>\\n          {{data.title}}\\n        </mat-card-title>\\n        <mat-card-subtitle>\\n          <mat-form-field>\\n            <input matInput placeholder=\\\"{{data.title}} to search\\\" [(ngModel)]=\\\"valueToSearch\\\">\\n          </mat-form-field>\\n        </mat-card-subtitle>\\n      </mat-card-header>\\n      <mat-card-content>\\n        <div class=\\\"ajf-image-group-container\\\">\\n          <mat-grid-list cols=\\\"3\\\">\\n            <mat-grid-tile *ngFor=\\\"let value of data.data | ajfImageFilter: valueToSearch\\\" [colspan]=\\\"1\\\" [rowspan]=\\\"1\\\">\\n              <button style=\\\"height:100%\\\" (click)=\\\"setFlag(getFlag(value.class))\\\" matTooltip=\\\"{{value.info}}\\\" [matTooltipPosition]=\\\"'above'\\\" mat-button>\\n                <span class={{getFlag(value.class)}} style=\\\"width: 100%;height: 100%;\\\"></span>\\n              </button>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </div>\\n      </mat-card-content>\\n    </mat-card>\\n    <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n  </ng-template>\\n</ng-template>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-image-group mat-grid-list{height:300px !important;overflow-y:auto}ajf-image-group .mat-grid-list{height:300px !important}ajf-image-group mat-card>mat-card-content>.ajf-image-group-container{overflow-y:scroll;height:300px}ajf-image-group mat-icon{font-size:30px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderImageGroup.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderImageGroup.propDecorators = {\n            data: [{ type: core.Input }],\n            formulaClick: [{ type: core.Output }]\n        };\n        return AjfReportBuilderImageGroup;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderProperties = /** @class */ (function () {\n        function AjfReportBuilderProperties(_dialog, _service) {\n            var _this = this;\n            this._dialog = _dialog;\n            this._service = _service;\n            /**\n             *  true when the first time chart type is setted\n             *\n             * @memberOf AjfReportBuilderProperties\n             */\n            this.initChartType = false;\n            /**\n             * the current widget\n             *\n             * @memberOf AjfReportBuilderProperties\n             */\n            this.currentWidget = null;\n            /**\n             * this array contains the forms exploited for generate data labels\n             *\n             * @memberOf AjfReportBuilderProperties\n             */\n            this.forms = [];\n            this.colors = [];\n            /**\n             * FAKE DATA\n             */\n            this.formsJson = { forms: [] };\n            /**\n             * WIDGET\n             */\n            this.widgetName = '';\n            this.marginExpanded = false;\n            this.paddingExpanded = false;\n            this.borderWidthExpanded = false;\n            this.borderRadiusExpanded = false;\n            this.backgroundColor = '#127bdc';\n            this.styleBackgroundColor = 'rgb(255,255,255,0)';\n            this.borderColor = '#127bdc';\n            this.styleColor = 'rgb(0,0,0,0)';\n            this.align = [false, 'center', 'right', 'justify'];\n            this.fonts = [\n                false, 'blackr', 'black-italic', 'bold', 'bold-condensed', 'bold-condensed-italic',\n                'bold-italic', 'condensed', 'condensed-italic', 'italic', 'light', 'light-italic', 'medium',\n                'medium-italic', 'thinr', 'thin-italic'\n            ];\n            this.currentModule = {};\n            this.quillModules = {\n                toolbar: [\n                    ['formula'], ['bold', 'italic', 'underline', 'strike'],\n                    // ['blockquote', 'code-block'],\n                    [{ 'header': 1 }, { 'header': 2 }],\n                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n                    [{ 'script': 'sub' }, { 'script': 'super' }],\n                    // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n                    // [{ 'direction': 'rtl' }],                         // text direction\n                    [{ 'size': ['small', false, 'large', 'huge'] }],\n                    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n                    [{ 'color': this.colors }, { 'background': this.colors }],\n                    [{ 'font': this.fonts }], [{ 'align': this.align }],\n                    ['clean'],\n                ]\n            };\n            this.chartBorderColor = [];\n            this.chartBorderWidth = 3;\n            /**\n             *\n             * IMAGE\n             */\n            this.imageUrl = 'https://angular.io/resources/images/logos/angular2/angular.png';\n            /**\n             *\n             * TEXT\n             */\n            this.htmlText = '';\n            /**\n             * these variables indicate that the user want to change section\n             */\n            this.reportStyles = false;\n            this.sectionStyles = false;\n            this.widgetStyles = true;\n            this.sectionColor = false;\n            this.widgetColor = false;\n            this.visibilitySection = false;\n            this.currentColor = '';\n            this._icon = null;\n            this.iconSet = { 'icon': 'true', 'title': 'report', 'data': null };\n            this.flagSet = {\n                'icon': 'false',\n                'class': ['flag-icon'],\n                'prefixClass': 'flag-icon-',\n                'title': 'flags',\n                'data': [\n                    { 'class': 'dz', 'info': 'Algeria' },\n                    { 'class': 'ao', 'info': 'Angola' },\n                    { 'class': 'bj', 'info': 'Benin' },\n                    { 'class': 'bw', 'info': 'Botswana' },\n                    { 'class': 'bf', 'info': 'Burkina Faso' },\n                    { 'class': 'bi', 'info': 'Burundi' },\n                    { 'class': 'cm', 'info': 'Cameroon' },\n                    { 'class': 'cv', 'info': 'Cabo Verde' },\n                    { 'class': 'cf', 'info': 'The Central African Republic' },\n                    { 'class': 'td', 'info': 'Chad' },\n                    { 'class': 'km', 'info': 'The Comoros' },\n                    { 'class': 'ci', 'info': 'Cote D\\'avoire' },\n                    { 'class': 'cd', 'info': 'The Democratic Republic of Congo' },\n                    { 'class': 'dj', 'info': 'Dijibouti' },\n                    { 'class': 'eg', 'info': 'Egypt' },\n                    { 'class': 'gq', 'info': 'Equatorial Guinea' },\n                    { 'class': 'er', 'info': 'Eritrea' },\n                    { 'class': 'et', 'info': 'Ethiopia' },\n                    { 'class': 'tf', 'info': 'French Southern Territories' },\n                    { 'class': 'ga', 'info': 'Gabon' },\n                    { 'class': 'gm', 'info': 'The Gambia' },\n                    { 'class': 'gh', 'info': 'Ghana' },\n                    { 'class': 'gn', 'info': 'Guinea' },\n                    { 'class': 'gw', 'info': 'Guinea-Bissau' },\n                    { 'class': 'ke', 'info': 'Kenya' },\n                    { 'class': 'ls', 'info': 'Leshotho' },\n                    { 'class': 'lr', 'info': 'Liberia' },\n                    { 'class': 'ly', 'info': 'Libya' },\n                    { 'class': 'mg', 'info': 'Madagascar' },\n                    { 'class': 'mw', 'info': 'Malawy' },\n                    { 'class': 'ml', 'info': 'Mali' },\n                    { 'class': 'mr', 'info': 'Mauritania' },\n                    { 'class': 'mu', 'info': 'Mauritius' },\n                    { 'class': 'yt', 'info': 'Mayotte' },\n                    { 'class': 'ma', 'info': 'Marocco' },\n                    { 'class': 'mz', 'info': 'Mozambique' },\n                    { 'class': 'na', 'info': 'Namibia' },\n                    { 'class': 'ne', 'info': 'Niger' },\n                    { 'class': 'ng', 'info': 'Nigeria' },\n                    { 'class': 'cg', 'info': 'Republic of the Congo' },\n                    { 'class': 'rw', 'info': 'Rwnda' },\n                    { 'class': 're', 'info': 'rèunion' },\n                    { 'class': 'sh', 'info': 'Saint Helena, Ascension and Tristan da Cunha' },\n                    { 'class': 'st', 'info': 'Sao Tome and Principe' },\n                    { 'class': 'sn', 'info': 'Senegal' },\n                    { 'class': 'sc', 'info': 'Seychelles' },\n                    { 'class': 'sl', 'info': 'Sierra Leone' },\n                    { 'class': 'so', 'info': 'Somalia' },\n                    { 'class': 'za', 'info': 'South Africa' },\n                    { 'class': 'ss', 'info': 'South Sudan' },\n                    { 'class': 'sd', 'info': 'Sudan' },\n                    { 'class': 'sz', 'info': 'Swaziland' },\n                    { 'class': 'tz', 'info': 'Tanzania' },\n                    { 'class': 'tg', 'info': 'Togo' },\n                    { 'class': 'tn', 'info': 'Tunisia' },\n                    { 'class': 'ug', 'info': 'Uganda' },\n                    { 'class': 'eh', 'info': 'Western Sahara' },\n                    { 'class': 'zm', 'info': 'Zambia' },\n                    { 'class': 'zw', 'info': 'Zimbawe' },\n                    { 'class': 'iq', 'info': 'Iraq' },\n                    { 'class': 'lb', 'info': 'Lebanon' },\n                    { 'class': 'bd', 'info': 'Bangladesh' },\n                    { 'class': 'ir', 'info': 'Iran (Islamic Republic of)' },\n                    { 'class': 'my', 'info': 'Malaysia' },\n                    { 'class': 'np', 'info': 'Nepal' },\n                    { 'class': 'pk', 'info': 'Pakistan' },\n                    { 'class': 'th', 'info': 'Thailand' },\n                    { 'class': 'jo', 'info': 'Jordan' },\n                    { 'class': 'ye', 'info': 'Yemen' }\n                ]\n            };\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._formsSub = rxjs.Subscription.EMPTY;\n            this._colorSub = rxjs.Subscription.EMPTY;\n            this._headerStyleSub = rxjs.Subscription.EMPTY;\n            this._contentStylesSub = rxjs.Subscription.EMPTY;\n            this._footerStylesSub = rxjs.Subscription.EMPTY;\n            this._originSub = rxjs.Subscription.EMPTY;\n            this._stylesUpdatesSubs = rxjs.Subscription.EMPTY;\n            this._updateWidgetMarginEvt = new core.EventEmitter();\n            this._updateWidgetPaddingEvt = new core.EventEmitter();\n            this._updateWidgetBorderWidthEvt = new core.EventEmitter();\n            this._updateWidgetBorderRadiusEvt = new core.EventEmitter();\n            this.tabValue = 'backgroundColor';\n            this.setForms();\n            this.iconSet.data = Object.keys(_service.iconSets).filter(function (x) { return x != 'ajf-icon'; }).map(function (i) {\n                return { name: i, icons: _service.iconSets[i] };\n            });\n            this._headerStyleSub = this._service.headerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._contentStylesSub = this._service.contentStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._footerStylesSub = this._service.footerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._originSub = this._service.origin.subscribe(function (s) {\n                _this.origin = s;\n            });\n        }\n        Object.defineProperty(AjfReportBuilderProperties.prototype, \"currentLayoutWidget\", {\n            get: function () {\n                return this.currentWidget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderProperties.prototype, \"currentTextWidget\", {\n            get: function () {\n                return this.currentWidget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderProperties.prototype, \"icon\", {\n            get: function () {\n                return this._icon;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         *\n         * UTILS\n         */\n        /**\n         * return a number value\n         *\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.toNumber = function (value) {\n            var numberPattern = /^(-)?\\d+/g;\n            if (value == null) {\n                return 0;\n            }\n            else {\n                var matches = value.match(numberPattern);\n                if (matches == null || matches.length == 0) {\n                    return 0;\n                }\n                return Number(matches[0]);\n            }\n        };\n        AjfReportBuilderProperties.prototype.toNumberArray = function (value) {\n            var _this = this;\n            if (value == null) {\n                return [];\n            }\n            else {\n                return (value || '')\n                    .replace('px', '')\n                    .split(' ')\n                    .filter(function (v) { return v !== '' && v != null; })\n                    .map(function (v) { return _this.toNumber(v); });\n            }\n        };\n        AjfReportBuilderProperties.prototype.fillPxNumberArray = function (value) {\n            var vl = value.length;\n            switch (vl) {\n                case 0:\n                    return [0, 0, 0, 0];\n                case 1:\n                    var v = value[0];\n                    return [v, v, v, v];\n                case 2:\n                    var v21 = value[0];\n                    var v22 = value[1];\n                    return [v21, v22, v21, v22];\n                case 3:\n                    var v31 = value[0];\n                    var v32 = value[1];\n                    var v33 = value[2];\n                    return [v31, v32, v33, v32];\n                default:\n                    return value;\n            }\n        };\n        AjfReportBuilderProperties.prototype.percent = function (value) {\n            var temp = this.roundTo(value * 100, 3);\n            return temp;\n        };\n        AjfReportBuilderProperties.prototype.roundTo = function (value, decimalPositions) {\n            var i = value * Math.pow(10, decimalPositions);\n            i = Math.floor(i);\n            return i / Math.pow(10, decimalPositions);\n        };\n        /**\n         * call to service to set the forms\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setForms = function () {\n            var forms = [];\n            try {\n                for (var i = 0; i < this.formsJson.forms.length; i++) {\n                    forms.push(utils.deepCopy(this.formsJson.forms[i]));\n                }\n                this._service.setReportForms(forms);\n            }\n            catch (e) {\n            }\n        };\n        /**\n         * call to service to set the width of the idx column of layout widget\n         *\n         * @param col\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.instantColumnValue = function (col, idx) {\n            if (col === null) {\n                return;\n            }\n            this._service.instantColumnValue(col, idx);\n        };\n        /**\n         *  force copy of style\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        // TODO delete this\n        AjfReportBuilderProperties.prototype.setStyle = function () {\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.currentWidget.styles = utils.deepCopy(this.currentWidget.styles);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        /**\n         * call to service to add new style to widget\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setWidgetStyles = function (label, value) {\n            this._service.setWidgetStyles(label, value);\n            this.currentColor = value;\n            this.setStyle();\n        };\n        AjfReportBuilderProperties.prototype.setWidgetMargin = function (idx, value) {\n            this._updateWidgetMarginEvt.emit({ idx: idx, value: value });\n        };\n        AjfReportBuilderProperties.prototype.setWidgetPadding = function (idx, value) {\n            this._updateWidgetPaddingEvt.emit({ idx: idx, value: value });\n        };\n        AjfReportBuilderProperties.prototype.setWidgetBorderWidth = function (idx, value) {\n            this._updateWidgetBorderWidthEvt.emit({ idx: idx, value: value });\n        };\n        AjfReportBuilderProperties.prototype.setWidgetBorderRadius = function (idx, value) {\n            this._updateWidgetBorderRadiusEvt.emit({ idx: idx, value: value });\n        };\n        /**\n         * call to service to add new style to section\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setSectionStyles = function (label, value) {\n            this._service.setSectionStyles(this.origin, label, value);\n            this.styleColor = value;\n        };\n        /**\n         * call to service to add new style to report\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setReportStyles = function (label, value) {\n            this._service.setReportStyles(label, value);\n            this.styleBackgroundColor = value;\n        };\n        /**\n         * add custom color\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.addCustomColor = function () {\n            this._service.addCustomColor(this.currentColor);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        /**\n         * get the module exploit to quill text editor\n         *\n         * @returns\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.getModule = function () {\n            return this.quillModules;\n        };\n        /**\n         * true is the input type value is equal to current widget type\n         *\n         * @param value\n         * @returns\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.isChartTypeSelected = function (value) {\n            if (this.initChartType == false) {\n                return false;\n            }\n            var myObj = this.currentWidget;\n            if (value === myObj.chartType) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        /* layout functions */\n        /**\n         * call to service to add a column to current layout widget\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.addColumn = function () {\n            this._service.addColumn();\n        };\n        /**\n         * call to service to add a obj to current layout widget\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.fixedColumn = function (idx) {\n            this._service.fixedColumn(idx);\n        };\n        /**\n         * call to service to remove obj of current layout widget\n         *\n         * @param idx\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.unfixedColumn = function (idx) {\n            this._service.remove('unfixedColumn', idx);\n        };\n        /* image functions */\n        /**\n         * call to service to set image url\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setImageUrl = function () {\n            this._service.setImageUrl(this.imageUrl);\n        };\n        AjfReportBuilderProperties.prototype.setIcon = function (icon) {\n            this._icon = icon;\n            this._service.setIcon(icon);\n        };\n        /* chart functions */\n        /**\n         * call to service to set the type of chart\n         *\n         * @param type\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.setChartType = function (type) {\n            this.initChartType = true;\n            this._service.setChartType(type);\n        };\n        AjfReportBuilderProperties.prototype.setChartBorderColor = function (value) {\n            if (value == null) {\n                return;\n            }\n            this._service.setChartBorderWidth(value);\n        };\n        AjfReportBuilderProperties.prototype.setTab = function (event) {\n            if (event.index === 0) {\n                this.tabValue = 'backgroundColor';\n            }\n            else {\n                this.tabValue = 'borderColor';\n            }\n        };\n        /**\n         * call to service to remove background color to current chart\n         *\n         * @param index\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.removeChartBackgroundColor = function (index) {\n            this._service.removeChartBackgroundColor(index);\n        };\n        /**\n         * call to service to remove border color to current chart\n         *\n         * @param index\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderProperties.prototype.removeChartBorderColor = function (index) {\n            this._service.removeChartBorderColor(index);\n        };\n        AjfReportBuilderProperties.prototype.hideMenu = function () {\n            this._service.updateCurrentWidget(null);\n        };\n        AjfReportBuilderProperties.prototype.openFormulaDialog = function (event) {\n            this.dialogRef = this._dialog.open(AjfReportBuilderFormsAnalyzerDialog);\n            this.dialogRef.componentInstance.aggregation = reports.AjfAggregationType.None;\n            this.dialogRef.componentInstance.isFormula = true;\n            if (event != null && event.reference != null) {\n                this.dialogRef.componentInstance.formula = event.formula;\n                this.dialogRef.componentInstance.reference = event.reference;\n            }\n        };\n        AjfReportBuilderProperties.prototype.ngOnInit = function () {\n            var _this = this;\n            this._formsSub = this._service.reportForms.subscribe(function (x) {\n                _this.forms = x || [];\n            });\n            this._currentWidgetSub = this._service.currentWidget.subscribe(function (x) {\n                if (x != null) {\n                    if (_this.currentWidget !== x) {\n                        _this.currentWidget = x;\n                        _this.widgetName = reports.AjfWidgetType[x.widgetType];\n                        _this.reportStyles = false;\n                        _this.sectionStyles = false;\n                        _this.widgetStyles = false;\n                        _this.sectionColor = false;\n                        _this.widgetColor = false;\n                        _this.visibilitySection = false;\n                    }\n                }\n                else {\n                    _this.currentWidget = null;\n                    _this.widgetName = '';\n                }\n            });\n            this._colorSub = this._service.colors.subscribe(function (x) {\n                if (x && x.length > 0) {\n                    _this.colors = x;\n                    _this.quillModules = {\n                        toolbar: [\n                            ['bold', 'italic', 'underline', 'strike'],\n                            // ['blockquote', 'code-block'],\n                            [{ 'header': 1 }, { 'header': 2 }],\n                            [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n                            [{ 'script': 'sub' }, { 'script': 'super' }],\n                            // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n                            // [{ 'direction': 'rtl' }],                         // text direction\n                            [{ 'size': ['small', false, 'large', 'huge'] }],\n                            [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n                            [\n                                { 'color': _this.colors }, { 'background': _this.colors }\n                            ],\n                            [{ 'font': _this.fonts }], [{ 'align': _this.align }], ['formula'],\n                            ['clean'],\n                        ]\n                    };\n                }\n            });\n            this.getHTML = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget != null) {\n                    var myObj = _this.currentWidget;\n                    return myObj.htmlText;\n                }\n                return '';\n            }), operators.distinctUntilChanged(), operators.startWith('<p><br></p>'));\n            this.getHeightWidget = this._service.currentWidget.pipe(operators.filter(function (x) { return x != null; }), operators.map(function (myObj) {\n                if (myObj != null) {\n                    var value = _this.toNumber(myObj.styles['height']);\n                    if (value != null || value != null) {\n                        return value;\n                    }\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getFontSizeWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return (_this.toNumber(myObj.styles['font-size']) || 12);\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getFontAlignWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return ((myObj.styles['text-align']) || 'center');\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getBorderWidthWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['border-width']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged(), operators.startWith([0, 0, 0, 0]));\n            this.getBorderWidthWidgetTop =\n                this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getBorderWidthWidgetRight =\n                this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getBorderWidthWidgetBottom =\n                this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getBorderWidthWidgetLeft =\n                this.getBorderWidthWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getBorderRadiusWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['border-radius']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged(), operators.startWith([0, 0, 0, 0]));\n            this.getBorderRadiusWidgetTopLeft =\n                this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getBorderRadiusWidgetTopRight =\n                this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getBorderRadiusWidgetBottomRight =\n                this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getBorderRadiusWidgetBottomLeft =\n                this.getBorderRadiusWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getMarginWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null && myObj.styles['margin'] != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['margin']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged(), operators.startWith([0, 0, 0, 0]));\n            this.getMarginWidgetTop = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getMarginWidgetRight = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getMarginWidgetBottom = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getMarginWidgetLeft = this.getMarginWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getPaddingWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null && myObj.styles['padding'] != null) {\n                    return _this.fillPxNumberArray(_this.toNumberArray(myObj.styles['padding']));\n                }\n                return undefined;\n            }), operators.distinctUntilChanged());\n            this.getPaddingWidgetTop = this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[0]; }));\n            this.getPaddingWidgetRight =\n                this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[1]; }));\n            this.getPaddingWidgetBottom =\n                this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[2]; }));\n            this.getPaddingWidgetLeft = this.getPaddingWidget.pipe(operators.filter(function (m) { return m != null; }), operators.map(function (m) { return m[3]; }));\n            this.getBackgroundColorWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null) {\n                    return myObj.styles['backgroundColor'] || '';\n                }\n            }), operators.distinctUntilChanged());\n            this.getColorWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null && myObj.styles != null) {\n                    return myObj.styles['color'] || '';\n                }\n            }), operators.distinctUntilChanged());\n            this._stylesUpdatesSubs =\n                this._updateWidgetMarginEvt\n                    .pipe(operators.withLatestFrom(this.getMarginWidget))\n                    .subscribe(function (r) {\n                    if (r == null) {\n                        return;\n                    }\n                    var idx = r[0].idx;\n                    var value = r[0].value;\n                    var v = r[1] || [0, 0, 0, 0];\n                    if (v == null || v.length < idx) {\n                        return;\n                    }\n                    v[idx] = value;\n                    _this.setWidgetStyles('margin', v);\n                });\n            this._stylesUpdatesSubs.add(this._updateWidgetPaddingEvt\n                .pipe(operators.withLatestFrom(this.getPaddingWidget))\n                .subscribe(function (r) {\n                if (r == null) {\n                    return;\n                }\n                var idx = r[0].idx;\n                var value = r[0].value;\n                var v = r[1] || [0, 0, 0, 0];\n                if (v == null || v.length < idx) {\n                    return;\n                }\n                v[idx] = value;\n                _this.setWidgetStyles('padding', v);\n            }));\n            this._stylesUpdatesSubs.add(this._updateWidgetBorderWidthEvt\n                .pipe(operators.withLatestFrom(this.getBorderWidthWidget))\n                .subscribe(function (r) {\n                if (r == null) {\n                    return;\n                }\n                var idx = r[0].idx;\n                var value = r[0].value;\n                var v = r[1] || [0, 0, 0, 0];\n                if (v == null || v.length < idx) {\n                    return;\n                }\n                v[idx] = value;\n                _this.setWidgetStyles('border-width', v);\n            }));\n            this._stylesUpdatesSubs.add(this._updateWidgetBorderRadiusEvt\n                .pipe(operators.withLatestFrom(this.getBorderRadiusWidget))\n                .subscribe(function (r) {\n                if (r == null) {\n                    return;\n                }\n                var idx = r[0].idx;\n                var value = r[0].value;\n                var v = r[1] || [0, 0, 0, 0];\n                if (v == null || v.length < idx) {\n                    return;\n                }\n                v[idx] = value;\n                _this.setWidgetStyles('border-radius', v);\n            }));\n        };\n        AjfReportBuilderProperties.prototype.ngOnChanges = function (changes) {\n            this.currentWidget = changes.widget.currentValue;\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.widgetName = reports.AjfWidgetType[this.currentWidget.widgetType];\n        };\n        AjfReportBuilderProperties.prototype.ngOnDestroy = function () {\n            this._currentWidgetSub.unsubscribe();\n            this._formsSub.unsubscribe();\n            this._colorSub.unsubscribe();\n            this._headerStyleSub.unsubscribe();\n            this._contentStylesSub.unsubscribe();\n            this._footerStylesSub.unsubscribe();\n            this._originSub.unsubscribe();\n            this._stylesUpdatesSubs.unsubscribe();\n        };\n        AjfReportBuilderProperties.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-properties',\n                        template: \"<ng-template [ngIf]=\\\"currentWidget != null\\\">\\n  <div class=\\\"ajf-content\\\">\\n    <button\\n      mat-button\\n      class=\\\"ajf-hide-menu\\\"\\n      matTooltip=\\\"hide-menu\\\"\\n      (click)=\\\"hideMenu()\\\"\\n      [matTooltipPosition]=\\\"'above'\\\">\\n      <mat-icon>remove_circle_outline</mat-icon>\\n    </button>\\n    <mat-button-toggle-group class=\\\"ajf-menu-css\\\">\\n      <mat-button-toggle\\n        (click)=\\\"reportStyles = !reportStyles; sectionStyles = false; widgetStyles = false\\\" value=\\\"left\\\"\\n        [ngClass]=\\\"{'ajf-selected': reportStyles}\\\">\\n        report\\n        <ng-container translate>CSS style</ng-container>\\n      </mat-button-toggle>\\n      <mat-button-toggle\\n        (click)=\\\"sectionStyles = !sectionStyles; reportStyles = false; widgetStyles = false\\\"\\n        [ngClass]=\\\"{'ajf-selected': sectionStyles}\\\">\\n        {{ origin }}\\n        <ng-container translate>CSS style</ng-container>\\n      </mat-button-toggle>\\n      <mat-button-toggle\\n        (click)=\\\"widgetStyles = !widgetStyles; sectionStyles = false; reportStyles = false\\\"\\n        [ngClass]=\\\"{'ajf-selected': widgetStyles}\\\">\\n        {{ widgetName }}\\n        <ng-container translate>CSS style</ng-container>\\n      </mat-button-toggle>\\n    </mat-button-toggle-group>\\n    <div class=\\\"ajf-style-container\\\" *ngIf=\\\"(reportStyles) ? true : false \\\">\\n      <mat-tab-group>\\n        <mat-tab label=\\\"Background Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'report'\\\" [label]=\\\"'color'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n      </mat-tab-group>\\n    </div>\\n    <div class=\\\"ajf-style-container\\\" *ngIf=\\\"(sectionStyles) ? true : false \\\">\\n      <mat-tab-group>\\n        <mat-tab label=\\\"Background Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'section'\\\" [label]=\\\"'color'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n      </mat-tab-group>\\n    </div>\\n    <div class=\\\"ajf-style-container\\\" *ngIf=\\\"(widgetStyles) ? true : false \\\">\\n      <mat-tab-group *ngIf=\\\"(currentWidget.widgetType != 4)\\\">\\n        <mat-tab label=\\\"Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'widget'\\\" [label]=\\\"'color'\\\" [init]=\\\"'icon'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n        <mat-tab label=\\\"Background Color\\\">\\n          <div class=\\\"ajf-style-panel\\\">\\n            <ajf-theme-color [section]=\\\"'widget'\\\" [label]=\\\"'background-color'\\\"></ajf-theme-color>\\n          </div>\\n        </mat-tab>\\n      </mat-tab-group>\\n      <div class=\\\"properties-container\\\" *ngIf=\\\"(currentWidget.widgetType !== 8)\\\">\\n        <div class=\\\"ajf-layout-preview\\\">\\n          <div class=\\\"ajf-vbottom\\\">\\n            <div translate>height</div>\\n            <div>{{ getHeightWidget|async }}</div>\\n          </div>\\n          <div class=\\\"ajf-margin-box\\\">\\n            <div class=\\\"ajf-top-label\\\" translate>margin</div>\\n            <div class=\\\"ajf-vtop\\\">{{ getMarginWidgetTop|async }}</div>\\n            <div class=\\\"ajf-vright\\\">{{ getMarginWidgetRight|async }}</div>\\n            <div class=\\\"ajf-vbottom\\\">{{ getMarginWidgetBottom|async }}</div>\\n            <div class=\\\"ajf-vleft\\\">{{ getMarginWidgetLeft|async }}</div>\\n            <div class=\\\"ajf-border-box\\\">\\n              <div class=\\\"ajf-vtop\\\">{{ getBorderWidthWidgetTop|async }}</div>\\n              <div class=\\\"ajf-vright\\\">{{ getBorderWidthWidgetRight|async }}</div>\\n              <div class=\\\"ajf-vbottom\\\">{{ getBorderWidthWidgetBottom|async }}</div>\\n              <div class=\\\"ajf-vleft\\\">{{ getBorderWidthWidgetLeft|async }}</div>\\n              <div class=\\\"ajf-vtl\\\">{{ getBorderRadiusWidgetTopLeft|async }}</div>\\n              <div class=\\\"ajf-vtr\\\">{{ getBorderRadiusWidgetTopRight|async }}</div>\\n              <div class=\\\"ajf-vbr\\\">{{ getBorderRadiusWidgetBottomRight|async }}</div>\\n              <div class=\\\"ajf-vbl\\\">{{ getBorderRadiusWidgetBottomLeft|async }}</div>\\n              <div class=\\\"ajf-top-label\\\" translate>border</div>\\n              <div class=\\\"ajf-padding-box\\\">\\n                <div class=\\\"ajf-top-label\\\" translate>padding</div>\\n                <div class=\\\"ajf-vtop\\\">{{ getPaddingWidgetTop|async }}</div>\\n                <div class=\\\"ajf-vright\\\">{{ getPaddingWidgetRight|async }}</div>\\n                <div class=\\\"ajf-vbottom\\\">{{ getPaddingWidgetBottom|async }}</div>\\n                <div class=\\\"ajf-vleft\\\">{{ getPaddingWidgetLeft|async }}</div>\\n                <div class=\\\"ajf-content-box\\\" translate>content</div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n        <mat-grid-list rowHeight=\\\"2em\\\" cols=\\\"12\\\">\\n          <mat-grid-tile></mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span>height</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('height', $event.value)\\\"\\n              min=\\\"0\\\"\\n              max=\\\"200\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getHeightWidget|async\\\"\\n              tickInterval=\\\"1\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!marginExpanded\\\"\\n                (click)=\\\"marginExpanded = !marginExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"marginExpanded\\\"\\n                (click)=\\\"marginExpanded = !marginExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>margin</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              [disabled]=\\\"marginExpanded\\\"\\n              (change)=\\\"setWidgetStyles('margin', $event.value)\\\"\\n              min=\\\"-50\\\"\\n              max=\\\"50\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getMarginWidgetTop|async\\\"\\n              tickInterval=\\\"auto\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"marginExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin top</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(0, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetTop|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(1, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin bottom</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(2, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetBottom|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>margin left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetMargin(3, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getMarginWidgetLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!paddingExpanded\\\"\\n                (click)=\\\"paddingExpanded = !paddingExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"paddingExpanded\\\"\\n                (click)=\\\"paddingExpanded = !paddingExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>padding</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('padding', $event.value)\\\"\\n              min=\\\"-50\\\"\\n              max=\\\"50\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getPaddingWidgetTop|async\\\"\\n              tickInterval=\\\"auto\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"paddingExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding top</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(0, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetTop|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(1, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding bottom</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(2, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetBottom|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>padding left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetPadding(3, $event.value)\\\"\\n                min=\\\"-50\\\"\\n                max=\\\"50\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getPaddingWidgetLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!borderWidthExpanded\\\"\\n                (click)=\\\"borderWidthExpanded = !borderWidthExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"borderWidthExpanded\\\"\\n                (click)=\\\"borderWidthExpanded = !borderWidthExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>border width</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('border-width', $event.value)\\\"\\n              min=\\\"0\\\"\\n              max=\\\"10\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getBorderWidthWidgetTop|async\\\"\\n              tickInterval=\\\"1\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"borderWidthExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width top</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(0, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetTop|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(1, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width bottom</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(2, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetBottom|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border width left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderWidth(3, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"10\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderWidthWidgetLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile>\\n            <mat-icon *ngIf=\\\"!borderRadiusExpanded\\\"\\n                (click)=\\\"borderRadiusExpanded = !borderRadiusExpanded\\\">keyboard_arrow_right</mat-icon>\\n            <mat-icon *ngIf=\\\"borderRadiusExpanded\\\"\\n                (click)=\\\"borderRadiusExpanded = !borderRadiusExpanded\\\">keyboard_arrow_down</mat-icon>\\n          </mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n            <span translate>border radius</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('border-radius', $event.value)\\\"\\n              min=\\\"0\\\"\\n              max=\\\"100\\\"\\n              step=\\\"1\\\"\\n              tickInterval=\\\"10\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n        <ng-template [ngIf]=\\\"borderRadiusExpanded\\\">\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius top left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(0, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetTopLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius top right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(1, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetTopRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius bottom left</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(2, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetBottomLeft|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n          <mat-grid-list cols=\\\"12\\\">\\n            <mat-grid-tile></mat-grid-tile>\\n            <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"4\\\">\\n              &nbsp;&nbsp;<span translate>border radius bottom right</span>\\n            </mat-grid-tile>\\n            <mat-grid-tile colspan=\\\"7\\\">\\n              <mat-slider\\n                (change)=\\\"setWidgetBorderRadius(3, $event.value)\\\"\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                step=\\\"1\\\"\\n                [value]=\\\"getBorderRadiusWidgetBottomRight|async\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-grid-tile>\\n          </mat-grid-list>\\n        </ng-template>\\n      </div>\\n      <div class=\\\"properties-container\\\" *ngIf=\\\"currentWidget.widgetType === 2\\\">\\n        <mat-grid-list cols=\\\"12\\\">\\n          <mat-grid-tile></mat-grid-tile>\\n          <mat-grid-tile class=\\\"ajf-lal\\\" colspan=\\\"3\\\">\\n            <span translate>font size</span>\\n          </mat-grid-tile>\\n          <mat-grid-tile colspan=\\\"7\\\">\\n            <mat-slider\\n              (change)=\\\"setWidgetStyles('font-size', $event.value);\\\"\\n              min=\\\"1\\\"\\n              max=\\\"150\\\"\\n              step=\\\"1\\\"\\n              [value]=\\\"getFontSizeWidget|async\\\"\\n              tickInterval=\\\"1\\\"\\n              thumbLabel>\\n            </mat-slider>\\n          </mat-grid-tile>\\n        </mat-grid-list>\\n      </div>\\n      <ng-template [ngIf]=\\\"currentWidget.widgetType === 5\\\">\\n        <br>\\n        <form>\\n          <mat-form-field>\\n            <input\\n              matInput\\n              [placeholder]=\\\"'Font size' | translate\\\"\\n              [value]=\\\"getFontSizeWidget|async\\\"\\n              [(ngModel)]=\\\"fontSize\\\"\\n              [ngModelOptions]=\\\"{standalone: true}\\\"\\n              (change)=\\\"setWidgetStyles('font-size', fontSize)\\\">\\n          </mat-form-field>\\n          <mat-select\\n              (selectionChange)=\\\"setWidgetStyles('font-style', $event.value)\\\"\\n              [placeholder]=\\\"'Font style' | translate\\\">\\n            <mat-option translate value=\\\"normal\\\">Normal</mat-option>\\n            <mat-option translate value=\\\"italic\\\">Italic</mat-option>\\n            <mat-option translate value=\\\"oblique\\\">Oblique</mat-option>\\n          </mat-select>\\n          <mat-select\\n              (selectionChange)=\\\"setWidgetStyles('text-align', $event.value)\\\"\\n              [placeholder]=\\\"'Align' | translate\\\">\\n            <mat-option translate value=\\\"center\\\">Center</mat-option>\\n            <mat-option translate value=\\\"left\\\">Left</mat-option>\\n            <mat-option translate value=\\\"right\\\">Right</mat-option>\\n          </mat-select>\\n        </form>\\n      </ng-template>\\n      <h1>\\n        <ng-container translate>properties of</ng-container>\\n        {{ widgetName }}\\n      </h1>\\n    </div>\\n    <div [ngSwitch]=\\\"currentWidget.widgetType\\\">\\n      <ng-template [ngSwitchCase]=\\\"0\\\">\\n        <h1 translate>Column</h1>\\n        <ng-template ngFor let-col [ngForOf]=\\\"currentLayoutWidget.columns\\\" let-idx=\\\"index\\\">\\n          <mat-toolbar>\\n              <mat-toolbar-row *ngIf=\\\"col !== -1\\\">\\n                <mat-grid-list cols=\\\"12\\\">\\n                  <mat-grid-tile colspan=\\\"1\\\">\\n                    {{idx + 1}}\\n                  </mat-grid-tile>\\n                  <mat-grid-tile colspan=\\\"9\\\">\\n                    <mat-slider\\n                      style=\\\"width: 90%;\\\"\\n                      min=\\\"0.1\\\"\\n                      max=\\\"1\\\"\\n                      step=\\\"0.01\\\"\\n                      value=\\\"{{col}}\\\"\\n                      thumb-label=\\\"true\\\"\\n                      tick-interval=\\\"true\\\"\\n                      (change)=\\\"instantColumnValue($event.value,idx)\\\">\\n                    </mat-slider>\\n                    {{percent(col)}}%\\n                  </mat-grid-tile>\\n                  <mat-grid-tile colspan=\\\"2\\\">\\n                    <button style=\\\"width: 5%;\\\" mat-button (click)=\\\"fixedColumn(idx)\\\">fixed</button>\\n                  </mat-grid-tile>\\n                </mat-grid-list>\\n              </mat-toolbar-row>\\n              <mat-toolbar-row *ngIf=\\\"col == -1\\\">\\n                <mat-grid-list cols=\\\"12\\\">\\n                  <mat-grid-tile colspan=\\\"1\\\">\\n                    {{idx + 1}}\\n                  </mat-grid-tile>\\n                  <mat-grid-tile colspan=\\\"11\\\">\\n                    <button  style=\\\"width: 90%;\\\" mat-button (click)=\\\"unfixedColumn(idx)\\\">percent</button>\\n                  </mat-grid-tile>\\n                </mat-grid-list>\\n              </mat-toolbar-row>\\n          </mat-toolbar>\\n        </ng-template>\\n        <mat-toolbar>\\n          <mat-toolbar-row>\\n            <button mat-button\\n                translate\\n                (click)=\\\"addColumn()\\\"\\n                *ngIf=\\\"currentLayoutWidget.columns.length < 10\\\">Add column</button>\\n          </mat-toolbar-row>\\n        </mat-toolbar>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"2\\\">\\n        <ajf-image-group (formulaClick)=\\\"openFormulaDialog($event)\\\" [data]=\\\"iconSet\\\"></ajf-image-group>\\n        <ajf-image-group (formulaClick)=\\\"openFormulaDialog($event)\\\" [data]=\\\"flagSet\\\"></ajf-image-group>\\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n        <input\\n            mat-input\\n            [placeholder]=\\\"'paste a link' | translate\\\"\\n            style=\\\"width: 100%;\\\"\\n            [(ngModel)]=\\\"imageUrl\\\">\\n        <button mat-button (click)=\\\"setImageUrl()\\\"\\n            translate>Set image</button>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"3\\\">\\n        <div style=\\\"width:500px;\\\">\\n          <ajf-quill-editor\\n            [(ngModel)]=\\\"currentTextWidget.htmlText\\\"\\n            [modules]=\\\"getModule()\\\"\\n            [maxLength]=\\\"200\\\"\\n            [theme]=\\\"bubble\\\"\\n            [initHTML]=\\\"(getHTML|async) || ''\\\"\\n            (formulaClick)=\\\"openFormulaDialog($event)\\\">\\n          </ajf-quill-editor>\\n        </div>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"4\\\">\\n        <h3 translate>Choose type of Chart</h3>\\n        <mat-button-toggle-group class=\\\"ajf-chart-buttons\\\">\\n          <div class=\\\"ajf-row\\\">\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-linechart\\\"\\n              (click)=\\\"setChartType(0)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-linechart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-barchartvertical\\\"\\n              (click)=\\\"setChartType(1)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-barchartvertical\\\">\\n              </mat-icon>\\n              </mat-button-toggle>\\n            <mat-button-toggle\\n                value=\\\"reportbuilder-bubblechart\\\"\\n                (click)=\\\"setChartType(8)\\\">\\n                <mat-icon\\n                  fontSet=\\\"ajf-icon\\\"\\n                  fontIcon=\\\"reportbuilder-bubblechart\\\">\\n                </mat-icon>\\n              </mat-button-toggle>\\n          </div>\\n          <div class=row>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-barcharthorizontal\\\"\\n              (click)=\\\"setChartType(2)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-barcharthorizontal\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-radarchart\\\"\\n              (click)=\\\"setChartType(3)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-radarchart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n             <mat-button-toggle\\n              value=\\\"reportbuilder-barchartvertical\\\"\\n              (click)=\\\"setChartType(1)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-barchartvertical\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n          </div>\\n          <div class=\\\"ajf-row\\\">\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-scatterchart\\\"\\n              (click)=\\\"setChartType(4)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-scatterchart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-polarareachart\\\"\\n              (click)=\\\"setChartType(5)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-polarareachart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n          </div>\\n          <div class=\\\"ajf-row\\\">\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-piechart\\\"\\n              (click)=\\\"setChartType(6)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-piechart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n            <mat-button-toggle\\n              value=\\\"reportbuilder-donoughtchart\\\"\\n              (click)=\\\"setChartType(7)\\\">\\n              <mat-icon\\n                fontSet=\\\"ajf-icon\\\"\\n                fontIcon=\\\"reportbuilder-donoughtchart\\\">\\n              </mat-icon>\\n            </mat-button-toggle>\\n          </div>\\n        </mat-button-toggle-group>\\n        <h3 translate>Labels</h3>\\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n        <ajf-theme-color [section]=\\\"'chart'\\\" [label]=\\\"tabValue\\\"></ajf-theme-color>\\n          <mat-card>\\n            <mat-card-header>\\n              <mat-card-title>Border width</mat-card-title>\\n            </mat-card-header>\\n            <mat-card-content>\\n              <mat-slider\\n                min=\\\"1\\\"\\n                max=\\\"100\\\"\\n                style=\\\"width:99%;\\\"\\n                step=\\\"1\\\"\\n                (change)=\\\"setChartBorderColor($event.value)\\\"\\n                [value]=\\\"chartBorderWidth\\\"\\n                tickInterval=\\\"auto\\\"\\n                thumbLabel>\\n              </mat-slider>\\n            </mat-card-content>\\n          </mat-card>\\n          <mat-tab-group (selectChange)=\\\"setTab($event)\\\">\\n            <mat-tab label=\\\"Background\\\">\\n              <mat-list>\\n                <ng-template ngFor let-color [ngForOf]=\\\"(getChartBackgroundColor|async)\\\" let-idx=\\\"index\\\">\\n                  <mat-list-item>\\n                    <span [style.background]=\\\"color\\\">\\n                      {{ color }}\\n                    </span>\\n                    <button mat-button translate\\n                        (click)=\\\"removeChartBackgroundColor(idx)\\\">Remove</button>\\n                  </mat-list-item>\\n                </ng-template>\\n              </mat-list>\\n            </mat-tab>\\n            <mat-tab label=\\\"Border\\\">\\n              <mat-list>\\n                <ng-template ngFor let-color [ngForOf]=\\\"(getChartBorderColor|async)\\\" let-idx=\\\"index\\\">\\n                  <mat-list-item>\\n                    <span [style.background]=\\\"color\\\">\\n                      {{ color }}\\n                    </span>\\n                    <button mat-button (click)=\\\"removeChartBorderColor(idx)\\\">remove</button>\\n                  </mat-list-item>\\n                </ng-template>\\n              </mat-list>\\n            </mat-tab>\\n          </mat-tab-group>\\n      </ng-template>\\n      <ng-template [ngSwitchCase]=\\\"5\\\">\\n        <ajf-report-builder-forms-analyzer></ajf-report-builder-forms-analyzer>\\n      </ng-template>\\n    </div>\\n    <button mat-button\\n        (click)=\\\"visibilitySection = !visibilitySection\\\"\\n        [ngClass]=\\\"{'ajf-selected': visibilitySection}\\\">\\n      {{ widgetName }}\\n      <ng-container translate>Visibility</ng-container>\\n    </button>\\n    <div [style.display]=\\\"visibilitySection ? 'block' : 'none'\\\">\\n      <ajf-report-builder-condition-editor [visibility]=\\\"currentWidget.visibility\\\"></ajf-report-builder-condition-editor>\\n    </div>\\n  </div>\\n</ng-template>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-properties .ajf-selected{background-color:darkred;color:#fff}ajf-report-builder-properties .ajf-style-container{height:auto;width:100%;position:relative;margin-bottom:60px;text-align:center}ajf-report-builder-properties .ajf-style-container mat-tab-group .ajf-style-panel{min-height:350px}ajf-report-builder-properties .ajf-style-container .ajf-style-background,ajf-report-builder-properties .ajf-style-container .ajf-style-color{width:100%;height:350px;position:relative;margin:30px}ajf-report-builder-properties .ajf-style-container .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-properties .ajf-style-container mat-tab-group .mat-tab-body-wrapper,ajf-report-builder-properties .ajf-style-container mat-tab-group .mat-list-item-content{position:normal !important;display:block !important;height:350px !important}ajf-report-builder-properties .ajf-content{margin-top:10px;margin-right:15px;margin-bottom:290px;margin-left:15px}ajf-report-builder-properties .ajf-content .ajf-menu-css{width:100% !important;font-size:10px !important}ajf-report-builder-properties .ajf-content .ajf-menu-css mat-button-toggle{width:33% !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group{width:100% !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group mat-button-toggle{width:auto !important}ajf-report-builder-properties .ajf-content mat-button-toggle-group mat-button-toggle mat-icon{margin:15px}ajf-report-builder-properties button{width:100%;margin-bottom:30px}ajf-report-builder-properties .ajf-hide-menu{width:auto !important}ajf-report-builder-properties h1,ajf-report-builder-properties h3,ajf-report-builder-properties h5{text-align:center}ajf-report-builder-properties .ajf-row{display:flex;flex-direction:column;width:100%}ajf-report-builder-properties .mat-tab-body.mat-tab-active{min-height:600px}ajf-report-builder-properties mat-grid-list{width:100%}ajf-report-builder-properties mat-grid-tile{overflow:visible !important}ajf-report-builder-properties mat-grid-tile.ajf-lal{text-align:left}ajf-report-builder-properties .ajf-chart-buttons mat-icon{font-size:15px}ajf-report-builder-properties .ajf-layout-preview{background-color:#fff;width:100%;font-size:.9em;box-sizing:border-box;position:relative}ajf-report-builder-properties .ajf-layout-preview .ajf-top-label{position:absolute;top:1em;left:1em;text-align:left}ajf-report-builder-properties .ajf-layout-preview .ajf-vtop{position:absolute;top:1em;right:0;left:0}ajf-report-builder-properties .ajf-layout-preview .ajf-vbottom{position:absolute;bottom:0;right:0;left:0}ajf-report-builder-properties .ajf-layout-preview .ajf-vright{position:absolute;top:50%;right:1em;margin-top:.5em}ajf-report-builder-properties .ajf-layout-preview .ajf-vleft{position:absolute;top:50%;left:1em;margin-top:.5em}ajf-report-builder-properties .ajf-layout-preview .ajf-vtl{position:absolute;top:1em;left:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vtr{position:absolute;top:1em;right:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vbl{position:absolute;bottom:1em;left:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-vbr{position:absolute;bottom:1em;right:1em}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box{background-color:#fff;padding:3em;position:relative;border:solid 1px #ccc}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box{background-color:#ddd;padding:3em;position:relative;box-sizing:border-box}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box>.ajf-top-label{left:4em}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box .ajf-padding-box{padding:3em;background-color:#aaa;position:relative;box-sizing:border-box}ajf-report-builder-properties .ajf-layout-preview .ajf-margin-box .ajf-border-box .ajf-padding-box .ajf-content-box{background-color:#888;padding:2em;text-align:center;box-sizing:border-box}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderProperties.ctorParameters = function () { return [\n            { type: dialog.MatDialog },\n            { type: AjfReportBuilderService }\n        ]; };\n        return AjfReportBuilderProperties;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfQuillEditor = /** @class */ (function () {\n        function AjfQuillEditor(_elementRef, _renderer, _service) {\n            var _this = this;\n            this._elementRef = _elementRef;\n            this._renderer = _renderer;\n            this._service = _service;\n            this.emptyArray = [];\n            this._init = false;\n            this.dateFormats = [\n                {\n                    'label': 'June 23rd 2017, 12:39:12 pm',\n                    'value': 'MMMM Do YYYY, h:mm:ss a',\n                    'validator': 'MMMMDoYYYYhmmssa'\n                },\n                { 'label': 'Friday', 'value': 'dddd', 'validator': 'dddd' },\n                { 'label': 'Jun 23rd 17', 'value': 'MMM Do YY', 'validator': 'MMMDoYY' }\n            ];\n            this.fonts = [\n                false, 'blackr', 'black-italic', 'bold', 'bold-condensed', 'bold-condensed-italic',\n                'bold-italic', 'condensed', 'condensed-italic', 'italic', 'light', 'light-italic', 'medium',\n                'medium-italic', 'thinr', 'thin-italic'\n            ];\n            this.defaultModules = {\n                formula: true,\n                toolbar: [\n                    ['formula'], ['bold', 'italic', 'underline', 'strike'],\n                    // ['blockquote', 'code-block'],\n                    [{ 'header': 1 }, { 'header': 2 }],\n                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n                    [{ 'script': 'sub' }, { 'script': 'super' }],\n                    // [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n                    // [{ 'direction': 'rtl' }],                         // text direction\n                    [{ 'size': ['small', false, 'large', 'huge'] }],\n                    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n                    [\n                        { 'color': this.emptyArray.slice() }, { 'background': this.emptyArray.slice() }\n                    ],\n                    [{ 'font': this.fonts }], [{ 'align': this.emptyArray.slice() }],\n                    ['clean'],\n                ]\n            };\n            this.font = Quill.import('formats/font');\n            this.editorCreated = new core.EventEmitter();\n            this.contentChanged = new core.EventEmitter();\n            this.selectionChanged = new core.EventEmitter();\n            /**\n             * this event is fired when the user click on formula button on quill editor rool barƒ\n             *\n             * @memberof QuillEditorComponent\n             */\n            this.formulaClick = new core.EventEmitter();\n            this.onModelChange = function () { };\n            this.onModelTouched = function () { };\n            this._formulas = [];\n            this._formulaTextSub = rxjs.Subscription.EMPTY;\n            this.font.whitelist = this.fonts;\n            this.font.whitelist.push('regular');\n            this._formulaTextSub = this._service.getFormulaToHtmlEvent().subscribe(function (event) {\n                // reference is defined only when the user want to edit the formula\n                if (event.reference !== undefined) {\n                    event.reference.innerHTML = event.formula;\n                    _this._renderer.setAttribute(event.reference, 'formula', event.formula);\n                    var efs = _this._formulas.filter(function (f) { return f.formula === event.reference; });\n                    var formulaEntry = void 0;\n                    var unlisten = void 0;\n                    if (efs.length > 0) {\n                        formulaEntry = efs[0];\n                        unlisten = formulaEntry.unlisten;\n                        if (unlisten != null) {\n                            unlisten();\n                        }\n                    }\n                    else {\n                        formulaEntry = { formula: event.reference, unlisten: null };\n                        _this._formulas.push(formulaEntry);\n                    }\n                    formulaEntry.unlisten = _this._renderer.listen(event.reference, 'click', function () {\n                        var obj = { 'formula': event.formula, 'reference': event.reference };\n                        _this.formulaClick.emit(obj);\n                    });\n                }\n                else {\n                    var quillEditor = _this._elementRef.nativeElement.querySelector('.ajf-ql-editor');\n                    var link_1 = _this._renderer.createElement('a');\n                    _this._renderer.setAttribute(link_1, 'href', 'javascript:void(0)');\n                    _this._renderer.setStyle(link_1, 'cursor', 'pointer');\n                    _this._renderer.setAttribute(link_1, 'formula', _this.check(event.formula));\n                    var linkLabel = _this._renderer.createText(event.formula);\n                    _this._renderer.appendChild(link_1, linkLabel);\n                    // add listener related on the click event of the new formula\n                    var unlisten = _this._renderer.listen(link_1, 'click', function (_) {\n                        var obj = { 'formula': _this.check(event.formula), 'reference': link_1 };\n                        _this.formulaClick.emit(obj);\n                    });\n                    _this._renderer.appendChild(quillEditor, link_1);\n                    _this._formulas.push({ unlisten: unlisten, formula: link_1 });\n                }\n            });\n        }\n        AjfQuillEditor.prototype.check = function (value) {\n            for (var i = 0; i < this.dateFormats.length; i++) {\n                if (this.dateFormats[i].value == value) {\n                    return this.dateFormats[i].validator;\n                }\n            }\n            return value;\n        };\n        /**\n         * this function search fomulas inside the init text\n         * and allocate the related listener on click event\n         *\n         * @memberof QuillEditorComponent\n         */\n        AjfQuillEditor.prototype.setHTML = function () {\n            this.writeValue(this.initHTML);\n        };\n        AjfQuillEditor.prototype.ngAfterViewInit = function () {\n            var _this = this;\n            var toolbarElem = this._elementRef.nativeElement.querySelector('[ajf-quill-editor-toolbar]');\n            var modules = this.modules || this.defaultModules;\n            Quill.register(this.font, true);\n            if (toolbarElem) {\n                modules['toolbar'] = toolbarElem;\n                modules['formula'] = true;\n            }\n            this._elementRef.nativeElement.insertAdjacentHTML('beforeend', '<div quill-editor-element></div>');\n            this.editorElem = this._elementRef.nativeElement.querySelector('[quill-editor-element]');\n            this.quillEditor = new Quill(this.editorElem, {\n                modules: modules,\n                placeholder: this.placeholder || 'Insert text here ...',\n                readOnly: this.readOnly || false,\n                theme: this.theme || 'snow',\n                formats: this.formats\n            });\n            this.editorCreated.emit(this.quillEditor);\n            this.setHTML();\n            // mark model as touched if editor lost focus\n            this.quillEditor.on('selection-change', function (range, oldRange, source) {\n                _this.selectionChanged.emit({ editor: _this.quillEditor, range: range, oldRange: oldRange, source: source });\n                if (!range) {\n                    _this.onModelTouched();\n                }\n            });\n            // update model if text changes\n            this.quillEditor.on('text-change', function (delta, oldDelta, source) {\n                var html = _this.editorElem.children[0].innerHTML;\n                var text = _this.quillEditor.getText();\n                if (html === '<p><br></p>') {\n                    html = null;\n                }\n                _this.onModelChange(html);\n                _this.contentChanged.emit({\n                    editor: _this.quillEditor,\n                    html: html,\n                    text: text,\n                    delta: delta,\n                    oldDelta: oldDelta,\n                    source: source\n                });\n            });\n            var elem = this._elementRef.nativeElement.querySelector('.ajf-ql-formula');\n            this.listenFunc = this._renderer.listen(elem, 'click', function (_) {\n                _this.formulaClick.emit();\n            });\n        };\n        AjfQuillEditor.prototype.writeValue = function (currentValue) {\n            var _this = this;\n            this.content = currentValue;\n            if (this.quillEditor) {\n                if (currentValue) {\n                    if (currentValue == this.initHTML && !this._init) {\n                        var editor = this._elementRef.nativeElement.querySelector('.ajf-ql-editor');\n                        editor.innerHTML = this.initHTML;\n                        var allFormulas = this._elementRef.nativeElement.querySelectorAll('[formula]');\n                        allFormulas.forEach(function (elem) {\n                            var unlisten = _this._renderer.listen(elem, 'click', function (_) {\n                                var obj = { 'formula': _this.check(elem.innerText), 'reference': elem };\n                                _this.formulaClick.emit(obj);\n                            });\n                            _this._renderer.setStyle(elem, 'cursor', 'pointer');\n                            _this._formulas.push({ unlisten: unlisten, formula: elem });\n                            _this._init = true;\n                        });\n                    }\n                    else if (currentValue != this.initHTML) {\n                        this.quillEditor.pasteHTML(currentValue);\n                    }\n                    return;\n                }\n                this.quillEditor.setText('');\n            }\n        };\n        AjfQuillEditor.prototype.registerOnChange = function (fn) {\n            this.onModelChange = fn;\n        };\n        AjfQuillEditor.prototype.registerOnTouched = function (fn) {\n            this.onModelTouched = fn;\n        };\n        AjfQuillEditor.prototype.validate = function (_c) {\n            if (!this.quillEditor) {\n                return null;\n            }\n            var err = {}, valid = true;\n            var textLength = this.quillEditor.getText().trim().length;\n            if (this.minLength) {\n                err.minLengthError = { given: textLength, minLength: this.minLength };\n                valid = textLength >= this.minLength || !textLength;\n            }\n            if (this.maxLength) {\n                err.maxLengthError = { given: textLength, maxLength: this.maxLength };\n                valid = textLength <= this.maxLength && valid;\n            }\n            return valid ? null : err;\n        };\n        AjfQuillEditor.prototype.ngOnChanges = function (changes) {\n            if (changes['readOnly'] && this.quillEditor) {\n                this.quillEditor.enable(!changes['readOnly'].currentValue);\n            }\n            if (changes['modules'] && this.quillEditor) {\n                Quill.register(this.font, true);\n                this.quillEditor = new Quill(this.editorElem, {\n                    modules: changes['modules']['currentValue'],\n                    placeholder: this.placeholder || 'Insert text here ...',\n                    readOnly: this.readOnly || false,\n                    theme: this.theme || 'snow',\n                    formats: this.formats\n                });\n                this._elementRef.nativeElement.children[0].remove();\n            }\n        };\n        AjfQuillEditor.prototype.ngOnDestroy = function () {\n            for (var i = 0; i < this._formulas.length; i++) {\n                var unlisten = this._formulas[i].unlisten;\n                if (unlisten != null) {\n                    unlisten();\n                }\n            }\n            this._formulaTextSub.unsubscribe();\n        };\n        AjfQuillEditor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-quill-editor',\n                        template: \"\\n    <ng-content select=\\\"[ajf-quill-editor-toolbar]\\\"></ng-content>\\n  \",\n                        providers: [\n                            { provide: forms.NG_VALUE_ACCESSOR, useExisting: core.forwardRef(function () { return AjfQuillEditor; }), multi: true },\n                            { provide: forms.NG_VALIDATORS, useExisting: core.forwardRef(function () { return AjfQuillEditor; }), multi: true }\n                        ],\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-quill-editor .ajf-ql-container .ajf-ql-editor{min-height:200px;width:500px !important;padding-bottom:50px}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfQuillEditor.ctorParameters = function () { return [\n            { type: core.ElementRef },\n            { type: core.Renderer2 },\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfQuillEditor.propDecorators = {\n            theme: [{ type: core.Input }],\n            modules: [{ type: core.Input }],\n            readOnly: [{ type: core.Input }],\n            placeholder: [{ type: core.Input }],\n            maxLength: [{ type: core.Input }],\n            minLength: [{ type: core.Input }],\n            formats: [{ type: core.Input }],\n            initHTML: [{ type: core.Input }],\n            editorCreated: [{ type: core.Output }],\n            contentChanged: [{ type: core.Output }],\n            selectionChanged: [{ type: core.Output }],\n            formulaClick: [{ type: core.Output }]\n        };\n        return AjfQuillEditor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderRendererWidget = /** @class */ (function () {\n        function AjfReportBuilderRendererWidget(_service) {\n            this._service = _service;\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            this.currentContentWidget = null;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n        }\n        Object.defineProperty(AjfReportBuilderRendererWidget.prototype, \"widgetTypes\", {\n            get: function () {\n                return reports.AjfWidgetType;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfReportBuilderRendererWidget.prototype, \"layoutWidget\", {\n            get: function () {\n                return this.widget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AjfReportBuilderRendererWidget.prototype.canDropPredicate = function (item) {\n            for (var i = 0; i < item.data.dropZones.length; i++) {\n                if (['header', 'widget'].indexOf(item.data.dropZones[i]) > -1) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderRendererWidget.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200).subscribe(function () {\n                s.unsubscribe();\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderRendererWidget.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        AjfReportBuilderRendererWidget.prototype.getColumnContent = function () {\n            var myObj = this.widget;\n            return myObj.content;\n        };\n        AjfReportBuilderRendererWidget.prototype.getIcon = function () {\n            var defVal = { fontSet: '', fontIcon: '' };\n            var myObj = this.widget;\n            if (myObj.icon == null) {\n                return null;\n            }\n            return models.evaluateExpression(myObj.icon.formula) || defVal;\n        };\n        AjfReportBuilderRendererWidget.prototype.getFlag = function () {\n            var defVal = 'ch';\n            var myObj = this.widget;\n            if (myObj.flag == null) {\n                return null;\n            }\n            return models.evaluateExpression(myObj.flag.formula) || defVal;\n        };\n        AjfReportBuilderRendererWidget.prototype.getPercent = function (index) {\n            var myObj = this.widget;\n            var percent = myObj.columns[index] * 100;\n            return percent.toString() + \"%\";\n        };\n        AjfReportBuilderRendererWidget.prototype.getImageUrl = function () {\n            var defVal = '';\n            var myObj = this.widget;\n            if (myObj.url == null) {\n                return null;\n            }\n            return models.evaluateExpression(myObj.url.formula) || defVal;\n        };\n        AjfReportBuilderRendererWidget.prototype.getImageType = function () {\n            return this.widget != null ? this.widget.imageType : image$1.AjfImageType.Image;\n        };\n        AjfReportBuilderRendererWidget.prototype.getHtmlText = function () {\n            var myObj = this.widget;\n            if (myObj.htmlText === '') {\n                return '...';\n            }\n            else {\n                return myObj.htmlText;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.getCoordinate = function () {\n            var myObj = this.widget;\n            if (myObj.coordinate == null) {\n                return [51.505, -0.09, 13];\n            }\n            else {\n                return myObj.coordinate;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.getTileLayer = function () {\n            var myObj = this.widget;\n            if (myObj.tileLayer === '') {\n                return 'http://{s}.tile.osm.org/{z}/{x}/{y}.png';\n            }\n            else {\n                return myObj.tileLayer;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.getAttribution = function () {\n            var myObj;\n            myObj = this.widget;\n            if (myObj.attribution === '') {\n                return '&copy; <a href=\\'http://osm.org/copyright\\'>O</a> contributors';\n            }\n            else {\n                return myObj.attribution;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.addToList = function (event, toColumn) {\n            this.onDragEndHandler();\n            this._service.addToColumn(event, toColumn);\n        };\n        AjfReportBuilderRendererWidget.prototype.ngOnInit = function () {\n            var _this = this;\n            this._onDraggedSub = this._service.onDragged.subscribe(function (x) {\n                _this.onDragged = x;\n            });\n            this.getChartType = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget == null) {\n                    return 0;\n                }\n                var myObj = _this.widget;\n                return (myObj.chartType);\n            }), operators.distinctUntilChanged(), operators.startWith(0));\n            this.getDataset = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget != null && widget.dataset != null) {\n                    var myObj = _this.widget;\n                    return myObj.dataset;\n                }\n                else {\n                    return [];\n                }\n            }), operators.distinctUntilChanged());\n            this.getTableTitles = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget == null) {\n                    return [];\n                }\n                var myObj = _this.widget;\n                if (myObj.dataset != null) {\n                    var tableTitle = [];\n                    for (var i = 0; i < myObj.dataset.length; i++) {\n                        if (myObj.dataset[i][0] != null) {\n                            tableTitle.push(myObj.dataset[i][0].label || '');\n                        }\n                    }\n                    return tableTitle;\n                }\n                else {\n                    return [];\n                }\n            }));\n            this.getTableContent = this._service.currentWidget.pipe(operators.map(function (widget) {\n                if (widget == null) {\n                    return [];\n                }\n                var myObj = _this.widget;\n                if (myObj.dataset != null) {\n                    var tableContent = [];\n                    for (var i = 0; i < myObj.dataset.length; i++) {\n                        for (var j = 0; j < myObj.dataset[i].length; j++) {\n                            if ((myObj.dataset[i] != null) && (myObj.dataset[i][j + 1] != null)) {\n                                if (tableContent[j] == null) {\n                                    tableContent[j] = [];\n                                }\n                                if (tableContent[j][i] == null) {\n                                    tableContent[j][i] = ' ';\n                                }\n                                tableContent[j].splice(i, 1, myObj.dataset[i][j + 1].label || '');\n                            }\n                        }\n                    }\n                    return tableContent;\n                }\n                return [];\n            }));\n            this._service.updateCurrentWidget(this.widget);\n        };\n        AjfReportBuilderRendererWidget.prototype.ngOnChanges = function (changes) {\n            if (changes.widget && changes.widget.currentValue != null) {\n                this.widget = changes.widget.currentValue;\n            }\n        };\n        AjfReportBuilderRendererWidget.prototype.ngOnDestroy = function () {\n            this._onDraggedSub.unsubscribe();\n        };\n        AjfReportBuilderRendererWidget.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-renderer-widget',\n                        template: \"<div class=\\\"ajf-container\\\"\\n    [ngSwitch]=\\\"widget?.widgetType\\\"\\n    [ngClass]=\\\"{'ajf-drag-mode': (onDragged || fixedZoom)}\\\">\\n  <div *ngSwitchCase=\\\"widgetTypes.Layout\\\" class=\\\"ajf-row ajf-layout\\\"\\n    [applyStyles]=\\\"widget.styles\\\">\\n      <div class=\\\"ajf-columns\\\">\\n        <ng-template ngFor let-clm [ngForOf]=\\\"getColumnContent()\\\" let-idx=\\\"index\\\">\\n          <div class=\\\"ajf-column\\\"\\n            [ngClass]=\\\"{'ajf-fixed': layoutWidget.columns[idx] == -1}\\\"\\n            [style.width]=getPercent(idx)\\n            [applyStyles]=\\\"layoutWidget.content[idx].styles\\\">\\n            <ajf-report-builder-widgets-row-buttons\\n              [from]=\\\"'layout'\\\"\\n              [fromWidget]=\\\"widget\\\"\\n              [widget]=\\\"clm\\\"\\n              [position]=\\\"idx\\\"\\n              (onDragStart)=\\\"onDragStartHandler();\\\"\\n              (onDragEnd)=\\\"onDragEndHandler();\\\"\\n              [child]=\\\"true\\\">\\n            </ajf-report-builder-widgets-row-buttons>\\n            <ajf-column\\n              [column]=\\\"clm\\\"\\n              [applyStyles]=\\\"widget.styles\\\">\\n            </ajf-column>\\n            <ng-template [ngIf]=\\\"onDragged === true\\\">\\n              <div cdkDropList\\n                [cdkDropListEnterPredicate]=\\\"canDropPredicate\\\"\\n                [style.display]=\\\"onDragged ? 'block' : 'none'\\\"\\n                (cdkDropListDropped)=\\\"addToList($event, clm)\\\"\\n                class=\\\"ajf-column-drop-zone\\\"\\n                (dragover)=\\\"layoutShow = true;\\\"\\n                (dragleave)=\\\"layoutShow = false;\\\">\\n              </div>\\n            </ng-template>\\n          </div>\\n        </ng-template>\\n      </div>\\n  </div>\\n  <div *ngSwitchCase=\\\"widgetTypes.Image\\\" class=\\\"ajf-row\\\">\\n    <ajf-image\\n      [applyStyles]=\\\"widget.styles\\\"\\n      [type]=\\\"getImageType()\\\"\\n      [imageUrl]=\\\"getImageUrl()\\\"\\n      [icon]=\\\"getIcon()\\\"\\n      [flag]=\\\"getFlag()\\\">\\n    </ajf-image>\\n  </div>\\n  <div *ngSwitchCase=\\\"widgetTypes.Text\\\" class=\\\"ajf-row ajf-text\\\">\\n    <ajf-text [htmlText]=\\\"getHtmlText() | translate\\\"  [applyStyles]=\\\"widget.styles\\\"></ajf-text>\\n  </div>\\n  <div *ngSwitchCase=\\\"widgetTypes.Chart\\\" class=\\\"ajf-row\\\" [applyStyles]=\\\"widget.styles\\\">\\n  </div>\\n  <!-- <div *ngSwitchCase=\\\"widgetTypes.Table\\\" class=\\\"ajf-row\\\" [applyStyles]=\\\"widget.styles\\\">\\n    <ajf-table *ngIf=\\\"getTableContent|async as tc\\\" [data]=\\\"tc!\\\" ></ajf-table>\\n  </div> -->\\n  <div *ngSwitchCase=\\\"widgetTypes.Map\\\" class=\\\"ajf-row\\\" [applyStyles]=\\\"widget.styles\\\">\\n    <ajf-map [coordinate]=\\\"getCoordinate()\\\" [tileLayer]=\\\"getTileLayer()\\\" [attribution]=\\\"getAttribution()\\\">\\n    </ajf-map>\\n  </div>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-layout{border:none !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row{border:9px solid blue;border-radius:36px;height:100%}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns{border:9px solid red !important;height:100%;margin-bottom:20px;padding-bottom:20px;padding-top:20px}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-fixed{border:9px solid #ff0 !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column{border:9px solid #9acd32;margin-left:10px;margin-right:10px;border-radius:36px;height:100%}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column ajf-report-builder-widgets-row-buttons{visibility:visible !important;display:block !important}ajf-report-builder-renderer-widget .ajf-drag-mode .ajf-row .ajf-columns .ajf-column .ajf-container{min-height:50px}ajf-report-builder-renderer-widget .ajf-container{height:inherit;display:block;min-height:50px}ajf-report-builder-renderer-widget .ajf-row-button{width:100%}ajf-report-builder-renderer-widget .ajf-container:hover{border:3px dotted blue;border-radius:16px;opacity:1;min-height:50px}ajf-report-builder-renderer-widget .ajf-on-dragged{border:23px dotted blue}ajf-report-builder-renderer-widget .ajf-selected{background-color:red}ajf-report-builder-renderer-widget .ajf-show,ajf-report-builder-renderer-widget .ajf-on-drag-over{border:33px dotted blue;opacity:1 !important;z-index:10}ajf-report-builder-renderer-widget .ajf-no-obj{max-width:200px;max-height:200px;width:auto;height:auto}ajf-report-builder-renderer-widget .ajf-row{display:flex;flex-direction:column;height:100%}ajf-report-builder-renderer-widget .ajf-columns{display:flex;flex-direction:row}ajf-report-builder-renderer-widget .ajf-column{min-height:50px}ajf-report-builder-renderer-widget .ajf-column ajf-report-builder-widgets-row-buttons{visibility:hidden !important;display:none !important}ajf-report-builder-renderer-widget .ajf-column:hover{border:3px dashed #9acd32;border-radius:16px}ajf-report-builder-renderer-widget .ajf-column:hover ajf-report-builder-widgets-row-buttons{visibility:visible !important;display:block !important}ajf-report-builder-renderer-widget .ajf-column:hover .ajf-container{min-height:50px}ajf-report-builder-renderer-widget .ajf-fixed:hover{border:3px dashed red !important}ajf-report-builder-renderer-widget .ajf-fixed{min-width:100px}ajf-report-builder-renderer-widget .ajf-column-drop-zone{margin:10%;height:50px;background-color:#fff;border:9px solid rgba(66,134,244,.6);border-radius:16px}ajf-report-builder-renderer-widget .ajf-text{min-height:20px}ajf-report-builder-renderer-widget ajf-map{z-index:30}ajf-report-builder-renderer-widget ajf-column{width:100%}ajf-report-builder-renderer-widget button{width:100%}ajf-report-builder-renderer-widget mat-list{height:100%;padding:0}ajf-report-builder-renderer-widget .ajf-ui.ajf-fluid.ajf-image{max-width:100%;height:auto}ajf-report-builder-renderer-widget .ajf-column-right{float:right;width:33%;background-color:#8b4513}ajf-report-builder-renderer-widget .ajf-column-center{display:inline-block;width:33%;background-color:olive}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderRendererWidget.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderRendererWidget.propDecorators = {\n            widget: [{ type: core.Input }],\n            position: [{ type: core.Input }],\n            section: [{ type: core.Input }]\n        };\n        return AjfReportBuilderRendererWidget;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilder = /** @class */ (function () {\n        function AjfReportBuilder(_service) {\n            this._service = _service;\n            this._init = false;\n        }\n        Object.defineProperty(AjfReportBuilder.prototype, \"report\", {\n            get: function () {\n                return this._report;\n            },\n            set: function (report) {\n                if (report != null) {\n                    this._report = report;\n                    if (this._init) {\n                        this._setCurrentReport();\n                    }\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AjfReportBuilder.prototype.ngAfterContentInit = function () {\n            this._setCurrentReport();\n            this._init = true;\n        };\n        AjfReportBuilder.prototype._setCurrentReport = function () {\n            this._service.setReportForms(this.report != null ? this.report.forms || [] : []);\n            this._service.setReport(this.report);\n        };\n        AjfReportBuilder.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder',\n                        template: \"<ajf-report-builder-toolbar (addClick)=\\\"start.toggle()\\\"></ajf-report-builder-toolbar>\\n<ajf-report-builder-custom-widgets-toolbar (addClick)=\\\"start.toggle()\\\"></ajf-report-builder-custom-widgets-toolbar>\\n<mat-drawer-container>\\n    <mat-drawer #start position=\\\"start\\\" mode=\\\"side\\\" class=\\\"ajf-builder-sidebar\\\">\\n        <ajf-report-builder-widgets-toolbar></ajf-report-builder-widgets-toolbar>\\n    </mat-drawer>\\n    <ajf-report-builder-content></ajf-report-builder-content>\\n    <mat-drawer #end position=\\\"end\\\" mode=\\\"side\\\" class=\\\"ajf-builder-prop\\\" [opened]=\\\"true\\\">\\n      <ajf-report-builder-properties></ajf-report-builder-properties>\\n    </mat-drawer>\\n</mat-drawer-container>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder{display:block;position:relative;width:100%;height:100%;overflow:hidden}ajf-report-builder mat-sidenav-container{height:100%}ajf-report-builder mat-sidenav-container .ajf-builder-sidebar{max-width:7%}ajf-report-builder mat-sidenav-container .ajf-builder-prop{max-width:30%}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilder.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilder.propDecorators = {\n            startSidenav: [{ type: core.ViewChild, args: [sidenav.MatSidenav, { static: true },] }],\n            report: [{ type: core.Input }]\n        };\n        return AjfReportBuilder;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderThemeColorDialog = /** @class */ (function () {\n        function AjfReportBuilderThemeColorDialog(_service, _dialogRef) {\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n            this.currentWidget = null;\n            this.currentColor = 'rgb(255,255,255,0)';\n            this.section = 'color';\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderThemeColorDialog.prototype.setWidgetStyles = function (value) {\n            this._service.setWidgetStyles(this.section, value);\n            this.currentColor = value;\n            this.setStyle();\n        };\n        AjfReportBuilderThemeColorDialog.prototype.setStyle = function () {\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.currentWidget.styles = utils.deepCopy(this.currentWidget.styles);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        AjfReportBuilderThemeColorDialog.prototype.addCustomColor = function () {\n            this._service.addCustomColor(this.currentColor);\n            this._service.updateCurrentWidget(this.currentWidget);\n            this._dialogRef.close();\n        };\n        AjfReportBuilderThemeColorDialog.prototype.close = function () {\n            this._dialogRef.close();\n        };\n        AjfReportBuilderThemeColorDialog.prototype.ngOnInit = function () {\n            var _this = this;\n            this._currentWidgetSub = this._service.currentWidget.subscribe(function (x) {\n                if (x !== null) {\n                    if (_this.currentWidget !== x) {\n                        _this.currentWidget = x;\n                    }\n                }\n                else {\n                    _this.currentWidget = null;\n                }\n            });\n        };\n        AjfReportBuilderThemeColorDialog.prototype.ngAfterViewInit = function () {\n            this.elem.nativeElement.children[1].firstElementChild['style']['position'] = 'initial';\n        };\n        AjfReportBuilderThemeColorDialog.prototype.ngOnDestroy = function () {\n            this._currentWidgetSub.unsubscribe();\n        };\n        AjfReportBuilderThemeColorDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'theme-color-dialog',\n                        template: \"<div mat-dialog-content #colorpic>\\n   <input\\n          [hidden]=false\\n          [colorPicker]=\\\"currentColor\\\"\\n          [style.background]=\\\"currentColor\\\"\\n          [value]=\\\"currentColor\\\"\\n          [cpDialogDisplay]=\\\"'inline'\\\"\\n          [cpPosition]=\\\"'top'\\\"\\n          [cpToggle]=\\\"true\\\"\\n          [cpWidth]=\\\"'400px'\\\"\\n          [cpOutputFormat]=\\\"'rgba'\\\"\\n          (colorPickerChange)=\\\"setWidgetStyles($event)\\\"/>\\n</div>\\n<div mat-dialog-actions>\\n  <button mat-button (click)=\\\"addCustomColor()\\\">Save color</button>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderThemeColorDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        AjfReportBuilderThemeColorDialog.propDecorators = {\n            elem: [{ type: core.ViewChild, args: ['colorpic', { static: true },] }]\n        };\n        return AjfReportBuilderThemeColorDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    /**\n     * this component manages the report text\n     *\n     * @export\n     */\n    var AjfReportBuilderThemeColor = /** @class */ (function () {\n        function AjfReportBuilderThemeColor(_service, dialog) {\n            this._service = _service;\n            this.dialog = dialog;\n            this.currentWidget = null;\n            this.alphaColor = 1;\n            this.styleBackgroundColor = 'rgb(255,255,255,0)';\n            this.styleColor = 'rgb(0,0,0,0)';\n            this._colorsSub = rxjs.Subscription.EMPTY;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._originSub = rxjs.Subscription.EMPTY;\n            this._headerStyleSub = rxjs.Subscription.EMPTY;\n            this._contentStylesSub = rxjs.Subscription.EMPTY;\n            this._footerStylesSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderThemeColor.prototype.setStyles = function (value) {\n            switch (this.section) {\n                case 'widget':\n                    this.setWidgetStyles(value);\n                    break;\n                case 'report':\n                    this.setReportStyles(value);\n                    break;\n                case 'section':\n                    this.setSectionStyles(value);\n                    break;\n                case 'chart':\n                    this.setChartStyle(value);\n                    break;\n            }\n        };\n        AjfReportBuilderThemeColor.prototype.setChartStyle = function (value) {\n            if (this.label === 'backgroundColor') {\n                this.addChartBackgroundColor(value);\n            }\n            else {\n                this.addChartBorderColor(value);\n            }\n        };\n        AjfReportBuilderThemeColor.prototype.setAlphaColor = function (value) {\n            value = value.toFixed(2);\n            for (var i = 0; i < this.colors.length; i++) {\n                var lastComma = this.colors[i].lastIndexOf(',');\n                this.colors[i] = this.colors[i].substring(0, lastComma) + ',' + value + ')';\n            }\n        };\n        /**\n         * call to service to add new style to widget\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.setWidgetStyles = function (value) {\n            if (this.section === 'chart') {\n                this.setChartStyle(value);\n            }\n            else {\n                this._service.setWidgetStyles(this.label, value);\n                this.currentColor = value;\n                this.setStyle();\n            }\n        };\n        /**\n         * call to service to add new style to section\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.setSectionStyles = function (value) {\n            this._service.setSectionStyles(this.origin, this.label, value);\n            this.styleColor = value;\n        };\n        /**\n         * call to service to add new style to report\n         *\n         * @param label\n         * @param value\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.setReportStyles = function (value) {\n            this._service.setReportStyles(this.label, value);\n            this.styleBackgroundColor = value;\n        };\n        /**\n         * call to service to add background color to current chart\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.addChartBackgroundColor = function (value) {\n            this._service.addChartBackgroundColor(value);\n        };\n        /**\n         * call to service to add border color to current chart\n         *\n         *\n         * @memberOf AjfReportBuilderProperties\n         */\n        AjfReportBuilderThemeColor.prototype.addChartBorderColor = function (value) {\n            this._service.addChartBorderColor(value);\n        };\n        AjfReportBuilderThemeColor.prototype.setStyle = function () {\n            if (this.currentWidget == null) {\n                return;\n            }\n            this.currentWidget.styles = utils.deepCopy(this.currentWidget.styles);\n            this._service.updateCurrentWidget(this.currentWidget);\n        };\n        AjfReportBuilderThemeColor.prototype.openDialog = function () {\n            this.dialogRef = this.dialog.open(AjfReportBuilderThemeColorDialog);\n        };\n        AjfReportBuilderThemeColor.prototype.ngOnInit = function () {\n            var _this = this;\n            this._colorsSub = this._service.colors.subscribe(function (x) {\n                _this.colors = x;\n            });\n            this._currentWidgetSub = this._service.currentWidget.subscribe(function (x) {\n                if (x != null) {\n                    if (_this.currentWidget !== x) {\n                        _this.currentWidget = x;\n                    }\n                }\n                else {\n                    _this.currentWidget = null;\n                }\n            });\n            this.getColorWidget = this._service.currentWidget.pipe(operators.map(function (myObj) {\n                if (myObj != null) {\n                    return myObj.styles['color'] || '';\n                }\n            }), operators.distinctUntilChanged());\n            this._originSub = this._service.origin.subscribe(function (s) {\n                _this.origin = s;\n            });\n            this._headerStyleSub = this._service.headerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._contentStylesSub = this._service.contentStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n            this._footerStylesSub = this._service.footerStyles.subscribe(function (s) {\n                if (s['background-color'] != null) {\n                    _this.styleBackgroundColor = s['background-color'];\n                }\n            });\n        };\n        AjfReportBuilderThemeColor.prototype.ngOnDestroy = function () {\n            this._colorsSub.unsubscribe();\n            this._currentWidgetSub.unsubscribe();\n            this._originSub.unsubscribe();\n            this._headerStyleSub.unsubscribe();\n            this._contentStylesSub.unsubscribe();\n            this._footerStylesSub.unsubscribe();\n        };\n        AjfReportBuilderThemeColor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-theme-color',\n                        template: \"<mat-card style=\\\"width:90%\\\">\\n  <mat-card-header>\\n    <mat-card-title> {{ label }} Trasparency</mat-card-title>\\n  </mat-card-header>\\n  <mat-card-content>\\n       <mat-slider\\n      style=\\\"width:90%\\\"\\n      (change)=\\\"setAlphaColor($event.value)\\\"\\n      min=\\\"0\\\"\\n      max=\\\"1\\\"\\n      step=\\\"0.1\\\"\\n      [value]=\\\"alphaColor\\\"\\n      thumbLabel>\\n    </mat-slider>\\n  </mat-card-content>\\n</mat-card>\\n<mat-card style=\\\"width:90%\\\">\\n  <mat-card-header>\\n    <mat-card-title> {{ label }} </mat-card-title>\\n  </mat-card-header>\\n  <mat-card-content>\\n    <mat-grid-list\\n      cols=\\\"8\\\"\\n      rowHeight=\\\"25px\\\">\\n      <mat-grid-tile\\n        *ngFor=\\\"let color of colors\\\"\\n        [colspan]=\\\"1\\\"\\n        [rowspan]=\\\"1\\\"\\n        [style.background]=\\\"color\\\">\\n        <button\\n          style=\\\"height:100%\\\"\\n          (click)=\\\"setStyles(color)\\\"\\n          mat-button>\\n        </button>\\n      </mat-grid-tile>\\n    </mat-grid-list>\\n  </mat-card-content>\\n  <mat-card-actions>\\n    <button mat-button (click)=\\\"openDialog()\\\" style=\\\"width:90%;\\\">Add color</button>\\n    <button mat-button (click)=\\\"setStyles('')\\\" style=\\\"width:90%\\\"> Reset </button>\\n  </mat-card-actions>\\n</mat-card>\\n\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderThemeColor.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        AjfReportBuilderThemeColor.propDecorators = {\n            section: [{ type: core.Input }],\n            label: [{ type: core.Input }],\n            init: [{ type: core.Input }]\n        };\n        return AjfReportBuilderThemeColor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderToolbarDialog = /** @class */ (function () {\n        function AjfReportBuilderToolbarDialog(_service, _dialogRef) {\n            this._service = _service;\n            this._dialogRef = _dialogRef;\n        }\n        AjfReportBuilderToolbarDialog.prototype.resetReport = function () {\n            var emptyReport = {\n                'header': { 'content': [], 'styles': {} },\n                'content': { 'content': [], 'styles': {} },\n                'footer': { 'content': [], 'styles': {} },\n                'styles': {}\n            };\n            this._service.setReport(emptyReport);\n            this._dialogRef.close();\n        };\n        AjfReportBuilderToolbarDialog.prototype.close = function () {\n            this._dialogRef.close();\n        };\n        AjfReportBuilderToolbarDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'toolbar-dialog',\n                        template: \"<h1 matDialogTitle>Dialog</h1>\\n<div mat-dialog-content>Are you sure you want to erase the report?</div>\\n<div mat-dialog-actions>\\n  <button mat-button (click)=\\\"resetReport()\\\">Yes</button>\\n  <button mat-button (click)=\\\"close()\\\">No</button>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderToolbarDialog.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        return AjfReportBuilderToolbarDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderToolbar = /** @class */ (function () {\n        function AjfReportBuilderToolbar(_service, dialog) {\n            this._service = _service;\n            this.dialog = dialog;\n            // this is an any EventEmitter\n            this.addClick = new core.EventEmitter();\n            this.zoom = false;\n            this.emptyContent = this._service.emptyContent;\n        }\n        AjfReportBuilderToolbar.prototype.canDropPredicate = function (item) {\n            return item.data.dropZones.indexOf('widget') > -1;\n        };\n        AjfReportBuilderToolbar.prototype.JSONRequest = function () { };\n        /**\n         * this method will pass event to event emitter\n         */\n        AjfReportBuilderToolbar.prototype.onAddClick = function (event) {\n            this.addClick.emit(event);\n        };\n        AjfReportBuilderToolbar.prototype.addToList = function (event) {\n            if (event.item.data.widget != null) {\n                this._service.addCustomWidgets({ json: JSON.stringify(event.item.data.widget.toJson()), type: '' });\n            }\n        };\n        AjfReportBuilderToolbar.prototype.undoLastOperation = function () {\n            try {\n                var myObj = JSON.parse(this._service.popJsonStack() || '');\n                this._service.setReport(utils.deepCopy(myObj));\n            }\n            catch (e) {\n            }\n        };\n        AjfReportBuilderToolbar.prototype.isZoomed = function () {\n            this.zoom = !this.zoom;\n            if (this.zoom) {\n                this._service.fixedZoomIn();\n            }\n            else {\n                this._service.fixedZoomOut();\n            }\n        };\n        AjfReportBuilderToolbar.prototype.openDialog = function () {\n            this.dialogRef = this.dialog.open(AjfReportBuilderToolbarDialog);\n        };\n        AjfReportBuilderToolbar.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-toolbar',\n                        outputs: ['addClick'],\n                        template: \"<mat-toolbar>\\n  <button\\n    mat-button\\n    (click)=\\\"onAddClick($event)\\\"\\n    matTooltip=\\\"open widget sidebar\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">\\n    Open\\n  </button>\\n  <button\\n    mat-button\\n    (click)=\\\"openDialog()\\\"\\n    matTooltip=\\\"reset the current report\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">reset\\n  </button>\\n  <button\\n    mat-button\\n    (click)=\\\"undoLastOperation()\\\"\\n    matTooltip=\\\"undo the last operation\\\"\\n    [disabled]=\\\"emptyContent|async\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">Undo</button>\\n\\n  <button mat-button\\n    class=\\\"ajf-custom-widget-drop-zone\\\"\\n    cdkDropList\\n    [cdkDropListEnterPredicate]=\\\"canDropPredicate\\\"\\n    (cdkDropListDropped)=\\\"addToList($event);\\\"\\n    matTooltip=\\\"add custom widget on toolbar\\\"\\n    [matTooltipPosition]=\\\"'above'\\\">\\n    add custom widget here\\n    <i class=\\\"material-icons\\\">add_circle_outline</i>\\n  </button>\\n  <section class=\\\"example-section\\\">\\n    <mat-slide-toggle\\n        [checked]=\\\"zoom\\\"\\n        (change)=isZoomed()\\n        matTooltip=\\\"apply zoom out\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n      zoom out\\n    </mat-slide-toggle>\\n  </section>\\n</mat-toolbar>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-toolbar a{margin-right:10px}ajf-report-builder-toolbar .ajf-custom-widget-drop-zone{position:absolute;right:0;background-color:#90ee90}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderToolbar.ctorParameters = function () { return [\n            { type: AjfReportBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        return AjfReportBuilderToolbar;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderWidgetToolbarButton = /** @class */ (function () {\n        function AjfReportBuilderWidgetToolbarButton() {\n        }\n        AjfReportBuilderWidgetToolbarButton.prototype.ngOnInit = function () {\n            this.widgetIcon = ajfReportBuilderWidgetToString(this.widgetType);\n        };\n        AjfReportBuilderWidgetToolbarButton.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-widget-toolbar-button',\n                        template: \"<button\\n  mat-button\\n  matTooltip=\\\"{{ widgetType}}\\\"\\n  [matTooltipPosition]=\\\"'above'\\\">\\n  <mat-icon\\n    fontSet=\\\"ajf-icon\\\"\\n    fontIcon=\\\"{{ widgetIcon }}\\\">\\n  </mat-icon>\\n</button>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-widget-toolbar-button button mat-icon{font-size:35px;padding-top:10px;padding-bottom:10px;padding-right:20px;color:#3f51b5}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderWidgetToolbarButton.ctorParameters = function () { return []; };\n        AjfReportBuilderWidgetToolbarButton.propDecorators = {\n            widgetType: [{ type: core.Input }]\n        };\n        return AjfReportBuilderWidgetToolbarButton;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderWidgetsRowButtons = /** @class */ (function () {\n        /**\n         *\n         * @param private _afjBuilderService: AjfBuilderService\n         */\n        function AjfReportBuilderWidgetsRowButtons(_service) {\n            this._service = _service;\n            this.isOver = false;\n            this.currentWidget = null;\n            this.isClicked = false;\n            this.color = [];\n            // this boolean sign if is dragged a widget\n            this.onDragged = false;\n            // this boolean sign if is on over a widget\n            this.onOver = false;\n            this._currentWidgetSub = rxjs.Subscription.EMPTY;\n            this._onDraggedSub = rxjs.Subscription.EMPTY;\n            this._onOverSub = rxjs.Subscription.EMPTY;\n        }\n        AjfReportBuilderWidgetsRowButtons.prototype.selectedWidget = function () {\n            this.isClicked = !this.isClicked;\n            this._service.setOrigin(this.from);\n            this._service.updateCurrentWidget(this.widget);\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.remove = function () {\n            if (this.fromWidget != null) {\n                this._service.updateCurrentWidget(this.fromWidget);\n            }\n            this._service.remove(this.from, this.position);\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.onFocus = function () {\n            if (this.widget === this.currentWidget) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.changeColumn = function (direction) {\n            if (direction == 'back') {\n                this._service.changeColumn(this.position, this.position - 1, this.fromWidget);\n            }\n            else {\n                this._service.changeColumn(this.position, this.position + 1, this.fromWidget);\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.isColumn = function () {\n            if (this.label === 'Column') {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.isOneColumn = function () {\n            var rootObj = this.fromWidget;\n            if (rootObj.columns.length > 1) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.ngOnInit = function () {\n            var _this = this;\n            this.label = reports.AjfWidgetType[this.widget.widgetType];\n            this.widgetIcon = widgetReportBuilderIconName(this.widget.widgetType);\n            this.widgetLabel = ajfWidgetTypeToLabel(this.widget.widgetType);\n            this._onDraggedSub = this._service.onDragged.subscribe(function (x) {\n                _this.onDragged = x;\n            });\n            this._onOverSub = this._service.onOver.subscribe(function (x) {\n                _this.onOver = x;\n            });\n            this._currentWidgetSub = this._service.currentWidget.subscribe(function (x) {\n                _this.currentWidget = x;\n                if (x !== _this.widget) {\n                    _this.isClicked = false;\n                }\n            });\n        };\n        AjfReportBuilderWidgetsRowButtons.prototype.ngOnDestroy = function () {\n            this._onDraggedSub.unsubscribe();\n            this._onOverSub.unsubscribe();\n            this._currentWidgetSub.unsubscribe();\n        };\n        AjfReportBuilderWidgetsRowButtons.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-widgets-row-buttons',\n                        template: \"<div class=\\\"ajf-container\\\" *ngIf=\\\"onOver || onDragged\\\">\\n  <div class=\\\"ajf-button-row\\\">\\n    <ng-template [ngIf]=\\\"isColumn() && onDragged == false\\\">\\n      <span\\n        (click)=\\\"changeColumn('forward')\\\"\\n        matTooltip=\\\"move right\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n        <i class=\\\"material-icons\\\">arrow_forward</i>\\n      </span>\\n    </ng-template>\\n    <ng-template [ngIf]=\\\"(isColumn()== false && onDragged == true) || true\\\">\\n      <span mat-button\\n        [ngClass]=\\\"{'ajf-selected': onFocus()}\\\"\\n        matTooltip=\\\"{{label}}\\\"\\n        [matTooltipPosition]=\\\"'above'\\\"\\n        (click)=\\\"selectedWidget()\\\">\\n        <ng-template [ngIf]=\\\"isColumn()\\\">\\n        <i class=\\\"material-icons\\\" >settings</i>\\n        </ng-template>\\n        <ng-template [ngIf]=\\\"(isColumn()) ? false : true\\\">\\n          <mat-icon\\n            fontSet=\\\"ajf-icon\\\"\\n            fontIcon=\\\"{{ widgetIcon }}\\\">\\n          </mat-icon>\\n        </ng-template>\\n      </span>\\n      <span\\n        mat-button\\n        matTooltip=\\\"remove\\\"\\n        (click)=\\\"remove()\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n        <mat-icon>remove_circle_outline</mat-icon>\\n      </span>\\n    </ng-template>\\n    <ng-template [ngIf]=\\\"isColumn() && onDragged == false\\\">\\n      <span\\n        (click)=\\\"changeColumn('back')\\\"\\n        matTooltip=\\\"move left\\\"\\n        [matTooltipPosition]=\\\"'above'\\\">\\n        <i class=\\\"material-icons\\\">arrow_back</i>\\n      </span>\\n    </ng-template>\\n  </div>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-report-builder-widgets-row-buttons{position:relative;display:block}ajf-report-builder-widgets-row-buttons .ajf-container{height:30px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row{margin:0;width:100% !important;padding:0;position:absolute;right:0;display:flex;flex-direction:row-reverse;z-index:50;overflow-x:auto;background-color:rgba(144,238,144,.6);color:#000 !important;border-radius:16px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row button,ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row span{flex-flow:wrap row;margin-right:10px;cursor:pointer}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row button mat-icon,ajf-report-builder-widgets-row-buttons .ajf-container .ajf-button-row span mat-icon{margin-top:5px;font-size:20px}ajf-report-builder-widgets-row-buttons .ajf-container .ajf-selected{background-color:#3b623b;color:#81d481}\\n\"]\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderWidgetsRowButtons.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        AjfReportBuilderWidgetsRowButtons.propDecorators = {\n            from: [{ type: core.Input }],\n            fromWidget: [{ type: core.Input }],\n            position: [{ type: core.Input }],\n            widget: [{ type: core.Input }],\n            child: [{ type: core.Input }],\n            isOver: [{ type: core.Input }]\n        };\n        return AjfReportBuilderWidgetsRowButtons;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderWidgetsToolbar = /** @class */ (function () {\n        /**\n         *\n         * @param private _afjBuilderService: AjfBuilderService\n         */\n        function AjfReportBuilderWidgetsToolbar(_service) {\n            this._service = _service;\n            // fieldTypes is an array string that contains the field options\n            this.chartTypes = utils.sizedEnumToStringArray(reports.AjfChartType);\n            this.widgetTypes = utils.sizedEnumToStringArray(reports.AjfWidgetType);\n            // delete Column widget\n            var pos = this.widgetTypes.indexOf('Column');\n            if (pos !== -1) {\n                this.widgetTypes.splice(pos, 1);\n            }\n        }\n        /**\n         *  sign the start of mouse drag with 200 ms of delay\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderWidgetsToolbar.prototype.onDragStartHandler = function () {\n            var _this = this;\n            var s = rxjs.timer(200).subscribe(function () {\n                if (s != null) {\n                    s.unsubscribe();\n                }\n                _this._service.dragStarted();\n            });\n        };\n        /**\n         * sign the end of mouse drag\n         *\n         * @memberOf AjfReportBuilderContent\n         */\n        AjfReportBuilderWidgetsToolbar.prototype.onDragEndHandler = function () {\n            this._service.dragEnded();\n        };\n        AjfReportBuilderWidgetsToolbar.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-report-builder-widgets-toolbar',\n                        template: \"<mat-list>\\n  <mat-list-item *ngFor=\\\"let t of widgetTypes\\\">\\n    <ajf-report-builder-widget-toolbar-button ng-if=\\\"t != 'Column'\\\"\\n        cdkDrag\\n        [cdkDragData]=\\\"{widgetType: t, dropZones: ['header','content','footer','column','widget']}\\\"\\n        [widgetType]=\\\"t\\\"\\n        (onDragStart)=\\\"onDragStartHandler();\\\"\\n        (onDragEnd)=\\\"onDragEndHandler();\\\">\\n    </ajf-report-builder-widget-toolbar-button>\\n  </mat-list-item>\\n</mat-list>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush\n                    }] }\n        ];\n        /** @nocollapse */\n        AjfReportBuilderWidgetsToolbar.ctorParameters = function () { return [\n            { type: AjfReportBuilderService }\n        ]; };\n        return AjfReportBuilderWidgetsToolbar;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfReportBuilderModule = /** @class */ (function () {\n        function AjfReportBuilderModule() {\n        }\n        AjfReportBuilderModule.decorators = [\n            { type: core.NgModule, args: [{\n                        imports: [\n                            common.AjfCommonModule, image.AjfImageModule, map.AjfMapModule, monacoEditor.AjfMonacoEditorModule,\n                            table.AjfTableModule, text.AjfTextModule, ngxColorPicker.ColorPickerModule, common$1.CommonModule,\n                            dragDrop.DragDropModule, forms.FormsModule, button.MatButtonModule, buttonToggle.MatButtonToggleModule,\n                            card.MatCardModule, dialog.MatDialogModule, gridList.MatGridListModule, icon.MatIconModule,\n                            list.MatListModule, select.MatSelectModule, sidenav.MatSidenavModule, slideToggle.MatSlideToggleModule,\n                            slider.MatSliderModule, tabs.MatTabsModule, toolbar.MatToolbarModule, tooltip.MatTooltipModule,\n                            core$1.TranslateModule,\n                        ],\n                        declarations: [\n                            AjfImageFilterPipe,\n                            AjfQuillEditor,\n                            AjfReportBuilderColumn,\n                            AjfReportBuilderConditionEditor,\n                            AjfReportBuilderContent,\n                            AjfReportBuilderCustomWidgetDialog,\n                            AjfReportBuilderCustomWidgetsToolbar,\n                            AjfReportBuilderCustomWidgetToolbarButton,\n                            AjfReportBuilderFormsAnalyzer,\n                            AjfReportBuilderFormsAnalyzerDialog,\n                            AjfReportBuilderImageGroup,\n                            AjfReportBuilderProperties,\n                            AjfReportBuilderRendererWidget,\n                            AjfReportBuilderThemeColor,\n                            AjfReportBuilderThemeColorDialog,\n                            AjfReportBuilderToolbar,\n                            AjfReportBuilderToolbarDialog,\n                            AjfReportBuilderWidgetsRowButtons,\n                            AjfReportBuilderWidgetsToolbar,\n                            AjfReportBuilderWidgetToolbarButton,\n                            AjfReportBuilder,\n                        ],\n                        exports: [\n                            AjfReportBuilder,\n                        ],\n                        providers: [\n                            AjfReportBuilderService,\n                        ]\n                    },] }\n        ];\n        return AjfReportBuilderModule;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.AJF_REPORTS_CONFIG = AJF_REPORTS_CONFIG;\n    exports.AjfReportBuilder = AjfReportBuilder;\n    exports.AjfReportBuilderModule = AjfReportBuilderModule;\n    exports.AjfReportBuilderService = AjfReportBuilderService;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_a = AjfImageFilterPipe;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_b = AjfQuillEditor;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_c = AjfReportBuilderColumn;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_d = AjfReportBuilderConditionEditor;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_e = AjfReportBuilderContent;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_f = AjfReportBuilderCustomWidgetDialog;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_g = AjfReportBuilderCustomWidgetsToolbar;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_h = AjfReportBuilderCustomWidgetToolbarButton;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_i = AjfReportBuilderFormsAnalyzer;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_j = AjfReportBuilderFormsAnalyzerDialog;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_k = AjfReportBuilderImageGroup;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_l = AjfReportBuilderProperties;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_m = AjfReportBuilderRendererWidget;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_n = AjfReportBuilderThemeColor;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_o = AjfReportBuilderThemeColorDialog;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_p = AjfReportBuilderToolbar;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_q = AjfReportBuilderToolbarDialog;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_r = AjfReportBuilderWidgetsRowButtons;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_s = AjfReportBuilderWidgetsToolbar;\n    exports.ɵgc_ajf_src_material_report_builder_report_builder_t = AjfReportBuilderWidgetToolbarButton;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=material-report-builder.umd.js.map\n"]}