{"version":3,"sources":["src/material/material-form-builder.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ajf","material","formBuilder","ng","monacoEditor","nodeIcon","cdk","dragDrop","common","core","forms","autocomplete","button","card","checkbox","chips","dialog","formField","icon","input","list","menu","select","sidenav","slider","table","toolbar","tooltip","ngxTranslate","collections","rxjs","operators","models","utils","keycodes","this","core$1","forms$1","AjfFbBranchLine","_el","_renderer","_offset","_height","Object","defineProperty","prototype","set","offset","_updateOffset","enumerable","configurable","color","_color","_updateColor","height","_updateHeight","Math","max","setStyle","nativeElement","margin","decorators","type","Component","args","selector","template","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","styles","ctorParameters","ElementRef","Renderer2","propDecorators","Input","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","i","n","arguments","length","call","apply","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","__spread","concat","ChoicesOriginDataSource","_super","_this","_choices","BehaviorSubject","_choicesObs","asObservable","__extends","__","constructor","create","connect","disconnect","updateChoices","choices","DataSource","AjfFbChoicesOriginEditor","_displayedColumns","editing","_choicesArr","get","_choicesOrigin","choicesOrigin","name","label","canEditChoices","isChoicesFixedOrigin","updateValue","evt","cell","_value","rowIdx","target","deleteRow","splice","addRow","getNodeContainer","c","node","nodes","indexOf","cns","filter","isContainerNode","len","cn","buildFormBuilderNodesSubtree","parent","ignoreConditionalBranches","entries","id","sort","n1","n2","parentNode","map","children","content","buildFormBuilderNodesContent","cbs","conditionalBranches","_nodes","flattenNodes","flatNodes","forEach","getDescendants","branch","deleteNodeSubtree","delNodes","descendants","removeNodes","ids","nodeUniqueId","AjfFormBuilderService","_availableNodeTypes","fontSet","fontIcon","nodeType","AjfNodeType","AjfSlide","isSlide","AjfRepeatingSlide","AjfField","field","AjfFieldType","String","Text","Number","Boolean","SingleChoice","MultipleChoice","Formula","Date","DateInput","Time","Table","_form","_formObs","_editedNodeEntry","_editedNodeEntryObs","_editedCondition","_editedConditionObs","_editedChoicesOrigin","_editedChoicesOriginObs","_beforeNodesUpdate","EventEmitter","_beforeNodesUpdateObs","_afterNodeUpdate","_afterNodeUpdateObs","_nodesUpdates","Subject","_attachmentsOriginsUpdates","_choicesOriginsUpdates","_stringIdentifierUpdates","_saveNodeEntryEvent","_deleteNodeEntryEvent","_initChoicesOriginsStreams","_initAttachmentsOriginsStreams","_initStringIdentifierStreams","_initNodesStreams","_initFormStreams","_initSaveNode","_initDeleteNode","_attachmentsOrigins","_choicesOrigins","_stringIdentifier","_flatNodes","_flatFields","_nodeEntriesTree","setForm","form","getValue","editNodeEntry","nodeEntry","editCondition","condition","saveCurrentCondition","cancelConditionEdit","insertNode","inContent","isFieldNode","createField","fieldType","createContainerNode","emit","replaceNodes","newNodes","slice","saveNodeEntry","properties","cancelNodeEntryEdit","deleteNodeEntry","getCurrentForm","combineLatest","attachmentsOrigins","choicesOrigins","stringIdentifier","pipe","_a","_b","createForm","supplementaryInformations","editChoicesOrigin","createChoicesOrigin","createChoicesFixedOrigin","cancelChoicesOriginEdit","saveChoicesOrigin","params","idx","saveStringIdentifier","identifier","_findMaxNodeId","_curMaxId","maxId","subscribe","_","scan","op","publishReplay","refCount","buildFormBuilderNodesTree","rootNodes","rootNode","isSlidesNode","tree","container","Error","withLatestFrom","editedNodeEntry","ne","origNode","deepCopy","visibility","createCondition","oldConditionalBranches","alwaysCondition","newConditionalBranches","isRepeatingContainerNode","repNode","formulaReps","createFormula","formula","undefined","minReps","maxReps","isField","description","defaultValue","forceValue","notEmpty","validationConditions","minValue","parseInt","maxValue","minDigits","maxDigits","isNaN","validation","createValidationGroup","notEmptyValidation","minValidation","maxValidation","minDigitsValidation","maxDigitsValidation","conditions","createValidation","errorMessage","notEmptyWarn","notEmptyWarning","warningConditions","warning","createWarningGroup","w","createWarning","warningMessage","nextSlideCondition","size","isFieldWithChoices","fwc","choicesOriginRef","forceExpanded","forceNarrow","triggerConditions","Injectable","AjfFbChoicesOriginEditorDialog","_service","editedChoicesOrigin","editor","choicesArr","ViewChild","static","AjfFbConditionEditor","_fields","fields","_updateVariables","insertVariable","variable","split","position","getPosition","ln","lineNumber","line","col","column","substring","join","setPosition","focus","editedValue","onEditorInit","monaco","languages","typescript","javascriptDefaults","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","setCompilerOptions","ScriptTarget","ES2015","allowNonTsExtensions","allowJs","ModuleKind","addExtraLib","_extraLibs","_updateFunctions","_fieldVarType","AjfExpressionUtils","UTIL_FUNCTIONS","Empty","AjfValidationService","AjfMonacoEditor","AjfFbConditionEditorDialog","service","dialogRef","flatFields","f1","f2","localeCompare","saveCondition","close","MatDialogRef","AjfFbStringIdentifierDialogComponent","_cdr","dataSource","MatTableDataSource","displayedColumns","separatorKeysCodes","ENTER","COMMA","_stringIdentifierSub","Subscription","EMPTY","data","fields$","f","shareReplay","addValue","row","valueInput","markForCheck","removeValue","ngOnDestroy","unsubscribe","selected","option","ChangeDetectorRef","AjfFormBuilder","_dialog","_vc","_init","_editConditionSub","_beforeNodesUpdateSub","_editChoicesOriginSub","_nodeTypes","availableNodeTypes","nodeEntriesTree","editedCondition","_editConditionDialog","open","disableClose","_editChoicesOriginDialog","beforeNodesUpdate","designerCont","_lastScrollTop","scrollTop","sample","_setCurrentForm","ngAfterViewChecked","ngAfterContentInit","disableDropPredicate","editStringIdentifier","_stringIdentifierDialog","width","MatDialog","branchColors","AjfFbNodeEntry","_hasContent","_isFirst","_isNodeEntry","_level","_branchColors","_dropZones","_slideDropZones","_originOffset","_originLeftMargin","_firstBranchColor","_branchLinesSubscription","_childEntriesSubscription","_currentEditedNode","isFirst","_nodeEntry","originOffset","firstBranchColor","onResize","edit","isNodeEntry","delete","ngAfterViewInit","setTimeout","_updateBranchHeights","childEntries","changes","onDropSuccess","dd","item","emptySlot","disableSlideDropPredicate","emptyAreaDropPredicate","_drop","branchLines","toArray","sliceIdx","bl","offsetTop","host","(window.resize)","ViewChildren","read","level","AjfFbValidationConditionEditorDialog","AjfFbWarningConditionEditorDialog","checkRepsValidity","reps","checkValueLimitsValidity","valueLimit","checkDigitsValidity","digits","AjfFbNodeProperties","_fb","_fieldSizes","_conditionalBranches","_validationConditions","_warningConditions","_visibilityOptSub","_visibilitySub","_conditionalBranchesSub","_formulaRepsSub","_choicesFilterSub","_formulaSub","_forceValueSub","_validationConditionsSub","_warningConditionsSub","_nextSlideConditionSub","_choicesOriginsSub","_triggerConditionsSub","_editConditionDialogSub","_editValidationConditionDialogSub","_editWarningConditionDialogSub","_editVisibilityEvt","_editVisibilitySub","_editConditionalBranchEvt","_editConditionalBranchSub","_editFormulaRepsEvt","_editFormulaRepsSub","_editChoicesFilterEvt","_editChoicesFilterSub","_editFormulaEvt","_editFormulaSub","_editForceValueEvt","_editForceValueSub","_editValidationConditionEvt","_editValidationConditionSub","_addValidationConditionEvt","_addValidationConditionSub","_removeValidationConditionEvt","_removeValidationConditionSub","_editWarningConditionEvt","_editWarningConditionSub","_addWarningConditionEvt","_addWarningConditionSub","_removeWarningConditionEvt","_removeWarningConditionSub","_editNextSlideConditionEvt","_editNextSlideConditionSub","_editTriggerConditionEvt","_editTriggerConditionSub","_addTriggerConditionEvt","_addTriggerConditionSub","_removeTriggerConditionEvt","_removeTriggerConditionSub","_saveEvt","_saveSub","_enabled","_initForm","_initVisibilityEdit","_initConditionalBranchEdit","_initFormulaRepsEdit","_initChoicesFilterEdit","_initFormulaEdit","_initForceValueEdit","_initValidationConditionEdit","_initAddValidationCondition","_initRemoveValidationCondition","_initWarningConditionEdit","_initAddWarningCondition","_initRemoveWarningCondition","_initNextSlideConditionEdit","_initTriggerConditionEdit","_initAddTriggerCondition","_initRemoveTriggerCondition","_initSave","_propertiesForm","_hasChoices","_curVisibility","_curFormulaReps","_curChoicesFilter","_curForceValue","_curFormula","_nextSlideCondition","_triggerConditions","editVisibility","editConditionalBranch","editFormulaReps","editChoicesFilter","editFormula","editForceValue","editValidationCondition","addValidationCondition","removeValidationCondition","editWarningCondition","addWarningCondition","removeWarningCondition","editNextSlideCondition","editTriggerCondition","addTriggerCondition","removeTriggerCondition","isNumericField","isNumberField","save","cancel","propertiesForm","val","visibilityOpt","_guessVisibilityOpt","controls","Validators","required","conditionalBranchesNum","validators","rn","notEmptyW","numField","replace","fieldWithChoices","choicesFilter","fg","group","setValidators","_handleConditionalBranchesChange","_handleVisibilityChange","_handleFormulaRepsChange","_handleChoicesFilterChange","_handleFormulaChange","_handleForceValueChange","_handleValidationCondtionsChange","_handleWarningCondtionsChange","_handleNextSlideConditionChange","_handleTriggerCondtionsChange","_destroyConditionDialog","_destroyValidationConditionDialog","_editValidationConditionDialog","_destroyWarningConditionDialog","_editWarningConditionDialog","vcIdx","formGroup","ctrl","vcs","setValue","componentInstance","afterClosed","cond","cmp","v","cbIdx","valueChanges","distinctUntilChanged","v1","v2","JSON","stringify","cbNum","curCbNum","newCbs","newCondition","neverCondition","FormBuilder","AjfFbNodeTypeEntry","_nodeType","AjfFormBuilderModule","NgModule","imports","AjfMonacoEditorModule","AjfNodeIconModule","CommonModule","DragDropModule","FormsModule","MatAutocompleteModule","MatButtonModule","MatCardModule","MatCheckboxModule","MatChipsModule","MatDialogModule","MatFormFieldModule","MatIconModule","MatInputModule","MatListModule","MatMenuModule","MatSelectModule","MatSidenavModule","MatSliderModule","MatTableModule","MatToolbarModule","MatTooltipModule","ReactiveFormsModule","TranslateModule","declarations","providers","ɵgc_ajf_src_material_form_builder_form_builder_a","ɵgc_ajf_src_material_form_builder_form_builder_b","ɵgc_ajf_src_material_form_builder_form_builder_c","ɵgc_ajf_src_material_form_builder_form_builder_d","ɵgc_ajf_src_material_form_builder_form_builder_e","ɵgc_ajf_src_material_form_builder_form_builder_f","ɵgc_ajf_src_material_form_builder_form_builder_g","ɵgc_ajf_src_material_form_builder_form_builder_h","ɵgc_ajf_src_material_form_builder_form_builder_i","ɵgc_ajf_src_material_form_builder_form_builder_j","ɵgc_ajf_src_material_form_builder_form_builder_k"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@ajf/material/monaco-editor'), require('@ajf/material/node-icon'), require('@angular/cdk/drag-drop'), require('@angular/common'), require('@angular/core'), require('@angular/forms'), require('@angular/material/autocomplete'), require('@angular/material/button'), require('@angular/material/card'), require('@angular/material/checkbox'), require('@angular/material/chips'), require('@angular/material/dialog'), require('@angular/material/form-field'), require('@angular/material/icon'), require('@angular/material/input'), require('@angular/material/list'), require('@angular/material/menu'), require('@angular/material/select'), require('@angular/material/sidenav'), require('@angular/material/slider'), require('@angular/material/table'), require('@angular/material/toolbar'), require('@angular/material/tooltip'), require('@ngx-translate/core'), require('@ajf/core/forms'), require('@angular/cdk/collections'), require('rxjs'), require('rxjs/operators'), require('@ajf/core/models'), require('@ajf/core/utils'), require('@angular/cdk/keycodes')) :\n    typeof define === 'function' && define.amd ? define('@ajf/material/form-builder', ['exports', '@ajf/material/monaco-editor', '@ajf/material/node-icon', '@angular/cdk/drag-drop', '@angular/common', '@angular/core', '@angular/forms', '@angular/material/autocomplete', '@angular/material/button', '@angular/material/card', '@angular/material/checkbox', '@angular/material/chips', '@angular/material/dialog', '@angular/material/form-field', '@angular/material/icon', '@angular/material/input', '@angular/material/list', '@angular/material/menu', '@angular/material/select', '@angular/material/sidenav', '@angular/material/slider', '@angular/material/table', '@angular/material/toolbar', '@angular/material/tooltip', '@ngx-translate/core', '@ajf/core/forms', '@angular/cdk/collections', 'rxjs', 'rxjs/operators', '@ajf/core/models', '@ajf/core/utils', '@angular/cdk/keycodes'], factory) :\n    (global = global || self, factory((global.ajf = global.ajf || {}, global.ajf.material = global.ajf.material || {}, global.ajf.material.formBuilder = {}), global.ng.material.monacoEditor, global.ng.material.nodeIcon, global.ng.cdk.dragDrop, global.ng.common, global.ng.core, global.ng.forms, global.ng.material.autocomplete, global.ng.material.button, global.ng.material.card, global.ng.material.checkbox, global.ng.material.chips, global.ng.material.dialog, global.ng.material.formField, global.ng.material.icon, global.ng.material.input, global.ng.material.list, global.ng.material.menu, global.ng.material.select, global.ng.material.sidenav, global.ng.material.slider, global.ng.material.table, global.ng.material.toolbar, global.ng.material.tooltip, global.ngxTranslate.core, global.ng.core.forms, global.ng.cdk.collections, global.rxjs, global.rxjs.operators, global.ng.core.models, global.ng.core.utils, global.ng.cdk.keycodes));\n}(this, (function (exports, monacoEditor, nodeIcon, dragDrop, common, core, forms, autocomplete, button, card, checkbox, chips, dialog, formField, icon, input, list, menu, select, sidenav, slider, table, toolbar, tooltip, core$1, forms$1, collections, rxjs, operators, models, utils, keycodes) { 'use strict';\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbBranchLine = /** @class */ (function () {\n        function AjfFbBranchLine(_el, _renderer) {\n            this._el = _el;\n            this._renderer = _renderer;\n            this._offset = 0;\n            this._height = 0;\n        }\n        Object.defineProperty(AjfFbBranchLine.prototype, \"offset\", {\n            set: function (offset) {\n                this._offset = offset;\n                this._updateOffset();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbBranchLine.prototype, \"color\", {\n            set: function (color) {\n                this._color = color;\n                this._updateColor();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbBranchLine.prototype, \"height\", {\n            set: function (height) {\n                this._height = height;\n                this._updateHeight();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbBranchLine.prototype._updateHeight = function () {\n            var height = Math.max(0, this._height - 25) + \"px\";\n            this._renderer.setStyle(this._el.nativeElement, 'height', height);\n        };\n        AjfFbBranchLine.prototype._updateOffset = function () {\n            var margin = this._offset * 4 + \"px\";\n            this._renderer.setStyle(this._el.nativeElement, 'margin-top', margin);\n            this._renderer.setStyle(this._el.nativeElement, 'margin-left', margin);\n        };\n        AjfFbBranchLine.prototype._updateColor = function () {\n            this._renderer.setStyle(this._el.nativeElement, 'border-color', this._color);\n        };\n        AjfFbBranchLine.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-branch-line',\n                        template: \"\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-fb-branch-line{display:block;position:absolute;top:25px;left:25px;width:25px;border-top:2px solid;border-left:2px solid;border-top-left-radius:6px}\\n\"]\n                    },] }\n        ];\n        AjfFbBranchLine.ctorParameters = function () { return [\n            { type: core.ElementRef },\n            { type: core.Renderer2 }\n        ]; };\n        AjfFbBranchLine.propDecorators = {\n            offset: [{ type: core.Input }],\n            color: [{ type: core.Input }],\n            height: [{ type: core.Input }]\n        };\n        return AjfFbBranchLine;\n    }());\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __rest(s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    }\r\n\r\n    function __decorate(decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    }\r\n\r\n    function __param(paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    }\r\n\r\n    function __metadata(metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    }\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n        if (k2 === undefined) k2 = k;\r\n        Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n    }) : (function(o, m, k, k2) {\r\n        if (k2 === undefined) k2 = k;\r\n        o[k2] = m[k];\r\n    });\r\n\r\n    function __exportStar(m, exports) {\r\n        for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n    }\r\n\r\n    function __values(o) {\r\n        var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n        if (m) return m.call(o);\r\n        if (o && typeof o.length === \"number\") return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spread() {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    }\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    };\r\n\r\n    function __await(v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    }\r\n\r\n    function __asyncGenerator(thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    }\r\n\r\n    function __asyncDelegator(o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    }\r\n\r\n    function __asyncValues(o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    }\r\n\r\n    function __makeTemplateObject(cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    var __setModuleDefault = Object.create ? (function(o, v) {\r\n        Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n    }) : function(o, v) {\r\n        o[\"default\"] = v;\r\n    };\r\n\r\n    function __importStar(mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n        __setModuleDefault(result, mod);\r\n        return result;\r\n    }\r\n\r\n    function __importDefault(mod) {\r\n        return (mod && mod.__esModule) ? mod : { default: mod };\r\n    }\r\n\r\n    function __classPrivateFieldGet(receiver, privateMap) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to get private field on non-instance\");\r\n        }\r\n        return privateMap.get(receiver);\r\n    }\r\n\r\n    function __classPrivateFieldSet(receiver, privateMap, value) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to set private field on non-instance\");\r\n        }\r\n        privateMap.set(receiver, value);\r\n        return value;\r\n    }\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var ChoicesOriginDataSource = /** @class */ (function (_super) {\n        __extends(ChoicesOriginDataSource, _super);\n        function ChoicesOriginDataSource() {\n            var _this = _super.call(this) || this;\n            _this._choices = new rxjs.BehaviorSubject([]);\n            _this._choicesObs = _this._choices.asObservable();\n            return _this;\n        }\n        ChoicesOriginDataSource.prototype.connect = function () {\n            return this._choicesObs;\n        };\n        ChoicesOriginDataSource.prototype.disconnect = function () { };\n        ChoicesOriginDataSource.prototype.updateChoices = function (choices) {\n            this._choices.next(choices);\n        };\n        return ChoicesOriginDataSource;\n    }(collections.DataSource));\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbChoicesOriginEditor = /** @class */ (function () {\n        function AjfFbChoicesOriginEditor() {\n            this._displayedColumns = ['label', 'value', 'delete'];\n            this.editing = {};\n            this._choices = new ChoicesOriginDataSource();\n            this._choicesArr = [];\n        }\n        Object.defineProperty(AjfFbChoicesOriginEditor.prototype, \"displayedColumns\", {\n            get: function () {\n                return this._displayedColumns;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbChoicesOriginEditor.prototype, \"choicesOrigin\", {\n            get: function () {\n                return this._choicesOrigin;\n            },\n            set: function (choicesOrigin) {\n                this._choicesOrigin = choicesOrigin;\n                this.name = choicesOrigin.name;\n                this.label = choicesOrigin.label;\n                this.canEditChoices = forms$1.isChoicesFixedOrigin(choicesOrigin);\n                this._choicesArr = choicesOrigin.choices;\n                this._choices.updateChoices(this._choicesArr);\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbChoicesOriginEditor.prototype, \"choices\", {\n            get: function () {\n                return this._choices;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbChoicesOriginEditor.prototype, \"choicesArr\", {\n            get: function () {\n                return this._choicesArr;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbChoicesOriginEditor.prototype.updateValue = function (evt, cell, _value, rowIdx) {\n            this.editing[rowIdx + '-' + cell] = false;\n            this._choicesArr[rowIdx][cell] = evt.target.value;\n            this._choices.updateChoices(this._choicesArr);\n        };\n        AjfFbChoicesOriginEditor.prototype.deleteRow = function (rowIdx) {\n            this._choicesArr.splice(rowIdx, 1);\n            this._choices.updateChoices(this._choicesArr);\n        };\n        AjfFbChoicesOriginEditor.prototype.addRow = function () {\n            this._choicesArr.push({ label: '', value: '' });\n            this._choices.updateChoices(this._choicesArr);\n        };\n        AjfFbChoicesOriginEditor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-choices-origin-editor',\n                        template: \"<div>\\n  <mat-form-field>\\n    <input matInput [(ngModel)]=\\\"name\\\"\\n        [placeholder]=\\\"'Name' | translate\\\">\\n  </mat-form-field>\\n  <mat-form-field>\\n    <input matInput [(ngModel)]=\\\"label\\\"\\n        [placeholder]=\\\"'Label' | translate\\\">\\n  </mat-form-field>\\n  <ng-template [ngIf]=\\\"canEditChoices\\\">\\n    <button (click)=\\\"addRow()\\\" mat-button>\\n      <mat-icon>add</mat-icon>\\n      <span translate>Add value</span>\\n    </button>\\n    <mat-table [dataSource]=\\\"choices\\\">\\n      <ng-container matColumnDef=\\\"label\\\">\\n        <mat-header-cell *matHeaderCellDef translate>Label</mat-header-cell>\\n        <mat-cell *matCellDef=\\\"let row; let idx = index\\\">\\n          <input matInput [(ngModel)]=\\\"row.label\\\" type=\\\"text\\\">\\n        </mat-cell>\\n      </ng-container>\\n      <ng-container matColumnDef=\\\"value\\\">\\n        <mat-header-cell *matHeaderCellDef translate>Value</mat-header-cell>\\n        <mat-cell *matCellDef=\\\"let row; let idx = index\\\">\\n          <input matInput [(ngModel)]=\\\"row.value\\\" type=\\\"text\\\">\\n        </mat-cell>\\n      </ng-container>\\n      <ng-container matColumnDef=\\\"delete\\\">\\n        <mat-header-cell *matHeaderCellDef translate>Delete</mat-header-cell>\\n        <mat-cell *matCellDef=\\\"let row; let idx = index\\\">\\n            <mat-icon (click)=\\\"deleteRow(idx)\\\">delete</mat-icon>\\n        </mat-cell>\\n      </ng-container>\\n\\n      <mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></mat-header-row>\\n      <mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></mat-row>\\n    </mat-table>\\n  </ng-template>\\n</div>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-fb-choices-origin-editor mat-form-field+mat-form-field{margin-left:1em}ajf-fb-choices-origin-editor mat-table{max-height:300px}ajf-fb-choices-origin-editor mat-table mat-icon{cursor:pointer}\\n\"]\n                    },] }\n        ];\n        AjfFbChoicesOriginEditor.propDecorators = {\n            choicesOrigin: [{ type: core.Input }]\n        };\n        return AjfFbChoicesOriginEditor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    function getNodeContainer(c, node) {\n        if (c.nodes.indexOf(node) > -1) {\n            return c;\n        }\n        var cns = c.nodes.filter(function (n) { return forms$1.isContainerNode(n); });\n        var len = cns.length;\n        for (var i = 0; i < len; i++) {\n            var cn = getNodeContainer(cns[i], node);\n            if (cn != null) {\n                return cn;\n            }\n        }\n        return null;\n    }\n    function buildFormBuilderNodesSubtree(nodes, parent, ignoreConditionalBranches) {\n        if (ignoreConditionalBranches === void 0) { ignoreConditionalBranches = false; }\n        var entries = nodes.filter(function (n) { return n.parent === parent.id; })\n            .sort(function (n1, n2) { return n1.parentNode - n2.parentNode; })\n            .map(function (n) {\n            var children = buildFormBuilderNodesSubtree(nodes, n);\n            if (children.length === 0) {\n                children.push({ parent: n, parentNode: 0 });\n            }\n            return {\n                node: n,\n                children: children,\n                content: buildFormBuilderNodesContent(nodes, n)\n            };\n        });\n        if (!ignoreConditionalBranches) {\n            var entriesNum = entries.length;\n            var cbs = parent.conditionalBranches.length;\n            for (var i = entriesNum; i < cbs; i++) {\n                entries.push({ parent: parent, parentNode: i });\n            }\n        }\n        return entries;\n    }\n    function buildFormBuilderNodesContent(_nodes, node) {\n        if (forms$1.isContainerNode(node)) {\n            return buildFormBuilderNodesSubtree(node.nodes, node, true);\n        }\n        return [];\n    }\n    function buildFormBuilderNodesTree(nodes) {\n        var rootNodes = nodes.filter(function (n) { return n.parent == null || n.parent === 0; });\n        if (rootNodes.length === 1) {\n            var rootNode = rootNodes[0];\n            if (forms$1.isSlidesNode(rootNode)) {\n                var tree = [];\n                tree.push({\n                    node: rootNode,\n                    container: null,\n                    children: buildFormBuilderNodesSubtree(nodes, rootNode),\n                    content: buildFormBuilderNodesContent(nodes, rootNode)\n                });\n                return tree;\n            }\n        }\n        else if (rootNodes.length === 0) {\n            return [null];\n        }\n        throw new Error('Invalid form definition');\n    }\n    function flattenNodes(nodes) {\n        var flatNodes = [];\n        nodes.forEach(function (node) {\n            if (forms$1.isContainerNode(node)) {\n                flatNodes = flatNodes.concat(flattenNodes(node.nodes));\n            }\n            flatNodes.push(node);\n        });\n        return flatNodes;\n    }\n    function getDescendants(flatNodes, parentNode, branch) {\n        if (branch === void 0) { branch = null; }\n        return branch != null ?\n            flatNodes.filter(function (n) { return n.parent === parentNode.id && n.parentNode === branch; }) :\n            flatNodes.filter(function (n) { return n.parent === parentNode.id; });\n    }\n    function removeNodes(nodes, ids) {\n        var len = nodes.length;\n        for (var i = 0; i < len; i++) {\n            var node = nodes[i];\n            if (forms$1.isContainerNode(node)) {\n                var container = node;\n                container.nodes = removeNodes(container.nodes, ids);\n            }\n        }\n        return nodes.filter(function (n) { return ids.indexOf(n.id) === -1; });\n    }\n    function deleteNodeSubtree(nodes, parentNode, branch) {\n        if (branch === void 0) { branch = null; }\n        var flatNodes = flattenNodes(nodes);\n        var delNodes = [];\n        var descendants = getDescendants(flatNodes, parentNode, branch);\n        var len = descendants.length;\n        for (var i = 0; i < len; i++) {\n            delNodes = delNodes.concat(getDescendants(flatNodes, descendants[i]));\n        }\n        delNodes = delNodes.concat(descendants);\n        return removeNodes(nodes, delNodes.map(function (n) { return n.id; }));\n    }\n    var nodeUniqueId = 0;\n    var AjfFormBuilderService = /** @class */ (function () {\n        function AjfFormBuilderService() {\n            this._availableNodeTypes = [\n                {\n                    label: 'Slide',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-slide' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfSlide },\n                    isSlide: true\n                },\n                {\n                    label: 'Repeating slide',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-repeatingslide' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfRepeatingSlide },\n                    isSlide: true\n                },\n                {\n                    label: 'String',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-string' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.String }\n                },\n                {\n                    label: 'Text',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-text' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.Text }\n                },\n                {\n                    label: 'Number',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-number' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.Number }\n                },\n                {\n                    label: 'Boolean',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-boolean' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.Boolean }\n                },\n                {\n                    label: 'Single choice',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-singlechoice' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.SingleChoice }\n                },\n                {\n                    label: 'Multiple choice',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-multiplechoice' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.MultipleChoice }\n                },\n                {\n                    label: 'Formula',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-formula' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.Formula }\n                },\n                {\n                    label: 'Date',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-date' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.Date }\n                },\n                {\n                    label: 'Date input',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-dateinput' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.DateInput }\n                },\n                {\n                    label: 'Time',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-time' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.Time }\n                },\n                {\n                    label: 'Table',\n                    icon: { fontSet: 'ajf-icon', fontIcon: 'field-table' },\n                    nodeType: { node: forms$1.AjfNodeType.AjfField, field: forms$1.AjfFieldType.Table }\n                }\n            ];\n            this._form = new rxjs.BehaviorSubject(null);\n            this._formObs = this._form.asObservable();\n            this._editedNodeEntry = new rxjs.BehaviorSubject(null);\n            this._editedNodeEntryObs = this._editedNodeEntry.asObservable();\n            this._editedCondition = new rxjs.BehaviorSubject(null);\n            this._editedConditionObs = this._editedCondition.asObservable();\n            this._editedChoicesOrigin = new rxjs.BehaviorSubject(null);\n            this._editedChoicesOriginObs = this._editedChoicesOrigin.asObservable();\n            this._beforeNodesUpdate = new core.EventEmitter();\n            this._beforeNodesUpdateObs = this._beforeNodesUpdate.asObservable();\n            this._afterNodeUpdate = new core.EventEmitter();\n            this._afterNodeUpdateObs = this._afterNodeUpdate.asObservable();\n            this._nodesUpdates = new rxjs.Subject();\n            this._attachmentsOriginsUpdates = new rxjs.Subject();\n            this._choicesOriginsUpdates = new rxjs.Subject();\n            this._stringIdentifierUpdates = new rxjs.Subject();\n            this._saveNodeEntryEvent = new core.EventEmitter();\n            this._deleteNodeEntryEvent = new core.EventEmitter();\n            this._initChoicesOriginsStreams();\n            this._initAttachmentsOriginsStreams();\n            this._initStringIdentifierStreams();\n            this._initNodesStreams();\n            this._initFormStreams();\n            this._initSaveNode();\n            this._initDeleteNode();\n        }\n        Object.defineProperty(AjfFormBuilderService.prototype, \"availableNodeTypes\", {\n            /**\n             * Available node types\n             *\n             * @readonly\n             * @memberOf AjfFormBuilderService\n             */\n            get: function () {\n                return this._availableNodeTypes;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"form\", {\n            /**\n             * Current edited form stream\n             *\n             * @readonly\n             * @memberOf AjfFormBuilderService\n             */\n            get: function () {\n                return this._formObs;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"attachmentsOrigins\", {\n            get: function () {\n                return this._attachmentsOrigins;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"choicesOrigins\", {\n            get: function () {\n                return this._choicesOrigins;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"stringIdentifier\", {\n            get: function () {\n                return this._stringIdentifier;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"nodes\", {\n            get: function () {\n                return this._nodes;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"flatNodes\", {\n            get: function () {\n                return this._flatNodes;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"flatFields\", {\n            get: function () {\n                return this._flatFields;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"nodeEntriesTree\", {\n            get: function () {\n                return this._nodeEntriesTree;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"editedNodeEntry\", {\n            get: function () {\n                return this._editedNodeEntryObs;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"editedCondition\", {\n            get: function () {\n                return this._editedConditionObs;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"editedChoicesOrigin\", {\n            get: function () {\n                return this._editedChoicesOriginObs;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"beforeNodesUpdate\", {\n            get: function () {\n                return this._beforeNodesUpdateObs;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilderService.prototype, \"afterNodeUpdate\", {\n            get: function () {\n                return this._afterNodeUpdateObs;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        /**\n         * Sets the current edited form\n         *\n         * @param form\n         *\n         * @memberOf AjfFormBuilderService\n         */\n        AjfFormBuilderService.prototype.setForm = function (form) {\n            if (form !== this._form.getValue()) {\n                this._form.next(form);\n            }\n        };\n        AjfFormBuilderService.prototype.editNodeEntry = function (nodeEntry) {\n            this._editedNodeEntry.next(nodeEntry);\n        };\n        AjfFormBuilderService.prototype.editCondition = function (condition) {\n            this._editedCondition.next(condition);\n        };\n        AjfFormBuilderService.prototype.saveCurrentCondition = function (condition) {\n            var c = this._editedCondition.getValue();\n            if (c == null) {\n                return;\n            }\n            c.condition = condition;\n            this._editedCondition.next(null);\n        };\n        AjfFormBuilderService.prototype.cancelConditionEdit = function () {\n            this._editedChoicesOrigin.next(null);\n        };\n        AjfFormBuilderService.prototype.insertNode = function (nodeType, parent, parentNode, inContent) {\n            if (inContent === void 0) { inContent = false; }\n            var node;\n            var id = ++nodeUniqueId;\n            var isFieldNode = nodeType.nodeType.field != null;\n            if (isFieldNode) {\n                node = forms$1.createField({\n                    id: id,\n                    nodeType: forms$1.AjfNodeType.AjfField,\n                    fieldType: nodeType.nodeType.field,\n                    parent: parent.id,\n                    parentNode: parentNode,\n                    name: '',\n                });\n            }\n            else {\n                node = forms$1.createContainerNode({\n                    id: id,\n                    nodeType: nodeType.nodeType.node,\n                    parent: parent != null ? parent.id : 0,\n                    parentNode: parentNode,\n                    name: '',\n                    nodes: [],\n                });\n            }\n            this._beforeNodesUpdate.emit();\n            this._nodesUpdates.next(function (nodes) {\n                if (node.parent === 0) {\n                    return [node];\n                }\n                var cn = forms$1.isContainerNode(parent) && inContent ? parent :\n                    getNodeContainer({ nodes: nodes }, parent);\n                if (cn != null) {\n                    if (!isFieldNode) {\n                        var replaceNodes = cn.nodes === nodes;\n                        var newNodes = cn.nodes.slice(0);\n                        newNodes.push(node);\n                        cn.nodes = newNodes;\n                        if (replaceNodes) {\n                            nodes = newNodes;\n                        }\n                    }\n                    else {\n                        cn.nodes.push(node);\n                    }\n                }\n                return nodes;\n            });\n        };\n        AjfFormBuilderService.prototype.saveNodeEntry = function (properties) {\n            this._saveNodeEntryEvent.emit(properties);\n        };\n        AjfFormBuilderService.prototype.cancelNodeEntryEdit = function () {\n            this._editedNodeEntry.next(null);\n        };\n        AjfFormBuilderService.prototype.deleteNodeEntry = function (nodeEntry) {\n            this._deleteNodeEntryEvent.next(nodeEntry);\n        };\n        AjfFormBuilderService.prototype.getCurrentForm = function () {\n            return rxjs.combineLatest([\n                this.form, this.nodes, this.attachmentsOrigins, this.choicesOrigins,\n                this.stringIdentifier\n            ])\n                .pipe(operators.filter(function (_a) {\n                var _b = __read(_a, 1), form = _b[0];\n                return form != null;\n            }), operators.map(function (_a) {\n                var _b = __read(_a, 5), form = _b[0], nodes = _b[1], attachmentsOrigins = _b[2], choicesOrigins = _b[3], stringIdentifier = _b[4];\n                return forms$1.createForm({\n                    choicesOrigins: choicesOrigins.slice(0),\n                    attachmentsOrigins: attachmentsOrigins.slice(0),\n                    stringIdentifier: (stringIdentifier || []).slice(0),\n                    nodes: nodes.slice(0),\n                    supplementaryInformations: form.supplementaryInformations,\n                });\n            }));\n        };\n        AjfFormBuilderService.prototype.editChoicesOrigin = function (choicesOrigin) {\n            this._editedChoicesOrigin.next(choicesOrigin);\n        };\n        AjfFormBuilderService.prototype.createChoicesOrigin = function () {\n            this._editedChoicesOrigin.next(forms$1.createChoicesFixedOrigin({ name: '' }));\n        };\n        AjfFormBuilderService.prototype.cancelChoicesOriginEdit = function () {\n            this._editedChoicesOrigin.next(null);\n        };\n        AjfFormBuilderService.prototype.saveChoicesOrigin = function (params) {\n            var choicesOrigin = this._editedChoicesOrigin.getValue();\n            if (choicesOrigin != null) {\n                choicesOrigin.label = params.label;\n                choicesOrigin.name = params.name;\n                if (forms$1.isChoicesFixedOrigin(choicesOrigin)) {\n                    choicesOrigin.choices = params.choices;\n                }\n                this._choicesOriginsUpdates.next(function (choicesOrigins) {\n                    var idx = choicesOrigins.indexOf(choicesOrigin);\n                    if (idx > -1) {\n                        choicesOrigins = __spread(choicesOrigins.slice(0, idx), [\n                            choicesOrigin\n                        ], choicesOrigins.slice(idx + 1));\n                    }\n                    else {\n                        choicesOrigins = __spread(choicesOrigins, [choicesOrigin]);\n                    }\n                    return choicesOrigins;\n                });\n            }\n            this._editedChoicesOrigin.next(null);\n        };\n        AjfFormBuilderService.prototype.saveStringIdentifier = function (identifier) {\n            this._stringIdentifierUpdates.next(function () { return __spread(identifier); });\n        };\n        AjfFormBuilderService.prototype._findMaxNodeId = function (nodes, _curMaxId) {\n            var _this = this;\n            if (_curMaxId === void 0) { _curMaxId = 0; }\n            var maxId = 0;\n            nodes.forEach(function (n) {\n                maxId = Math.max(maxId, n.id);\n                if (forms$1.isContainerNode(n)) {\n                    maxId = Math.max(maxId, _this._findMaxNodeId(n.nodes));\n                }\n            });\n            return maxId;\n        };\n        AjfFormBuilderService.prototype._initFormStreams = function () {\n            var _this = this;\n            this._form.subscribe(function (form) {\n                nodeUniqueId = 0;\n                if (form != null && form.nodes != null && form.nodes.length > 0) {\n                    nodeUniqueId = _this._findMaxNodeId(form.nodes);\n                }\n                _this._nodesUpdates.next(function (_nodes) {\n                    return form != null && form.nodes != null ? form.nodes.slice(0) : [];\n                });\n                _this._attachmentsOriginsUpdates.next(function (_attachmentsOrigins) {\n                    return form != null && form.attachmentsOrigins != null ?\n                        form.attachmentsOrigins.slice(0) :\n                        [];\n                });\n                _this._choicesOriginsUpdates.next(function (_choicesOrigins) {\n                    return form != null && form.choicesOrigins != null ? form.choicesOrigins.slice(0) : [];\n                });\n                _this._stringIdentifierUpdates.next(function (_) {\n                    return form != null && form.stringIdentifier != null ? form.stringIdentifier.slice(0) :\n                        [];\n                });\n            });\n        };\n        AjfFormBuilderService.prototype._initChoicesOriginsStreams = function () {\n            this._choicesOrigins =\n                this._choicesOriginsUpdates\n                    .pipe(operators.scan(function (choicesOrigins, op) {\n                    return op(choicesOrigins);\n                }, []), operators.publishReplay(1), operators.refCount());\n        };\n        AjfFormBuilderService.prototype._initAttachmentsOriginsStreams = function () {\n            this._attachmentsOrigins = this._attachmentsOriginsUpdates.pipe(operators.scan(function (attachmentsOrigins, op) {\n                return op(attachmentsOrigins);\n            }, []), operators.publishReplay(1), operators.refCount());\n        };\n        AjfFormBuilderService.prototype._initStringIdentifierStreams = function () {\n            this._stringIdentifier = this._stringIdentifierUpdates.pipe(operators.scan(function (stringIdentifier, op) {\n                return op(stringIdentifier);\n            }, []), operators.publishReplay(1), operators.refCount());\n        };\n        AjfFormBuilderService.prototype._initNodesStreams = function () {\n            this._nodes = this._nodesUpdates\n                .pipe(operators.scan(function (nodes, op) {\n                return op(nodes);\n            }, []), operators.publishReplay(1), operators.refCount());\n            this._flatNodes = this._nodes.pipe(operators.map(function (nodes) { return flattenNodes(nodes); }), operators.publishReplay(1), operators.refCount());\n            this._flatFields = this._flatNodes.pipe(operators.map(function (nodes) { return nodes.filter(function (n) { return !forms$1.isContainerNode(n); }); }), operators.publishReplay(1), operators.refCount());\n            this._nodeEntriesTree = this._nodes.pipe(operators.map(function (nodes) { return buildFormBuilderNodesTree(nodes); }), operators.publishReplay(1), operators.refCount());\n        };\n        AjfFormBuilderService.prototype._initSaveNode = function () {\n            var _this = this;\n            this._saveNodeEntryEvent\n                .pipe(operators.withLatestFrom(this.editedNodeEntry, this.choicesOrigins, this.attachmentsOrigins), operators.filter(function (_a) {\n                var _b = __read(_a, 2), _ = _b[0], nodeEntry = _b[1];\n                return nodeEntry != null;\n            }), operators.map(function (_a) {\n                var _b = __read(_a, 2), properties = _b[0], ne = _b[1];\n                _this._beforeNodesUpdate.emit();\n                var nodeEntry = ne;\n                var origNode = nodeEntry.node;\n                var node = utils.deepCopy(origNode);\n                node.id = nodeEntry.node.id;\n                node.name = properties.name;\n                node.label = properties.label;\n                node.visibility = properties.visibility != null ?\n                    models.createCondition({ condition: properties.visibility }) :\n                    null;\n                var oldConditionalBranches = node.conditionalBranches.length;\n                node.conditionalBranches = properties.conditionalBranches != null ?\n                    properties.conditionalBranches.map(function (condition) { return models.createCondition({ condition: condition }); }) :\n                    [models.alwaysCondition()];\n                var newConditionalBranches = node.conditionalBranches.length;\n                if (forms$1.isRepeatingContainerNode(node)) {\n                    var repNode = node;\n                    repNode.formulaReps = properties.formulaReps != null ?\n                        models.createFormula({ formula: properties.formulaReps }) :\n                        undefined;\n                    repNode.minReps = properties.minReps;\n                    repNode.maxReps = properties.maxReps;\n                }\n                if (forms$1.isField(node)) {\n                    var field = node;\n                    field.description = properties.description;\n                    field.defaultValue = properties.defaultValue;\n                    field.formula = properties.formula != null ?\n                        models.createFormula({ formula: properties.formula }) :\n                        undefined;\n                    var forceValue = properties.value;\n                    var notEmpty = properties.notEmpty;\n                    var validationConditions = properties.validationConditions;\n                    var minValue = parseInt(properties.minValue, 10);\n                    var maxValue = parseInt(properties.maxValue, 10);\n                    var minDigits = parseInt(properties.minDigits, 10);\n                    var maxDigits = parseInt(properties.maxDigits, 10);\n                    if (isNaN(minValue)) {\n                        minValue = null;\n                    }\n                    if (isNaN(maxValue)) {\n                        maxValue = null;\n                    }\n                    if (isNaN(minDigits)) {\n                        minDigits = null;\n                    }\n                    if (isNaN(maxDigits)) {\n                        maxDigits = null;\n                    }\n                    if (forceValue != null || notEmpty != null ||\n                        (validationConditions != null && validationConditions.length > 0) ||\n                        minValue != null || maxValue != null || minDigits != null ||\n                        maxDigits != null) {\n                        var validation = field.validation || forms$1.createValidationGroup({});\n                        validation.forceValue = forceValue;\n                        validation.notEmpty = notEmpty ? forms$1.notEmptyValidation() : undefined;\n                        validation.minValue = minValue != null ? forms$1.minValidation(minValue) : undefined;\n                        validation.maxValue = maxValue != null ? forms$1.maxValidation(maxValue) : undefined;\n                        validation.minDigits =\n                            minDigits != null ? forms$1.minDigitsValidation(minDigits) : undefined;\n                        validation.maxDigits =\n                            maxDigits != null ? forms$1.maxDigitsValidation(maxDigits) : undefined;\n                        validation.conditions =\n                            (validationConditions ||\n                                []).map(function (c) { return forms$1.createValidation({\n                                condition: c.condition,\n                                errorMessage: c.errorMessage\n                            }); });\n                        field.validation = validation;\n                    }\n                    else {\n                        field.validation = undefined;\n                    }\n                    var notEmptyWarn = properties.notEmptyWarning;\n                    var warningConditions = properties.warningConditions;\n                    if (notEmptyWarn != null ||\n                        (warningConditions != null && warningConditions.length > 0)) {\n                        var warning = field.warning || forms$1.createWarningGroup({});\n                        warning.notEmpty = notEmptyWarn ? forms$1.notEmptyWarning() : undefined;\n                        warning.conditions =\n                            (warningConditions ||\n                                []).map(function (w) { return forms$1.createWarning({\n                                condition: w.condition,\n                                warningMessage: w.warningMessage\n                            }); });\n                        field.warning = warning;\n                    }\n                    else {\n                        field.warning = undefined;\n                    }\n                    field.nextSlideCondition = properties.nextSlideCondition != null ?\n                        models.createCondition({ condition: properties.nextSlideCondition }) :\n                        undefined;\n                    field.size = properties.size;\n                    field.defaultValue = properties.defaultValue;\n                    if (forms$1.isFieldWithChoices(field)) {\n                        var fwc = field;\n                        fwc.choicesOriginRef = properties.choicesOriginRef;\n                        fwc.forceExpanded = properties.forceExpanded;\n                        fwc.forceNarrow = properties.forceNarrow;\n                        fwc.triggerConditions = (properties.triggerConditions ||\n                            []).map(function (t) { return models.createCondition({ condition: t }); });\n                    }\n                }\n                _this._editedNodeEntry.next(null);\n                return function (nodes) {\n                    var cn = getNodeContainer({ nodes: nodes }, origNode);\n                    if (cn != null) {\n                        // TODO: @trik check this, was always true?\n                        // if (cn instanceof AjfNode) {\n                        var replaceNodes = cn.nodes === nodes;\n                        var idx = cn.nodes.indexOf(origNode);\n                        var newNodes = cn.nodes.slice(0, idx);\n                        newNodes.push(node);\n                        newNodes = newNodes.concat(cn.nodes.slice(idx + 1));\n                        cn.nodes = newNodes;\n                        if (replaceNodes) {\n                            nodes = newNodes;\n                        }\n                        else {\n                            nodes = nodes.slice(0);\n                        }\n                        // } else {\n                        //   const idx = nodes.indexOf(origNode);\n                        //   nodes = nodes.slice(0, idx).concat([node]).concat(nodes.slice(idx + 1));\n                        // }\n                        if (newConditionalBranches < oldConditionalBranches) {\n                            for (var i = newConditionalBranches; i < oldConditionalBranches; i++) {\n                                nodes = deleteNodeSubtree(nodes, node, i);\n                            }\n                        }\n                    }\n                    return nodes;\n                };\n            }))\n                .subscribe(this._nodesUpdates);\n        };\n        AjfFormBuilderService.prototype._initDeleteNode = function () {\n            var _this = this;\n            this._deleteNodeEntryEvent\n                .pipe(operators.map(function (nodeEntry) {\n                _this._beforeNodesUpdate.emit();\n                return function (nodes) {\n                    var node = nodeEntry.node;\n                    var cn = getNodeContainer({ nodes: nodes }, node);\n                    if (cn != null) {\n                        var replaceNodes = cn.nodes === nodes;\n                        var idx = cn.nodes.indexOf(node);\n                        var newNodes = cn.nodes.slice(0, idx);\n                        newNodes = newNodes.concat(cn.nodes.slice(idx + 1));\n                        cn.nodes = newNodes;\n                        if (replaceNodes) {\n                            nodes = newNodes;\n                        }\n                        else {\n                            nodes = nodes.slice(0);\n                        }\n                        nodes = deleteNodeSubtree(nodes, node);\n                    }\n                    return nodes;\n                };\n            }))\n                .subscribe(this._nodesUpdates);\n        };\n        AjfFormBuilderService.decorators = [\n            { type: core.Injectable }\n        ];\n        AjfFormBuilderService.ctorParameters = function () { return []; };\n        return AjfFormBuilderService;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbChoicesOriginEditorDialog = /** @class */ (function () {\n        function AjfFbChoicesOriginEditorDialog(_service) {\n            this._service = _service;\n            this._choicesOrigin =\n                this._service.editedChoicesOrigin.pipe(operators.filter(function (c) { return c != null; }), operators.map(function (c) { return c; }));\n        }\n        Object.defineProperty(AjfFbChoicesOriginEditorDialog.prototype, \"choicesOrigin\", {\n            get: function () {\n                return this._choicesOrigin;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbChoicesOriginEditorDialog.prototype.saveChoicesOrigin = function () {\n            this._service.saveChoicesOrigin({ label: this.editor.label, name: this.editor.name, choices: this.editor.choicesArr });\n        };\n        AjfFbChoicesOriginEditorDialog.prototype.cancelChoicesOriginEdit = function () {\n            this._service.cancelChoicesOriginEdit();\n        };\n        AjfFbChoicesOriginEditorDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-choices-origin-editor-dialog',\n                        template: \"<h3 matDialogTitle translate>Edit choices origin</h3>\\n<mat-dialog-content>\\n  <ajf-fb-choices-origin-editor\\n      *ngIf=\\\"choicesOrigin|async as co\\\"\\n      [choicesOrigin]=\\\"co!\\\"></ajf-fb-choices-origin-editor>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n  <button mat-button translate (click)=\\\"saveChoicesOrigin()\\\">Save</button>\\n  <button mat-button translate (click)=\\\"cancelChoicesOriginEdit()\\\">Close</button>\\n</mat-dialog-actions>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"\\n\"]\n                    },] }\n        ];\n        AjfFbChoicesOriginEditorDialog.ctorParameters = function () { return [\n            { type: AjfFormBuilderService }\n        ]; };\n        AjfFbChoicesOriginEditorDialog.propDecorators = {\n            editor: [{ type: core.ViewChild, args: [AjfFbChoicesOriginEditor, { static: false },] }]\n        };\n        return AjfFbChoicesOriginEditorDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbConditionEditor = /** @class */ (function () {\n        function AjfFbConditionEditor(_) {\n        }\n        Object.defineProperty(AjfFbConditionEditor.prototype, \"fields\", {\n            get: function () {\n                return this._fields;\n            },\n            set: function (fields) {\n                this._fields = fields;\n                this._updateVariables();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbConditionEditor.prototype.insertVariable = function (variable) {\n            if (this.monacoEditor != null && this.monacoEditor.editor != null) {\n                var editor = this.monacoEditor.editor;\n                var value = editor.getValue().split('\\n');\n                var position = editor.getPosition();\n                var ln = position.lineNumber - 1;\n                var line = value[ln];\n                var col = position.column - 1;\n                line = line.substring(0, col) + variable + line.substring(col);\n                value[ln] = line;\n                position.column += variable.length;\n                this.monacoEditor.value = value.join('\\n');\n                editor.setPosition(position);\n                editor.focus();\n                this.editedValue = editor.getValue();\n            }\n        };\n        AjfFbConditionEditor.prototype.onEditorInit = function () {\n            monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({ noSemanticValidation: false, noSyntaxValidation: false });\n            monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n                target: monaco.languages.typescript.ScriptTarget.ES2015,\n                allowNonTsExtensions: true,\n                allowJs: true,\n                module: monaco.languages.typescript.ModuleKind.None\n            });\n            try {\n                monaco.languages.typescript.javascriptDefaults.addExtraLib('', 'condition-editor-variables.d.ts');\n            }\n            catch (e) {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-variables.d.ts'] =\n                    '';\n            }\n            try {\n                monaco.languages.typescript.javascriptDefaults.addExtraLib('', 'condition-editor-functions.d.ts');\n            }\n            catch (e) {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-functions.d.ts'] =\n                    '';\n            }\n            this._updateVariables();\n            this._updateFunctions();\n        };\n        AjfFbConditionEditor.prototype._updateVariables = function () {\n            var _this = this;\n            if (this._fields == null) {\n                return;\n            }\n            try {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-variables.d.ts'] =\n                    this._fields\n                        .map(function (field) {\n                        return \"declare const \" + field.name + \": \" + _this._fieldVarType(field.fieldType) + \";\";\n                    })\n                        .join('\\n');\n            }\n            catch (e) {\n            }\n        };\n        AjfFbConditionEditor.prototype._updateFunctions = function () {\n            try {\n                monaco.languages.typescript.javascriptDefaults._extraLibs['condition-editor-functions.d.ts'] =\n                    models.AjfExpressionUtils.UTIL_FUNCTIONS;\n            }\n            catch (e) {\n            }\n        };\n        AjfFbConditionEditor.prototype._fieldVarType = function (fieldType) {\n            switch (fieldType) {\n                case forms$1.AjfFieldType.Boolean:\n                    return 'boolean';\n                case forms$1.AjfFieldType.Date:\n                case forms$1.AjfFieldType.DateInput:\n                case forms$1.AjfFieldType.Time:\n                    return 'Date';\n                case forms$1.AjfFieldType.Empty:\n                    return 'void';\n                case forms$1.AjfFieldType.Formula:\n                    return 'number';\n                case forms$1.AjfFieldType.MultipleChoice:\n                case forms$1.AjfFieldType.SingleChoice:\n                    return 'any';\n                case forms$1.AjfFieldType.Number:\n                    return 'number';\n                case forms$1.AjfFieldType.Table:\n                    return 'Array';\n                case forms$1.AjfFieldType.String:\n                case forms$1.AjfFieldType.Text:\n                    return 'string';\n            }\n            return null;\n        };\n        AjfFbConditionEditor.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-condition-editor',\n                        template: \"<div class=\\\"ajf-editor\\\">\\n  <ajf-monaco-editor\\n      (init)=\\\"onEditorInit()\\\"\\n      (valueChange)=\\\"editedValue = $event\\\"\\n      [value]=\\\"condition\\\" language=\\\"javascript\\\"></ajf-monaco-editor>\\n</div>\\n<div class=\\\"ajf-editor-panel\\\">\\n  <ng-container *ngIf=\\\"fields as curFields\\\">\\n    <mat-nav-list dense *ngIf=\\\"curFields!.length > 0\\\">\\n      <a mat-list-item\\n          (click)=\\\"insertVariable(field.name)\\\"\\n          [matTooltip]=\\\"field.label\\\"\\n          *ngFor=\\\"let field of curFields!\\\">\\n        <ajf-node-icon [node]=\\\"field\\\"></ajf-node-icon>\\n        {{ field.name }}\\n      </a>\\n    </mat-nav-list>\\n  </ng-container>\\n</div>\\n\",\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        encapsulation: core.ViewEncapsulation.None,\n                        styles: [\"ajf-condition-editor{display:flex;flex-direction:row;align-items:stretch;max-height:512px}ajf-condition-editor .ajf-editor{flex:.75 0 auto;display:flex;flex-direction:row;align-items:stretch}ajf-condition-editor .ajf-editor monaco-editor{flex:1 0 auto;min-width:512px;min-height:256px}ajf-condition-editor .ajf-editor-panel{flex:.25 0 auto;overflow-y:auto}ajf-condition-editor ajf-monaco-editor{min-width:400px}\\n\"]\n                    },] }\n        ];\n        AjfFbConditionEditor.ctorParameters = function () { return [\n            { type: forms$1.AjfValidationService }\n        ]; };\n        AjfFbConditionEditor.propDecorators = {\n            monacoEditor: [{ type: core.ViewChild, args: [monacoEditor.AjfMonacoEditor, { static: true },] }],\n            fields: [{ type: core.Input }],\n            condition: [{ type: core.Input }]\n        };\n        return AjfFbConditionEditor;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbConditionEditorDialog = /** @class */ (function () {\n        function AjfFbConditionEditorDialog(service, dialogRef) {\n            this.dialogRef = dialogRef;\n            this._fields = service.flatFields.pipe(operators.map(function (fields) { return fields.sort(function (f1, f2) { return f1.name.localeCompare(f2.name); }); }));\n        }\n        Object.defineProperty(AjfFbConditionEditorDialog.prototype, \"fields\", {\n            get: function () {\n                return this._fields;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbConditionEditorDialog.prototype.saveCondition = function () {\n            if (this.editor == null) {\n                return;\n            }\n            var newValue = this.editor.editedValue;\n            this.dialogRef.close(newValue);\n        };\n        AjfFbConditionEditorDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-condition-editor-dialog',\n                        template: \"<h3 matDialogTitle translate>Edit condition</h3>\\n<mat-dialog-content>\\n  <ajf-condition-editor\\n      *ngIf=\\\"fields|async as curFields\\\"\\n      [fields]=\\\"curFields!\\\"\\n      [condition]=\\\"condition\\\"></ajf-condition-editor>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n  <button mat-button translate (click)=\\\"saveCondition()\\\">Save</button>\\n  <button mat-button translate matDialogClose>Close</button>\\n</mat-dialog-actions>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-condition-editor-dialog mat-dialog-content{overflow:visible}\\n\"]\n                    },] }\n        ];\n        AjfFbConditionEditorDialog.ctorParameters = function () { return [\n            { type: AjfFormBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        AjfFbConditionEditorDialog.propDecorators = {\n            editor: [{ type: core.ViewChild, args: [AjfFbConditionEditor, { static: false },] }]\n        };\n        return AjfFbConditionEditorDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbStringIdentifierDialogComponent = /** @class */ (function () {\n        function AjfFbStringIdentifierDialogComponent(_service, _cdr) {\n            var _this = this;\n            this._service = _service;\n            this._cdr = _cdr;\n            this.dataSource = new table.MatTableDataSource();\n            this.displayedColumns = ['label', 'value', 'delete'];\n            this.separatorKeysCodes = [keycodes.ENTER, keycodes.COMMA];\n            this._stringIdentifierSub = rxjs.Subscription.EMPTY;\n            this._stringIdentifierSub = _service.stringIdentifier.subscribe(function (identifier) {\n                _this.dataSource.data = __spread(identifier);\n            });\n            this.fields$ = _service.flatFields.pipe(operators.map(function (fields) { return fields.sort(function (f1, f2) { return f1.name.localeCompare(f2.name); })\n                .map(function (f) { return f.name; })\n                .filter(function (f) { return f.length > 0; }); }), operators.shareReplay(1));\n        }\n        AjfFbStringIdentifierDialogComponent.prototype.addRow = function () {\n            this.dataSource.data = __spread(this.dataSource.data, [{ label: '', value: [] }]);\n        };\n        AjfFbStringIdentifierDialogComponent.prototype.deleteRow = function (rowIdx) {\n            this.dataSource.data = __spread(this.dataSource.data.slice(0, rowIdx), this.dataSource.data.slice(rowIdx + 1));\n        };\n        AjfFbStringIdentifierDialogComponent.prototype.addValue = function (row, evt, valueInput) {\n            if (evt.value.length === 0) {\n                return;\n            }\n            row.value = __spread(row.value, [evt.value]);\n            valueInput.value = '';\n            this._cdr.markForCheck();\n        };\n        AjfFbStringIdentifierDialogComponent.prototype.removeValue = function (row, value) {\n            var idx = row.value.indexOf(value);\n            if (idx > -1) {\n                row.value = __spread(row.value.slice(0, idx), row.value.slice(idx + 1));\n                this._cdr.markForCheck();\n            }\n        };\n        AjfFbStringIdentifierDialogComponent.prototype.ngOnDestroy = function () {\n            this._stringIdentifierSub.unsubscribe();\n        };\n        AjfFbStringIdentifierDialogComponent.prototype.saveStringIdentifier = function () {\n            this._service.saveStringIdentifier(this.dataSource.data);\n        };\n        AjfFbStringIdentifierDialogComponent.prototype.selected = function (row, evt) {\n            row.value = __spread(row.value, [evt.option.value]);\n            this._cdr.markForCheck();\n        };\n        AjfFbStringIdentifierDialogComponent.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-string-identifier-dialog',\n                        template: \"<h3 matDialogTitle translate>Edit identifier</h3>\\n<mat-dialog-content>\\n  <button (click)=\\\"addRow()\\\" mat-button>\\n    <mat-icon>add</mat-icon>\\n    <span translate>Add value</span>\\n  </button>\\n  <mat-table [dataSource]=\\\"dataSource\\\">\\n    <ng-container matColumnDef=\\\"label\\\">\\n      <mat-header-cell *matHeaderCellDef translate>Label</mat-header-cell>\\n      <mat-cell *matCellDef=\\\"let row; let idx = index\\\">\\n        <mat-form-field>\\n          <input matInput [placeholder]=\\\"'Label'|translate\\\" autofocus [(ngModel)]=\\\"row.label\\\">\\n        </mat-form-field>\\n      </mat-cell>\\n    </ng-container>\\n    <ng-container matColumnDef=\\\"value\\\">\\n      <mat-header-cell *matHeaderCellDef translate>Value</mat-header-cell>\\n      <mat-cell *matCellDef=\\\"let row; let idx = index\\\">\\n        <mat-form-field>\\n          <mat-chip-list #chipList>\\n            <mat-chip\\n                *ngFor=\\\"let field of row.value\\\"\\n                (removed)=\\\"removeValue(row, field)\\\"\\n            >\\n              {{ field }}\\n              <mat-icon matChipRemove>cancel</mat-icon>\\n            </mat-chip>\\n          </mat-chip-list>\\n          <input\\n              #valueInput\\n              [ngModel]=\\\"row.value\\\"\\n              [matAutocomplete]=\\\"valueAc\\\"\\n              [matChipInputFor]=\\\"chipList\\\"\\n              [matChipInputSeparatorKeyCodes]=\\\"separatorKeysCodes\\\"\\n              [matChipInputAddOnBlur]=\\\"true\\\"\\n              (matChipInputTokenEnd)=\\\"addValue(row, $event, valueInput)\\\"\\n              [placeholder]=\\\"'Value'|translate\\\">\\n          <mat-autocomplete #valueAc=\\\"matAutocomplete\\\"\\n              (optionSelected)=\\\"selected(row, $event)\\\">\\n            <mat-option *ngFor=\\\"let field of fields$ | async\\\" [value]=\\\"field\\\">{{field}}</mat-option>\\n          </mat-autocomplete>\\n        </mat-form-field>\\n      </mat-cell>\\n    </ng-container>\\n    <ng-container matColumnDef=\\\"delete\\\">\\n      <mat-header-cell *matHeaderCellDef translate>Delete</mat-header-cell>\\n      <mat-cell *matCellDef=\\\"let row; let idx = index\\\">\\n          <mat-icon (click)=\\\"deleteRow(idx)\\\">delete</mat-icon>\\n      </mat-cell>\\n    </ng-container>\\n\\n    <mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></mat-header-row>\\n    <mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></mat-row>\\n  </mat-table>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n  <button mat-button translate matDialogClose (click)=\\\"saveStringIdentifier()\\\">Save</button>\\n</mat-dialog-actions>\\n\",\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        encapsulation: core.ViewEncapsulation.None,\n                        styles: [\"\\n\"]\n                    },] }\n        ];\n        AjfFbStringIdentifierDialogComponent.ctorParameters = function () { return [\n            { type: AjfFormBuilderService },\n            { type: core.ChangeDetectorRef }\n        ]; };\n        return AjfFbStringIdentifierDialogComponent;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFormBuilder = /** @class */ (function () {\n        function AjfFormBuilder(_service, _dialog) {\n            var _this = this;\n            this._service = _service;\n            this._dialog = _dialog;\n            this._vc = new core.EventEmitter();\n            this._init = false;\n            this._editConditionSub = rxjs.Subscription.EMPTY;\n            this._beforeNodesUpdateSub = rxjs.Subscription.EMPTY;\n            this._editChoicesOriginSub = rxjs.Subscription.EMPTY;\n            this._stringIdentifierSub = rxjs.Subscription.EMPTY;\n            this._nodeTypes = _service.availableNodeTypes;\n            this._nodeEntriesTree = _service.nodeEntriesTree;\n            this._choicesOrigins = _service.choicesOrigins;\n            this._editConditionSub =\n                this._service.editedCondition.subscribe(function (condition) {\n                    if (_this._editConditionDialog != null) {\n                        _this._editConditionDialog.close();\n                        _this._editConditionDialog = null;\n                    }\n                    if (condition != null) {\n                        _this._editConditionDialog =\n                            _this._dialog.open(AjfFbConditionEditorDialog, { disableClose: true });\n                    }\n                });\n            this._editChoicesOriginSub =\n                this._service.editedChoicesOrigin.subscribe(function (choicesOrigin) {\n                    if (_this._editChoicesOriginDialog != null) {\n                        _this._editChoicesOriginDialog.close();\n                        _this._editChoicesOriginDialog = null;\n                    }\n                    if (choicesOrigin != null) {\n                        _this._editChoicesOriginDialog =\n                            _this._dialog.open(AjfFbChoicesOriginEditorDialog, { disableClose: true });\n                    }\n                });\n            this._beforeNodesUpdateSub = this._service.beforeNodesUpdate.subscribe(function () {\n                if (_this.designerCont == null) {\n                    return;\n                }\n                _this._lastScrollTop = _this.designerCont.nativeElement.scrollTop;\n            });\n            this.nodeEntriesTree.pipe(operators.sample(this._vc)).subscribe(function () {\n                if (_this.designerCont == null) {\n                    return;\n                }\n                _this.designerCont.nativeElement.scrollTop = _this._lastScrollTop;\n            });\n            this._stringIdentifierSub = this._service.stringIdentifier.subscribe(function () { });\n        }\n        Object.defineProperty(AjfFormBuilder.prototype, \"form\", {\n            get: function () {\n                return this._form;\n            },\n            set: function (form) {\n                if (this._form !== form) {\n                    this._form = form;\n                    if (this._init) {\n                        this._setCurrentForm();\n                    }\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilder.prototype, \"nodeTypes\", {\n            get: function () {\n                return this._nodeTypes;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilder.prototype, \"nodeEntriesTree\", {\n            get: function () {\n                return this._nodeEntriesTree;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFormBuilder.prototype, \"choicesOrigins\", {\n            get: function () {\n                return this._choicesOrigins;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFormBuilder.prototype.ngAfterViewChecked = function () {\n            this._vc.emit();\n        };\n        AjfFormBuilder.prototype.ngAfterContentInit = function () {\n            this._setCurrentForm();\n            this._init = true;\n        };\n        AjfFormBuilder.prototype.ngOnDestroy = function () {\n            this._editConditionSub.unsubscribe();\n            this._beforeNodesUpdateSub.unsubscribe();\n            this._editChoicesOriginSub.unsubscribe();\n            this._stringIdentifierSub.unsubscribe();\n            this._service.setForm(null);\n        };\n        AjfFormBuilder.prototype.createChoicesOrigin = function () {\n            this._service.createChoicesOrigin();\n        };\n        AjfFormBuilder.prototype.disableDropPredicate = function () {\n            return false;\n        };\n        AjfFormBuilder.prototype.editChoicesOrigin = function (choicesOrigin) {\n            this._service.editChoicesOrigin(choicesOrigin);\n        };\n        AjfFormBuilder.prototype.editStringIdentifier = function () {\n            if (this._stringIdentifierDialog != null) {\n                this._stringIdentifierDialog.close();\n                this._stringIdentifierDialog = null;\n            }\n            this._stringIdentifierDialog = this._dialog.open(AjfFbStringIdentifierDialogComponent, { disableClose: true, width: '60%', height: '60%' });\n        };\n        AjfFormBuilder.prototype._setCurrentForm = function () {\n            this._service.setForm(this._form);\n        };\n        AjfFormBuilder.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-form-builder',\n                        template: \"<mat-toolbar>\\n  <button mat-icon-button (click)=\\\"leftSidenav.toggle()\\\">\\n    <mat-icon>add_box</mat-icon>\\n  </button>\\n  <button mat-button [matMenuTriggerFor]=\\\"choicesMenu\\\" translate>Choices</button>\\n  <button mat-button (click)=\\\"editStringIdentifier()\\\" translate>Identifier</button>\\n  <mat-menu #choicesMenu>\\n    <button (click)=\\\"createChoicesOrigin()\\\" mat-menu-item translate>New..</button>\\n    <ng-container *ngIf=\\\"choicesOrigins|async as cos\\\">\\n      <button *ngFor=\\\"let choicesOrigin of cos\\\"\\n          (click)=\\\"editChoicesOrigin(choicesOrigin)\\\" mat-menu-item>\\n        {{ choicesOrigin.label || choicesOrigin.name }}\\n      </button>\\n    </ng-container>\\n  </mat-menu>\\n  <span class=\\\"ajf-spacer\\\"></span>\\n  <button mat-icon-button (click)=\\\"rightSidenav.toggle()\\\">\\n    <mat-icon>settings</mat-icon>\\n  </button>\\n</mat-toolbar>\\n<mat-drawer-container cdkDropListGroup>\\n  <mat-drawer #leftSidenav position=\\\"start\\\" mode=\\\"over\\\">\\n    <div #sourceDropList cdkDropList\\n        [cdkDropListEnterPredicate]=\\\"disableDropPredicate\\\"\\n        [cdkDropListData]=\\\"nodeTypes\\\">\\n      <ajf-fb-node-type-entry *ngFor=\\\"let nodeType of nodeTypes\\\"\\n          cdkDrag\\n          [cdkDragData]=\\\"nodeType\\\"\\n          (cdkDragStarted)=\\\"leftSidenav.close()\\\"\\n          [nodeType]=\\\"nodeType\\\"></ajf-fb-node-type-entry>\\n    </div>\\n  </mat-drawer>\\n  <mat-drawer #rightSidenav position=\\\"end\\\" mode=\\\"side\\\" [opened]=\\\"true\\\">\\n    <ajf-fb-node-properties></ajf-fb-node-properties>\\n  </mat-drawer>\\n  <div #designer class=\\\"ajf-designer\\\">\\n    <ajf-fb-node-entry\\n        *ngFor=\\\"let nodeEntry of (nodeEntriesTree|async); let isFirst = first\\\"\\n        [isFirst]=\\\"isFirst\\\"\\n        [nodeEntry]=\\\"nodeEntry\\\"></ajf-fb-node-entry>\\n  </div>\\n</mat-drawer-container>\\n\",\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        encapsulation: core.ViewEncapsulation.None,\n                        styles: [\"ajf-form-builder{display:flex;position:relative;min-height:300px;flex-direction:column;align-items:stretch}ajf-form-builder mat-toolbar mat-menu div[mat-menu-item]>button[mat-button]{flex:1 0 auto}ajf-form-builder mat-toolbar mat-menu div[mat-menu-item]>button[mat-icon-button]{flex:0 0 auto}ajf-form-builder mat-drawer-container{flex:1}ajf-form-builder mat-drawer-container mat-drawer{max-width:20%}ajf-form-builder mat-drawer-container .ajf-designer{padding:1em}ajf-form-builder mat-toolbar .ajf-spacer{flex:1 1 auto}\\n\"]\n                    },] }\n        ];\n        AjfFormBuilder.ctorParameters = function () { return [\n            { type: AjfFormBuilderService },\n            { type: dialog.MatDialog }\n        ]; };\n        AjfFormBuilder.propDecorators = {\n            designerCont: [{ type: core.ViewChild, args: ['designer', { static: true },] }],\n            form: [{ type: core.Input }]\n        };\n        return AjfFormBuilder;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var branchColors = [\n        '#F44336',\n        '#4CAF50',\n        '#3F51B5',\n        '#FFC107',\n        '#795548',\n    ];\n    var AjfFbNodeEntry = /** @class */ (function () {\n        function AjfFbNodeEntry(_service) {\n            this._service = _service;\n            this._hasContent = false;\n            this._isFirst = false;\n            this._isNodeEntry = false;\n            this._level = 0;\n            this._branchColors = branchColors.slice(0);\n            this._dropZones = ['fbdz-node'];\n            this._slideDropZones = ['fbdz-slide'];\n            this._originOffset = 0;\n            this._originLeftMargin = '0';\n            this._firstBranchColor = branchColors[0];\n            this._branchLinesSubscription = rxjs.Subscription.EMPTY;\n            this._childEntriesSubscription = rxjs.Subscription.EMPTY;\n            this._currentEditedNode = this._service.editedNodeEntry;\n        }\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"hasContent\", {\n            get: function () {\n                return this._hasContent;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"isFirst\", {\n            get: function () {\n                return this._isFirst;\n            },\n            set: function (isFirst) {\n                this._isFirst = isFirst;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"isNodeEntry\", {\n            get: function () {\n                return this._isNodeEntry;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"nodeEntry\", {\n            get: function () {\n                return this._nodeEntry;\n            },\n            set: function (nodeEntry) {\n                this._nodeEntry = nodeEntry;\n                if (nodeEntry != null && nodeEntry.node !== void 0) {\n                    var ne = nodeEntry;\n                    this._isNodeEntry = true;\n                    var node = ne.node;\n                    this._hasContent = node != null && forms$1.isContainerNode(node);\n                }\n                else {\n                    this._isNodeEntry = false;\n                    this._hasContent = false;\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"level\", {\n            get: function () {\n                return this._level;\n            },\n            set: function (value) {\n                this._level = value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"realNodeEntry\", {\n            get: function () {\n                return this._nodeEntry;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"branchColors\", {\n            get: function () {\n                return this._branchColors;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"dropZones\", {\n            get: function () {\n                return this._dropZones;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"slideDropZones\", {\n            get: function () {\n                return this._slideDropZones;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"originOffset\", {\n            get: function () {\n                return this._originOffset;\n            },\n            set: function (originOffset) {\n                this._originOffset = originOffset;\n                this._originLeftMargin = this._originOffset * 4 + \"px\";\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"originLeftMargin\", {\n            get: function () {\n                return this._originLeftMargin;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"firstBranchColor\", {\n            get: function () {\n                return this._firstBranchColor;\n            },\n            set: function (firstBranchColor) {\n                var idx = branchColors.indexOf(firstBranchColor);\n                if (idx > 0) {\n                    this._firstBranchColor = firstBranchColor;\n                    this._branchColors = branchColors.slice(idx).concat(branchColors.slice(0, idx));\n                }\n                else {\n                    this._firstBranchColor = branchColors[0];\n                    this._branchColors = branchColors.slice(0);\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeEntry.prototype, \"currentEditedNode\", {\n            get: function () {\n                return this._currentEditedNode;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbNodeEntry.prototype.onResize = function () { };\n        AjfFbNodeEntry.prototype.edit = function () {\n            if (this.nodeEntry == null || !this.isNodeEntry) {\n                return;\n            }\n            this._service.editNodeEntry(this.nodeEntry);\n        };\n        AjfFbNodeEntry.prototype.delete = function () {\n            if (this.nodeEntry == null || !this.isNodeEntry) {\n                return;\n            }\n            this._service.deleteNodeEntry(this.nodeEntry);\n        };\n        AjfFbNodeEntry.prototype.ngAfterViewInit = function () {\n            var _this = this;\n            setTimeout(function () { return _this._updateBranchHeights(); });\n            this._childEntriesSubscription = this.childEntries.changes.subscribe(function () {\n                _this._updateBranchHeights();\n            });\n        };\n        AjfFbNodeEntry.prototype.ngOnDestroy = function () {\n            this._branchLinesSubscription.unsubscribe();\n            this._childEntriesSubscription.unsubscribe();\n        };\n        AjfFbNodeEntry.prototype.onDropSuccess = function (evt, content) {\n            if (content === void 0) { content = false; }\n            var dd = evt.item.data;\n            if (this._nodeEntry == null) {\n                this._service.insertNode(dd, null, 0, content);\n                return;\n            }\n            if (dd.nodeType !== void 0 && (!this.isNodeEntry || (this.isNodeEntry && content))) {\n                var emptySlot = content ?\n                    { parent: this.nodeEntry.node, parentNode: 0 } :\n                    this._nodeEntry;\n                this._service.insertNode(dd, emptySlot.parent, emptySlot.parentNode, content);\n            }\n        };\n        AjfFbNodeEntry.prototype.disableSlideDropPredicate = function (item) {\n            return !item.data.isSlide;\n        };\n        AjfFbNodeEntry.prototype.emptyAreaDropPredicate = function () {\n            var _this = this;\n            return function (item, _drop) {\n                if (_this._level > 0) {\n                    return !item.data.isSlide;\n                }\n                return item.data.isSlide || false;\n            };\n        };\n        AjfFbNodeEntry.prototype._updateBranchHeights = function () {\n            if (this.nodeEntry == null || !this.isNodeEntry || this.branchLines == null ||\n                this.childEntries == null) {\n                return;\n            }\n            var nodeEntry = this.nodeEntry;\n            var branchLines = this.branchLines.toArray();\n            var sliceIdx = nodeEntry.content != null ? nodeEntry.content.length : 0;\n            var childEntries = this.childEntries.toArray().slice(sliceIdx);\n            if (branchLines.length != childEntries.length) {\n                return;\n            }\n            branchLines.forEach(function (bl, idx) {\n                var ce = childEntries[idx];\n                bl.height = ce.nativeElement.offsetTop;\n            });\n        };\n        AjfFbNodeEntry.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-node-entry',\n                        template: \"<ng-container *ngIf=\\\"nodeEntry != null ; else rootEmpty\\\">\\n  <ng-template [ngIf]=\\\"isNodeEntry\\\">\\n    <ajf-fb-branch-line\\n        *ngFor=\\\"let childNodeEntry of realNodeEntry.children; let idx = index\\\"\\n        [offset]=\\\"idx\\\"\\n        [color]=\\\"branchColors[idx]\\\"></ajf-fb-branch-line>\\n  </ng-template>\\n  <div class=\\\"mat-card-container\\\"\\n      [class.ajf-highlight]=\\\"(currentEditedNode|async) == nodeEntry\\\">\\n    <div *ngIf=\\\"!isFirst\\\"\\n        class=\\\"ajf-origin-line\\\"\\n        [style.margin-left]=\\\"originLeftMargin\\\"\\n        [style.border-color]=\\\"firstBranchColor\\\"></div>\\n    <ng-template [ngIf]=\\\"isNodeEntry\\\">\\n      <mat-card>\\n        <div class=\\\"ajf-title-row\\\">\\n          <ajf-node-icon [node]=\\\"realNodeEntry.node\\\"></ajf-node-icon>\\n          <span class=\\\"ajf-title\\\" [innerHTML]=\\\"(realNodeEntry.node.label || realNodeEntry.node.name)  | translate\\\"></span>\\n          <span class=\\\"ajf-actions\\\">\\n            <button [disabled]=\\\"(currentEditedNode|async) == nodeEntry\\\" (click)=\\\"edit()\\\" mat-icon-button>\\n              <mat-icon>edit</mat-icon>\\n            </button>\\n            <button [disabled]=\\\"(currentEditedNode|async) == null\\\" (click)=\\\"delete()\\\" mat-icon-button>\\n              <mat-icon>delete</mat-icon>\\n            </button>\\n          </span>\\n        </div>\\n        <div *ngIf=\\\"hasContent\\\">\\n          <ajf-fb-node-entry\\n              *ngFor=\\\"let contentEntry of realNodeEntry.content; let isFirstChild = first; let idx = index\\\"\\n              [level]=\\\"level + 1\\\"\\n              [isFirst]=\\\"isFirstChild\\\"\\n              [firstBranchColor]=\\\"branchColors[idx]\\\"\\n              [nodeEntry]=\\\"contentEntry\\\"></ajf-fb-node-entry>\\n          <mat-card class=\\\"ajf-empty\\\"\\n              *ngIf=\\\"realNodeEntry.content.length === 0\\\"\\n              cdkDropList\\n              [cdkDropListEnterPredicate]=\\\"disableSlideDropPredicate\\\"\\n              (cdkDropListDropped)=\\\"onDropSuccess($event, true)\\\">&nbsp;</mat-card>\\n        </div>\\n      </mat-card>\\n    </ng-template>\\n    <ng-template [ngIf]=\\\"!isNodeEntry\\\">\\n      <mat-card class=\\\"ajf-empty\\\"\\n          cdkDropList\\n          [cdkDropListEnterPredicate]=\\\"emptyAreaDropPredicate()\\\"\\n          (cdkDropListDropped)=\\\"onDropSuccess($event)\\\">&nbsp;</mat-card>\\n    </ng-template>\\n  </div>\\n  <ng-template [ngIf]=\\\"isNodeEntry\\\">\\n    <ajf-fb-node-entry\\n        *ngFor=\\\"let childNodeEntry of realNodeEntry.children; let idx = index\\\"\\n        [level]=\\\"level\\\"\\n        [originOffset]=\\\"idx\\\"\\n        [firstBranchColor]=\\\"branchColors[idx]\\\"\\n        [nodeEntry]=\\\"childNodeEntry\\\"></ajf-fb-node-entry>\\n  </ng-template>\\n</ng-container>\\n<ng-template #rootEmpty>\\n  <div class=\\\"mat-card-container\\\">\\n    <mat-card class=\\\"ajf-empty\\\"\\n        cdkDropList\\n        [cdkDropListEnterPredicate]=\\\"emptyAreaDropPredicate()\\\"\\n        (cdkDropListDropped)=\\\"onDropSuccess($event)\\\">&nbsp;</mat-card>\\n  </div>\\n</ng-template>\\n\",\n                        host: { '(window.resize)': 'onResize()' },\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-fb-node-entry{display:block;position:relative}ajf-fb-node-entry .mat-card-container{position:relative}ajf-fb-node-entry .mat-card-container .ajf-origin-line{position:absolute;top:0;left:25px;width:25px;height:25px;border-bottom:2px solid;border-left:2px solid;border-bottom-left-radius:.5em}ajf-fb-node-entry .mat-card-container mat-card{margin-left:50px;padding:.5em 1em;margin-top:.2em;margin-bottom:.2em;background-color:#fff}ajf-fb-node-entry .mat-card-container mat-card .ajf-title-row{display:flex;flex-direction:row;align-items:center}ajf-fb-node-entry .mat-card-container mat-card .ajf-title-row>.ajf-title{flex:1 1 auto}ajf-fb-node-entry .mat-card-container mat-card .ajf-title-row>.ajf-actions{flex:0 0 auto;white-space:nowrap}ajf-fb-node-entry .mat-card-container mat-card.ajf-empty{line-height:36px;border:2px dashed;box-shadow:none;box-sizing:border-box}ajf-fb-node-entry .mat-card-container.ajf-highlight>mat-card{background-color:#fff9c4}\\n\"]\n                    },] }\n        ];\n        AjfFbNodeEntry.ctorParameters = function () { return [\n            { type: AjfFormBuilderService }\n        ]; };\n        AjfFbNodeEntry.propDecorators = {\n            branchLines: [{ type: core.ViewChildren, args: [AjfFbBranchLine,] }],\n            childEntries: [{ type: core.ViewChildren, args: [AjfFbNodeEntry, { read: core.ElementRef },] }],\n            isFirst: [{ type: core.Input }],\n            nodeEntry: [{ type: core.Input }],\n            level: [{ type: core.Input }],\n            originOffset: [{ type: core.Input }],\n            firstBranchColor: [{ type: core.Input }]\n        };\n        return AjfFbNodeEntry;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbValidationConditionEditorDialog = /** @class */ (function () {\n        function AjfFbValidationConditionEditorDialog(service, dialogRef) {\n            this.dialogRef = dialogRef;\n            this._fields = service.flatFields.pipe(operators.map(function (fields) { return fields.sort(function (f1, f2) { return f1.name.localeCompare(f2.name); }); }));\n        }\n        Object.defineProperty(AjfFbValidationConditionEditorDialog.prototype, \"fields\", {\n            get: function () {\n                return this._fields;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbValidationConditionEditorDialog.prototype.saveCondition = function () {\n            if (this.editor == null) {\n                return;\n            }\n            var newValue = this.editor.editedValue;\n            this.dialogRef.close({ condition: newValue, errorMessage: this.errorMessage });\n        };\n        AjfFbValidationConditionEditorDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-validation-condition-editor-dialog',\n                        template: \"<h3 matDialogTitle translate>Edit condition</h3>\\n<mat-dialog-content>\\n  <mat-form-field>\\n    <input matInput [(ngModel)]=\\\"errorMessage\\\" [placeholder]=\\\"'Error message' | translate\\\">\\n  </mat-form-field>\\n  <ajf-condition-editor\\n      *ngIf=\\\"fields|async as curFields\\\"\\n      [fields]=\\\"curFields!\\\"\\n      [condition]=\\\"condition\\\"></ajf-condition-editor>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n  <button mat-button translate (click)=\\\"saveCondition()\\\">Save</button>\\n  <button mat-button translate matDialogClose>Close</button>\\n</mat-dialog-actions>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-fb-validation-condition-editor-dialog mat-dialog-content{overflow:visible}\\n\"]\n                    },] }\n        ];\n        AjfFbValidationConditionEditorDialog.ctorParameters = function () { return [\n            { type: AjfFormBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        AjfFbValidationConditionEditorDialog.propDecorators = {\n            editor: [{ type: core.ViewChild, args: [AjfFbConditionEditor, { static: false },] }]\n        };\n        return AjfFbValidationConditionEditorDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbWarningConditionEditorDialog = /** @class */ (function () {\n        function AjfFbWarningConditionEditorDialog(service, dialogRef) {\n            this.dialogRef = dialogRef;\n            this._fields = service.flatFields.pipe(operators.map(function (fields) { return fields.sort(function (f1, f2) { return f1.name.localeCompare(f2.name); }); }));\n        }\n        Object.defineProperty(AjfFbWarningConditionEditorDialog.prototype, \"fields\", {\n            get: function () {\n                return this._fields;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbWarningConditionEditorDialog.prototype.saveCondition = function () {\n            if (this.editor == null) {\n                return;\n            }\n            var newValue = this.editor.editedValue;\n            this.dialogRef.close({ condition: newValue, warningMessage: this.warningMessage });\n        };\n        AjfFbWarningConditionEditorDialog.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-warning-condition-editor-dialog',\n                        template: \"<h3 matDialogTitle translate>Edit condition</h3>\\n<mat-dialog-content>\\n  <mat-form-field>\\n    <input matInput [(ngModel)]=\\\"warningMessage\\\"\\n      [placeholder]=\\\"'Warning message' | translate\\\">\\n  </mat-form-field>\\n  <ajf-condition-editor\\n      *ngIf=\\\"fields|async as curFields\\\"\\n      [fields]=\\\"curFields!\\\"\\n      [condition]=\\\"condition\\\"></ajf-condition-editor>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n  <button mat-button translate (click)=\\\"saveCondition()\\\">Save</button>\\n  <button mat-button translate matDialogClose>Close</button>\\n</mat-dialog-actions>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-fb-warning-condition-editor-dialog mat-dialog-content{overflow:visible}\\n\"]\n                    },] }\n        ];\n        AjfFbWarningConditionEditorDialog.ctorParameters = function () { return [\n            { type: AjfFormBuilderService },\n            { type: dialog.MatDialogRef }\n        ]; };\n        AjfFbWarningConditionEditorDialog.propDecorators = {\n            editor: [{ type: core.ViewChild, args: [AjfFbConditionEditor, { static: false },] }]\n        };\n        return AjfFbWarningConditionEditorDialog;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    function checkRepsValidity(c) {\n        var minReps = c.value.minReps;\n        var maxReps = c.value.maxReps;\n        if (minReps != null && maxReps != null && minReps > maxReps) {\n            return { reps: 'Min repetions cannot be greater than max repetitions' };\n        }\n        return null;\n    }\n    function checkValueLimitsValidity(c) {\n        var minValue = c.value.minValue;\n        var maxValue = c.value.maxValue;\n        if (minValue != null && maxValue != null && minValue > maxValue) {\n            return { valueLimit: 'Min value cannot be greater than max value' };\n        }\n        return null;\n    }\n    function checkDigitsValidity(c) {\n        var minDigits = c.value.minDigits;\n        var maxDigits = c.value.maxDigits;\n        if (minDigits != null && maxDigits != null && minDigits > maxDigits) {\n            return { digits: 'Min digits cannot be greater than max digits' };\n        }\n        return null;\n    }\n    var AjfFbNodeProperties = /** @class */ (function () {\n        function AjfFbNodeProperties(_cdr, _service, _dialog, _fb) {\n            var _this = this;\n            this._cdr = _cdr;\n            this._service = _service;\n            this._dialog = _dialog;\n            this._fb = _fb;\n            this._fieldSizes = [\n                { label: 'Normal', value: 'normal' }, { label: 'Small', value: 'small' },\n                { label: 'Smaller', value: 'smaller' }, { label: 'Tiny', value: 'tiny' },\n                { label: 'Mini', value: 'mini' }\n            ];\n            this._choicesOrigins = [];\n            this._conditionalBranches = [];\n            this._validationConditions = [];\n            this._warningConditions = [];\n            this.isRepeatingContainerNode = function (nodeEntry) {\n                return nodeEntry != null && forms$1.isRepeatingContainerNode(nodeEntry.node);\n            };\n            this._visibilityOptSub = rxjs.Subscription.EMPTY;\n            this._visibilitySub = rxjs.Subscription.EMPTY;\n            this._conditionalBranchesSub = rxjs.Subscription.EMPTY;\n            this._formulaRepsSub = rxjs.Subscription.EMPTY;\n            this._choicesFilterSub = rxjs.Subscription.EMPTY;\n            this._formulaSub = rxjs.Subscription.EMPTY;\n            this._forceValueSub = rxjs.Subscription.EMPTY;\n            this._validationConditionsSub = rxjs.Subscription.EMPTY;\n            this._warningConditionsSub = rxjs.Subscription.EMPTY;\n            this._nextSlideConditionSub = rxjs.Subscription.EMPTY;\n            this._choicesOriginsSub = rxjs.Subscription.EMPTY;\n            this._triggerConditionsSub = rxjs.Subscription.EMPTY;\n            this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n            this._editValidationConditionDialogSub = rxjs.Subscription.EMPTY;\n            this._editWarningConditionDialogSub = rxjs.Subscription.EMPTY;\n            this._editVisibilityEvt = new core.EventEmitter();\n            this._editVisibilitySub = rxjs.Subscription.EMPTY;\n            this._editConditionalBranchEvt = new core.EventEmitter();\n            this._editConditionalBranchSub = rxjs.Subscription.EMPTY;\n            this._editFormulaRepsEvt = new core.EventEmitter();\n            this._editFormulaRepsSub = rxjs.Subscription.EMPTY;\n            this._editChoicesFilterEvt = new core.EventEmitter();\n            this._editChoicesFilterSub = rxjs.Subscription.EMPTY;\n            this._editFormulaEvt = new core.EventEmitter();\n            this._editFormulaSub = rxjs.Subscription.EMPTY;\n            this._editForceValueEvt = new core.EventEmitter();\n            this._editForceValueSub = rxjs.Subscription.EMPTY;\n            this._editValidationConditionEvt = new core.EventEmitter();\n            this._editValidationConditionSub = rxjs.Subscription.EMPTY;\n            this._addValidationConditionEvt = new core.EventEmitter();\n            this._addValidationConditionSub = rxjs.Subscription.EMPTY;\n            this._removeValidationConditionEvt = new core.EventEmitter();\n            this._removeValidationConditionSub = rxjs.Subscription.EMPTY;\n            this._editWarningConditionEvt = new core.EventEmitter();\n            this._editWarningConditionSub = rxjs.Subscription.EMPTY;\n            this._addWarningConditionEvt = new core.EventEmitter();\n            this._addWarningConditionSub = rxjs.Subscription.EMPTY;\n            this._removeWarningConditionEvt = new core.EventEmitter();\n            this._removeWarningConditionSub = rxjs.Subscription.EMPTY;\n            this._editNextSlideConditionEvt = new core.EventEmitter();\n            this._editNextSlideConditionSub = rxjs.Subscription.EMPTY;\n            this._editTriggerConditionEvt = new core.EventEmitter();\n            this._editTriggerConditionSub = rxjs.Subscription.EMPTY;\n            this._addTriggerConditionEvt = new core.EventEmitter();\n            this._addTriggerConditionSub = rxjs.Subscription.EMPTY;\n            this._removeTriggerConditionEvt = new core.EventEmitter();\n            this._removeTriggerConditionSub = rxjs.Subscription.EMPTY;\n            this._saveEvt = new core.EventEmitter();\n            this._saveSub = rxjs.Subscription.EMPTY;\n            this._nodeEntry = _service.editedNodeEntry;\n            this._choicesOriginsSub =\n                _service.choicesOrigins.subscribe(function (c) { return _this._choicesOrigins = c || []; });\n            this._enabled = this._nodeEntry.pipe(operators.map(function (n) { return n != null; }));\n            this._initForm();\n            this._initVisibilityEdit();\n            this._initConditionalBranchEdit();\n            this._initFormulaRepsEdit();\n            this._initChoicesFilterEdit();\n            this._initFormulaEdit();\n            this._initForceValueEdit();\n            this._initValidationConditionEdit();\n            this._initAddValidationCondition();\n            this._initRemoveValidationCondition();\n            this._initWarningConditionEdit();\n            this._initAddWarningCondition();\n            this._initRemoveWarningCondition();\n            this._initNextSlideConditionEdit();\n            this._initTriggerConditionEdit();\n            this._initAddTriggerCondition();\n            this._initRemoveTriggerCondition();\n            this._initSave();\n        }\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"fieldSizes\", {\n            get: function () {\n                return this._fieldSizes;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"nodeEntry\", {\n            get: function () {\n                return this._nodeEntry;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"choicesOrigins\", {\n            get: function () {\n                return this._choicesOrigins;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"enabled\", {\n            get: function () {\n                return this._enabled;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"propertiesForm\", {\n            get: function () {\n                return this._propertiesForm;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"hasChoices\", {\n            get: function () {\n                return this._hasChoices;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"curVisibility\", {\n            get: function () {\n                return this._curVisibility;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"curFormulaReps\", {\n            get: function () {\n                return this._curFormulaReps;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"curChoicesFilter\", {\n            get: function () {\n                return this._curChoicesFilter;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"curForceValue\", {\n            get: function () {\n                return this._curForceValue;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"curFormula\", {\n            get: function () {\n                return this._curFormula;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"conditionalBranches\", {\n            get: function () {\n                return this._conditionalBranches;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"validationConditions\", {\n            get: function () {\n                return this._validationConditions;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"warningConditions\", {\n            get: function () {\n                return this._warningConditions;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"nextSlideCondition\", {\n            get: function () {\n                return this._nextSlideCondition;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfFbNodeProperties.prototype, \"triggerConditions\", {\n            get: function () {\n                return this._triggerConditions;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbNodeProperties.prototype.editVisibility = function () {\n            this._editVisibilityEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.editConditionalBranch = function (idx) {\n            if (idx < 0 || idx >= this._conditionalBranches.length) {\n                return;\n            }\n            this._editConditionalBranchEvt.emit(idx);\n        };\n        AjfFbNodeProperties.prototype.editFormulaReps = function () {\n            this._editFormulaRepsEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.editChoicesFilter = function () {\n            this._editChoicesFilterEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.editFormula = function () {\n            this._editFormulaEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.editForceValue = function () {\n            this._editForceValueEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.editValidationCondition = function (idx) {\n            if (idx < 0 || idx >= this._validationConditions.length) {\n                return;\n            }\n            this._editValidationConditionEvt.emit(idx);\n        };\n        AjfFbNodeProperties.prototype.addValidationCondition = function () {\n            this._addValidationConditionEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.removeValidationCondition = function (idx) {\n            if (idx < 0 || idx >= this._validationConditions.length) {\n                return;\n            }\n            this._removeValidationConditionEvt.emit(idx);\n        };\n        AjfFbNodeProperties.prototype.editWarningCondition = function (idx) {\n            if (idx < 0 || idx >= this._warningConditions.length) {\n                return;\n            }\n            this._editWarningConditionEvt.emit(idx);\n        };\n        AjfFbNodeProperties.prototype.addWarningCondition = function () {\n            this._addWarningConditionEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.removeWarningCondition = function (idx) {\n            if (idx < 0 || idx >= this._warningConditions.length) {\n                return;\n            }\n            this._removeWarningConditionEvt.emit(idx);\n        };\n        AjfFbNodeProperties.prototype.editNextSlideCondition = function () {\n            this._editNextSlideConditionEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.editTriggerCondition = function (idx) {\n            if (idx < 0 || idx >= this._triggerConditions.length) {\n                return;\n            }\n            this._editTriggerConditionEvt.emit(idx);\n        };\n        AjfFbNodeProperties.prototype.addTriggerCondition = function () {\n            this._addTriggerConditionEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.removeTriggerCondition = function (idx) {\n            if (idx < 0 || idx >= this._triggerConditions.length) {\n                return;\n            }\n            this._removeTriggerConditionEvt.emit(idx);\n        };\n        AjfFbNodeProperties.prototype.isField = function (nodeEntry) {\n            return nodeEntry != null && forms$1.isField(nodeEntry.node);\n        };\n        AjfFbNodeProperties.prototype.isNumericField = function (node) {\n            return forms$1.isField(node) && forms$1.isNumberField(node);\n        };\n        AjfFbNodeProperties.prototype.isFieldWithChoices = function (node) {\n            return forms$1.isField(node) && forms$1.isFieldWithChoices(node);\n        };\n        AjfFbNodeProperties.prototype.save = function () {\n            this._saveEvt.emit();\n        };\n        AjfFbNodeProperties.prototype.cancel = function () {\n            this._service.cancelNodeEntryEdit();\n        };\n        AjfFbNodeProperties.prototype.ngOnDestroy = function () {\n            this._choicesOriginsSub.unsubscribe();\n            this._visibilityOptSub.unsubscribe();\n            this._visibilitySub.unsubscribe();\n            this._formulaRepsSub.unsubscribe();\n            this._choicesFilterSub.unsubscribe();\n            this._formulaSub.unsubscribe();\n            this._forceValueSub.unsubscribe();\n            this._validationConditionsSub.unsubscribe();\n            this._warningConditionsSub.unsubscribe();\n            this._triggerConditionsSub.unsubscribe();\n            this._editConditionDialogSub.unsubscribe();\n            this._editValidationConditionDialogSub.unsubscribe();\n            this._editWarningConditionDialogSub.unsubscribe();\n            this._editChoicesFilterSub.unsubscribe();\n            this._editConditionalBranchSub.unsubscribe();\n            this._editVisibilitySub.unsubscribe();\n            this._editFormulaRepsSub.unsubscribe();\n            this._editFormulaSub.unsubscribe();\n            this._editForceValueSub.unsubscribe();\n            this._editValidationConditionSub.unsubscribe();\n            this._editWarningConditionSub.unsubscribe();\n            this._nextSlideConditionSub.unsubscribe();\n            this._addTriggerConditionSub.unsubscribe();\n            this._addValidationConditionSub.unsubscribe();\n            this._addWarningConditionSub.unsubscribe();\n            this._editNextSlideConditionSub.unsubscribe();\n            this._editTriggerConditionSub.unsubscribe();\n            this._removeTriggerConditionSub.unsubscribe();\n            this._removeValidationConditionSub.unsubscribe();\n            this._removeWarningConditionSub.unsubscribe();\n            this._saveSub.unsubscribe();\n        };\n        AjfFbNodeProperties.prototype._initSave = function () {\n            var _this = this;\n            this._saveSub = this._saveEvt\n                .pipe(operators.withLatestFrom(this.propertiesForm))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                var fg = formGroup;\n                var val = __assign(__assign({}, fg.value), { conditionalBranches: _this._conditionalBranches });\n                _this._service.saveNodeEntry(val);\n            });\n        };\n        AjfFbNodeProperties.prototype._initForm = function () {\n            var _this = this;\n            this._propertiesForm = this._nodeEntry.pipe(operators.filter(function (n) { return n != null; }), operators.map(function (n) {\n                if (_this._visibilityOptSub != null) {\n                    _this._visibilityOptSub.unsubscribe();\n                }\n                if (_this._visibilitySub != null) {\n                    _this._visibilitySub.unsubscribe();\n                }\n                if (_this._conditionalBranchesSub != null) {\n                    _this._conditionalBranchesSub.unsubscribe();\n                }\n                n = n;\n                var visibility = n.node.visibility != null ? n.node.visibility.condition : null;\n                var visibilityOpt = n.node.visibility != null ? _this._guessVisibilityOpt(n.node.visibility) : null;\n                var controls = {\n                    name: [n.node.name, forms.Validators.required],\n                    label: n.node.label,\n                    visibilityOpt: [visibilityOpt, forms.Validators.required],\n                    visibility: [visibility, forms.Validators.required],\n                    conditionalBranchesNum: n.node.conditionalBranches.length\n                };\n                var validators = [];\n                if (forms$1.isRepeatingContainerNode(n.node)) {\n                    var rn = n.node;\n                    var formulaReps = rn.formulaReps != null ? rn.formulaReps.formula : null;\n                    controls.formulaReps = [formulaReps, forms.Validators.required];\n                    controls.minReps = rn.minReps;\n                    controls.maxReps = rn.maxReps;\n                    _this._curFormulaReps = formulaReps;\n                    validators.push(checkRepsValidity);\n                }\n                if (_this.isField(n)) {\n                    var field = n.node;\n                    var forceValue = null;\n                    var notEmpty = false;\n                    var validationConditions = [];\n                    if (field.validation != null) {\n                        if (field.validation.forceValue != null) {\n                            forceValue = field.validation.forceValue.condition;\n                        }\n                        notEmpty = field.validation.notEmpty != null;\n                        validationConditions = (field.validation.conditions || []).map(function (c) {\n                            return { condition: c.condition, errorMessage: c.errorMessage };\n                        });\n                    }\n                    var notEmptyW = false;\n                    var warningConditions = [];\n                    if (field.warning != null) {\n                        notEmptyW = field.warning.notEmpty != null;\n                        warningConditions = (field.warning.conditions || []).map(function (w) {\n                            return { condition: w.condition, warningMessage: w.warningMessage };\n                        });\n                    }\n                    var formula = field.formula != null ? field.formula.formula : null;\n                    controls.description = field.description;\n                    controls.defaultValue = field.defaultValue;\n                    controls.size = field.size;\n                    controls.formula = formula;\n                    controls.forceValue = forceValue;\n                    controls.notEmpty = notEmpty;\n                    controls.validationConditions = [validationConditions, []];\n                    controls.notEmptyWarning = notEmptyW;\n                    controls.warningConditions = [warningConditions, []];\n                    controls.nextSlideCondition = [field.nextSlideCondition];\n                    _this._curForceValue = forceValue;\n                    _this._curFormula = formula;\n                    _this._validationConditions = validationConditions;\n                    _this._warningConditions = warningConditions;\n                }\n                if (_this.isNumericField(n.node)) {\n                    var numField = n.node;\n                    var minValue = void 0;\n                    var maxValue = void 0;\n                    var minDigits = void 0;\n                    var maxDigits = void 0;\n                    if (numField.validation != null) {\n                        if (numField.validation.minValue != null) {\n                            minValue = (numField.validation.minValue.condition || '').replace('$value >= ', '');\n                        }\n                        if (numField.validation.maxValue != null) {\n                            maxValue = (numField.validation.maxValue.condition || '').replace('$value <= ', '');\n                        }\n                        if (numField.validation.minDigits != null) {\n                            minDigits = (numField.validation.minDigits.condition ||\n                                '').replace('$value.toString().length >= ', '');\n                        }\n                        if (numField.validation.maxDigits != null) {\n                            maxDigits = (numField.validation.maxDigits.condition ||\n                                '').replace('$value.toString().length <= ', '');\n                        }\n                    }\n                    controls.minValue = minValue;\n                    controls.maxValue = maxValue;\n                    controls.minDigits = minDigits;\n                    controls.maxDigits = maxDigits;\n                    validators.push(checkValueLimitsValidity);\n                    validators.push(checkDigitsValidity);\n                }\n                if (_this.isFieldWithChoices(n.node)) {\n                    var fieldWithChoices = n.node;\n                    var triggerConditions = (fieldWithChoices.triggerConditions || []).map(function (c) { return c.condition; });\n                    controls.choicesOriginRef = fieldWithChoices.choicesOriginRef;\n                    controls.choicesFilter = fieldWithChoices.choicesFilter != null ?\n                        fieldWithChoices.choicesFilter.formula :\n                        null;\n                    controls.forceExpanded = fieldWithChoices.forceExpanded;\n                    controls.forceNarrow = fieldWithChoices.forceNarrow;\n                    controls.triggerConditions = triggerConditions;\n                    _this._triggerConditions = triggerConditions;\n                }\n                var fg = _this._fb.group(controls);\n                fg.setValidators(validators);\n                _this._conditionalBranches = n.node.conditionalBranches.map(function (c) { return c.condition; });\n                _this._curVisibility = n.node.visibility != null ? n.node.visibility.condition : null;\n                _this._handleConditionalBranchesChange(fg);\n                _this._handleVisibilityChange(fg);\n                _this._handleFormulaRepsChange(fg);\n                _this._handleChoicesFilterChange(fg);\n                _this._handleFormulaChange(fg);\n                _this._handleForceValueChange(fg);\n                _this._handleValidationCondtionsChange(fg);\n                _this._handleWarningCondtionsChange(fg);\n                _this._handleNextSlideConditionChange(fg);\n                _this._handleTriggerCondtionsChange(fg);\n                return fg;\n            }), operators.publishReplay(1), operators.refCount());\n        };\n        AjfFbNodeProperties.prototype._destroyConditionDialog = function () {\n            if (this._editConditionDialogSub != null) {\n                this._editConditionDialogSub.unsubscribe();\n                this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n            }\n            if (this._editConditionDialog != null) {\n                this._editConditionDialog.close();\n                this._editConditionDialog = null;\n            }\n        };\n        AjfFbNodeProperties.prototype._destroyValidationConditionDialog = function () {\n            if (this._editValidationConditionDialogSub != null) {\n                this._editValidationConditionDialogSub.unsubscribe();\n                this._editValidationConditionDialogSub = rxjs.Subscription.EMPTY;\n            }\n            if (this._editValidationConditionDialog != null) {\n                this._editValidationConditionDialog.close();\n                this._editValidationConditionDialog = null;\n            }\n        };\n        AjfFbNodeProperties.prototype._destroyWarningConditionDialog = function () {\n            if (this._editWarningConditionDialogSub != null) {\n                this._editWarningConditionDialogSub.unsubscribe();\n                this._editWarningConditionDialogSub = rxjs.Subscription.EMPTY;\n            }\n            if (this._editWarningConditionDialog != null) {\n                this._editWarningConditionDialog.close();\n                this._editWarningConditionDialog = null;\n            }\n        };\n        AjfFbNodeProperties.prototype._initRemoveTriggerCondition = function () {\n            this._removeTriggerConditionSub = this._removeTriggerConditionEvt\n                .pipe(operators.withLatestFrom(this._propertiesForm))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), vcIdx = _b[0], formGroup = _b[1];\n                if (formGroup == null) {\n                    return;\n                }\n                var fg = formGroup;\n                var ctrl = fg.controls['triggerConditions'];\n                var vcs = (ctrl.value || []).slice(0);\n                if (vcIdx < 0 || vcIdx >= vcs.length) {\n                    return;\n                }\n                vcs.splice(vcIdx, 1);\n                ctrl.setValue(vcs);\n            });\n        };\n        AjfFbNodeProperties.prototype._initAddTriggerCondition = function () {\n            this._addTriggerConditionSub = this._addTriggerConditionEvt\n                .pipe(operators.withLatestFrom(this._propertiesForm))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                if (formGroup == null) {\n                    return;\n                }\n                var fg = formGroup;\n                var ctrl = fg.controls['triggerConditions'];\n                var vcs = (ctrl.value || []).slice(0);\n                vcs.push('');\n                ctrl.setValue(vcs);\n            });\n        };\n        AjfFbNodeProperties.prototype._initTriggerConditionEdit = function () {\n            var _this = this;\n            this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n            this._cdr.markForCheck();\n            this._editTriggerConditionSub =\n                this._editTriggerConditionEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), vcIdx = _b[0], fg = _b[1];\n                    _this._destroyConditionDialog();\n                    if (vcIdx < 0 || vcIdx >= _this._triggerConditions.length || fg == null) {\n                        return;\n                    }\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    var cmp = _this._editConditionDialog.componentInstance;\n                    cmp.condition = _this._triggerConditions[vcIdx];\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                _this._triggerConditions[vcIdx] = cond;\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initRemoveWarningCondition = function () {\n            this._removeWarningConditionSub = this._removeWarningConditionEvt\n                .pipe(operators.withLatestFrom(this._propertiesForm))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), vcIdx = _b[0], formGroup = _b[1];\n                if (formGroup == null) {\n                    return;\n                }\n                var fg = formGroup;\n                var ctrl = fg.controls['warningConditions'];\n                var vcs = (ctrl.value || []).slice(0);\n                if (vcIdx < 0 || vcIdx >= vcs.length) {\n                    return;\n                }\n                vcs.splice(vcIdx, 1);\n                ctrl.setValue(vcs);\n            });\n        };\n        AjfFbNodeProperties.prototype._initAddWarningCondition = function () {\n            this._addWarningConditionSub = this._addWarningConditionEvt\n                .pipe(operators.withLatestFrom(this._propertiesForm))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                if (formGroup == null) {\n                    return;\n                }\n                var fg = formGroup;\n                var ctrl = fg.controls['warningConditions'];\n                var vcs = (ctrl.value || []).slice(0);\n                vcs.push({ condition: '', errorMessage: '' });\n                ctrl.setValue(vcs);\n            });\n        };\n        AjfFbNodeProperties.prototype._initWarningConditionEdit = function () {\n            var _this = this;\n            this._editWarningConditionSub =\n                this._editWarningConditionEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), vcIdx = _b[0], fg = _b[1];\n                    _this._destroyWarningConditionDialog();\n                    if (vcIdx < 0 || vcIdx >= _this._warningConditions.length || fg == null) {\n                        return;\n                    }\n                    _this._editWarningConditionDialog =\n                        _this._dialog.open(AjfFbWarningConditionEditorDialog);\n                    var cmp = _this._editWarningConditionDialog.componentInstance;\n                    var w = _this._warningConditions[vcIdx];\n                    cmp.condition = w.condition;\n                    cmp.warningMessage = w.warningMessage;\n                    _this._editWarningConditionDialogSub =\n                        _this._editWarningConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                _this._warningConditions[vcIdx] = cond;\n                            }\n                            _this._editWarningConditionDialogSub.unsubscribe();\n                            _this._editWarningConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initRemoveValidationCondition = function () {\n            this._removeValidationConditionSub = this._removeValidationConditionEvt\n                .pipe(operators.withLatestFrom(this._propertiesForm))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), vcIdx = _b[0], formGroup = _b[1];\n                if (formGroup == null) {\n                    return;\n                }\n                var fg = formGroup;\n                var ctrl = fg.controls['validationConditions'];\n                var vcs = (ctrl.value || []).slice(0);\n                if (vcIdx < 0 || vcIdx >= vcs.length) {\n                    return;\n                }\n                vcs.splice(vcIdx, 1);\n                ctrl.setValue(vcs);\n            });\n        };\n        AjfFbNodeProperties.prototype._initAddValidationCondition = function () {\n            this._addValidationConditionSub = this._addValidationConditionEvt\n                .pipe(operators.withLatestFrom(this._propertiesForm))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                if (formGroup == null) {\n                    return;\n                }\n                var fg = formGroup;\n                var ctrl = fg.controls['validationConditions'];\n                var vcs = (ctrl.value || []).slice(0);\n                vcs.push({ condition: '', errorMessage: '' });\n                ctrl.setValue(vcs);\n            });\n        };\n        AjfFbNodeProperties.prototype._initValidationConditionEdit = function () {\n            var _this = this;\n            this._editValidationConditionSub =\n                this._editValidationConditionEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), vcIdx = _b[0], fg = _b[1];\n                    _this._destroyValidationConditionDialog();\n                    if (vcIdx < 0 || vcIdx >= _this._validationConditions.length || fg == null) {\n                        return;\n                    }\n                    _this._editValidationConditionDialog =\n                        _this._dialog.open(AjfFbValidationConditionEditorDialog);\n                    var cmp = _this._editValidationConditionDialog.componentInstance;\n                    var v = _this._validationConditions[vcIdx];\n                    cmp.condition = v.condition;\n                    cmp.errorMessage = v.errorMessage;\n                    _this._editValidationConditionDialogSub =\n                        _this._editValidationConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                _this._validationConditions[vcIdx] = cond;\n                            }\n                            _this._editValidationConditionDialogSub.unsubscribe();\n                            _this._editValidationConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initForceValueEdit = function () {\n            var _this = this;\n            this._editForceValueSub =\n                this._editForceValueEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                    _this._destroyConditionDialog();\n                    if (formGroup == null) {\n                        return;\n                    }\n                    var fg = formGroup;\n                    var ctrl = fg.controls['forceValue'];\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    _this._editConditionDialog.componentInstance.condition = ctrl.value;\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                ctrl.setValue(cond);\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initNextSlideConditionEdit = function () {\n            var _this = this;\n            this._editNextSlideConditionSub =\n                this._editNextSlideConditionEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                    _this._destroyConditionDialog();\n                    if (formGroup == null) {\n                        return;\n                    }\n                    var fg = formGroup;\n                    var ctrl = fg.controls['nextSlideCondition'];\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    _this._editConditionDialog.componentInstance.condition = ctrl.value;\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                ctrl.setValue(cond);\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initFormulaEdit = function () {\n            var _this = this;\n            this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n            this._cdr.markForCheck();\n            this._editFormulaSub =\n                this._editFormulaEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                    _this._destroyConditionDialog();\n                    if (formGroup == null) {\n                        return;\n                    }\n                    var fg = formGroup;\n                    var ctrl = fg.controls['formula'];\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    _this._editConditionDialog.componentInstance.condition = ctrl.value;\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                ctrl.setValue(cond);\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initFormulaRepsEdit = function () {\n            var _this = this;\n            this._editFormulaRepsSub =\n                this._editFormulaRepsEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                    _this._destroyConditionDialog();\n                    if (formGroup == null) {\n                        return;\n                    }\n                    var fg = formGroup;\n                    var ctrl = fg.controls['formulaReps'];\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    _this._editConditionDialog.componentInstance.condition = ctrl.value;\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                ctrl.setValue(cond);\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initChoicesFilterEdit = function () {\n            var _this = this;\n            this._editChoicesFilterSub =\n                this._editChoicesFilterEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                    _this._destroyConditionDialog();\n                    if (formGroup == null) {\n                        return;\n                    }\n                    var fg = formGroup;\n                    var ctrl = fg.controls['choicesFilter'];\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    _this._editConditionDialog.componentInstance.condition = ctrl.value;\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                ctrl.setValue(cond);\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initConditionalBranchEdit = function () {\n            var _this = this;\n            this._editConditionalBranchSub =\n                this._editConditionalBranchEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), cbIdx = _b[0], fg = _b[1];\n                    _this._destroyConditionDialog();\n                    if (cbIdx < 0 || cbIdx >= _this._conditionalBranches.length || fg == null) {\n                        return;\n                    }\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    _this._editConditionDialog.componentInstance.condition =\n                        _this._conditionalBranches[cbIdx];\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                _this._conditionalBranches[cbIdx] = cond;\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._initVisibilityEdit = function () {\n            var _this = this;\n            this._editVisibilitySub =\n                this._editVisibilityEvt\n                    .pipe(operators.withLatestFrom(this._propertiesForm))\n                    .subscribe(function (_a) {\n                    var _b = __read(_a, 2), _ = _b[0], formGroup = _b[1];\n                    _this._destroyConditionDialog();\n                    if (formGroup == null) {\n                        return;\n                    }\n                    var fg = formGroup;\n                    var ctrl = fg.controls['visibility'];\n                    var condition = ctrl.value;\n                    _this._editConditionDialog = _this._dialog.open(AjfFbConditionEditorDialog);\n                    _this._editConditionDialog.componentInstance.condition = condition;\n                    _this._editConditionDialogSub =\n                        _this._editConditionDialog.afterClosed().subscribe(function (cond) {\n                            if (cond !== void 0) {\n                                ctrl.setValue(cond);\n                            }\n                            _this._editConditionDialogSub.unsubscribe();\n                            _this._editConditionDialogSub = rxjs.Subscription.EMPTY;\n                            _this._cdr.markForCheck();\n                        });\n                });\n        };\n        AjfFbNodeProperties.prototype._handleTriggerCondtionsChange = function (fg) {\n            var _this = this;\n            this._triggerConditionsSub = fg.valueChanges\n                .pipe(operators.distinctUntilChanged(function (v1, v2) { return JSON.stringify(v1.triggerConditions) ===\n                JSON.stringify(v2.triggerConditions); }))\n                .subscribe(function (v) {\n                _this._triggerConditions = v.triggerConditions;\n                _this._cdr.markForCheck();\n            });\n        };\n        AjfFbNodeProperties.prototype._handleWarningCondtionsChange = function (fg) {\n            var _this = this;\n            this._warningConditionsSub = fg.valueChanges\n                .pipe(operators.distinctUntilChanged(function (v1, v2) { return JSON.stringify(v1.warningConditions) ===\n                JSON.stringify(v2.warningConditions); }))\n                .subscribe(function (v) {\n                _this._warningConditions = v.warningConditions;\n                _this._cdr.markForCheck();\n            });\n        };\n        AjfFbNodeProperties.prototype._handleValidationCondtionsChange = function (fg) {\n            var _this = this;\n            this._validationConditionsSub =\n                fg.valueChanges\n                    .pipe(operators.distinctUntilChanged(function (v1, v2) { return JSON.stringify(v1.validationConditions) ===\n                    JSON.stringify(v2.validationConditions); }))\n                    .subscribe(function (v) {\n                    _this._validationConditions = v.validationConditions;\n                    _this._cdr.markForCheck();\n                });\n        };\n        AjfFbNodeProperties.prototype._handleForceValueChange = function (fg) {\n            var _this = this;\n            this._forceValueSub =\n                fg.valueChanges.pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.forceValue === v2.forceValue; }))\n                    .subscribe(function (v) {\n                    _this._curForceValue = v.forceValue;\n                    _this._cdr.markForCheck();\n                });\n        };\n        AjfFbNodeProperties.prototype._handleNextSlideConditionChange = function (fg) {\n            var _this = this;\n            this._formulaSub =\n                fg.valueChanges\n                    .pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.nextSlideCondition === v2.nextSlideCondition; }))\n                    .subscribe(function (v) {\n                    _this._nextSlideCondition = v.nextSlideCondition;\n                    _this._cdr.markForCheck();\n                });\n            this._formulaSub =\n                fg.valueChanges\n                    .pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.nextSlideCondition === v2.nextSlideCondition; }))\n                    .subscribe(function (v) {\n                    _this._nextSlideCondition = v.nextSlideCondition;\n                    _this._cdr.markForCheck();\n                });\n        };\n        AjfFbNodeProperties.prototype._handleFormulaChange = function (fg) {\n            var _this = this;\n            this._formulaSub =\n                fg.valueChanges.pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.formula === v2.formula; }))\n                    .subscribe(function (v) {\n                    _this._curFormula = v.formula;\n                    _this._cdr.markForCheck();\n                });\n        };\n        AjfFbNodeProperties.prototype._handleFormulaRepsChange = function (fg) {\n            var _this = this;\n            this._formulaRepsSub =\n                fg.valueChanges.pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.formulaReps === v2.formulaReps; }))\n                    .subscribe(function (v) {\n                    _this._curFormulaReps = v.formulaReps;\n                    _this._cdr.markForCheck();\n                });\n        };\n        AjfFbNodeProperties.prototype._handleChoicesFilterChange = function (fg) {\n            var _this = this;\n            this._choicesFilterSub =\n                fg.valueChanges\n                    .pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.choicesFilter === v2.choicesFilter; }))\n                    .subscribe(function (v) {\n                    _this._curChoicesFilter = v.choicesFilter;\n                    _this._cdr.markForCheck();\n                });\n        };\n        AjfFbNodeProperties.prototype._handleConditionalBranchesChange = function (fg) {\n            var _this = this;\n            this._conditionalBranchesSub =\n                fg.valueChanges\n                    .pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.conditionalBranchesNum === v2.conditionalBranchesNum; }))\n                    .subscribe(function (v) {\n                    var cbNum = v.conditionalBranchesNum;\n                    var curCbNum = _this._conditionalBranches.length;\n                    if (curCbNum < cbNum) {\n                        var newCbs = [];\n                        for (var i = curCbNum; i < cbNum; i++) {\n                            newCbs.push(models.alwaysCondition().condition);\n                        }\n                        _this._conditionalBranches = _this._conditionalBranches.concat(newCbs);\n                    }\n                    else if (curCbNum > cbNum) {\n                        _this._conditionalBranches.splice(0, curCbNum - cbNum);\n                    }\n                    _this._cdr.markForCheck();\n                });\n        };\n        AjfFbNodeProperties.prototype._handleVisibilityChange = function (fg) {\n            var _this = this;\n            this._visibilitySub =\n                fg.valueChanges\n                    .pipe(operators.distinctUntilChanged(function (v1, v2) { return v1.visibilityOpt === v2.visibilityOpt; }))\n                    .subscribe(function (v) {\n                    var visibilityOpt = v.visibilityOpt;\n                    var newCondition;\n                    switch (visibilityOpt) {\n                        case 'always':\n                            newCondition = models.alwaysCondition().condition;\n                            break;\n                        case 'never':\n                            newCondition = models.neverCondition().condition;\n                            break;\n                        default:\n                            newCondition = null;\n                    }\n                    _this._curVisibility = newCondition;\n                    fg.controls['visibility'].setValue(newCondition);\n                });\n            this._visibilitySub = fg.valueChanges\n                .pipe(operators.filter(function (v) { return v.visibilityOpt === 'condition'; }), operators.distinctUntilChanged(function (v1, v2) { return v1.visibility === v2.visibility; }))\n                .subscribe(function (v) {\n                _this._curVisibility = v.visibility;\n                _this._cdr.markForCheck();\n            });\n        };\n        AjfFbNodeProperties.prototype._guessVisibilityOpt = function (condition) {\n            if (condition.condition.localeCompare(models.alwaysCondition().condition) === 0) {\n                return 'always';\n            }\n            if (condition.condition.localeCompare(models.neverCondition().condition) === 0) {\n                return 'never';\n            }\n            return 'condition';\n        };\n        AjfFbNodeProperties.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-node-properties',\n                        template: \"<div [style.display]=\\\"(enabled|async) ? 'none' : 'block'\\\" class=\\\"ajf-disabled-overlay\\\"></div>\\n<div class=\\\"ajf-header\\\">\\n  <h3 translate>Properties</h3>\\n  <mat-icon (click)=\\\"save()\\\">save</mat-icon>\\n  <mat-icon (click)=\\\"cancel()\\\">cancel</mat-icon>\\n</div>\\n<ng-container *ngIf=\\\"nodeEntry|async as ne\\\">\\n  <ng-container *ngIf=\\\"propertiesForm|async as pf\\\">\\n    <form [formGroup]=\\\"pf!\\\" novalidate>\\n      <div class=\\\"ajf-prop\\\">\\n        <mat-form-field>\\n          <input matInput formControlName=\\\"name\\\" [placeholder]=\\\"'Name' | translate\\\">\\n        </mat-form-field>\\n      </div>\\n      <div class=\\\"ajf-prop\\\">\\n        <mat-form-field>\\n          <input matInput formControlName=\\\"label\\\" [placeholder]=\\\"'Label' | translate\\\">\\n        </mat-form-field>\\n      </div>\\n      <div class=\\\"ajf-prop\\\">\\n        <mat-form-field>\\n          <mat-label translate>Visibility</mat-label>\\n          <mat-select\\n              formControlName=\\\"visibilityOpt\\\" [placeholder]=\\\"'Visible' | translate\\\">\\n            <mat-option value=\\\"always\\\" translate>Always</mat-option>\\n            <mat-option value=\\\"never\\\" translate>Never</mat-option>\\n            <mat-option value=\\\"condition\\\" translate>Condition...</mat-option>\\n          </mat-select>\\n        </mat-form-field>\\n        <button (click)=\\\"editVisibility()\\\"\\n            [disabled]=\\\"pf!.value.visibilityOpt != 'condition'\\\"\\n            mat-raised-button [matTooltip]=\\\"curVisibility || ''\\\">\\n          <div class=\\\"ajf-icon-cont\\\">\\n            <mat-icon>edit</mat-icon>\\n            <span>{{ curVisibility }}</span>\\n          </div>\\n        </button>\\n      </div>\\n      <div class=\\\"ajf-prop\\\">\\n        <div><label translate>Branches</label></div>\\n        <div>\\n          <mat-slider formControlName=\\\"conditionalBranchesNum\\\"\\n              thumbLabel tickInterval=\\\"auto\\\" min=\\\"1\\\" max=\\\"5\\\" step=\\\"1\\\"></mat-slider>\\n        </div>\\n        <div *ngFor=\\\"let branch of conditionalBranches; let idx = index\\\">\\n          <button (click)=\\\"editConditionalBranch(idx)\\\" mat-raised-button [matTooltip]=\\\"branch\\\">\\n            <div class=\\\"ajf-icon-cont\\\">\\n              <mat-icon>edit</mat-icon>\\n              <span>{{ branch }}</span>\\n            </div>\\n          </button>\\n        </div>\\n      </div>\\n      <ng-template [ngIf]=\\\"isRepeatingContainerNode(ne)\\\">\\n        <div class=\\\"ajf-prop\\\">\\n          <div><label translate>Repetitions</label></div>\\n          <div>\\n            <button (click)=\\\"editFormulaReps()\\\" mat-raised-button [matTooltip]=\\\"curFormulaReps || ''\\\">\\n              <div class=\\\"ajf-icon-cont\\\">\\n                <mat-icon>edit</mat-icon>\\n                <span>{{ curFormulaReps }}</span>\\n              </div>\\n            </button>\\n          </div>\\n          <div><label translate>Min repetitions</label></div>\\n          <div>\\n            <mat-slider formControlName=\\\"minReps\\\"\\n                thumbLabel tickInterval=\\\"auto\\\" min=\\\"1\\\" max=\\\"5\\\" step=\\\"1\\\"></mat-slider>\\n          </div>\\n          <div><label translate>Max repetitions</label></div>\\n          <div>\\n            <mat-slider formControlName=\\\"maxReps\\\"\\n                thumbLabel tickInterval=\\\"auto\\\" min=\\\"1\\\" max=\\\"5\\\" step=\\\"1\\\"></mat-slider>\\n          </div>\\n        </div>\\n      </ng-template>\\n      <ng-template [ngIf]=\\\"isField(ne)\\\">\\n        <div class=\\\"ajf-prop\\\">\\n          <mat-form-field>\\n            <mat-label translate>Field size</mat-label>\\n            <mat-select formControlName=\\\"size\\\"\\n                [placeholder]=\\\"'Size' | translate\\\">\\n              <mat-option *ngFor=\\\"let fieldSize of fieldSizes\\\"\\n                [value]=\\\"fieldSize.value\\\">\\n                {{ fieldSize.label }}\\n              </mat-option>\\n            </mat-select>\\n          </mat-form-field>\\n        </div>\\n        <div class=\\\"ajf-prop\\\">\\n          <mat-form-field>\\n            <textarea matInput formControlName=\\\"description\\\"\\n                [placeholder]=\\\"'Description' | translate\\\"></textarea>\\n          </mat-form-field>\\n        </div>\\n        <div class=\\\"ajf-prop\\\">\\n          <mat-form-field>\\n            <input matInput formControlName=\\\"defaultValue\\\"\\n              [placeholder]=\\\"'Default value' | translate\\\">\\n          </mat-form-field>\\n        </div>\\n        <div class=\\\"ajf-prop\\\">\\n          <div><label translate>Formula</label></div>\\n          <div>\\n            <button (click)=\\\"editFormula()\\\" mat-raised-button [matTooltip]=\\\"curFormula || ''\\\">\\n              <div class=\\\"ajf-icon-cont\\\">\\n                <mat-icon>edit</mat-icon>\\n                <span>{{ curFormula }}</span>\\n              </div>\\n            </button>\\n          </div>\\n        </div>\\n        <!-- <div class=\\\"ajf-prop\\\">\\n          <div><label translate>Force value</label></div>\\n          <div>\\n            <button (click)=\\\"editForceValue()\\\" mat-raised-button [matTooltip]=\\\"curForceValue\\\">\\n              <div class=\\\"ajf-icon-cont\\\">\\n                <mat-icon>edit</mat-icon>\\n                <span>{{ curForceValue }}</span>\\n              </div>\\n            </button>\\n          </div>\\n        </div> -->\\n        <div class=\\\"ajf-prop\\\">\\n          <mat-checkbox formControlName=\\\"notEmpty\\\" translate>Not empty</mat-checkbox>\\n        </div>\\n        <ng-template [ngIf]=\\\"isNumericField(ne!.node)\\\">\\n          <div class=\\\"ajf-prop\\\">\\n            <mat-form-field>\\n              <input matInput formControlName=\\\"minValue\\\"\\n                [placeholder]=\\\"'Min value' | translate\\\">\\n            </mat-form-field>\\n          </div>\\n          <div class=\\\"ajf-prop\\\">\\n            <mat-form-field>\\n              <input matInput formControlName=\\\"maxValue\\\"\\n                [placeholder]=\\\"'Max value' | translate\\\">\\n            </mat-form-field>\\n          </div>\\n          <div class=\\\"ajf-prop\\\">\\n            <mat-form-field>\\n              <input matInput formControlName=\\\"minDigits\\\"\\n                [placeholder]=\\\"'Min digits' | translate\\\">\\n            </mat-form-field>\\n          </div>\\n          <div class=\\\"ajf-prop\\\">\\n            <mat-form-field>\\n              <input matInput formControlName=\\\"maxDigits\\\"\\n                [placeholder]=\\\"'Max digits' | translate\\\">\\n            </mat-form-field>\\n          </div>\\n        </ng-template>\\n        <div class=\\\"ajf-prop\\\">\\n          <div class=\\\"ajf-header\\\">\\n            <label>{{ 'Validation' | translate }}</label>\\n            <mat-icon class=\\\"ajf-pointer\\\" (click)=\\\"addValidationCondition()\\\">add_circle_outline</mat-icon>\\n          </div>\\n          <div *ngIf=\\\"validationConditions == null || validationConditions.length == 0\\\"\\n              class=\\\"ajf-validation-row ajf-emph\\\" translate>No conditions</div>\\n          <div class=\\\"ajf-validation-row\\\" *ngFor=\\\"let validationCondition of validationConditions; let idx = index\\\">\\n            <button (click)=\\\"editValidationCondition(idx)\\\"\\n                mat-raised-button [matTooltip]=\\\"validationCondition.condition\\\">\\n              <div class=\\\"ajf-icon-cont\\\">\\n                <mat-icon>edit</mat-icon>\\n                <span>{{ validationCondition.condition }}</span>\\n              </div>\\n            </button>\\n            <mat-icon class=\\\"ajf-pointer\\\" (click)=\\\"removeValidationCondition(idx)\\\">remove_circle_outline</mat-icon>\\n          </div>\\n        </div>\\n        <div class=\\\"ajf-prop\\\">\\n          <mat-checkbox formControlName=\\\"notEmptyWarning\\\" translate>Not empty warning</mat-checkbox>\\n        </div>\\n        <div class=\\\"ajf-prop\\\">\\n          <div class=\\\"ajf-header\\\">\\n            <label translate>Warnings</label>\\n            <mat-icon class=\\\"ajf-pointer\\\" (click)=\\\"addWarningCondition()\\\">add_circle_outline</mat-icon>\\n          </div>\\n          <div  *ngIf=\\\"warningConditions == null || warningConditions.length == 0\\\"\\n              class=\\\"ajf-validation-row ajf-emph\\\" translate>No warnings</div>\\n          <div class=\\\"ajf-validation-row\\\" *ngFor=\\\"let warningCondition of warningConditions; let idx = index\\\">\\n            <button (click)=\\\"editWarningCondition(idx)\\\"\\n                mat-raised-button [matTooltip]=\\\"warningCondition.condition\\\">\\n              <div class=\\\"ajf-icon-cont\\\">\\n                <mat-icon>edit</mat-icon>\\n                <span>{{ warningCondition.condition }}</span>\\n              </div>\\n            </button>\\n            <mat-icon class=\\\"ajf-pointer\\\" (click)=\\\"removeWarningCondition(idx)\\\">remove_circle_outline</mat-icon>\\n          </div>\\n        </div>\\n        <div class=\\\"ajf-prop\\\">\\n          <div><label translate>Go to next slide condition</label></div>\\n          <div>\\n            <button (click)=\\\"editNextSlideCondition()\\\" mat-raised-button [matTooltip]=\\\"nextSlideCondition\\\">\\n              <div class=\\\"ajf-icon-cont\\\">\\n                <mat-icon>edit</mat-icon>\\n                <span>{{ nextSlideCondition }}</span>\\n              </div>\\n            </button>\\n          </div>\\n        </div>\\n        <ng-template [ngIf]=\\\"isFieldWithChoices(ne!.node)\\\">\\n          <div class=\\\"ajf-prop\\\">\\n            <mat-form-field>\\n              <mat-label translate>Choices origins</mat-label>\\n              <mat-select formControlName=\\\"choicesOriginRef\\\" [placeholder]=\\\"'Choices' | translate\\\">\\n                <mat-option *ngFor=\\\"let choicesOrigin of choicesOrigins\\\" [value]=\\\"choicesOrigin.name\\\">\\n                  {{ choicesOrigin.label || choicesOrigin.name }}\\n                </mat-option>\\n              </mat-select>\\n            </mat-form-field>\\n          </div>\\n          <div class=\\\"ajf-prop\\\">\\n            <div><label translate>Choices filter</label></div>\\n            <div>\\n              <button (click)=\\\"editChoicesFilter()\\\" mat-raised-button [matTooltip]=\\\"curChoicesFilter\\\">\\n                <div class=\\\"ajf-icon-cont\\\">\\n                  <mat-icon>edit</mat-icon>\\n                  <span>{{ curChoicesFilter }}</span>\\n                </div>\\n              </button>\\n            </div>\\n          </div>\\n          <div class=\\\"ajf-prop\\\">\\n            <mat-checkbox formControlName=\\\"forceExpanded\\\" translate>Force expanded selection</mat-checkbox>\\n          </div>\\n          <div class=\\\"ajf-prop\\\">\\n            <mat-checkbox formControlName=\\\"forceNarrow\\\" translate>Force narrow selection</mat-checkbox>\\n          </div>\\n          <div class=\\\"ajf-prop\\\">\\n            <div class=\\\"ajf-header\\\">\\n              <label translate>Trigger selection</label>\\n              <mat-icon class=\\\"ajf-pointer\\\" (click)=\\\"addTriggerCondition()\\\">add_circle_outline</mat-icon>\\n            </div>\\n            <div *ngIf=\\\"triggerConditions == null || triggerConditions.length == 0\\\"\\n                class=\\\"ajf-validation-row ajf-emph\\\" translate>No trigger condition </div>\\n            <div class=\\\"ajf-validation-row\\\" *ngFor=\\\"let triggerCondition of triggerConditions; let idx = index\\\">\\n              <button (click)=\\\"editTriggerCondition(idx)\\\"\\n                  mat-raised-button [matTooltip]=\\\"triggerCondition\\\">\\n                <div class=\\\"ajf-icon-cont\\\">\\n                  <mat-icon>edit</mat-icon>\\n                  <span>{{ triggerCondition }}</span>\\n                </div>\\n              </button>\\n              <mat-icon class=\\\"pointer\\\" (click)=\\\"removeTriggerCondition(idx)\\\">remove_circle_outline</mat-icon>\\n            </div>\\n          </div>\\n        </ng-template>\\n      </ng-template>\\n    </form>\\n  </ng-container>\\n</ng-container>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-fb-node-properties{display:block;padding:1em;position:relative}ajf-fb-node-properties mat-icon{cursor:pointer}ajf-fb-node-properties .ajf-header{display:flex;flex-direction:row;align-items:center;flex-wrap:nowrap}ajf-fb-node-properties .ajf-header>h3,ajf-fb-node-properties .ajf-header>label{flex:1 0 auto;margin-right:.5em}ajf-fb-node-properties .ajf-header>mat-icon{flex:0 0 auto;margin-left:.5em}ajf-fb-node-properties .ajf-disabled-overlay{position:absolute;top:0;right:0;bottom:0;left:0;opacity:.4;background-color:#fff}ajf-fb-node-properties .ajf-emph{font-style:italic}ajf-fb-node-properties [mat-raised-button]{margin:.5em 0}ajf-fb-node-properties [mat-raised-button].ajf-pointer{cursor:pointer}ajf-fb-node-properties [mat-raised-button] .ajf-icon-cont{display:flex;flex-direction:row;align-items:center}ajf-fb-node-properties [mat-raised-button] .ajf-icon-cont span{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;display:block;min-height:36px}ajf-fb-node-properties .ajf-validation-row{margin:.5em 0;display:flex;flex-direction:row;align-items:center}ajf-fb-node-properties .ajf-validation-row button{flex:1 1 auto}ajf-fb-node-properties .ajf-validation-row mat-icon{flex:0 0 auto}ajf-fb-node-properties .ajf-prop{margin:.5em 0}ajf-fb-node-properties mat-form-field,ajf-fb-node-properties mat-slider,ajf-fb-node-properties [mat-raised-button]{width:100%}\\n\"]\n                    },] }\n        ];\n        AjfFbNodeProperties.ctorParameters = function () { return [\n            { type: core.ChangeDetectorRef },\n            { type: AjfFormBuilderService },\n            { type: dialog.MatDialog },\n            { type: forms.FormBuilder }\n        ]; };\n        return AjfFbNodeProperties;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFbNodeTypeEntry = /** @class */ (function () {\n        function AjfFbNodeTypeEntry(_cdr) {\n            this._cdr = _cdr;\n        }\n        Object.defineProperty(AjfFbNodeTypeEntry.prototype, \"nodeType\", {\n            get: function () {\n                return this._nodeType;\n            },\n            set: function (nodeType) {\n                this._nodeType = nodeType;\n                this._cdr.markForCheck();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfFbNodeTypeEntry.decorators = [\n            { type: core.Component, args: [{\n                        selector: 'ajf-fb-node-type-entry',\n                        template: \"<ng-container *ngIf=\\\"nodeType\\\">\\n  <mat-icon\\n    [fontSet]=\\\"nodeType.icon.fontSet\\\" [fontIcon]=\\\"nodeType.icon.fontIcon\\\"></mat-icon>\\n  {{ nodeType.label }}\\n</ng-container>\\n\",\n                        encapsulation: core.ViewEncapsulation.None,\n                        changeDetection: core.ChangeDetectionStrategy.OnPush,\n                        styles: [\"ajf-fb-node-type-entry{display:block;padding:1em 1.5em}ajf-fb-node-type-entry mat-icon{vertical-align:middle}\\n\"]\n                    },] }\n        ];\n        AjfFbNodeTypeEntry.ctorParameters = function () { return [\n            { type: core.ChangeDetectorRef }\n        ]; };\n        AjfFbNodeTypeEntry.propDecorators = {\n            nodeType: [{ type: core.Input }]\n        };\n        return AjfFbNodeTypeEntry;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfFormBuilderModule = /** @class */ (function () {\n        function AjfFormBuilderModule() {\n        }\n        AjfFormBuilderModule.decorators = [\n            { type: core.NgModule, args: [{\n                        imports: [\n                            monacoEditor.AjfMonacoEditorModule, nodeIcon.AjfNodeIconModule, common.CommonModule, dragDrop.DragDropModule,\n                            forms.FormsModule, autocomplete.MatAutocompleteModule, button.MatButtonModule, card.MatCardModule,\n                            checkbox.MatCheckboxModule, chips.MatChipsModule, dialog.MatDialogModule, formField.MatFormFieldModule,\n                            icon.MatIconModule, input.MatInputModule, list.MatListModule, menu.MatMenuModule,\n                            select.MatSelectModule, sidenav.MatSidenavModule, slider.MatSliderModule, table.MatTableModule,\n                            toolbar.MatToolbarModule, tooltip.MatTooltipModule, forms.ReactiveFormsModule, core$1.TranslateModule,\n                        ],\n                        declarations: [\n                            AjfFbBranchLine,\n                            AjfFbChoicesOriginEditor,\n                            AjfFbChoicesOriginEditorDialog,\n                            AjfFbConditionEditor,\n                            AjfFbConditionEditorDialog,\n                            AjfFbNodeEntry,\n                            AjfFbNodeProperties,\n                            AjfFbNodeTypeEntry,\n                            AjfFbStringIdentifierDialogComponent,\n                            AjfFbValidationConditionEditorDialog,\n                            AjfFbWarningConditionEditorDialog,\n                            AjfFormBuilder,\n                        ],\n                        exports: [\n                            AjfFormBuilder,\n                        ],\n                        providers: [\n                            AjfFormBuilderService,\n                        ],\n                    },] }\n        ];\n        return AjfFormBuilderModule;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.AjfFormBuilder = AjfFormBuilder;\n    exports.AjfFormBuilderModule = AjfFormBuilderModule;\n    exports.AjfFormBuilderService = AjfFormBuilderService;\n    exports.flattenNodes = flattenNodes;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_a = AjfFbBranchLine;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_b = AjfFbChoicesOriginEditor;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_c = AjfFbChoicesOriginEditorDialog;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_d = AjfFbConditionEditor;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_e = AjfFbConditionEditorDialog;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_f = AjfFbNodeEntry;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_g = AjfFbNodeProperties;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_h = AjfFbNodeTypeEntry;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_i = AjfFbStringIdentifierDialogComponent;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_j = AjfFbValidationConditionEditorDialog;\n    exports.ɵgc_ajf_src_material_form_builder_form_builder_k = AjfFbWarningConditionEditorDialog;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=material-form-builder.umd.js.map\n"]}